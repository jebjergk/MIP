var wR=Object.defineProperty;var kR=(e,t,n)=>t in e?wR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fp=(e,t,n)=>kR(e,typeof t!="symbol"?t+"":t,n);function jR(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q1={exports:{}},qf={},Y1={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),_R=Symbol.for("react.portal"),SR=Symbol.for("react.fragment"),NR=Symbol.for("react.strict_mode"),ER=Symbol.for("react.profiler"),PR=Symbol.for("react.provider"),TR=Symbol.for("react.context"),AR=Symbol.for("react.forward_ref"),OR=Symbol.for("react.suspense"),CR=Symbol.for("react.memo"),IR=Symbol.for("react.lazy"),Rb=Symbol.iterator;function DR(e){return e===null||typeof e!="object"?null:(e=Rb&&e[Rb]||e["@@iterator"],typeof e=="function"?e:null)}var X1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q1=Object.assign,Z1={};function Po(e,t,n){this.props=e,this.context=t,this.refs=Z1,this.updater=n||X1}Po.prototype.isReactComponent={};Po.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J1(){}J1.prototype=Po.prototype;function bv(e,t,n){this.props=e,this.context=t,this.refs=Z1,this.updater=n||X1}var wv=bv.prototype=new J1;wv.constructor=bv;Q1(wv,Po.prototype);wv.isPureReactComponent=!0;var Lb=Array.isArray,eN=Object.prototype.hasOwnProperty,kv={current:null},tN={key:!0,ref:!0,__self:!0,__source:!0};function nN(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)eN.call(t,r)&&!tN.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Nu,type:e,key:a,ref:o,props:i,_owner:kv.current}}function RR(e,t){return{$$typeof:Nu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nu}function LR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mb=/\/+/g;function Bp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LR(""+e.key):t.toString(36)}function Hc(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nu:case _R:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Bp(o,0):r,Lb(i)?(n="",e!=null&&(n=e.replace(Mb,"$&/")+"/"),Hc(i,t,n,"",function(c){return c})):i!=null&&(jv(i)&&(i=RR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Mb,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Lb(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+Bp(a,l);o+=Hc(a,t,n,u,i)}else if(u=DR(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+Bp(a,l++),o+=Hc(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function tc(e,t,n){if(e==null)return e;var r=[],i=0;return Hc(e,r,"","",function(a){return t.call(n,a,i++)}),r}function MR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bn={current:null},Kc={transition:null},$R={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:kv};function rN(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:tc,forEach:function(e,t,n){tc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tc(e,function(){t++}),t},toArray:function(e){return tc(e,function(t){return t})||[]},only:function(e){if(!jv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Po;ke.Fragment=SR;ke.Profiler=ER;ke.PureComponent=bv;ke.StrictMode=NR;ke.Suspense=OR;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$R;ke.act=rN;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Q1({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=kv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)eN.call(t,u)&&!tN.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Nu,type:e.type,key:i,ref:a,props:r,_owner:o}};ke.createContext=function(e){return e={$$typeof:TR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PR,_context:e},e.Consumer=e};ke.createElement=nN;ke.createFactory=function(e){var t=nN.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:AR,render:e}};ke.isValidElement=jv;ke.lazy=function(e){return{$$typeof:IR,_payload:{_status:-1,_result:e},_init:MR}};ke.memo=function(e,t){return{$$typeof:CR,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Kc.transition;Kc.transition={};try{e()}finally{Kc.transition=t}};ke.unstable_act=rN;ke.useCallback=function(e,t){return bn.current.useCallback(e,t)};ke.useContext=function(e){return bn.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return bn.current.useDeferredValue(e)};ke.useEffect=function(e,t){return bn.current.useEffect(e,t)};ke.useId=function(){return bn.current.useId()};ke.useImperativeHandle=function(e,t,n){return bn.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return bn.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return bn.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return bn.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return bn.current.useReducer(e,t,n)};ke.useRef=function(e){return bn.current.useRef(e)};ke.useState=function(e){return bn.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return bn.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return bn.current.useTransition()};ke.version="18.3.1";Y1.exports=ke;var m=Y1.exports;const Yf=zr(m),iN=jR({__proto__:null,default:Yf},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zR=m,FR=Symbol.for("react.element"),BR=Symbol.for("react.fragment"),UR=Object.prototype.hasOwnProperty,WR=zR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HR={key:!0,ref:!0,__self:!0,__source:!0};function aN(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)UR.call(t,r)&&!HR.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:FR,type:e,key:a,ref:o,props:i,_owner:WR.current}}qf.Fragment=BR;qf.jsx=aN;qf.jsxs=aN;q1.exports=qf;var s=q1.exports,ag={},sN={exports:{}},Jn={},oN={exports:{}},lN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,R){var N=$.length;$.push(R);e:for(;0<N;){var Y=N-1>>>1,U=$[Y];if(0<i(U,R))$[Y]=R,$[N]=U,N=Y;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var R=$[0],N=$.pop();if(N!==R){$[0]=N;e:for(var Y=0,U=$.length,O=U>>>1;Y<O;){var ne=2*(Y+1)-1,ge=$[ne],re=ne+1,me=$[re];if(0>i(ge,N))re<U&&0>i(me,ge)?($[Y]=me,$[re]=N,Y=re):($[Y]=ge,$[ne]=N,Y=ne);else if(re<U&&0>i(me,N))$[Y]=me,$[re]=N,Y=re;else break e}}return R}function i($,R){var N=$.sortIndex-R.sortIndex;return N!==0?N:$.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,f=null,h=3,p=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=$)r(c),R.sortIndex=R.expirationTime,t(u,R);else break;R=n(c)}}function j($){if(y=!1,w($),!g)if(n(u)!==null)g=!0,q(_);else{var R=n(c);R!==null&&z(j,R.startTime-$)}}function _($,R){g=!1,y&&(y=!1,v(A),A=-1),p=!0;var N=h;try{for(w(R),f=n(u);f!==null&&(!(f.expirationTime>R)||$&&!P());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,h=f.priorityLevel;var U=Y(f.expirationTime<=R);R=e.unstable_now(),typeof U=="function"?f.callback=U:f===n(u)&&r(u),w(R)}else r(u);f=n(u)}if(f!==null)var O=!0;else{var ne=n(c);ne!==null&&z(j,ne.startTime-R),O=!1}return O}finally{f=null,h=N,p=!1}}var k=!1,E=null,A=-1,T=5,S=-1;function P(){return!(e.unstable_now()-S<T)}function C(){if(E!==null){var $=e.unstable_now();S=$;var R=!0;try{R=E(!0,$)}finally{R?B():(k=!1,E=null)}}else k=!1}var B;if(typeof b=="function")B=function(){b(C)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=C,B=function(){D.postMessage(null)}}else B=function(){x(C,0)};function q($){E=$,k||(k=!0,B())}function z($,R){A=x(function(){$(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,q(_))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var N=h;h=R;try{return $()}finally{h=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,R){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var N=h;h=$;try{return R()}finally{h=N}},e.unstable_scheduleCallback=function($,R,N){var Y=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?Y+N:Y):N=Y,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=N+U,$={id:d++,callback:R,priorityLevel:$,startTime:N,expirationTime:U,sortIndex:-1},N>Y?($.sortIndex=N,t(c,$),n(u)===null&&$===n(c)&&(y?(v(A),A=-1):y=!0,z(j,N-Y))):($.sortIndex=U,t(u,$),g||p||(g=!0,q(_))),$},e.unstable_shouldYield=P,e.unstable_wrapCallback=function($){var R=h;return function(){var N=h;h=R;try{return $.apply(this,arguments)}finally{h=N}}}})(lN);oN.exports=lN;var KR=oN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR=m,Xn=KR;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uN=new Set,Wl={};function bs(e,t){lo(e,t),lo(e+"Capture",t)}function lo(e,t){for(Wl[e]=t,e=0;e<t.length;e++)uN.add(t[e])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sg=Object.prototype.hasOwnProperty,GR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$b={},zb={};function qR(e){return sg.call(zb,e)?!0:sg.call($b,e)?!1:GR.test(e)?zb[e]=!0:($b[e]=!0,!1)}function YR(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XR(e,t,n,r){if(t===null||typeof t>"u"||YR(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wn(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Zt[e]=new wn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Zt[t]=new wn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Zt[e]=new wn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Zt[e]=new wn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Zt[e]=new wn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Zt[e]=new wn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Zt[e]=new wn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Zt[e]=new wn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Zt[e]=new wn(e,5,!1,e.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function Sv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_v,Sv);Zt[t]=new wn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_v,Sv);Zt[t]=new wn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_v,Sv);Zt[t]=new wn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Zt[e]=new wn(e,1,!1,e.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Zt[e]=new wn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nv(e,t,n,r){var i=Zt.hasOwnProperty(t)?Zt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XR(t,n,i,r)&&(n=null),r||i===null?qR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $i=VR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),Ls=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),cN=Symbol.for("react.provider"),dN=Symbol.for("react.context"),Pv=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),Tv=Symbol.for("react.memo"),Ji=Symbol.for("react.lazy"),fN=Symbol.for("react.offscreen"),Fb=Symbol.iterator;function Zo(e){return e===null||typeof e!="object"?null:(e=Fb&&e[Fb]||e["@@iterator"],typeof e=="function"?e:null)}var vt=Object.assign,Up;function bl(e){if(Up===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Up=t&&t[1]||""}return`
`+Up+e}var Wp=!1;function Hp(e,t){if(!e||Wp)return"";Wp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bl(e):""}function QR(e){switch(e.tag){case 5:return bl(e.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return e=Hp(e.type,!1),e;case 11:return e=Hp(e.type.render,!1),e;case 1:return e=Hp(e.type,!0),e;default:return""}}function cg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ms:return"Fragment";case Ls:return"Portal";case og:return"Profiler";case Ev:return"StrictMode";case lg:return"Suspense";case ug:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dN:return(e.displayName||"Context")+".Consumer";case cN:return(e._context.displayName||"Context")+".Provider";case Pv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tv:return t=e.displayName||null,t!==null?t:cg(e.type)||"Memo";case Ji:t=e._payload,e=e._init;try{return cg(e(t))}catch{}}return null}function ZR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(t);case 8:return t===Ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ka(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JR(e){var t=hN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rc(e){e._valueTracker||(e._valueTracker=JR(e))}function pN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function md(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dg(e,t){var n=t.checked;return vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bb(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ka(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mN(e,t){t=t.checked,t!=null&&Nv(e,"checked",t,!1)}function fg(e,t){mN(e,t);var n=ka(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hg(e,t.type,n):t.hasOwnProperty("defaultValue")&&hg(e,t.type,ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ub(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hg(e,t,n){(t!=="number"||md(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var wl=Array.isArray;function Zs(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ka(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function pg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wb(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(wl(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ka(n)}}function gN(e,t){var n=ka(t.value),r=ka(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ic,vN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eL=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(e){eL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tl[t]=Tl[e]})});function xN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tl.hasOwnProperty(e)&&Tl[e]?(""+t).trim():t+"px"}function bN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var tL=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gg(e,t){if(t){if(tL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vg=null;function Av(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xg=null,Js=null,eo=null;function Kb(e){if(e=Tu(e)){if(typeof xg!="function")throw Error(X(280));var t=e.stateNode;t&&(t=eh(t),xg(e.stateNode,e.type,t))}}function wN(e){Js?eo?eo.push(e):eo=[e]:Js=e}function kN(){if(Js){var e=Js,t=eo;if(eo=Js=null,Kb(e),t)for(e=0;e<t.length;e++)Kb(t[e])}}function jN(e,t){return e(t)}function _N(){}var Kp=!1;function SN(e,t,n){if(Kp)return e(t,n);Kp=!0;try{return jN(e,t,n)}finally{Kp=!1,(Js!==null||eo!==null)&&(_N(),kN())}}function Kl(e,t){var n=e.stateNode;if(n===null)return null;var r=eh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var bg=!1;if(Ei)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){bg=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{bg=!1}function nL(e,t,n,r,i,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Al=!1,gd=null,yd=!1,wg=null,rL={onError:function(e){Al=!0,gd=e}};function iL(e,t,n,r,i,a,o,l,u){Al=!1,gd=null,nL.apply(rL,arguments)}function aL(e,t,n,r,i,a,o,l,u){if(iL.apply(this,arguments),Al){if(Al){var c=gd;Al=!1,gd=null}else throw Error(X(198));yd||(yd=!0,wg=c)}}function ws(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function NN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vb(e){if(ws(e)!==e)throw Error(X(188))}function sL(e){var t=e.alternate;if(!t){if(t=ws(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Vb(i),e;if(a===r)return Vb(i),t;a=a.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function EN(e){return e=sL(e),e!==null?PN(e):null}function PN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=PN(e);if(t!==null)return t;e=e.sibling}return null}var TN=Xn.unstable_scheduleCallback,Gb=Xn.unstable_cancelCallback,oL=Xn.unstable_shouldYield,lL=Xn.unstable_requestPaint,St=Xn.unstable_now,uL=Xn.unstable_getCurrentPriorityLevel,Ov=Xn.unstable_ImmediatePriority,AN=Xn.unstable_UserBlockingPriority,vd=Xn.unstable_NormalPriority,cL=Xn.unstable_LowPriority,ON=Xn.unstable_IdlePriority,Xf=null,ei=null;function dL(e){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Xf,e,void 0,(e.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:pL,fL=Math.log,hL=Math.LN2;function pL(e){return e>>>=0,e===0?32:31-(fL(e)/hL|0)|0}var ac=64,sc=4194304;function kl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=kl(l):(a&=o,a!==0&&(r=kl(a)))}else o=n&~i,o!==0?r=kl(o):a!==0&&(r=kl(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Or(t),i=1<<n,r|=e[n],t&=~i;return r}function mL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gL(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Or(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=mL(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function kg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CN(){var e=ac;return ac<<=1,!(ac&4194240)&&(ac=64),e}function Vp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Eu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Or(t),e[t]=n}function yL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Or(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Cv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Or(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ze=0;function IN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var DN,Iv,RN,LN,MN,jg=!1,oc=[],da=null,fa=null,ha=null,Vl=new Map,Gl=new Map,ra=[],vL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qb(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":Vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(t.pointerId)}}function el(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Tu(t),t!==null&&Iv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xL(e,t,n,r,i){switch(t){case"focusin":return da=el(da,e,t,n,r,i),!0;case"dragenter":return fa=el(fa,e,t,n,r,i),!0;case"mouseover":return ha=el(ha,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Vl.set(a,el(Vl.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Gl.set(a,el(Gl.get(a)||null,e,t,n,r,i)),!0}return!1}function $N(e){var t=Va(e.target);if(t!==null){var n=ws(t);if(n!==null){if(t=n.tag,t===13){if(t=NN(n),t!==null){e.blockedOn=t,MN(e.priority,function(){RN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_g(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);vg=r,n.target.dispatchEvent(r),vg=null}else return t=Tu(n),t!==null&&Iv(t),e.blockedOn=n,!1;t.shift()}return!0}function Yb(e,t,n){Vc(e)&&n.delete(t)}function bL(){jg=!1,da!==null&&Vc(da)&&(da=null),fa!==null&&Vc(fa)&&(fa=null),ha!==null&&Vc(ha)&&(ha=null),Vl.forEach(Yb),Gl.forEach(Yb)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,jg||(jg=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,bL)))}function ql(e){function t(i){return tl(i,e)}if(0<oc.length){tl(oc[0],e);for(var n=1;n<oc.length;n++){var r=oc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(da!==null&&tl(da,e),fa!==null&&tl(fa,e),ha!==null&&tl(ha,e),Vl.forEach(t),Gl.forEach(t),n=0;n<ra.length;n++)r=ra[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ra.length&&(n=ra[0],n.blockedOn===null);)$N(n),n.blockedOn===null&&ra.shift()}var to=$i.ReactCurrentBatchConfig,bd=!0;function wL(e,t,n,r){var i=ze,a=to.transition;to.transition=null;try{ze=1,Dv(e,t,n,r)}finally{ze=i,to.transition=a}}function kL(e,t,n,r){var i=ze,a=to.transition;to.transition=null;try{ze=4,Dv(e,t,n,r)}finally{ze=i,to.transition=a}}function Dv(e,t,n,r){if(bd){var i=_g(e,t,n,r);if(i===null)nm(e,t,r,wd,n),qb(e,r);else if(xL(i,e,t,n,r))r.stopPropagation();else if(qb(e,r),t&4&&-1<vL.indexOf(e)){for(;i!==null;){var a=Tu(i);if(a!==null&&DN(a),a=_g(e,t,n,r),a===null&&nm(e,t,r,wd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else nm(e,t,r,null,n)}}var wd=null;function _g(e,t,n,r){if(wd=null,e=Av(r),e=Va(e),e!==null)if(t=ws(e),t===null)e=null;else if(n=t.tag,n===13){if(e=NN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wd=e,null}function zN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uL()){case Ov:return 1;case AN:return 4;case vd:case cL:return 16;case ON:return 536870912;default:return 16}default:return 16}}var sa=null,Rv=null,Gc=null;function FN(){if(Gc)return Gc;var e,t=Rv,n=t.length,r,i="value"in sa?sa.value:sa.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Gc=i.slice(e,1<r?1-r:void 0)}function qc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lc(){return!0}function Xb(){return!1}function er(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?lc:Xb,this.isPropagationStopped=Xb,this}return vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),t}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lv=er(To),Pu=vt({},To,{view:0,detail:0}),jL=er(Pu),Gp,qp,nl,Qf=vt({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nl&&(nl&&e.type==="mousemove"?(Gp=e.screenX-nl.screenX,qp=e.screenY-nl.screenY):qp=Gp=0,nl=e),Gp)},movementY:function(e){return"movementY"in e?e.movementY:qp}}),Qb=er(Qf),_L=vt({},Qf,{dataTransfer:0}),SL=er(_L),NL=vt({},Pu,{relatedTarget:0}),Yp=er(NL),EL=vt({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),PL=er(EL),TL=vt({},To,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AL=er(TL),OL=vt({},To,{data:0}),Zb=er(OL),CL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DL[e])?!!t[e]:!1}function Mv(){return RL}var LL=vt({},Pu,{key:function(e){if(e.key){var t=CL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(e){return e.type==="keypress"?qc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ML=er(LL),$L=vt({},Qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jb=er($L),zL=vt({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),FL=er(zL),BL=vt({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),UL=er(BL),WL=vt({},Qf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HL=er(WL),KL=[9,13,27,32],$v=Ei&&"CompositionEvent"in window,Ol=null;Ei&&"documentMode"in document&&(Ol=document.documentMode);var VL=Ei&&"TextEvent"in window&&!Ol,BN=Ei&&(!$v||Ol&&8<Ol&&11>=Ol),ew=" ",tw=!1;function UN(e,t){switch(e){case"keyup":return KL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $s=!1;function GL(e,t){switch(e){case"compositionend":return WN(t);case"keypress":return t.which!==32?null:(tw=!0,ew);case"textInput":return e=t.data,e===ew&&tw?null:e;default:return null}}function qL(e,t){if($s)return e==="compositionend"||!$v&&UN(e,t)?(e=FN(),Gc=Rv=sa=null,$s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BN&&t.locale!=="ko"?null:t.data;default:return null}}var YL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YL[e.type]:t==="textarea"}function HN(e,t,n,r){wN(r),t=kd(t,"onChange"),0<t.length&&(n=new Lv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cl=null,Yl=null;function XL(e){tE(e,0)}function Zf(e){var t=Bs(e);if(pN(t))return e}function QL(e,t){if(e==="change")return t}var KN=!1;if(Ei){var Xp;if(Ei){var Qp="oninput"in document;if(!Qp){var rw=document.createElement("div");rw.setAttribute("oninput","return;"),Qp=typeof rw.oninput=="function"}Xp=Qp}else Xp=!1;KN=Xp&&(!document.documentMode||9<document.documentMode)}function iw(){Cl&&(Cl.detachEvent("onpropertychange",VN),Yl=Cl=null)}function VN(e){if(e.propertyName==="value"&&Zf(Yl)){var t=[];HN(t,Yl,e,Av(e)),SN(XL,t)}}function ZL(e,t,n){e==="focusin"?(iw(),Cl=t,Yl=n,Cl.attachEvent("onpropertychange",VN)):e==="focusout"&&iw()}function JL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zf(Yl)}function eM(e,t){if(e==="click")return Zf(t)}function tM(e,t){if(e==="input"||e==="change")return Zf(t)}function nM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rr=typeof Object.is=="function"?Object.is:nM;function Xl(e,t){if(Rr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sg.call(t,i)||!Rr(e[i],t[i]))return!1}return!0}function aw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sw(e,t){var n=aw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=aw(n)}}function GN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qN(){for(var e=window,t=md();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=md(e.document)}return t}function zv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rM(e){var t=qN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&GN(n.ownerDocument.documentElement,n)){if(r!==null&&zv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sw(n,a);var o=sw(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iM=Ei&&"documentMode"in document&&11>=document.documentMode,zs=null,Sg=null,Il=null,Ng=!1;function ow(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ng||zs==null||zs!==md(r)||(r=zs,"selectionStart"in r&&zv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&Xl(Il,r)||(Il=r,r=kd(Sg,"onSelect"),0<r.length&&(t=new Lv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zs)))}function uc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fs={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Zp={},YN={};Ei&&(YN=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Jf(e){if(Zp[e])return Zp[e];if(!Fs[e])return e;var t=Fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in YN)return Zp[e]=t[n];return e}var XN=Jf("animationend"),QN=Jf("animationiteration"),ZN=Jf("animationstart"),JN=Jf("transitionend"),eE=new Map,lw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(e,t){eE.set(e,t),bs(t,[e])}for(var Jp=0;Jp<lw.length;Jp++){var em=lw[Jp],aM=em.toLowerCase(),sM=em[0].toUpperCase()+em.slice(1);Na(aM,"on"+sM)}Na(XN,"onAnimationEnd");Na(QN,"onAnimationIteration");Na(ZN,"onAnimationStart");Na("dblclick","onDoubleClick");Na("focusin","onFocus");Na("focusout","onBlur");Na(JN,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function uw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,aL(r,t,void 0,e),e.currentTarget=null}function tE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;uw(i,l,c),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;uw(i,l,c),a=u}}}if(yd)throw e=wg,yd=!1,wg=null,e}function rt(e,t){var n=t[Og];n===void 0&&(n=t[Og]=new Set);var r=e+"__bubble";n.has(r)||(nE(t,e,2,!1),n.add(r))}function tm(e,t,n){var r=0;t&&(r|=4),nE(n,e,r,t)}var cc="_reactListening"+Math.random().toString(36).slice(2);function Ql(e){if(!e[cc]){e[cc]=!0,uN.forEach(function(n){n!=="selectionchange"&&(oM.has(n)||tm(n,!1,e),tm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cc]||(t[cc]=!0,tm("selectionchange",!1,t))}}function nE(e,t,n,r){switch(zN(t)){case 1:var i=wL;break;case 4:i=kL;break;default:i=Dv}n=i.bind(null,t,n,e),i=void 0,!bg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nm(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Va(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}SN(function(){var c=a,d=Av(n),f=[];e:{var h=eE.get(e);if(h!==void 0){var p=Lv,g=e;switch(e){case"keypress":if(qc(n)===0)break e;case"keydown":case"keyup":p=ML;break;case"focusin":g="focus",p=Yp;break;case"focusout":g="blur",p=Yp;break;case"beforeblur":case"afterblur":p=Yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FL;break;case XN:case QN:case ZN:p=PL;break;case JN:p=UL;break;case"scroll":p=jL;break;case"wheel":p=HL;break;case"copy":case"cut":case"paste":p=AL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jb}var y=(t&4)!==0,x=!y&&e==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var b=c,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,v!==null&&(j=Kl(b,v),j!=null&&y.push(Zl(b,j,w)))),x)break;b=b.return}0<y.length&&(h=new p(h,g,null,n,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==vg&&(g=n.relatedTarget||n.fromElement)&&(Va(g)||g[Pi]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Va(g):null,g!==null&&(x=ws(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(y=Qb,j="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=Jb,j="onPointerLeave",v="onPointerEnter",b="pointer"),x=p==null?h:Bs(p),w=g==null?h:Bs(g),h=new y(j,b+"leave",p,n,d),h.target=x,h.relatedTarget=w,j=null,Va(d)===c&&(y=new y(v,b+"enter",g,n,d),y.target=w,y.relatedTarget=x,j=y),x=j,p&&g)t:{for(y=p,v=g,b=0,w=y;w;w=Ns(w))b++;for(w=0,j=v;j;j=Ns(j))w++;for(;0<b-w;)y=Ns(y),b--;for(;0<w-b;)v=Ns(v),w--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=Ns(y),v=Ns(v)}y=null}else y=null;p!==null&&cw(f,h,p,y,!1),g!==null&&x!==null&&cw(f,x,g,y,!0)}}e:{if(h=c?Bs(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=QL;else if(nw(h))if(KN)_=tM;else{_=JL;var k=ZL}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=eM);if(_&&(_=_(e,c))){HN(f,_,n,d);break e}k&&k(e,h,c),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&hg(h,"number",h.value)}switch(k=c?Bs(c):window,e){case"focusin":(nw(k)||k.contentEditable==="true")&&(zs=k,Sg=c,Il=null);break;case"focusout":Il=Sg=zs=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,ow(f,n,d);break;case"selectionchange":if(iM)break;case"keydown":case"keyup":ow(f,n,d)}var E;if($v)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else $s?UN(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(BN&&n.locale!=="ko"&&($s||A!=="onCompositionStart"?A==="onCompositionEnd"&&$s&&(E=FN()):(sa=d,Rv="value"in sa?sa.value:sa.textContent,$s=!0)),k=kd(c,A),0<k.length&&(A=new Zb(A,e,null,n,d),f.push({event:A,listeners:k}),E?A.data=E:(E=WN(n),E!==null&&(A.data=E)))),(E=VL?GL(e,n):qL(e,n))&&(c=kd(c,"onBeforeInput"),0<c.length&&(d=new Zb("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=E))}tE(f,t)})}function Zl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Kl(e,n),a!=null&&r.unshift(Zl(e,a,i)),a=Kl(e,t),a!=null&&r.push(Zl(e,a,i))),e=e.return}return r}function Ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cw(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Kl(n,a),u!=null&&o.unshift(Zl(n,u,l))):i||(u=Kl(n,a),u!=null&&o.push(Zl(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var lM=/\r\n?/g,uM=/\u0000|\uFFFD/g;function dw(e){return(typeof e=="string"?e:""+e).replace(lM,`
`).replace(uM,"")}function dc(e,t,n){if(t=dw(t),dw(e)!==t&&n)throw Error(X(425))}function jd(){}var Eg=null,Pg=null;function Tg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,cM=typeof clearTimeout=="function"?clearTimeout:void 0,fw=typeof Promise=="function"?Promise:void 0,dM=typeof queueMicrotask=="function"?queueMicrotask:typeof fw<"u"?function(e){return fw.resolve(null).then(e).catch(fM)}:Ag;function fM(e){setTimeout(function(){throw e})}function rm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ql(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ql(t)}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Ao,Jl="__reactProps$"+Ao,Pi="__reactContainer$"+Ao,Og="__reactEvents$"+Ao,hM="__reactListeners$"+Ao,pM="__reactHandles$"+Ao;function Va(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pi]||n[Qr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hw(e);e!==null;){if(n=e[Qr])return n;e=hw(e)}return t}e=n,n=e.parentNode}return null}function Tu(e){return e=e[Qr]||e[Pi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function eh(e){return e[Jl]||null}var Cg=[],Us=-1;function Ea(e){return{current:e}}function at(e){0>Us||(e.current=Cg[Us],Cg[Us]=null,Us--)}function et(e,t){Us++,Cg[Us]=e.current,e.current=t}var ja={},ln=Ea(ja),Rn=Ea(!1),ss=ja;function uo(e,t){var n=e.type.contextTypes;if(!n)return ja;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ln(e){return e=e.childContextTypes,e!=null}function _d(){at(Rn),at(ln)}function pw(e,t,n){if(ln.current!==ja)throw Error(X(168));et(ln,t),et(Rn,n)}function rE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,ZR(e)||"Unknown",i));return vt({},n,r)}function Sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ja,ss=ln.current,et(ln,e),et(Rn,Rn.current),!0}function mw(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=rE(e,t,ss),r.__reactInternalMemoizedMergedChildContext=e,at(Rn),at(ln),et(ln,e)):at(Rn),et(Rn,n)}var gi=null,th=!1,im=!1;function iE(e){gi===null?gi=[e]:gi.push(e)}function mM(e){th=!0,iE(e)}function Pa(){if(!im&&gi!==null){im=!0;var e=0,t=ze;try{var n=gi;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gi=null,th=!1}catch(i){throw gi!==null&&(gi=gi.slice(e+1)),TN(Ov,Pa),i}finally{ze=t,im=!1}}return null}var Ws=[],Hs=0,Nd=null,Ed=0,lr=[],ur=0,os=null,bi=1,wi="";function Fa(e,t){Ws[Hs++]=Ed,Ws[Hs++]=Nd,Nd=e,Ed=t}function aE(e,t,n){lr[ur++]=bi,lr[ur++]=wi,lr[ur++]=os,os=e;var r=bi;e=wi;var i=32-Or(r)-1;r&=~(1<<i),n+=1;var a=32-Or(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bi=1<<32-Or(t)+i|n<<i|r,wi=a+e}else bi=1<<a|n<<i|r,wi=e}function Fv(e){e.return!==null&&(Fa(e,1),aE(e,1,0))}function Bv(e){for(;e===Nd;)Nd=Ws[--Hs],Ws[Hs]=null,Ed=Ws[--Hs],Ws[Hs]=null;for(;e===os;)os=lr[--ur],lr[ur]=null,wi=lr[--ur],lr[ur]=null,bi=lr[--ur],lr[ur]=null}var Gn=null,Kn=null,ut=!1,Nr=null;function sE(e,t){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gn=e,Kn=pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gn=e,Kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=os!==null?{id:bi,overflow:wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gn=e,Kn=null,!0):!1;default:return!1}}function Ig(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dg(e){if(ut){var t=Kn;if(t){var n=t;if(!gw(e,t)){if(Ig(e))throw Error(X(418));t=pa(n.nextSibling);var r=Gn;t&&gw(e,t)?sE(r,n):(e.flags=e.flags&-4097|2,ut=!1,Gn=e)}}else{if(Ig(e))throw Error(X(418));e.flags=e.flags&-4097|2,ut=!1,Gn=e}}}function yw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gn=e}function fc(e){if(e!==Gn)return!1;if(!ut)return yw(e),ut=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tg(e.type,e.memoizedProps)),t&&(t=Kn)){if(Ig(e))throw oE(),Error(X(418));for(;t;)sE(e,t),t=pa(t.nextSibling)}if(yw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kn=pa(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kn=null}}else Kn=Gn?pa(e.stateNode.nextSibling):null;return!0}function oE(){for(var e=Kn;e;)e=pa(e.nextSibling)}function co(){Kn=Gn=null,ut=!1}function Uv(e){Nr===null?Nr=[e]:Nr.push(e)}var gM=$i.ReactCurrentBatchConfig;function rl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function hc(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vw(e){var t=e._init;return t(e._payload)}function lE(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function n(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=va(v,b),v.index=0,v.sibling=null,v}function a(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,j){return b===null||b.tag!==6?(b=dm(w,v.mode,j),b.return=v,b):(b=i(b,w),b.return=v,b)}function u(v,b,w,j){var _=w.type;return _===Ms?d(v,b,w.props.children,j,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ji&&vw(_)===b.type)?(j=i(b,w.props),j.ref=rl(v,b,w),j.return=v,j):(j=td(w.type,w.key,w.props,null,v.mode,j),j.ref=rl(v,b,w),j.return=v,j)}function c(v,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=fm(w,v.mode,j),b.return=v,b):(b=i(b,w.children||[]),b.return=v,b)}function d(v,b,w,j,_){return b===null||b.tag!==7?(b=es(w,v.mode,j,_),b.return=v,b):(b=i(b,w),b.return=v,b)}function f(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=dm(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nc:return w=td(b.type,b.key,b.props,null,v.mode,w),w.ref=rl(v,null,b),w.return=v,w;case Ls:return b=fm(b,v.mode,w),b.return=v,b;case Ji:var j=b._init;return f(v,j(b._payload),w)}if(wl(b)||Zo(b))return b=es(b,v.mode,w,null),b.return=v,b;hc(v,b)}return null}function h(v,b,w,j){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(v,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nc:return w.key===_?u(v,b,w,j):null;case Ls:return w.key===_?c(v,b,w,j):null;case Ji:return _=w._init,h(v,b,_(w._payload),j)}if(wl(w)||Zo(w))return _!==null?null:d(v,b,w,j,null);hc(v,w)}return null}function p(v,b,w,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(w)||null,l(b,v,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case nc:return v=v.get(j.key===null?w:j.key)||null,u(b,v,j,_);case Ls:return v=v.get(j.key===null?w:j.key)||null,c(b,v,j,_);case Ji:var k=j._init;return p(v,b,w,k(j._payload),_)}if(wl(j)||Zo(j))return v=v.get(w)||null,d(b,v,j,_,null);hc(b,j)}return null}function g(v,b,w,j){for(var _=null,k=null,E=b,A=b=0,T=null;E!==null&&A<w.length;A++){E.index>A?(T=E,E=null):T=E.sibling;var S=h(v,E,w[A],j);if(S===null){E===null&&(E=T);break}e&&E&&S.alternate===null&&t(v,E),b=a(S,b,A),k===null?_=S:k.sibling=S,k=S,E=T}if(A===w.length)return n(v,E),ut&&Fa(v,A),_;if(E===null){for(;A<w.length;A++)E=f(v,w[A],j),E!==null&&(b=a(E,b,A),k===null?_=E:k.sibling=E,k=E);return ut&&Fa(v,A),_}for(E=r(v,E);A<w.length;A++)T=p(E,v,A,w[A],j),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?A:T.key),b=a(T,b,A),k===null?_=T:k.sibling=T,k=T);return e&&E.forEach(function(P){return t(v,P)}),ut&&Fa(v,A),_}function y(v,b,w,j){var _=Zo(w);if(typeof _!="function")throw Error(X(150));if(w=_.call(w),w==null)throw Error(X(151));for(var k=_=null,E=b,A=b=0,T=null,S=w.next();E!==null&&!S.done;A++,S=w.next()){E.index>A?(T=E,E=null):T=E.sibling;var P=h(v,E,S.value,j);if(P===null){E===null&&(E=T);break}e&&E&&P.alternate===null&&t(v,E),b=a(P,b,A),k===null?_=P:k.sibling=P,k=P,E=T}if(S.done)return n(v,E),ut&&Fa(v,A),_;if(E===null){for(;!S.done;A++,S=w.next())S=f(v,S.value,j),S!==null&&(b=a(S,b,A),k===null?_=S:k.sibling=S,k=S);return ut&&Fa(v,A),_}for(E=r(v,E);!S.done;A++,S=w.next())S=p(E,v,A,S.value,j),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?A:S.key),b=a(S,b,A),k===null?_=S:k.sibling=S,k=S);return e&&E.forEach(function(C){return t(v,C)}),ut&&Fa(v,A),_}function x(v,b,w,j){if(typeof w=="object"&&w!==null&&w.type===Ms&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case nc:e:{for(var _=w.key,k=b;k!==null;){if(k.key===_){if(_=w.type,_===Ms){if(k.tag===7){n(v,k.sibling),b=i(k,w.props.children),b.return=v,v=b;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ji&&vw(_)===k.type){n(v,k.sibling),b=i(k,w.props),b.ref=rl(v,k,w),b.return=v,v=b;break e}n(v,k);break}else t(v,k);k=k.sibling}w.type===Ms?(b=es(w.props.children,v.mode,j,w.key),b.return=v,v=b):(j=td(w.type,w.key,w.props,null,v.mode,j),j.ref=rl(v,b,w),j.return=v,v=j)}return o(v);case Ls:e:{for(k=w.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(v,b.sibling),b=i(b,w.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else t(v,b);b=b.sibling}b=fm(w,v.mode,j),b.return=v,v=b}return o(v);case Ji:return k=w._init,x(v,b,k(w._payload),j)}if(wl(w))return g(v,b,w,j);if(Zo(w))return y(v,b,w,j);hc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,w),b.return=v,v=b):(n(v,b),b=dm(w,v.mode,j),b.return=v,v=b),o(v)):n(v,b)}return x}var fo=lE(!0),uE=lE(!1),Pd=Ea(null),Td=null,Ks=null,Wv=null;function Hv(){Wv=Ks=Td=null}function Kv(e){var t=Pd.current;at(Pd),e._currentValue=t}function Rg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function no(e,t){Td=e,Wv=Ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(An=!0),e.firstContext=null)}function pr(e){var t=e._currentValue;if(Wv!==e)if(e={context:e,memoizedValue:t,next:null},Ks===null){if(Td===null)throw Error(X(308));Ks=e,Td.dependencies={lanes:0,firstContext:e}}else Ks=Ks.next=e;return t}var Ga=null;function Vv(e){Ga===null?Ga=[e]:Ga.push(e)}function cE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Vv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ti(e,r)}function Ti(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ea=!1;function Gv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ma(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ti(e,n)}return i=r.interleaved,i===null?(t.next=t,Vv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ti(e,n)}function Yc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cv(e,n)}}function xw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ad(e,t,n,r){var i=e.updateQueue;ea=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,d=c=u=null,l=a;do{var h=l.lane,p=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(h=t,p=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=vt({},f,h);break e;case 2:ea=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=p,u=f):d=d.next=p,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);us|=o,e.lanes=o,e.memoizedState=f}}function bw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Au={},ti=Ea(Au),eu=Ea(Au),tu=Ea(Au);function qa(e){if(e===Au)throw Error(X(174));return e}function qv(e,t){switch(et(tu,t),et(eu,e),et(ti,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mg(t,e)}at(ti),et(ti,t)}function ho(){at(ti),at(eu),at(tu)}function fE(e){qa(tu.current);var t=qa(ti.current),n=mg(t,e.type);t!==n&&(et(eu,e),et(ti,n))}function Yv(e){eu.current===e&&(at(ti),at(eu))}var ft=Ea(0);function Od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var am=[];function Xv(){for(var e=0;e<am.length;e++)am[e]._workInProgressVersionPrimary=null;am.length=0}var Xc=$i.ReactCurrentDispatcher,sm=$i.ReactCurrentBatchConfig,ls=0,gt=null,Ct=null,Bt=null,Cd=!1,Dl=!1,nu=0,yM=0;function tn(){throw Error(X(321))}function Qv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rr(e[n],t[n]))return!1;return!0}function Zv(e,t,n,r,i,a){if(ls=a,gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?wM:kM,e=n(r,i),Dl){a=0;do{if(Dl=!1,nu=0,25<=a)throw Error(X(301));a+=1,Bt=Ct=null,t.updateQueue=null,Xc.current=jM,e=n(r,i)}while(Dl)}if(Xc.current=Id,t=Ct!==null&&Ct.next!==null,ls=0,Bt=Ct=gt=null,Cd=!1,t)throw Error(X(300));return e}function Jv(){var e=nu!==0;return nu=0,e}function qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?gt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function mr(){if(Ct===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=Bt===null?gt.memoizedState:Bt.next;if(t!==null)Bt=t,Ct=e;else{if(e===null)throw Error(X(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Bt===null?gt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function ru(e,t){return typeof t=="function"?t(e):t}function om(e){var t=mr(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=Ct,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((ls&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=r):u=u.next=f,gt.lanes|=d,us|=d}c=c.next}while(c!==null&&c!==a);u===null?o=r:u.next=l,Rr(r,t.memoizedState)||(An=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,gt.lanes|=a,us|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lm(e){var t=mr(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Rr(a,t.memoizedState)||(An=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function hE(){}function pE(e,t){var n=gt,r=mr(),i=t(),a=!Rr(r.memoizedState,i);if(a&&(r.memoizedState=i,An=!0),r=r.queue,ex(yE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,iu(9,gE.bind(null,n,r,i,t),void 0,null),Ut===null)throw Error(X(349));ls&30||mE(n,t,i)}return i}function mE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gE(e,t,n,r){t.value=n,t.getSnapshot=r,vE(t)&&xE(e)}function yE(e,t,n){return n(function(){vE(t)&&xE(e)})}function vE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rr(e,n)}catch{return!0}}function xE(e){var t=Ti(e,1);t!==null&&Cr(t,e,1,-1)}function ww(e){var t=qr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:e},t.queue=e,e=e.dispatch=bM.bind(null,gt,e),[t.memoizedState,e]}function iu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bE(){return mr().memoizedState}function Qc(e,t,n,r){var i=qr();gt.flags|=e,i.memoizedState=iu(1|t,n,void 0,r===void 0?null:r)}function nh(e,t,n,r){var i=mr();r=r===void 0?null:r;var a=void 0;if(Ct!==null){var o=Ct.memoizedState;if(a=o.destroy,r!==null&&Qv(r,o.deps)){i.memoizedState=iu(t,n,a,r);return}}gt.flags|=e,i.memoizedState=iu(1|t,n,a,r)}function kw(e,t){return Qc(8390656,8,e,t)}function ex(e,t){return nh(2048,8,e,t)}function wE(e,t){return nh(4,2,e,t)}function kE(e,t){return nh(4,4,e,t)}function jE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _E(e,t,n){return n=n!=null?n.concat([e]):null,nh(4,4,jE.bind(null,t,e),n)}function tx(){}function SE(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function NE(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function EE(e,t,n){return ls&21?(Rr(n,t)||(n=CN(),gt.lanes|=n,us|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,An=!0),e.memoizedState=n)}function vM(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=sm.transition;sm.transition={};try{e(!1),t()}finally{ze=n,sm.transition=r}}function PE(){return mr().memoizedState}function xM(e,t,n){var r=ya(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TE(e))AE(t,n);else if(n=cE(e,t,n,r),n!==null){var i=gn();Cr(n,e,r,i),OE(n,t,r)}}function bM(e,t,n){var r=ya(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TE(e))AE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Rr(l,o)){var u=t.interleaved;u===null?(i.next=i,Vv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=cE(e,t,i,r),n!==null&&(i=gn(),Cr(n,e,r,i),OE(n,t,r))}}function TE(e){var t=e.alternate;return e===gt||t!==null&&t===gt}function AE(e,t){Dl=Cd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cv(e,n)}}var Id={readContext:pr,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},wM={readContext:pr,useCallback:function(e,t){return qr().memoizedState=[e,t===void 0?null:t],e},useContext:pr,useEffect:kw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qc(4194308,4,jE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qc(4,2,e,t)},useMemo:function(e,t){var n=qr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xM.bind(null,gt,e),[r.memoizedState,e]},useRef:function(e){var t=qr();return e={current:e},t.memoizedState=e},useState:ww,useDebugValue:tx,useDeferredValue:function(e){return qr().memoizedState=e},useTransition:function(){var e=ww(!1),t=e[0];return e=vM.bind(null,e[1]),qr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gt,i=qr();if(ut){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),Ut===null)throw Error(X(349));ls&30||mE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,kw(yE.bind(null,r,a,e),[e]),r.flags|=2048,iu(9,gE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=qr(),t=Ut.identifierPrefix;if(ut){var n=wi,r=bi;n=(r&~(1<<32-Or(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yM++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kM={readContext:pr,useCallback:SE,useContext:pr,useEffect:ex,useImperativeHandle:_E,useInsertionEffect:wE,useLayoutEffect:kE,useMemo:NE,useReducer:om,useRef:bE,useState:function(){return om(ru)},useDebugValue:tx,useDeferredValue:function(e){var t=mr();return EE(t,Ct.memoizedState,e)},useTransition:function(){var e=om(ru)[0],t=mr().memoizedState;return[e,t]},useMutableSource:hE,useSyncExternalStore:pE,useId:PE,unstable_isNewReconciler:!1},jM={readContext:pr,useCallback:SE,useContext:pr,useEffect:ex,useImperativeHandle:_E,useInsertionEffect:wE,useLayoutEffect:kE,useMemo:NE,useReducer:lm,useRef:bE,useState:function(){return lm(ru)},useDebugValue:tx,useDeferredValue:function(e){var t=mr();return Ct===null?t.memoizedState=e:EE(t,Ct.memoizedState,e)},useTransition:function(){var e=lm(ru)[0],t=mr().memoizedState;return[e,t]},useMutableSource:hE,useSyncExternalStore:pE,useId:PE,unstable_isNewReconciler:!1};function _r(e,t){if(e&&e.defaultProps){t=vt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:vt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rh={isMounted:function(e){return(e=e._reactInternals)?ws(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gn(),i=ya(e),a=_i(r,i);a.payload=t,n!=null&&(a.callback=n),t=ma(e,a,i),t!==null&&(Cr(t,e,i,r),Yc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gn(),i=ya(e),a=_i(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ma(e,a,i),t!==null&&(Cr(t,e,i,r),Yc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gn(),r=ya(e),i=_i(n,r);i.tag=2,t!=null&&(i.callback=t),t=ma(e,i,r),t!==null&&(Cr(t,e,r,n),Yc(t,e,r))}};function jw(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Xl(n,r)||!Xl(i,a):!0}function CE(e,t,n){var r=!1,i=ja,a=t.contextType;return typeof a=="object"&&a!==null?a=pr(a):(i=Ln(t)?ss:ln.current,r=t.contextTypes,a=(r=r!=null)?uo(e,i):ja),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _w(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&rh.enqueueReplaceState(t,t.state,null)}function Mg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Gv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=pr(a):(a=Ln(t)?ss:ln.current,i.context=uo(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Lg(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&rh.enqueueReplaceState(i,i.state,null),Ad(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do n+=QR(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function um(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $g(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _M=typeof WeakMap=="function"?WeakMap:Map;function IE(e,t,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rd||(Rd=!0,qg=r),$g(e,t)},n}function DE(e,t,n){n=_i(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$g(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){$g(e,t),typeof r!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Sw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _M;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=$M.bind(null,e,t,n),t.then(e,e))}function Nw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ew(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_i(-1,1),t.tag=2,ma(n,t,1))),n.lanes|=1),e)}var SM=$i.ReactCurrentOwner,An=!1;function dn(e,t,n,r){t.child=e===null?uE(t,null,n,r):fo(t,e.child,n,r)}function Pw(e,t,n,r,i){n=n.render;var a=t.ref;return no(t,i),r=Zv(e,t,n,r,a,i),n=Jv(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ai(e,t,i)):(ut&&n&&Fv(t),t.flags|=1,dn(e,t,r,i),t.child)}function Tw(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!ux(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,RE(e,t,a,r,i)):(e=td(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xl,n(o,r)&&e.ref===t.ref)return Ai(e,t,i)}return t.flags|=1,e=va(a,r),e.ref=t.ref,e.return=t,t.child=e}function RE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Xl(a,r)&&e.ref===t.ref)if(An=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(An=!0);else return t.lanes=e.lanes,Ai(e,t,i)}return zg(e,t,n,r,i)}function LE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Gs,Wn),Wn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Gs,Wn),Wn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,et(Gs,Wn),Wn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,et(Gs,Wn),Wn|=r;return dn(e,t,i,n),t.child}function ME(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function zg(e,t,n,r,i){var a=Ln(n)?ss:ln.current;return a=uo(t,a),no(t,i),n=Zv(e,t,n,r,a,i),r=Jv(),e!==null&&!An?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ai(e,t,i)):(ut&&r&&Fv(t),t.flags|=1,dn(e,t,n,i),t.child)}function Aw(e,t,n,r,i){if(Ln(n)){var a=!0;Sd(t)}else a=!1;if(no(t,i),t.stateNode===null)Zc(e,t),CE(t,n,r),Mg(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pr(c):(c=Ln(n)?ss:ln.current,c=uo(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&_w(t,o,r,c),ea=!1;var h=t.memoizedState;o.state=h,Ad(t,r,o,i),u=t.memoizedState,l!==r||h!==u||Rn.current||ea?(typeof d=="function"&&(Lg(t,n,d,r),u=t.memoizedState),(l=ea||jw(t,n,l,r,h,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,dE(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:_r(t.type,l),o.props=c,f=t.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=pr(u):(u=Ln(n)?ss:ln.current,u=uo(t,u));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==u)&&_w(t,o,r,u),ea=!1,h=t.memoizedState,o.state=h,Ad(t,r,o,i);var g=t.memoizedState;l!==f||h!==g||Rn.current||ea?(typeof p=="function"&&(Lg(t,n,p,r),g=t.memoizedState),(c=ea||jw(t,n,c,r,h,g,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Fg(e,t,n,r,a,i)}function Fg(e,t,n,r,i,a){ME(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&mw(t,n,!1),Ai(e,t,a);r=t.stateNode,SM.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=fo(t,e.child,null,a),t.child=fo(t,null,l,a)):dn(e,t,l,a),t.memoizedState=r.state,i&&mw(t,n,!0),t.child}function $E(e){var t=e.stateNode;t.pendingContext?pw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pw(e,t.context,!1),qv(e,t.containerInfo)}function Ow(e,t,n,r,i){return co(),Uv(i),t.flags|=256,dn(e,t,n,r),t.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function Ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function zE(e,t,n){var r=t.pendingProps,i=ft.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),et(ft,i&1),e===null)return Dg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=sh(o,r,0,null),e=es(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ug(n),t.memoizedState=Bg,e):nx(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return NM(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=va(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=va(l,a):(a=es(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Bg,r}return a=e.child,e=a.sibling,r=va(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nx(e,t){return t=sh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pc(e,t,n,r){return r!==null&&Uv(r),fo(t,e.child,null,n),e=nx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function NM(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=um(Error(X(422))),pc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=sh({mode:"visible",children:r.children},i,0,null),a=es(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&fo(t,e.child,null,o),t.child.memoizedState=Ug(o),t.memoizedState=Bg,a);if(!(t.mode&1))return pc(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(X(419)),r=um(a,r,void 0),pc(e,t,o,r)}if(l=(o&e.childLanes)!==0,An||l){if(r=Ut,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ti(e,i),Cr(r,e,i,-1))}return lx(),r=um(Error(X(421))),pc(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=zM.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Kn=pa(i.nextSibling),Gn=t,ut=!0,Nr=null,e!==null&&(lr[ur++]=bi,lr[ur++]=wi,lr[ur++]=os,bi=e.id,wi=e.overflow,os=t),t=nx(t,r.children),t.flags|=4096,t)}function Cw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rg(e.return,t,n)}function cm(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function FE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(dn(e,t,r.children,n),r=ft.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cw(e,n,t);else if(e.tag===19)Cw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(et(ft,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Od(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),cm(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Od(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}cm(t,!0,n,null,a);break;case"together":cm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),us|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=va(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=va(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function EM(e,t,n){switch(t.tag){case 3:$E(t),co();break;case 5:fE(t);break;case 1:Ln(t.type)&&Sd(t);break;case 4:qv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;et(Pd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(et(ft,ft.current&1),t.flags|=128,null):n&t.child.childLanes?zE(e,t,n):(et(ft,ft.current&1),e=Ai(e,t,n),e!==null?e.sibling:null);et(ft,ft.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return FE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ft,ft.current),r)break;return null;case 22:case 23:return t.lanes=0,LE(e,t,n)}return Ai(e,t,n)}var BE,Wg,UE,WE;BE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wg=function(){};UE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qa(ti.current);var a=null;switch(n){case"input":i=dg(e,i),r=dg(e,r),a=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),a=[];break;case"textarea":i=pg(e,i),r=pg(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jd)}gg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wl.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&rt("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};WE=function(e,t,n,r){n!==r&&(t.flags|=4)};function il(e,t){if(!ut)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function PM(e,t,n){var r=t.pendingProps;switch(Bv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(t),null;case 1:return Ln(t.type)&&_d(),nn(t),null;case 3:return r=t.stateNode,ho(),at(Rn),at(ln),Xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nr!==null&&(Qg(Nr),Nr=null))),Wg(e,t),nn(t),null;case 5:Yv(t);var i=qa(tu.current);if(n=t.type,e!==null&&t.stateNode!=null)UE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return nn(t),null}if(e=qa(ti.current),fc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Qr]=t,r[Jl]=a,e=(t.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<jl.length;i++)rt(jl[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Bb(r,a),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},rt("invalid",r);break;case"textarea":Wb(r,a),rt("invalid",r)}gg(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&dc(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&dc(r.textContent,l,e),i=["children",""+l]):Wl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":rc(r),Ub(r,a,!0);break;case"textarea":rc(r),Hb(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=jd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Qr]=t,e[Jl]=r,BE(e,t,!1,!1),t.stateNode=e;e:{switch(o=yg(n,r),n){case"dialog":rt("cancel",e),rt("close",e),i=r;break;case"iframe":case"object":case"embed":rt("load",e),i=r;break;case"video":case"audio":for(i=0;i<jl.length;i++)rt(jl[i],e);i=r;break;case"source":rt("error",e),i=r;break;case"img":case"image":case"link":rt("error",e),rt("load",e),i=r;break;case"details":rt("toggle",e),i=r;break;case"input":Bb(e,r),i=dg(e,r),rt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),rt("invalid",e);break;case"textarea":Wb(e,r),i=pg(e,r),rt("invalid",e);break;default:i=r}gg(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?bN(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vN(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Hl(e,u):typeof u=="number"&&Hl(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wl.hasOwnProperty(a)?u!=null&&a==="onScroll"&&rt("scroll",e):u!=null&&Nv(e,a,u,o))}switch(n){case"input":rc(e),Ub(e,r,!1);break;case"textarea":rc(e),Hb(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ka(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Zs(e,!!r.multiple,a,!1):r.defaultValue!=null&&Zs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nn(t),null;case 6:if(e&&t.stateNode!=null)WE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=qa(tu.current),qa(ti.current),fc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,(a=r.nodeValue!==n)&&(e=Gn,e!==null))switch(e.tag){case 3:dc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=t,t.stateNode=r}return nn(t),null;case 13:if(at(ft),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ut&&Kn!==null&&t.mode&1&&!(t.flags&128))oE(),co(),t.flags|=98560,a=!1;else if(a=fc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(X(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[Qr]=t}else co(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nn(t),a=!1}else Nr!==null&&(Qg(Nr),Nr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ft.current&1?Dt===0&&(Dt=3):lx())),t.updateQueue!==null&&(t.flags|=4),nn(t),null);case 4:return ho(),Wg(e,t),e===null&&Ql(t.stateNode.containerInfo),nn(t),null;case 10:return Kv(t.type._context),nn(t),null;case 17:return Ln(t.type)&&_d(),nn(t),null;case 19:if(at(ft),a=t.memoizedState,a===null)return nn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)il(a,!1);else{if(Dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Od(e),o!==null){for(t.flags|=128,il(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return et(ft,ft.current&1|2),t.child}e=e.sibling}a.tail!==null&&St()>mo&&(t.flags|=128,r=!0,il(a,!1),t.lanes=4194304)}else{if(!r)if(e=Od(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),il(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ut)return nn(t),null}else 2*St()-a.renderingStartTime>mo&&n!==1073741824&&(t.flags|=128,r=!0,il(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=St(),t.sibling=null,n=ft.current,et(ft,r?n&1|2:n&1),t):(nn(t),null);case 22:case 23:return ox(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wn&1073741824&&(nn(t),t.subtreeFlags&6&&(t.flags|=8192)):nn(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function TM(e,t){switch(Bv(t),t.tag){case 1:return Ln(t.type)&&_d(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ho(),at(Rn),at(ln),Xv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yv(t),null;case 13:if(at(ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));co()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return at(ft),null;case 4:return ho(),null;case 10:return Kv(t.type._context),null;case 22:case 23:return ox(),null;case 24:return null;default:return null}}var mc=!1,an=!1,AM=typeof WeakSet=="function"?WeakSet:Set,se=null;function Vs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(e,t,r)}else n.current=null}function Hg(e,t,n){try{n()}catch(r){wt(e,t,r)}}var Iw=!1;function OM(e,t){if(Eg=bd,e=qN(),zv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===i&&(l=o),h===a&&++d===r&&(u=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pg={focusedElem:e,selectionRange:n},bd=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:_r(t.type,y),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(j){wt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return g=Iw,Iw=!1,g}function Rl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Hg(t,n,a)}i=i.next}while(i!==r)}}function ih(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Kg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function HE(e){var t=e.alternate;t!==null&&(e.alternate=null,HE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qr],delete t[Jl],delete t[Og],delete t[hM],delete t[pM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KE(e){return e.tag===5||e.tag===3||e.tag===4}function Dw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jd));else if(r!==4&&(e=e.child,e!==null))for(Vg(e,t,n),e=e.sibling;e!==null;)Vg(e,t,n),e=e.sibling}function Gg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Gg(e,t,n),e=e.sibling;e!==null;)Gg(e,t,n),e=e.sibling}var qt=null,Sr=!1;function Yi(e,t,n){for(n=n.child;n!==null;)VE(e,t,n),n=n.sibling}function VE(e,t,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Xf,n)}catch{}switch(n.tag){case 5:an||Vs(n,t);case 6:var r=qt,i=Sr;qt=null,Yi(e,t,n),qt=r,Sr=i,qt!==null&&(Sr?(e=qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Sr?(e=qt,n=n.stateNode,e.nodeType===8?rm(e.parentNode,n):e.nodeType===1&&rm(e,n),ql(e)):rm(qt,n.stateNode));break;case 4:r=qt,i=Sr,qt=n.stateNode.containerInfo,Sr=!0,Yi(e,t,n),qt=r,Sr=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Hg(n,t,o),i=i.next}while(i!==r)}Yi(e,t,n);break;case 1:if(!an&&(Vs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){wt(n,t,l)}Yi(e,t,n);break;case 21:Yi(e,t,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,Yi(e,t,n),an=r):Yi(e,t,n);break;default:Yi(e,t,n)}}function Rw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AM),t.forEach(function(r){var i=FM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:qt=l.stateNode,Sr=!1;break e;case 3:qt=l.stateNode.containerInfo,Sr=!0;break e;case 4:qt=l.stateNode.containerInfo,Sr=!0;break e}l=l.return}if(qt===null)throw Error(X(160));VE(a,o,i),qt=null,Sr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){wt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GE(t,e),t=t.sibling}function GE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jr(t,e),Wr(e),r&4){try{Rl(3,e,e.return),ih(3,e)}catch(y){wt(e,e.return,y)}try{Rl(5,e,e.return)}catch(y){wt(e,e.return,y)}}break;case 1:jr(t,e),Wr(e),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(jr(t,e),Wr(e),r&512&&n!==null&&Vs(n,n.return),e.flags&32){var i=e.stateNode;try{Hl(i,"")}catch(y){wt(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&mN(i,a),yg(l,o);var c=yg(l,a);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?bN(i,f):d==="dangerouslySetInnerHTML"?vN(i,f):d==="children"?Hl(i,f):Nv(i,d,f,c)}switch(l){case"input":fg(i,a);break;case"textarea":gN(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Zs(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Zs(i,!!a.multiple,a.defaultValue,!0):Zs(i,!!a.multiple,a.multiple?[]:"",!1))}i[Jl]=a}catch(y){wt(e,e.return,y)}}break;case 6:if(jr(t,e),Wr(e),r&4){if(e.stateNode===null)throw Error(X(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){wt(e,e.return,y)}}break;case 3:if(jr(t,e),Wr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ql(t.containerInfo)}catch(y){wt(e,e.return,y)}break;case 4:jr(t,e),Wr(e);break;case 13:jr(t,e),Wr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ax=St())),r&4&&Rw(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(an=(c=an)||d,jr(t,e),an=c):jr(t,e),Wr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(se=e,d=e.child;d!==null;){for(f=se=d;se!==null;){switch(h=se,p=h.child,h.tag){case 0:case 11:case 14:case 15:Rl(4,h,h.return);break;case 1:Vs(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){wt(r,n,y)}}break;case 5:Vs(h,h.return);break;case 22:if(h.memoizedState!==null){Mw(f);continue}}p!==null?(p.return=h,se=p):Mw(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=xN("display",o))}catch(y){wt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){wt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jr(t,e),Wr(e),r&4&&Rw(e);break;case 21:break;default:jr(t,e),Wr(e)}}function Wr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(KE(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hl(i,""),r.flags&=-33);var a=Dw(e);Gg(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Dw(e);Vg(e,l,o);break;default:throw Error(X(161))}}catch(u){wt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CM(e,t,n){se=e,qE(e)}function qE(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var i=se,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mc;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||an;l=mc;var c=an;if(mc=o,(an=u)&&!c)for(se=i;se!==null;)o=se,u=o.child,o.tag===22&&o.memoizedState!==null?$w(i):u!==null?(u.return=o,se=u):$w(i);for(;a!==null;)se=a,qE(a),a=a.sibling;se=i,mc=l,an=c}Lw(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,se=a):Lw(e)}}function Lw(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:an||ih(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:_r(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&bw(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}bw(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ql(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}an||t.flags&512&&Kg(t)}catch(h){wt(t,t.return,h)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Mw(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function $w(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ih(4,t)}catch(u){wt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){wt(t,i,u)}}var a=t.return;try{Kg(t)}catch(u){wt(t,a,u)}break;case 5:var o=t.return;try{Kg(t)}catch(u){wt(t,o,u)}}}catch(u){wt(t,t.return,u)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var IM=Math.ceil,Dd=$i.ReactCurrentDispatcher,rx=$i.ReactCurrentOwner,hr=$i.ReactCurrentBatchConfig,Ne=0,Ut=null,Pt=null,Qt=0,Wn=0,Gs=Ea(0),Dt=0,au=null,us=0,ah=0,ix=0,Ll=null,Pn=null,ax=0,mo=1/0,mi=null,Rd=!1,qg=null,ga=null,gc=!1,oa=null,Ld=0,Ml=0,Yg=null,Jc=-1,ed=0;function gn(){return Ne&6?St():Jc!==-1?Jc:Jc=St()}function ya(e){return e.mode&1?Ne&2&&Qt!==0?Qt&-Qt:gM.transition!==null?(ed===0&&(ed=CN()),ed):(e=ze,e!==0||(e=window.event,e=e===void 0?16:zN(e.type)),e):1}function Cr(e,t,n,r){if(50<Ml)throw Ml=0,Yg=null,Error(X(185));Eu(e,n,r),(!(Ne&2)||e!==Ut)&&(e===Ut&&(!(Ne&2)&&(ah|=n),Dt===4&&ia(e,Qt)),Mn(e,r),n===1&&Ne===0&&!(t.mode&1)&&(mo=St()+500,th&&Pa()))}function Mn(e,t){var n=e.callbackNode;gL(e,t);var r=xd(e,e===Ut?Qt:0);if(r===0)n!==null&&Gb(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gb(n),t===1)e.tag===0?mM(zw.bind(null,e)):iE(zw.bind(null,e)),dM(function(){!(Ne&6)&&Pa()}),n=null;else{switch(IN(r)){case 1:n=Ov;break;case 4:n=AN;break;case 16:n=vd;break;case 536870912:n=ON;break;default:n=vd}n=nP(n,YE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function YE(e,t){if(Jc=-1,ed=0,Ne&6)throw Error(X(327));var n=e.callbackNode;if(ro()&&e.callbackNode!==n)return null;var r=xd(e,e===Ut?Qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Md(e,r);else{t=r;var i=Ne;Ne|=2;var a=QE();(Ut!==e||Qt!==t)&&(mi=null,mo=St()+500,Ja(e,t));do try{LM();break}catch(l){XE(e,l)}while(!0);Hv(),Dd.current=a,Ne=i,Pt!==null?t=0:(Ut=null,Qt=0,t=Dt)}if(t!==0){if(t===2&&(i=kg(e),i!==0&&(r=i,t=Xg(e,i))),t===1)throw n=au,Ja(e,0),ia(e,r),Mn(e,St()),n;if(t===6)ia(e,r);else{if(i=e.current.alternate,!(r&30)&&!DM(i)&&(t=Md(e,r),t===2&&(a=kg(e),a!==0&&(r=a,t=Xg(e,a))),t===1))throw n=au,Ja(e,0),ia(e,r),Mn(e,St()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:Ba(e,Pn,mi);break;case 3:if(ia(e,r),(r&130023424)===r&&(t=ax+500-St(),10<t)){if(xd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){gn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ag(Ba.bind(null,e,Pn,mi),t);break}Ba(e,Pn,mi);break;case 4:if(ia(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Or(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IM(r/1960))-r,10<r){e.timeoutHandle=Ag(Ba.bind(null,e,Pn,mi),r);break}Ba(e,Pn,mi);break;case 5:Ba(e,Pn,mi);break;default:throw Error(X(329))}}}return Mn(e,St()),e.callbackNode===n?YE.bind(null,e):null}function Xg(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(Ja(e,t).flags|=256),e=Md(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&Qg(t)),e}function Qg(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function DM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Rr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ia(e,t){for(t&=~ix,t&=~ah,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Or(t),r=1<<n;e[n]=-1,t&=~r}}function zw(e){if(Ne&6)throw Error(X(327));ro();var t=xd(e,0);if(!(t&1))return Mn(e,St()),null;var n=Md(e,t);if(e.tag!==0&&n===2){var r=kg(e);r!==0&&(t=r,n=Xg(e,r))}if(n===1)throw n=au,Ja(e,0),ia(e,t),Mn(e,St()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ba(e,Pn,mi),Mn(e,St()),null}function sx(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(mo=St()+500,th&&Pa())}}function cs(e){oa!==null&&oa.tag===0&&!(Ne&6)&&ro();var t=Ne;Ne|=1;var n=hr.transition,r=ze;try{if(hr.transition=null,ze=1,e)return e()}finally{ze=r,hr.transition=n,Ne=t,!(Ne&6)&&Pa()}}function ox(){Wn=Gs.current,at(Gs)}function Ja(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cM(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(Bv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_d();break;case 3:ho(),at(Rn),at(ln),Xv();break;case 5:Yv(r);break;case 4:ho();break;case 13:at(ft);break;case 19:at(ft);break;case 10:Kv(r.type._context);break;case 22:case 23:ox()}n=n.return}if(Ut=e,Pt=e=va(e.current,null),Qt=Wn=t,Dt=0,au=null,ix=ah=us=0,Pn=Ll=null,Ga!==null){for(t=0;t<Ga.length;t++)if(n=Ga[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Ga=null}return e}function XE(e,t){do{var n=Pt;try{if(Hv(),Xc.current=Id,Cd){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cd=!1}if(ls=0,Bt=Ct=gt=null,Dl=!1,nu=0,rx.current=null,n===null||n.return===null){Dt=1,au=t,Pt=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Qt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Nw(o);if(p!==null){p.flags&=-257,Ew(p,o,l,a,t),p.mode&1&&Sw(a,c,t),t=p,u=c;var g=t.updateQueue;if(g===null){var y=new Set;y.add(u),t.updateQueue=y}else g.add(u);break e}else{if(!(t&1)){Sw(a,c,t),lx();break e}u=Error(X(426))}}else if(ut&&l.mode&1){var x=Nw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ew(x,o,l,a,t),Uv(po(u,l));break e}}a=u=po(u,l),Dt!==4&&(Dt=2),Ll===null?Ll=[a]:Ll.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=IE(a,u,t);xw(a,v);break e;case 1:l=u;var b=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ga===null||!ga.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=DE(a,l,t);xw(a,j);break e}}a=a.return}while(a!==null)}JE(n)}catch(_){t=_,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function QE(){var e=Dd.current;return Dd.current=Id,e===null?Id:e}function lx(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Ut===null||!(us&268435455)&&!(ah&268435455)||ia(Ut,Qt)}function Md(e,t){var n=Ne;Ne|=2;var r=QE();(Ut!==e||Qt!==t)&&(mi=null,Ja(e,t));do try{RM();break}catch(i){XE(e,i)}while(!0);if(Hv(),Ne=n,Dd.current=r,Pt!==null)throw Error(X(261));return Ut=null,Qt=0,Dt}function RM(){for(;Pt!==null;)ZE(Pt)}function LM(){for(;Pt!==null&&!oL();)ZE(Pt)}function ZE(e){var t=tP(e.alternate,e,Wn);e.memoizedProps=e.pendingProps,t===null?JE(e):Pt=t,rx.current=null}function JE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=TM(n,t),n!==null){n.flags&=32767,Pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dt=6,Pt=null;return}}else if(n=PM(n,t,Wn),n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Dt===0&&(Dt=5)}function Ba(e,t,n){var r=ze,i=hr.transition;try{hr.transition=null,ze=1,MM(e,t,n,r)}finally{hr.transition=i,ze=r}return null}function MM(e,t,n,r){do ro();while(oa!==null);if(Ne&6)throw Error(X(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(yL(e,a),e===Ut&&(Pt=Ut=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,nP(vd,function(){return ro(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=hr.transition,hr.transition=null;var o=ze;ze=1;var l=Ne;Ne|=4,rx.current=null,OM(e,n),GE(n,e),rM(Pg),bd=!!Eg,Pg=Eg=null,e.current=n,CM(n),lL(),Ne=l,ze=o,hr.transition=a}else e.current=n;if(gc&&(gc=!1,oa=e,Ld=i),a=e.pendingLanes,a===0&&(ga=null),dL(n.stateNode),Mn(e,St()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rd)throw Rd=!1,e=qg,qg=null,e;return Ld&1&&e.tag!==0&&ro(),a=e.pendingLanes,a&1?e===Yg?Ml++:(Ml=0,Yg=e):Ml=0,Pa(),null}function ro(){if(oa!==null){var e=IN(Ld),t=hr.transition,n=ze;try{if(hr.transition=null,ze=16>e?16:e,oa===null)var r=!1;else{if(e=oa,oa=null,Ld=0,Ne&6)throw Error(X(331));var i=Ne;for(Ne|=4,se=e.current;se!==null;){var a=se,o=a.child;if(se.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Rl(8,d,a)}var f=d.child;if(f!==null)f.return=d,se=f;else for(;se!==null;){d=se;var h=d.sibling,p=d.return;if(HE(d),d===c){se=null;break}if(h!==null){h.return=p,se=h;break}se=p}}}var g=a.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}se=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,se=o;else e:for(;se!==null;){if(a=se,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Rl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,se=v;break e}se=a.return}}var b=e.current;for(se=b;se!==null;){o=se;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,se=w;else e:for(o=b;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ih(9,l)}}catch(_){wt(l,l.return,_)}if(l===o){se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,se=j;break e}se=l.return}}if(Ne=i,Pa(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Xf,e)}catch{}r=!0}return r}finally{ze=n,hr.transition=t}}return!1}function Fw(e,t,n){t=po(n,t),t=IE(e,t,1),e=ma(e,t,1),t=gn(),e!==null&&(Eu(e,1,t),Mn(e,t))}function wt(e,t,n){if(e.tag===3)Fw(e,e,n);else for(;t!==null;){if(t.tag===3){Fw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ga===null||!ga.has(r))){e=po(n,e),e=DE(t,e,1),t=ma(t,e,1),e=gn(),t!==null&&(Eu(t,1,e),Mn(t,e));break}}t=t.return}}function $M(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gn(),e.pingedLanes|=e.suspendedLanes&n,Ut===e&&(Qt&n)===n&&(Dt===4||Dt===3&&(Qt&130023424)===Qt&&500>St()-ax?Ja(e,0):ix|=n),Mn(e,t)}function eP(e,t){t===0&&(e.mode&1?(t=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):t=1);var n=gn();e=Ti(e,t),e!==null&&(Eu(e,t,n),Mn(e,n))}function zM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eP(e,n)}function FM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),eP(e,n)}var tP;tP=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rn.current)An=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return An=!1,EM(e,t,n);An=!!(e.flags&131072)}else An=!1,ut&&t.flags&1048576&&aE(t,Ed,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zc(e,t),e=t.pendingProps;var i=uo(t,ln.current);no(t,n),i=Zv(null,t,r,e,i,n);var a=Jv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ln(r)?(a=!0,Sd(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gv(t),i.updater=rh,t.stateNode=i,i._reactInternals=t,Mg(t,r,e,n),t=Fg(null,t,r,!0,a,n)):(t.tag=0,ut&&a&&Fv(t),dn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=UM(r),e=_r(r,e),i){case 0:t=zg(null,t,r,e,n);break e;case 1:t=Aw(null,t,r,e,n);break e;case 11:t=Pw(null,t,r,e,n);break e;case 14:t=Tw(null,t,r,_r(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_r(r,i),zg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_r(r,i),Aw(e,t,r,i,n);case 3:e:{if($E(t),e===null)throw Error(X(387));r=t.pendingProps,a=t.memoizedState,i=a.element,dE(e,t),Ad(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=po(Error(X(423)),t),t=Ow(e,t,r,n,i);break e}else if(r!==i){i=po(Error(X(424)),t),t=Ow(e,t,r,n,i);break e}else for(Kn=pa(t.stateNode.containerInfo.firstChild),Gn=t,ut=!0,Nr=null,n=uE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===i){t=Ai(e,t,n);break e}dn(e,t,r,n)}t=t.child}return t;case 5:return fE(t),e===null&&Dg(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Tg(r,i)?o=null:a!==null&&Tg(r,a)&&(t.flags|=32),ME(e,t),dn(e,t,o,n),t.child;case 6:return e===null&&Dg(t),null;case 13:return zE(e,t,n);case 4:return qv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fo(t,null,r,n):dn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_r(r,i),Pw(e,t,r,i,n);case 7:return dn(e,t,t.pendingProps,n),t.child;case 8:return dn(e,t,t.pendingProps.children,n),t.child;case 12:return dn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,et(Pd,r._currentValue),r._currentValue=o,a!==null)if(Rr(a.value,o)){if(a.children===i.children&&!Rn.current){t=Ai(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=_i(-1,n&-n),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Rg(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rg(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}dn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,no(t,n),i=pr(i),r=r(i),t.flags|=1,dn(e,t,r,n),t.child;case 14:return r=t.type,i=_r(r,t.pendingProps),i=_r(r.type,i),Tw(e,t,r,i,n);case 15:return RE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_r(r,i),Zc(e,t),t.tag=1,Ln(r)?(e=!0,Sd(t)):e=!1,no(t,n),CE(t,r,i),Mg(t,r,i,n),Fg(null,t,r,!0,e,n);case 19:return FE(e,t,n);case 22:return LE(e,t,n)}throw Error(X(156,t.tag))};function nP(e,t){return TN(e,t)}function BM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,n,r){return new BM(e,t,n,r)}function ux(e){return e=e.prototype,!(!e||!e.isReactComponent)}function UM(e){if(typeof e=="function")return ux(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pv)return 11;if(e===Tv)return 14}return 2}function va(e,t){var n=e.alternate;return n===null?(n=dr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function td(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")ux(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ms:return es(n.children,i,a,t);case Ev:o=8,i|=8;break;case og:return e=dr(12,n,t,i|2),e.elementType=og,e.lanes=a,e;case lg:return e=dr(13,n,t,i),e.elementType=lg,e.lanes=a,e;case ug:return e=dr(19,n,t,i),e.elementType=ug,e.lanes=a,e;case fN:return sh(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cN:o=10;break e;case dN:o=9;break e;case Pv:o=11;break e;case Tv:o=14;break e;case Ji:o=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=dr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function es(e,t,n,r){return e=dr(7,e,r,t),e.lanes=n,e}function sh(e,t,n,r){return e=dr(22,e,r,t),e.elementType=fN,e.lanes=n,e.stateNode={isHidden:!1},e}function dm(e,t,n){return e=dr(6,e,null,t),e.lanes=n,e}function fm(e,t,n){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cx(e,t,n,r,i,a,o,l,u){return e=new WM(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=dr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gv(a),e}function HM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ls,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rP(e){if(!e)return ja;e=e._reactInternals;e:{if(ws(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(Ln(n))return rE(e,n,t)}return t}function iP(e,t,n,r,i,a,o,l,u){return e=cx(n,r,!0,e,i,a,o,l,u),e.context=rP(null),n=e.current,r=gn(),i=ya(n),a=_i(r,i),a.callback=t??null,ma(n,a,i),e.current.lanes=i,Eu(e,i,r),Mn(e,r),e}function oh(e,t,n,r){var i=t.current,a=gn(),o=ya(i);return n=rP(n),t.context===null?t.context=n:t.pendingContext=n,t=_i(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ma(i,t,o),e!==null&&(Cr(e,i,o,a),Yc(e,i,o)),o}function $d(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dx(e,t){Bw(e,t),(e=e.alternate)&&Bw(e,t)}function KM(){return null}var aP=typeof reportError=="function"?reportError:function(e){console.error(e)};function fx(e){this._internalRoot=e}lh.prototype.render=fx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));oh(e,t,null,null)};lh.prototype.unmount=fx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cs(function(){oh(null,e,null,null)}),t[Pi]=null}};function lh(e){this._internalRoot=e}lh.prototype.unstable_scheduleHydration=function(e){if(e){var t=LN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ra.length&&t!==0&&t<ra[n].priority;n++);ra.splice(n,0,e),n===0&&$N(e)}};function hx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function VM(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=$d(o);a.call(c)}}var o=iP(t,r,e,0,null,!1,!1,"",Uw);return e._reactRootContainer=o,e[Pi]=o.current,Ql(e.nodeType===8?e.parentNode:e),cs(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=$d(u);l.call(c)}}var u=cx(e,0,!1,null,null,!1,!1,"",Uw);return e._reactRootContainer=u,e[Pi]=u.current,Ql(e.nodeType===8?e.parentNode:e),cs(function(){oh(t,u,n,r)}),u}function ch(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=$d(o);l.call(u)}}oh(t,o,e,i)}else o=VM(n,t,e,i,r);return $d(o)}DN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kl(t.pendingLanes);n!==0&&(Cv(t,n|1),Mn(t,St()),!(Ne&6)&&(mo=St()+500,Pa()))}break;case 13:cs(function(){var r=Ti(e,1);if(r!==null){var i=gn();Cr(r,e,1,i)}}),dx(e,1)}};Iv=function(e){if(e.tag===13){var t=Ti(e,134217728);if(t!==null){var n=gn();Cr(t,e,134217728,n)}dx(e,134217728)}};RN=function(e){if(e.tag===13){var t=ya(e),n=Ti(e,t);if(n!==null){var r=gn();Cr(n,e,t,r)}dx(e,t)}};LN=function(){return ze};MN=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};xg=function(e,t,n){switch(t){case"input":if(fg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=eh(r);if(!i)throw Error(X(90));pN(r),fg(r,i)}}}break;case"textarea":gN(e,n);break;case"select":t=n.value,t!=null&&Zs(e,!!n.multiple,t,!1)}};jN=sx;_N=cs;var GM={usingClientEntryPoint:!1,Events:[Tu,Bs,eh,wN,kN,sx]},al={findFiberByHostInstance:Va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qM={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=EN(e),e===null?null:e.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||KM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{Xf=yc.inject(qM),ei=yc}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GM;Jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hx(t))throw Error(X(200));return HM(e,t,null,n)};Jn.createRoot=function(e,t){if(!hx(e))throw Error(X(299));var n=!1,r="",i=aP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cx(e,1,!1,null,null,n,!1,r,i),e[Pi]=t.current,Ql(e.nodeType===8?e.parentNode:e),new fx(t)};Jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=EN(t),e=e===null?null:e.stateNode,e};Jn.flushSync=function(e){return cs(e)};Jn.hydrate=function(e,t,n){if(!uh(t))throw Error(X(200));return ch(null,e,t,!0,n)};Jn.hydrateRoot=function(e,t,n){if(!hx(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=aP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=iP(t,null,e,1,n??null,i,!1,a,o),e[Pi]=t.current,Ql(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new lh(t)};Jn.render=function(e,t,n){if(!uh(t))throw Error(X(200));return ch(null,e,t,!1,n)};Jn.unmountComponentAtNode=function(e){if(!uh(e))throw Error(X(40));return e._reactRootContainer?(cs(function(){ch(null,null,e,!1,function(){e._reactRootContainer=null,e[Pi]=null})}),!0):!1};Jn.unstable_batchedUpdates=sx;Jn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!uh(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return ch(e,t,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function sP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sP)}catch(e){console.error(e)}}sP(),sN.exports=Jn;var dh=sN.exports,Ww=dh;ag.createRoot=Ww.createRoot,ag.hydrateRoot=Ww.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su.apply(this,arguments)}var la;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(la||(la={}));const Hw="popstate";function YM(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return Zg("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:zd(i)}return QM(t,n,null,e)}function yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function px(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XM(){return Math.random().toString(36).substr(2,8)}function Kw(e,t){return{usr:e.state,key:e.key,idx:t}}function Zg(e,t,n,r){return n===void 0&&(n=null),su({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Oo(t):t,{state:n,key:t&&t.key||r||XM()})}function zd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Oo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function QM(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=la.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(su({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=la.Pop;let x=d(),v=x==null?null:x-c;c=x,u&&u({action:l,location:y.location,delta:v})}function h(x,v){l=la.Push;let b=Zg(y.location,x,v);c=d()+1;let w=Kw(b,c),j=y.createHref(b);try{o.pushState(w,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(j)}a&&u&&u({action:l,location:y.location,delta:1})}function p(x,v){l=la.Replace;let b=Zg(y.location,x,v);c=d();let w=Kw(b,c),j=y.createHref(b);o.replaceState(w,"",j),a&&u&&u({action:l,location:y.location,delta:0})}function g(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof x=="string"?x:zd(x);return b=b.replace(/ $/,"%20"),yt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let y={get action(){return l},get location(){return e(i,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Hw,f),u=x,()=>{i.removeEventListener(Hw,f),u=null}},createHref(x){return t(i,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(x){return o.go(x)}};return y}var Vw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vw||(Vw={}));function ZM(e,t,n){return n===void 0&&(n="/"),JM(e,t,n)}function JM(e,t,n,r){let i=typeof t=="string"?Oo(t):t,a=go(i.pathname||"/",n);if(a==null)return null;let o=oP(e);e2(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=d2(a);l=u2(o[u],c)}return l}function oP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=xa([r,u.relativePath]),d=n.concat(u);a.children&&a.children.length>0&&(yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oP(a.children,t,d,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:o2(c,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of lP(a.path))i(a,o,u)}),t}function lP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=lP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function e2(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:l2(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const t2=/^:[\w-]+$/,n2=3,r2=2,i2=1,a2=10,s2=-2,Gw=e=>e==="*";function o2(e,t){let n=e.split("/"),r=n.length;return n.some(Gw)&&(r+=s2),t&&(r+=r2),n.filter(i=>!Gw(i)).reduce((i,a)=>i+(t2.test(a)?n2:a===""?i2:a2),r)}function l2(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function u2(e,t,n){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=Jg({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),h=u.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:xa([a,f.pathname]),pathnameBase:g2(xa([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=xa([a,f.pathnameBase]))}return o}function Jg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=c2(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let y=l[f]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:e}}function c2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),px(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function d2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return px(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function go(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const f2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h2=e=>f2.test(e);function p2(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Oo(e):e,a;if(n)if(h2(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),px(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=qw(n.substring(1),"/"):a=qw(n,t)}else a=t;return{pathname:a,search:y2(r),hash:v2(i)}}function qw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function mx(e,t){let n=m2(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gx(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Oo(e):(i=su({},e),yt(!i.pathname||!i.pathname.includes("?"),hm("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),hm("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),hm("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}l=f>=0?t[f]:"/"}let u=p2(i,l),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const xa=e=>e.join("/").replace(/\/\/+/g,"/"),g2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),y2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,v2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function x2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uP=["post","put","patch","delete"];new Set(uP);const b2=["get",...uP];new Set(b2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ou.apply(this,arguments)}const fh=m.createContext(null),cP=m.createContext(null),zi=m.createContext(null),hh=m.createContext(null),oi=m.createContext({outlet:null,matches:[],isDataRoute:!1}),dP=m.createContext(null);function w2(e,t){let{relative:n}=t===void 0?{}:t;Co()||yt(!1);let{basename:r,navigator:i}=m.useContext(zi),{hash:a,pathname:o,search:l}=ph(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:xa([r,o])),i.createHref({pathname:u,search:l,hash:a})}function Co(){return m.useContext(hh)!=null}function Ta(){return Co()||yt(!1),m.useContext(hh).location}function fP(e){m.useContext(zi).static||m.useLayoutEffect(e)}function Io(){let{isDataRoute:e}=m.useContext(oi);return e?L2():k2()}function k2(){Co()||yt(!1);let e=m.useContext(fh),{basename:t,future:n,navigator:r}=m.useContext(zi),{matches:i}=m.useContext(oi),{pathname:a}=Ta(),o=JSON.stringify(mx(i,n.v7_relativeSplatPath)),l=m.useRef(!1);return fP(()=>{l.current=!0}),m.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let f=gx(c,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:xa([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,o,a,e])}const j2=m.createContext(null);function _2(e){let t=m.useContext(oi).outlet;return t&&m.createElement(j2.Provider,{value:e},t)}function yx(){let{matches:e}=m.useContext(oi),t=e[e.length-1];return t?t.params:{}}function ph(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=m.useContext(zi),{matches:i}=m.useContext(oi),{pathname:a}=Ta(),o=JSON.stringify(mx(i,r.v7_relativeSplatPath));return m.useMemo(()=>gx(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function S2(e,t){return N2(e,t)}function N2(e,t,n,r){Co()||yt(!1);let{navigator:i}=m.useContext(zi),{matches:a}=m.useContext(oi),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Ta(),d;if(t){var f;let x=typeof t=="string"?Oo(t):t;u==="/"||(f=x.pathname)!=null&&f.startsWith(u)||yt(!1),d=x}else d=c;let h=d.pathname||"/",p=h;if(u!=="/"){let x=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=ZM(e,{pathname:p}),y=O2(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:xa([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:xa([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,n,r);return t&&y?m.createElement(hh.Provider,{value:{location:ou({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:la.Pop}},y):y}function E2(){let e=R2(),t=x2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:i},n):null,null)}const P2=m.createElement(E2,null);class T2 extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(oi.Provider,{value:this.props.routeContext},m.createElement(dP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A2(e){let{routeContext:t,match:n,children:r}=e,i=m.useContext(fh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(oi.Provider,{value:t},r)}function O2(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:p}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let p,g=!1,y=null,x=null;n&&(p=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||P2,u&&(c<0&&h===0?(M2("route-fallback"),g=!0,x=null):c===h&&(g=!0,x=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),b=()=>{let w;return p?w=y:g?w=x:f.route.Component?w=m.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,m.createElement(A2,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(T2,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var hP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hP||{}),pP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pP||{});function C2(e){let t=m.useContext(fh);return t||yt(!1),t}function I2(e){let t=m.useContext(cP);return t||yt(!1),t}function D2(e){let t=m.useContext(oi);return t||yt(!1),t}function mP(e){let t=D2(),n=t.matches[t.matches.length-1];return n.route.id||yt(!1),n.route.id}function R2(){var e;let t=m.useContext(dP),n=I2(),r=mP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function L2(){let{router:e}=C2(hP.UseNavigateStable),t=mP(pP.UseNavigateStable),n=m.useRef(!1);return fP(()=>{n.current=!0}),m.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ou({fromRouteId:t},a)))},[e,t])}const Yw={};function M2(e,t,n){Yw[e]||(Yw[e]=!0)}function $2(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sl(e){let{to:t,replace:n,state:r,relative:i}=e;Co()||yt(!1);let{future:a,static:o}=m.useContext(zi),{matches:l}=m.useContext(oi),{pathname:u}=Ta(),c=Io(),d=gx(t,mx(l,a.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(d);return m.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function z2(e){return _2(e.context)}function Xe(e){yt(!1)}function F2(e){let{basename:t="/",children:n=null,location:r,navigationType:i=la.Pop,navigator:a,static:o=!1,future:l}=e;Co()&&yt(!1);let u=t.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:u,navigator:a,static:o,future:ou({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=Oo(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=r,y=m.useMemo(()=>{let x=go(d,u);return x==null?null:{location:{pathname:x,search:f,hash:h,state:p,key:g},navigationType:i}},[u,d,f,h,p,g,i]);return y==null?null:m.createElement(zi.Provider,{value:c},m.createElement(hh.Provider,{children:n,value:y}))}function B2(e){let{children:t,location:n}=e;return S2(ey(t),n)}new Promise(()=>{});function ey(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,i)=>{if(!m.isValidElement(r))return;let a=[...t,i];if(r.type===m.Fragment){n.push.apply(n,ey(r.props.children,a));return}r.type!==Xe&&yt(!1),!r.props.index||!r.props.children||yt(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ey(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fd.apply(this,arguments)}function gP(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function U2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function W2(e,t){return e.button===0&&(!t||t==="_self")&&!U2(e)}function ty(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function H2(e,t){let n=ty(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}const K2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],G2="6";try{window.__reactRouterVersion=G2}catch{}const q2=m.createContext({isTransitioning:!1}),Y2="startTransition",Xw=iN[Y2];function X2(e){let{basename:t,children:n,future:r,window:i}=e,a=m.useRef();a.current==null&&(a.current=YM({window:i,v5Compat:!0}));let o=a.current,[l,u]=m.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=m.useCallback(f=>{c&&Xw?Xw(()=>u(f)):u(f)},[u,c]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>$2(r),[r]),m.createElement(F2,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Q2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=m.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:f}=t,h=gP(t,K2),{basename:p}=m.useContext(zi),g,y=!1;if(typeof c=="string"&&Z2.test(c)&&(g=c,Q2))try{let w=new URL(window.location.href),j=c.startsWith("//")?new URL(w.protocol+c):new URL(c),_=go(j.pathname,p);j.origin===w.origin&&_!=null?c=_+j.search+j.hash:y=!0}catch{}let x=w2(c,{relative:i}),v=e$(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:f});function b(w){r&&r(w),w.defaultPrevented||v(w)}return m.createElement("a",Fd({},h,{href:g||x,onClick:y||a?r:b,ref:n,target:u}))}),pm=m.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:l,to:u,viewTransition:c,children:d}=t,f=gP(t,V2),h=ph(u,{relative:f.relative}),p=Ta(),g=m.useContext(cP),{navigator:y,basename:x}=m.useContext(zi),v=g!=null&&t$(h)&&c===!0,b=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=p.pathname,j=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(w=w.toLowerCase(),j=j?j.toLowerCase():null,b=b.toLowerCase()),j&&x&&(j=go(j,x)||j);const _=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let k=w===b||!o&&w.startsWith(b)&&w.charAt(_)==="/",E=j!=null&&(j===b||!o&&j.startsWith(b)&&j.charAt(b.length)==="/"),A={isActive:k,isPending:E,isTransitioning:v},T=k?r:void 0,S;typeof a=="function"?S=a(A):S=[a,k?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(A):l;return m.createElement(xe,Fd({},f,{"aria-current":T,className:S,ref:n,style:P,to:u,viewTransition:c}),typeof d=="function"?d(A):d)});var ny;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ny||(ny={}));var Qw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qw||(Qw={}));function J2(e){let t=m.useContext(fh);return t||yt(!1),t}function e$(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,u=Io(),c=Ta(),d=ph(e,{relative:o});return m.useCallback(f=>{if(W2(f,n)){f.preventDefault();let h=r!==void 0?r:zd(c)===zd(d);u(e,{replace:h,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[c,u,d,r,i,n,e,a,o,l])}function mh(e){let t=m.useRef(ty(e)),n=m.useRef(!1),r=Ta(),i=m.useMemo(()=>H2(r.search,n.current?null:t.current),[r.search]),a=Io(),o=m.useCallback((l,u)=>{const c=ty(typeof l=="function"?l(i):l);n.current=!0,a("?"+c,u)},[a,i]);return[i,o]}function t$(e,t){t===void 0&&(t={});let n=m.useContext(q2);n==null&&yt(!1);let{basename:r}=J2(ny.useViewTransitionState),i=ph(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=go(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=go(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Jg(i.pathname,o)!=null||Jg(i.pathname,a)!=null}function ht({title:e,explanation:t,reasons:n=[],action:r,className:i=""}){return s.jsxs("div",{className:`empty-state ${i}`.trim(),children:[s.jsx("p",{className:"empty-state-title",children:e}),r&&s.jsx("p",{className:"empty-state-action",children:r}),t&&s.jsx("p",{className:"empty-state-explanation",children:t}),n.length>0&&s.jsxs("p",{className:"empty-state-reasons",children:[s.jsx("strong",{children:"Common reasons:"})," ",n.join(" ")]})]})}function Ot({message:e="Loading",className:t=""}){return s.jsx("div",{className:`loading-state ${t}`.trim(),role:"status","aria-live":"polite",children:s.jsx("p",{className:"loading-state-message",children:e})})}function yP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=yP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Pe(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=yP(e))&&(r&&(r+=" "),r+=t);return r}var n$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vx(e){if(typeof e!="string")return!1;var t=n$;return t.includes(e)}var r$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],i$=new Set(r$);function vP(e){return typeof e!="string"?!1:i$.has(e)}function xP(e){return typeof e=="string"&&e.startsWith("data-")}function vn(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(vP(n)||xP(n))&&(t[n]=e[n]);return t}function Do(e){if(e==null)return null;if(m.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vn(t)}return typeof e=="object"&&!Array.isArray(e)?vn(e):null}function Jt(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(vP(n)||xP(n)||vx(n))&&(t[n]=e[n]);return t}function a$(e){return e==null?null:m.isValidElement(e)?Jt(e.props):typeof e=="object"&&!Array.isArray(e)?Jt(e):null}var s$=["children","width","height","viewBox","className","style","title","desc"];function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ry.apply(null,arguments)}function o$(e,t){if(e==null)return{};var n,r,i=l$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var xx=m.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:l,title:u,desc:c}=e,d=o$(e,s$),f=a||{width:r,height:i,x:0,y:0},h=Pe("recharts-surface",o);return m.createElement("svg",ry({},Jt(d),{className:h,width:r,height:i,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),m.createElement("title",null,u),m.createElement("desc",null,c),n)}),u$=["children","className"];function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iy.apply(null,arguments)}function c$(e,t){if(e==null)return{};var n,r,i=d$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jt=m.forwardRef((e,t)=>{var{children:n,className:r}=e,i=c$(e,u$),a=Pe("recharts-layer",r);return m.createElement("g",iy({className:a},Jt(i),{ref:t}),n)}),bP=m.createContext(null),f$=()=>m.useContext(bP);function Ze(e){return function(){return e}}const wP=Math.cos,Bd=Math.sin,Fr=Math.sqrt,Ud=Math.PI,gh=2*Ud,ay=Math.PI,sy=2*ay,Ua=1e-6,h$=sy-Ua;function kP(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function p$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return kP;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class m${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?kP:p$(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,u=r-t,c=i-n,d=o-t,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Ua)if(!(Math.abs(f*u-c*d)>Ua)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,g=i-l,y=u*u+c*c,x=p*p+g*g,v=Math.sqrt(y),b=Math.sqrt(h),w=a*Math.tan((ay-Math.acos((y+h-x)/(2*v*b)))/2),j=w/b,_=w/v;Math.abs(j-1)>Ua&&this._append`L${t+j*d},${n+j*f}`,this._append`A${a},${a},0,0,${+(f*p>d*g)},${this._x1=t+_*u},${this._y1=n+_*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),c=t+l,d=n+u,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Ua||Math.abs(this._y1-d)>Ua)&&this._append`L${c},${d}`,r&&(h<0&&(h=h%sy+sy),h>h$?this._append`A${r},${r},0,1,${f},${t-l},${n-u}A${r},${r},0,1,${f},${this._x1=c},${this._y1=d}`:h>Ua&&this._append`A${r},${r},0,${+(h>=ay)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new m$(t)}function wx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jP(e){this._context=e}jP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yh(e){return new jP(e)}function _P(e){return e[0]}function SP(e){return e[1]}function NP(e,t){var n=Ze(!0),r=null,i=yh,a=null,o=bx(l);e=typeof e=="function"?e:e===void 0?_P:Ze(e),t=typeof t=="function"?t:t===void 0?SP:Ze(t);function l(u){var c,d=(u=wx(u)).length,f,h=!1,p;for(r==null&&(a=i(p=o())),c=0;c<=d;++c)!(c<d&&n(f=u[c],c,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,c,u),+t(f,c,u));if(p)return a=null,p+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Ze(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Ze(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ze(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function vc(e,t,n){var r=null,i=Ze(!0),a=null,o=yh,l=null,u=bx(c);e=typeof e=="function"?e:e===void 0?_P:Ze(+e),t=typeof t=="function"?t:Ze(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?SP:Ze(+n);function c(f){var h,p,g,y=(f=wx(f)).length,x,v=!1,b,w=new Array(y),j=new Array(y);for(a==null&&(l=o(b=u())),h=0;h<=y;++h){if(!(h<y&&i(x=f[h],h,f))===v)if(v=!v)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=p;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}v&&(w[h]=+e(x,h,f),j[h]=+t(x,h,f),l.point(r?+r(x,h,f):w[h],n?+n(x,h,f):j[h]))}if(b)return l=null,b+""||null}function d(){return NP().defined(i).curve(o).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ze(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ze(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ze(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ze(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ze(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ze(+f),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ze(!!f),c):i},c.curve=function(f){return arguments.length?(o=f,a!=null&&(l=o(a)),c):o},c.context=function(f){return arguments.length?(f==null?a=l=null:l=o(a=f),c):a},c}class EP{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function g$(e){return new EP(e,!0)}function y$(e){return new EP(e,!1)}const kx={draw(e,t){const n=Fr(t/Ud);e.moveTo(n,0),e.arc(0,0,n,0,gh)}},v$={draw(e,t){const n=Fr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},PP=Fr(1/3),x$=PP*2,b$={draw(e,t){const n=Fr(t/x$),r=n*PP;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},w$={draw(e,t){const n=Fr(t),r=-n/2;e.rect(r,r,n,n)}},k$=.8908130915292852,TP=Bd(Ud/10)/Bd(7*Ud/10),j$=Bd(gh/10)*TP,_$=-wP(gh/10)*TP,S$={draw(e,t){const n=Fr(t*k$),r=j$*n,i=_$*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=gh*a/5,l=wP(o),u=Bd(o);e.lineTo(u*n,-l*n),e.lineTo(l*r-u*i,u*r+l*i)}e.closePath()}},mm=Fr(3),N$={draw(e,t){const n=-Fr(t/(mm*3));e.moveTo(0,n*2),e.lineTo(-mm*n,-n),e.lineTo(mm*n,-n),e.closePath()}},rr=-.5,ir=Fr(3)/2,oy=1/Fr(12),E$=(oy/2+1)*3,P$={draw(e,t){const n=Fr(t/E$),r=n/2,i=n*oy,a=r,o=n*oy+n,l=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(l,u),e.lineTo(rr*r-ir*i,ir*r+rr*i),e.lineTo(rr*a-ir*o,ir*a+rr*o),e.lineTo(rr*l-ir*u,ir*l+rr*u),e.lineTo(rr*r+ir*i,rr*i-ir*r),e.lineTo(rr*a+ir*o,rr*o-ir*a),e.lineTo(rr*l+ir*u,rr*u-ir*l),e.closePath()}};function T$(e,t){let n=null,r=bx(i);e=typeof e=="function"?e:Ze(e||kx),t=typeof t=="function"?t:Ze(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ze(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ze(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Wd(){}function Hd(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function AP(e){this._context=e}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A$(e){return new AP(e)}function OP(e){this._context=e}OP.prototype={areaStart:Wd,areaEnd:Wd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Hd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function O$(e){return new OP(e)}function CP(e){this._context=e}CP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Hd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C$(e){return new CP(e)}function IP(e){this._context=e}IP.prototype={areaStart:Wd,areaEnd:Wd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function I$(e){return new IP(e)}function Zw(e){return e<0?-1:1}function Jw(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(Zw(a)+Zw(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function ek(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gm(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,i+l*t,a-l,o-l*n,a,o)}function Kd(e){this._context=e}Kd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gm(this,this._t0,ek(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gm(this,ek(this,n=Jw(this,e,t)),n);break;default:gm(this,this._t0,n=Jw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function DP(e){this._context=new RP(e)}(DP.prototype=Object.create(Kd.prototype)).point=function(e,t){Kd.prototype.point.call(this,t,e)};function RP(e){this._context=e}RP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function D$(e){return new Kd(e)}function R$(e){return new DP(e)}function LP(e){this._context=e}LP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=tk(e),i=tk(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tk(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function L$(e){return new LP(e)}function vh(e,t){this._context=e,this._t=t}vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function M$(e){return new vh(e,.5)}function $$(e){return new vh(e,0)}function z$(e){return new vh(e,1)}function ds(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ly(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function F$(e,t){return e[t]}function B$(e){const t=[];return t.key=e,t}function U$(){var e=Ze([]),t=ly,n=ds,r=F$;function i(a){var o=Array.from(e.apply(this,arguments),B$),l,u=o.length,c=-1,d;for(const f of a)for(l=0,++c;l<u;++l)(o[l][c]=[0,+r(f,o[l].key,c,a)]).data=f;for(l=0,d=wx(t(o));l<u;++l)o[d[l]].index=l;return n(o,d),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ze(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ze(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?ly:typeof a=="function"?a:Ze(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??ds,i):n},i}function W$(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}ds(e,t)}}function H$(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}ds(e,t)}}function K$(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,u=0,c=0;l<o;++l){for(var d=e[t[l]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,g=0;g<l;++g){var y=e[t[g]],x=y[r][1]||0,v=y[r-1][1]||0;p+=x-v}u+=f,c+=p*f}i[r-1][1]+=i[r-1][0]=n,u&&(n-=c/u)}i[r-1][1]+=i[r-1][0]=n,ds(e,t)}}var xh={},MP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(MP);var jx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(jx);var bh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(bh);var wh={},$P={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})($P);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$P,n=bh;function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,u="",c="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const f=i[l];c?f==="\\"&&l+1<o?(l++,u+=i[l]):f===c?c="":u+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,a.push(u),u=""):u+=f:f==="["?(d=!0,u&&(a.push(u),u="")):f==="."?u&&(a.push(u),u=""):u+=f,l++}return u&&a.push(u),a}e.toPath=r})(wh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MP,n=jx,r=bh,i=wh;function a(l,u,c){if(l==null)return c;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return c;const d=l[u];return d===void 0?n.isDeepKey(u)?a(l,i.toPath(u),c):c:d}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const d=l[u];return d===void 0?c:d}default:{if(Array.isArray(u))return o(l,u,c);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return c;const d=l[u];return d===void 0?c:d}}}function o(l,u,c){if(u.length===0)return c;let d=l;for(let f=0;f<u.length;f++){if(d==null||t.isUnsafeProperty(u[f]))return c;d=d[u[f]]}return d===void 0?c:d}e.get=a})(xh);var V$=xh.get;const yo=zr(V$);var G$=4;function ua(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G$,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((i,a,o)=>{var l=n[o-1];return typeof l=="string"?i+l+a:l!==void 0?i+ua(l)+a:i+a},"")}var On=e=>e===0?0:e>0?1:-1,Lr=e=>typeof e=="number"&&e!=+e,fs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ae=e=>(typeof e=="number"||e instanceof Number)&&!Lr(e),gr=e=>ae(e)||typeof e=="string",q$=0,lu=e=>{var t=++q$;return"".concat(e||"").concat(t)},Mr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ae(t)&&typeof t!="string")return r;var a;if(fs(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return Lr(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},zP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function Ee(e,t,n){return ae(e)&&ae(t)?ua(e+n*(t-e)):t}function FP(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):yo(r,t))===n)}var Y$=e=>{for(var t=e.length,n=0,r=0,i=0,a=0,o=1/0,l=-1/0,u=0,c=0,d=0;d<t;d++){var f,h;u=((f=e[d])===null||f===void 0?void 0:f.cx)||0,c=((h=e[d])===null||h===void 0?void 0:h.cy)||0,n+=u,r+=c,i+=u*c,a+=u*u,o=Math.min(o,u),l=Math.max(l,u)}var p=t*a!==n*n?(t*i-n*r)/(t*a-n*n):0;return{xmin:o,xmax:l,a:p,b:(r-p*n)/t}},Me=e=>e===null||typeof e>"u",Ou=e=>Me(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Cn(e){return e!=null}function Aa(){}var X$=["type","size","sizeType"];function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uy.apply(null,arguments)}function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(n),!0).forEach(function(r){Q$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q$(e,t,n){return(t=Z$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z$(e){var t=J$(e,"string");return typeof t=="symbol"?t:t+""}function J$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ez(e,t){if(e==null)return{};var n,r,i=tz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BP={symbolCircle:kx,symbolCross:v$,symbolDiamond:b$,symbolSquare:w$,symbolStar:S$,symbolTriangle:N$,symbolWye:P$},nz=Math.PI/180,rz=e=>{var t="symbol".concat(Ou(e));return BP[t]||kx},iz=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*nz;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},az=(e,t)=>{BP["symbol".concat(Ou(e))]=t},kh=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=ez(e,X$),a=rk(rk({},i),{},{type:t,size:n,sizeType:r}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var h=rz(o),p=T$().type(h).size(iz(n,r,o)),g=p();if(g!==null)return g},{className:u,cx:c,cy:d}=a,f=Jt(a);return ae(c)&&ae(d)&&ae(n)?m.createElement("path",uy({},f,{className:Pe("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(d,")"),d:l()})):null};kh.registerSymbol=az;var UP=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,_x=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(m.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{vx(i)&&(r[i]=a=>n[i](n,a))}),r},sz=(e,t,n)=>r=>(e(t,n,r),null),Cu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];vx(i)&&typeof a=="function"&&(r||(r={}),r[i]=sz(a,t,n))}),r},oz=e=>Array.isArray(e)&&e.length>0;function ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(n),!0).forEach(function(r){uz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uz(e,t,n){return(t=cz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _t(e,t){var n=lz({},e),r=t,i=Object.keys(t),a=i.reduce((o,l)=>(o[l]===void 0&&r[l]!==void 0&&(o[l]=r[l]),o),n);return a}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vd.apply(null,arguments)}function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(n),!0).forEach(function(r){hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hz(e,t,n){return(t=pz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sr=32,gz={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function yz(e){var{data:t,iconType:n,inactiveColor:r}=e,i=sr/2,a=sr/6,o=sr/3,l=t.inactive?r:t.color,u=n??t.type;if(u==="none")return null;if(u==="plainline"){var c;return m.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(c=t.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:sr,y2:i,className:"recharts-legend-icon"})}if(u==="line")return m.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(sr,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return m.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(sr/8,"h").concat(sr,"v").concat(sr*3/4,"h").concat(-sr,"z"),className:"recharts-legend-icon"});if(m.isValidElement(t.legendIcon)){var d=fz({},t);return delete d.legendIcon,m.cloneElement(t.legendIcon,d)}return m.createElement(kh,{fill:l,cx:i,cy:i,size:sr,sizeType:"diameter",type:u})}function vz(e){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:o}=e,l={x:0,y:0,width:sr,height:sr},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||i,p=Pe({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?a:d.color,y=h?h(d.value,d,f):d.value;return m.createElement("li",Vd({className:p,style:u,key:"legend-item-".concat(f)},Cu(e,d,f)),m.createElement(xx,{width:n,height:n,viewBox:l,style:c,"aria-label":"".concat(y," legend icon")},m.createElement(yz,{data:d,iconType:o,inactiveColor:a})),m.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var xz=e=>{var t=_t(e,gz),{payload:n,layout:r,align:i}=t;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return m.createElement("ul",{className:"recharts-default-legend",style:a},m.createElement(vz,Vd({},t,{payload:n})))},WP={},HP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],l=r(o,a,n);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})(HP);var KP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}e.ary=t})(KP);var Sx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Sx);var VP={},jh={},GP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(GP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GP;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(jh);var qP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(qP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jh,n=qP;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(VP);var YP={},XP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xh;function n(r){return function(i){return t.get(i,r)}}e.property=n})(XP);var QP={},Nx={},ZP={},Ex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Ex);var Px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Px);var Tx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.isEqualsSameValueZero=t})(Tx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ex,n=Px,r=Tx;function i(d,f,h){return typeof h!="function"?i(d,f,()=>{}):a(d,f,function p(g,y,x,v,b,w){const j=h(g,y,x,v,b,w);return j!==void 0?!!j:a(g,y,p,w)},new Map)}function a(d,f,h,p){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,h,p);case"function":return Object.keys(f).length>0?a(d,{...f},h,p):r.isEqualsSameValueZero(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:r.isEqualsSameValueZero(d,f)}}function o(d,f,h,p){if(f==null)return!0;if(Array.isArray(f))return u(d,f,h,p);if(f instanceof Map)return l(d,f,h,p);if(f instanceof Set)return c(d,f,h,p);const g=Object.keys(f);if(d==null||n.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(p!=null&&p.has(f))return p.get(f)===d;p==null||p.set(f,d);try{for(let y=0;y<g.length;y++){const x=g[y];if(!n.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!h(d[x],f[x],x,d,f,p))return!1}return!0}finally{p==null||p.delete(f)}}function l(d,f,h,p){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const x=d.get(g);if(h(x,y,g,d,f,p)===!1)return!1}return!0}function u(d,f,h,p){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const x=f[y];let v=!1;for(let b=0;b<d.length;b++){if(g.has(b))continue;const w=d[b];let j=!1;if(h(w,x,y,d,f,p)&&(j=!0),j){g.add(b),v=!0;break}}if(!v)return!1}return!0}function c(d,f,h,p){return f.size===0?!0:d instanceof Set?u([...d],[...f],h,p):!1}e.isMatchWith=i,e.isSetMatch=c})(ZP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP;function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Nx);var JP={},Ax={},eT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(eT);var _h={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(_h);var Ox={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",u="[object Map]",c="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",y="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",_="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",A="[object BigInt64Array]",T="[object Float32Array]",S="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=y,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=T,e.float64ArrayTag=S,e.functionTag=f,e.int16ArrayTag=k,e.int32ArrayTag=E,e.int8ArrayTag=_,e.mapTag=u,e.numberTag=r,e.objectTag=p,e.regexpTag=t,e.setTag=c,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=v})(Ox);var tT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(tT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eT,n=_h,r=Ox,i=Px,a=tT;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,p=new Map,g=void 0){const y=g==null?void 0:g(d,f,h,p);if(y!==void 0)return y;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const x=new Array(d.length);p.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,h,p,g);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;p.set(d,x);for(const[v,b]of d)x.set(v,l(b,v,h,p,g));return x}if(d instanceof Set){const x=new Set;p.set(d,x);for(const v of d)x.add(l(v,void 0,h,p,g));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,h,p,g);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,x),u(x,d,h,p,g),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return p.set(d,x),u(x,d,h,p,g),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return p.set(d,x),u(x,d,h,p,g),x}if(d instanceof Error){const x=new d.constructor;return p.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,u(x,d,h,p,g),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return p.set(d,x),u(x,d,h,p,g),x}if(d instanceof Number){const x=new Number(d.valueOf());return p.set(d,x),u(x,d,h,p,g),x}if(d instanceof String){const x=new String(d.valueOf());return p.set(d,x),u(x,d,h,p,g),x}if(typeof d=="object"&&c(d)){const x=Object.create(Object.getPrototypeOf(d));return p.set(d,x),u(x,d,h,p,g),x}return d}function u(d,f,h=d,p,g){const y=[...Object.keys(f),...t.getSymbols(f)];for(let x=0;x<y.length;x++){const v=y[x],b=Object.getOwnPropertyDescriptor(d,v);(b==null||b.writable)&&(d[v]=l(f[v],v,h,p,g))}}function c(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=u})(Ax);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ax;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(JP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nx,n=JP;function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(QP);var nT={},rT={},iT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ax,n=_h,r=Ox;function i(a,o){return t.cloneDeepWith(a,(l,u,c,d)=>{const f=o==null?void 0:o(l,u,c,d);if(f!==void 0)return f;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const h={};return d.set(a,h),t.copyProperties(h,a,c,d),h}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(h,a),h}case r.argumentsTag:{const h={};return t.copyProperties(h,a),h.length=a.length,h[Symbol.iterator]=a[Symbol.iterator],h}default:return}}})}e.cloneDeepWith=i})(iT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iT;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(rT);var aT={},Cx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Cx);var sT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_h;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(sT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jx,n=Cx,r=sT,i=wh;function a(o,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?u=i.toPath(l):u=[l],u.length===0)return!1;let c=o;for(let d=0;d<u.length;d++){const f=u[d];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=a})(aT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nx,n=bh,r=rT,i=xh,a=aT;function o(l,u){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(c){const d=i.get(c,l);return d===void 0?a.has(c,l):u===void 0?d===void 0:t.isMatch(d,u)}}e.matchesProperty=o})(nT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sx,n=XP,r=QP,i=nT;function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(YP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP,n=KP,r=Sx,i=VP,a=YP;function o(l,u=r.identity){return i.isArrayLikeObject(l)?t.uniqBy(Array.from(l),n.ary(a.iteratee(u),1)):[]}e.uniqBy=o})(WP);var bz=WP.uniqBy;const sk=zr(bz);function oT(e,t,n){return t===!0?sk(e,n):typeof t=="function"?sk(e,t):e}var lT={exports:{}},uT={},cT={exports:{}},dT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=m;function wz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kz=typeof Object.is=="function"?Object.is:wz,jz=vo.useState,_z=vo.useEffect,Sz=vo.useLayoutEffect,Nz=vo.useDebugValue;function Ez(e,t){var n=t(),r=jz({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return Sz(function(){i.value=n,i.getSnapshot=t,ym(i)&&a({inst:i})},[e,n,t]),_z(function(){return ym(i)&&a({inst:i}),e(function(){ym(i)&&a({inst:i})})},[e]),Nz(n),n}function ym(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kz(e,n)}catch{return!0}}function Pz(e,t){return t()}var Tz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pz:Ez;dT.useSyncExternalStore=vo.useSyncExternalStore!==void 0?vo.useSyncExternalStore:Tz;cT.exports=dT;var Az=cT.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=m,Oz=Az;function Cz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Iz=typeof Object.is=="function"?Object.is:Cz,Dz=Oz.useSyncExternalStore,Rz=Sh.useRef,Lz=Sh.useEffect,Mz=Sh.useMemo,$z=Sh.useDebugValue;uT.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=Rz(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Mz(function(){function u(p){if(!c){if(c=!0,d=p,p=r(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return f=g}return f=p}if(g=f,Iz(d,p))return g;var y=r(p);return i!==void 0&&i(g,y)?(d=p,g):(d=p,f=y)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,r,i]);var l=Dz(e,a[0],a[1]);return Lz(function(){o.hasValue=!0,o.value=l},[l]),$z(l),l};lT.exports=uT;var zz=lT.exports,Ix=m.createContext(null),Fz=e=>e,dt=()=>{var e=m.useContext(Ix);return e?e.store.dispatch:Fz},nd=()=>{},Bz=()=>nd,Uz=(e,t)=>e===t;function le(e){var t=m.useContext(Ix),n=m.useMemo(()=>t?r=>{if(r!=null)return e(r)}:nd,[t,e]);return zz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Bz,t?t.store.getState:nd,t?t.store.getState:nd,n,Uz)}function Wz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Hz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Kz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var ok=e=>Array.isArray(e)?e:[e];function Vz(e){const t=Array.isArray(e[0])?e[0]:e;return Kz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Gz(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var qz=class{constructor(e){this.value=e}deref(){return this.value}},Yz=typeof WeakRef<"u"?WeakRef:qz,Xz=0,lk=1;function xc(){return{s:Xz,v:void 0,o:null,p:null}}function fT(e,t={}){let n=xc();const{resultEqualityCheck:r}=t;let i,a=0;function o(){var f;let l=n;const{length:u}=arguments;for(let h=0,p=u;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const x=y.get(g);x===void 0?(l=xc(),y.set(g,l)):l=x}else{let y=l.p;y===null&&(l.p=y=new Map);const x=y.get(g);x===void 0?(l=xc(),y.set(g,l)):l=x}}const c=l;let d;if(l.s===lk)d=l.v;else if(d=e.apply(null,arguments),a++,r){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&r(h,d)&&(d=h,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Yz(d):d}return c.s=lk,c.v=d,d}return o.clearCache=()=>{n=xc(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Qz(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,l,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),Wz(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...u},{memoize:f,memoizeOptions:h=[],argsMemoize:p=fT,argsMemoizeOptions:g=[]}=d,y=ok(h),x=ok(g),v=Vz(i),b=f(function(){return a++,c.apply(null,arguments)},...y),w=p(function(){o++;const _=Gz(v,arguments);return l=b.apply(null,_),l},...x);return Object.assign(w,{resultFunc:c,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var F=Qz(fT),Zz=Object.assign((e,t=F)=>{Hz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,l,u)=>(o[n[u]]=l,o),{}))},{withTypes:()=>Zz}),hT={},pT={},mT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),l=t(i);if(o===l&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};e.compareValues=n})(mT);var gT={},Dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Dx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dx,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(gT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mT,n=gT,r=wh;function i(a,o,l,u){if(a==null)return[];l=u?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const c=(p,g)=>{let y=p;for(let x=0;x<g.length&&y!=null;++x)y=y[g[x]];return y},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:c(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?c(g,p):typeof g=="object"?g[p]:g,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||n.isKey(p)?p:{key:p,path:r.toPath(p)}));return a.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let y=0;y<f.length;y++){const x=t.compareValues(p.criteria[y],g.criteria[y],l[y]);if(x!==0)return x}return 0}).map(p=>p.original)}e.orderBy=i})(pT);var yT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(l,u)=>{for(let c=0;c<l.length;c++){const d=l[c];Array.isArray(d)&&u<a?o(d,u+1):i.push(d)}};return o(n,0),i}e.flatten=t})(yT);var Rx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cx,n=jh,r=Ex,i=Tx;function a(o,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&t.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.isEqualsSameValueZero(u[l],o):!1}e.isIterateeCall=a})(Rx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pT,n=yT,r=Rx;function i(a,...o){const l=o.length;return l>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(hT);var Jz=hT.sortBy;const Nh=zr(Jz);var vT=e=>e.legend.settings,eF=e=>e.legend.size,tF=e=>e.legend.payload,nF=F([tF,vT],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Nh(r,n):r});function rF(){return le(nF)}var bc=1;function xT(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=m.useState({height:0,left:0,top:0,width:0}),r=m.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>bc||Math.abs(o.left-t.left)>bc||Math.abs(o.top-t.top)>bc||Math.abs(o.width-t.width)>bc)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Gt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var iF=typeof Symbol=="function"&&Symbol.observable||"@@observable",uk=iF,vm=()=>Math.random().toString(36).substring(7).split("").join("."),aF={INIT:`@@redux/INIT${vm()}`,REPLACE:`@@redux/REPLACE${vm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vm()}`},Gd=aF;function Lx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bT(e,t,n){if(typeof e!="function")throw new Error(Gt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Gt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Gt(1));return n(bT)(e,t)}let r=e,i=t,a=new Map,o=a,l=0,u=!1;function c(){o===a&&(o=new Map,a.forEach((x,v)=>{o.set(v,x)}))}function d(){if(u)throw new Error(Gt(3));return i}function f(x){if(typeof x!="function")throw new Error(Gt(4));if(u)throw new Error(Gt(5));let v=!0;c();const b=l++;return o.set(b,x),function(){if(v){if(u)throw new Error(Gt(6));v=!1,c(),o.delete(b),a=null}}}function h(x){if(!Lx(x))throw new Error(Gt(7));if(typeof x.type>"u")throw new Error(Gt(8));if(typeof x.type!="string")throw new Error(Gt(17));if(u)throw new Error(Gt(9));try{u=!0,i=r(i,x)}finally{u=!1}return(a=o).forEach(b=>{b()}),x}function p(x){if(typeof x!="function")throw new Error(Gt(10));r=x,h({type:Gd.REPLACE})}function g(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Gt(11));function b(){const j=v;j.next&&j.next(d())}return b(),{unsubscribe:x(b)}},[uk](){return this}}}return h({type:Gd.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[uk]:g}}function sF(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Gd.INIT})>"u")throw new Error(Gt(12));if(typeof n(void 0,{type:Gd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gt(13))})}function wT(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{sF(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let u=!1;const c={};for(let d=0;d<r.length;d++){const f=r[d],h=n[f],p=o[f],g=h(p,l);if(typeof g>"u")throw l&&l.type,new Error(Gt(14));c[f]=g,u=u||g!==p}return u=u||r.length!==Object.keys(o).length,u?c:o}}function qd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function oF(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(Gt(15))};const o={getState:i.getState,dispatch:(u,...c)=>a(u,...c)},l=e.map(u=>u(o));return a=qd(...l)(i.dispatch),{...i,dispatch:a}}}function kT(e){return Lx(e)&&"type"in e&&typeof e.type=="string"}var jT=Symbol.for("immer-nothing"),ck=Symbol.for("immer-draftable"),xn=Symbol.for("immer-state");function Er(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vn=Object,xo=Vn.getPrototypeOf,Yd="constructor",Eh="prototype",cy="configurable",Xd="enumerable",rd="writable",uu="value",Oi=e=>!!e&&!!e[xn];function $r(e){var t;return e?_T(e)||Th(e)||!!e[ck]||!!((t=e[Yd])!=null&&t[ck])||Ah(e)||Oh(e):!1}var lF=Vn[Eh][Yd].toString(),dk=new WeakMap;function _T(e){if(!e||!Mx(e))return!1;const t=xo(e);if(t===null||t===Vn[Eh])return!0;const n=Vn.hasOwnProperty.call(t,Yd)&&t[Yd];if(n===Object)return!0;if(!Is(n))return!1;let r=dk.get(n);return r===void 0&&(r=Function.toString.call(n),dk.set(n,r)),r===lF}function Ph(e,t,n=!0){Iu(e)===0?(n?Reflect.ownKeys(e):Vn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Iu(e){const t=e[xn];return t?t.type_:Th(e)?1:Ah(e)?2:Oh(e)?3:0}var fk=(e,t,n=Iu(e))=>n===2?e.has(t):Vn[Eh].hasOwnProperty.call(e,t),dy=(e,t,n=Iu(e))=>n===2?e.get(t):e[t],Qd=(e,t,n,r=Iu(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function uF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Th=Array.isArray,Ah=e=>e instanceof Map,Oh=e=>e instanceof Set,Mx=e=>typeof e=="object",Is=e=>typeof e=="function",xm=e=>typeof e=="boolean";function cF(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var yi=e=>e.copy_||e.base_,$x=e=>e.modified_?e.copy_:e.base_;function fy(e,t){if(Ah(e))return new Map(e);if(Oh(e))return new Set(e);if(Th(e))return Array[Eh].slice.call(e);const n=_T(e);if(t===!0||t==="class_only"&&!n){const r=Vn.getOwnPropertyDescriptors(e);delete r[xn];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l[rd]===!1&&(l[rd]=!0,l[cy]=!0),(l.get||l.set)&&(r[o]={[cy]:!0,[rd]:!0,[Xd]:l[Xd],[uu]:e[o]})}return Vn.create(xo(e),r)}else{const r=xo(e);if(r!==null&&n)return{...e};const i=Vn.create(r);return Vn.assign(i,e)}}function zx(e,t=!1){return Ch(e)||Oi(e)||!$r(e)||(Iu(e)>1&&Vn.defineProperties(e,{set:wc,add:wc,clear:wc,delete:wc}),Vn.freeze(e),t&&Ph(e,(n,r)=>{zx(r,!0)},!1)),e}function dF(){Er(2)}var wc={[uu]:dF};function Ch(e){return e===null||!Mx(e)?!0:Vn.isFrozen(e)}var Zd="MapSet",hy="Patches",hk="ArrayMethods",ST={};function hs(e){const t=ST[e];return t||Er(0,e),t}var pk=e=>!!ST[e],cu,NT=()=>cu,fF=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:pk(Zd)?hs(Zd):void 0,arrayMethodsPlugin_:pk(hk)?hs(hk):void 0});function mk(e,t){t&&(e.patchPlugin_=hs(hy),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function py(e){my(e),e.drafts_.forEach(hF),e.drafts_=null}function my(e){e===cu&&(cu=e.parent_)}var gk=e=>cu=fF(cu,e);function hF(e){const t=e[xn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[xn].modified_&&(py(t),Er(4)),$r(e)&&(e=vk(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[xn].base_,e,t)}else e=vk(t,n);return pF(t,e,!0),py(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jT?e:void 0}function vk(e,t){if(Ch(t))return t;const n=t[xn];if(!n)return Jd(t,e.handledSet_,e);if(!Ih(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);TT(n,e)}return n.copy_}function pF(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zx(t,n)}function ET(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ih=(e,t)=>e.scope_===t,mF=[];function PT(e,t,n,r){const i=yi(e),a=e.type_;if(r!==void 0&&dy(i,r,a)===t){Qd(i,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Ph(i,(u,c)=>{if(Oi(c)){const d=l.get(c)||[];d.push(u),l.set(c,d)}})}const o=e.draftLocations_.get(t)??mF;for(const l of o)Qd(i,l,n,a)}function gF(e,t,n){e.callbacks_.push(function(i){var l;const a=t;if(!a||!Ih(a,i))return;(l=i.mapSetPlugin_)==null||l.fixSetContents(a);const o=$x(a);PT(e,a.draft_??a,o,n),TT(a,i)})}function TT(e,t){var r;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((r=e.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}ET(e)}}function yF(e,t,n){const{scope_:r}=e;if(Oi(n)){const i=n[xn];Ih(i,r)&&i.callbacks_.push(function(){id(e);const o=$x(i);PT(e,n,o,t)})}else $r(n)&&e.callbacks_.push(function(){const a=yi(e);e.type_===3?a.has(n)&&Jd(n,r.handledSet_,r):dy(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Jd(dy(e.copy_,t,e.type_),r.handledSet_,r)})}function Jd(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Oi(e)||t.has(e)||!$r(e)||Ch(e)||(t.add(e),Ph(e,(r,i)=>{if(Oi(i)){const a=i[xn];if(Ih(a,n)){const o=$x(a);Qd(e,r,o,e.type_),ET(a)}}else $r(i)&&Jd(i,t,n)})),e}function vF(e,t){const n=Th(e),r={type_:n?1:0,scope_:t?t.scope_:NT(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=ef;n&&(i=[r],a=du);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,[l,r]}var ef={get(e,t){if(t===xn)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n!=null&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=yi(e);if(!fk(i,t,e.type_))return xF(e,i,t);const a=i[t];if(e.finalized_||!$r(a)||r&&e.operationMethod&&(n!=null&&n.isMutatingArrayMethod(e.operationMethod))&&cF(t))return a;if(a===bm(e.base_,t)){id(e);const o=e.type_===1?+t:t,l=yy(e.scope_,a,e,o);return e.copy_[o]=l}return a},has(e,t){return t in yi(e)},ownKeys(e){return Reflect.ownKeys(yi(e))},set(e,t,n){const r=AT(yi(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=bm(yi(e),t),a=i==null?void 0:i[xn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(uF(n,i)&&(n!==void 0||fk(e.base_,t,e.type_)))return!0;id(e),gy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),yF(e,t,n)),!0},deleteProperty(e,t){return id(e),bm(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),gy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=yi(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[rd]:!0,[cy]:e.type_!==1||t!=="length",[Xd]:r[Xd],[uu]:n[t]}},defineProperty(){Er(11)},getPrototypeOf(e){return xo(e.base_)},setPrototypeOf(){Er(12)}},du={};for(let e in ef){let t=ef[e];du[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}du.deleteProperty=function(e,t){return du.set.call(this,e,t,void 0)};du.set=function(e,t,n){return ef.set.call(this,e[0],t,n,e[0])};function bm(e,t){const n=e[xn];return(n?yi(n):e)[t]}function xF(e,t,n){var i;const r=AT(t,n);return r?uu in r?r[uu]:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function AT(e,t){if(!(t in e))return;let n=xo(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=xo(n)}}function gy(e){e.modified_||(e.modified_=!0,e.parent_&&gy(e.parent_))}function id(e){e.copy_||(e.assigned_=new Map,e.copy_=fy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bF=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Is(n)&&!Is(r)){const o=r;r=n;const l=this;return function(c=o,...d){return l.produce(c,f=>r.call(this,f,...d))}}Is(r)||Er(6),i!==void 0&&!Is(i)&&Er(7);let a;if($r(n)){const o=gk(this),l=yy(o,n,void 0);let u=!0;try{a=r(l),u=!1}finally{u?py(o):my(o)}return mk(o,i),yk(a,o)}else if(!n||!Mx(n)){if(a=r(n),a===void 0&&(a=n),a===jT&&(a=void 0),this.autoFreeze_&&zx(a,!0),i){const o=[],l=[];hs(hy).generateReplacementPatches_(n,a,{patches_:o,inversePatches_:l}),i(o,l)}return a}else Er(1,n)},this.produceWithPatches=(n,r)=>{if(Is(n))return(l,...u)=>this.produceWithPatches(l,c=>n(c,...u));let i,a;return[this.produce(n,r,(l,u)=>{i=l,a=u}),i,a]},xm(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),xm(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),xm(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){$r(t)||Er(8),Oi(t)&&(t=Ir(t));const n=gk(this),r=yy(n,t,void 0);return r[xn].isManual_=!0,my(n),r}finishDraft(t,n){const r=t&&t[xn];(!r||!r.isManual_)&&Er(9);const{scope_:i}=r;return mk(i,n),yk(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=hs(hy).applyPatches_;return Oi(t)?i(t,n):this.produce(t,a=>i(a,n))}};function yy(e,t,n,r){const[i,a]=Ah(t)?hs(Zd).proxyMap_(t,n):Oh(t)?hs(Zd).proxySet_(t,n):vF(t,n);return((n==null?void 0:n.scope_)??NT()).drafts_.push(i),a.callbacks_=(n==null?void 0:n.callbacks_)??[],a.key_=r,n&&r!==void 0?gF(n,a,r):a.callbacks_.push(function(u){var d;(d=u.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:c}=u;a.modified_&&c&&c.generatePatches_(a,[],u)}),i}function Ir(e){return Oi(e)||Er(10,e),OT(e)}function OT(e){if(!$r(e)||Ch(e))return e;const t=e[xn];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=fy(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=fy(e,!0);return Ph(n,(i,a)=>{Qd(n,i,OT(a))},r),t&&(t.finalized_=!1),n}var wF=new bF,CT=wF.produce;function IT(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var kF=IT(),jF=IT,_F=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?qd:qd.apply(null,arguments)};function yr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>kT(r)&&r.type===e,n}var DT=class _l extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_l.prototype)}static get[Symbol.species](){return _l}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _l(...t[0].concat(this)):new _l(...t.concat(this))}};function xk(e){return $r(e)?CT(e,()=>{}):e}function kc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function SF(e){return typeof e=="boolean"}var NF=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new DT;return n&&(SF(n)?o.push(kF):o.push(jF(n.extraArgument))),o},RT="RTK_autoBatch",lt=()=>e=>({payload:e,meta:{[RT]:!0}}),bk=e=>t=>{setTimeout(t,e)},LT=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bk(10):e.type==="callback"?e.queueNotification:bk(e.timeout),c=()=>{o=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),h=r.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[RT]),a=!i,a&&(o||(o=!0,u(c))),r.dispatch(d)}finally{i=!0}}})},EF=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new DT(e);return r&&i.push(LT(typeof r=="object"?r:void 0)),i};function PF(e){const t=NF(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Lx(n))l=wT(n);else throw new Error(qn(1));let u;typeof r=="function"?u=r(t):u=t();let c=qd;i&&(c=_F({trace:!1,...typeof i=="object"&&i}));const d=oF(...u),f=EF(d);let h=typeof o=="function"?o(f):f();const p=c(...h);return bT(l,a,p)}function MT(e){const t={},n=[];let r;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(qn(28));if(l in t)throw new Error(qn(29));return t[l]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function TF(e){return typeof e=="function"}function AF(e,t){let[n,r,i]=MT(t),a;if(TF(e))a=()=>xk(e());else{const l=xk(e);a=()=>l}function o(l=a(),u){let c=[n[u.type],...r.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(Oi(d)){const p=f(d,u);return p===void 0?d:p}else{if($r(d))return CT(d,h=>f(h,u));{const h=f(d,u);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=a,o}var OF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",CF=(e=21)=>{let t="",n=e;for(;n--;)t+=OF[Math.random()*64|0];return t},IF=Symbol.for("rtk-slice-createasyncthunk");function DF(e,t){return`${e}/${t}`}function RF({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[IF];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(qn(11));const l=(typeof i.reducers=="function"?i.reducers(MF()):i.reducers)||{},u=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,_){const k=typeof j=="string"?j:j.type;if(!k)throw new Error(qn(12));if(k in c.sliceCaseReducersByType)throw new Error(qn(13));return c.sliceCaseReducersByType[k]=_,d},addMatcher(j,_){return c.sliceMatchers.push({matcher:j,reducer:_}),d},exposeAction(j,_){return c.actionCreators[j]=_,d},exposeCaseReducer(j,_){return c.sliceCaseReducersByName[j]=_,d}};u.forEach(j=>{const _=l[j],k={reducerName:j,type:DF(a,j),createNotation:typeof i.reducers=="function"};zF(_)?BF(k,_,d,t):$F(k,_,d)});function f(){const[j={},_=[],k=void 0]=typeof i.extraReducers=="function"?MT(i.extraReducers):[i.extraReducers],E={...j,...c.sliceCaseReducersByType};return AF(i.initialState,A=>{for(let T in E)A.addCase(T,E[T]);for(let T of c.sliceMatchers)A.addMatcher(T.matcher,T.reducer);for(let T of _)A.addMatcher(T.matcher,T.reducer);k&&A.addDefaultCase(k)})}const h=j=>j,p=new Map,g=new WeakMap;let y;function x(j,_){return y||(y=f()),y(j,_)}function v(){return y||(y=f()),y.getInitialState()}function b(j,_=!1){function k(A){let T=A[j];return typeof T>"u"&&_&&(T=kc(g,k,v)),T}function E(A=h){const T=kc(p,_,()=>new WeakMap);return kc(T,A,()=>{const S={};for(const[P,C]of Object.entries(i.selectors??{}))S[P]=LF(C,A,()=>kc(g,A,v),_);return S})}return{reducerPath:j,getSelectors:E,get selectors(){return E(k)},selectSlice:k}}const w={name:a,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...b(o),injectInto(j,{reducerPath:_,...k}={}){const E=_??o;return j.inject({reducerPath:E,reducer:x},k),{...w,...b(E,!0)}}};return w}}function LF(e,t,n,r){function i(a,...o){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var $n=RF();function MF(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $F({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!FF(r))throw new Error(qn(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?yr(e,o):yr(e))}function zF(e){return e._reducerDefinitionType==="asyncThunk"}function FF(e){return e._reducerDefinitionType==="reducerWithPrepare"}function BF({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qn(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:u,settled:c,options:d}=n,f=i(e,a,d);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),l&&r.addCase(f.pending,l),u&&r.addCase(f.rejected,u),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(t,{fulfilled:o||jc,pending:l||jc,rejected:u||jc,settled:c||jc})}function jc(){}var UF="task",$T="listener",zT="completed",Fx="cancelled",WF=`task-${Fx}`,HF=`task-${zT}`,vy=`${$T}-${Fx}`,KF=`${$T}-${zT}`,Dh=class{constructor(e){Fp(this,"name","TaskAbortError");Fp(this,"message");this.code=e,this.message=`${UF} ${Fx} (reason: ${e})`}},Bx=(e,t)=>{if(typeof e!="function")throw new TypeError(qn(32))},tf=()=>{},FT=(e,t=tf)=>(e.catch(t),e),BT=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ts=e=>{if(e.aborted)throw new Dh(e.reason)};function UT(e,t){let n=tf;return new Promise((r,i)=>{const a=()=>i(new Dh(e.reason));if(e.aborted){a();return}n=BT(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=tf})}var VF=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Dh?"cancelled":"rejected",error:n}}finally{t==null||t()}},nf=e=>t=>FT(UT(e,t).then(n=>(ts(e),n))),WT=e=>{const t=nf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:io}=Object,wk={},Rh="listenerMiddleware",GF=(e,t)=>{const n=r=>BT(e,()=>r.abort(e.reason));return(r,i)=>{Bx(r);const a=new AbortController;n(a);const o=VF(async()=>{ts(e),ts(a.signal);const l=await r({pause:nf(a.signal),delay:WT(a.signal),signal:a.signal});return ts(a.signal),l},()=>a.abort(HF));return i!=null&&i.autoJoin&&t.push(o.catch(tf)),{result:nf(e)(o),cancel(){a.abort(WF)}}}},qF=(e,t)=>{const n=async(r,i)=>{ts(t);let a=()=>{};const l=[new Promise((u,c)=>{let d=e({predicate:r,effect:(f,h)=>{h.unsubscribe(),u([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await UT(t,Promise.race(l));return ts(t),u}finally{a()}};return(r,i)=>FT(n(r,i))},HT=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=yr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qn(21));return Bx(a),{predicate:i,type:t,effect:a}},KT=io(e=>{const{type:t,predicate:n,effect:r}=HT(e);return{id:CF(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qn(22))}}},{withTypes:()=>KT}),kk=(e,t)=>{const{type:n,effect:r,predicate:i}=HT(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},xy=e=>{e.pending.forEach(t=>{t.abort(vy)})},YF=(e,t)=>()=>{for(const n of t.keys())xy(n);e.clear()},jk=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},VT=io(yr(`${Rh}/add`),{withTypes:()=>VT}),XF=yr(`${Rh}/removeAll`),GT=io(yr(`${Rh}/remove`),{withTypes:()=>GT}),QF=(...e)=>{console.error(`${Rh}/error`,...e)},Du=(e={})=>{const t=new Map,n=new Map,r=p=>{const g=n.get(p)??0;n.set(p,g+1)},i=p=>{const g=n.get(p)??1;g===1?n.delete(p):n.set(p,g-1)},{extra:a,onError:o=QF}=e;Bx(o);const l=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),g=>{p.unsubscribe(),g!=null&&g.cancelActive&&xy(p)}),u=p=>{const g=kk(t,p)??KT(p);return l(g)};io(u,{withTypes:()=>u});const c=p=>{const g=kk(t,p);return g&&(g.unsubscribe(),p.cancelActive&&xy(g)),!!g};io(c,{withTypes:()=>c});const d=async(p,g,y,x)=>{const v=new AbortController,b=qF(u,v.signal),w=[];try{p.pending.add(v),r(p),await Promise.resolve(p.effect(g,io({},y,{getOriginalState:x,condition:(j,_)=>b(j,_).then(Boolean),take:b,delay:WT(v.signal),pause:nf(v.signal),extra:a,signal:v.signal,fork:GF(v.signal,w),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((j,_,k)=>{j!==v&&(j.abort(vy),k.delete(j))})},cancel:()=>{v.abort(vy),p.pending.delete(v)},throwIfCancelled:()=>{ts(v.signal)}})))}catch(j){j instanceof Dh||jk(o,j,{raisedBy:"effect"})}finally{await Promise.all(w),v.abort(KF),i(p),p.pending.delete(v)}},f=YF(t,n);return{middleware:p=>g=>y=>{if(!kT(y))return g(y);if(VT.match(y))return u(y.payload);if(XF.match(y)){f();return}if(GT.match(y))return c(y.payload);let x=p.getState();const v=()=>{if(x===wk)throw new Error(qn(23));return x};let b;try{if(b=g(y),t.size>0){const w=p.getState(),j=Array.from(t.values());for(const _ of j){let k=!1;try{k=_.predicate(y,w,x)}catch(E){k=!1,jk(o,E,{raisedBy:"predicate"})}k&&d(_,y,p,v)}}}finally{x=wk}return b},startListening:u,stopListening:c,clearListeners:f}};function qn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ZF={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},qT=$n({name:"chartLayout",initialState:ZF,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:JF,setLayout:e3,setChartSize:t3,setScale:n3}=qT.actions,r3=qT.reducer;function YT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function pe(e){return Number.isFinite(e)}function ii(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function _k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(n),!0).forEach(function(r){i3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i3(e,t,n){return(t=a3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3(e){var t=s3(e,"string");return typeof t=="symbol"?t:t+""}function s3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tt(e,t,n){return Me(e)||Me(t)?n:gr(t)?yo(e,t,n):typeof t=="function"?t(e):n}var o3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&ae(e[a]))return qs(qs({},e),{},{[a]:e[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&ae(e[o]))return qs(qs({},e),{},{[o]:e[o]+(i||0)})}return e},Br=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",XT=(e,t,n,r)=>{if(r)return e.map(l=>l.coordinate);var i,a,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||o.push(t),a||o.push(n),o},QT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:l,isCategorical:u,categoricalDomain:c,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=i==="category"&&o.bandwidth?o.bandwidth()/g:0;if(y=p==="angleAxis"&&a&&a.length>=2?On(a[0]-a[1])*2*y:y,f||h){var x=(f||h||[]).map((v,b)=>{var w=r?r.indexOf(v):v,j=o.map(w);return pe(j)?{coordinate:j+y,value:v,offset:y,index:b}:null}).filter(Cn);return x}return u&&c?c.map((v,b)=>{var w=o.map(v);return pe(w)?{coordinate:w+y,value:v,index:b,offset:y}:null}).filter(Cn):o.ticks&&d!=null?o.ticks(d).map((v,b)=>{var w=o.map(v);return pe(w)?{coordinate:w+y,value:v,index:b,offset:y}:null}).filter(Cn):o.domain().map((v,b)=>{var w=o.map(v);return pe(w)?{coordinate:w+y,value:r?r[v]:v,index:b,offset:y}:null}).filter(Cn)},l3=(e,t)=>{if(!t||t.length!==2||!ae(t[0])||!ae(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ae(e[0])||e[0]<n)&&(i[0]=n),(!ae(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},u3=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,o=0,l=0;l<n;++l){var u=e[l],c=u==null?void 0:u[i];if(c!=null){var d=c[1],f=c[0],h=Lr(d)?f:d;h>=0?(c[0]=a,a+=h,c[1]=a):(c[0]=o,o+=h,c[1]=o)}}}},c3=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,o=0;o<n;++o){var l=e[o],u=l==null?void 0:l[i];if(u!=null){var c=Lr(u[1])?u[0]:u[1];c>=0?(u[0]=a,a+=c,u[1]=a):(u[0]=0,u[1]=0)}}}},d3={sign:u3,expand:W$,none:ds,silhouette:H$,wiggle:K$,positive:c3},f3=(e,t,n)=>{var r,i=(r=d3[n])!==null&&r!==void 0?r:ds,a=U$().keys(t).value((l,u)=>Number(tt(l,u,0))).order(ly).offset(i),o=a(e);return o.forEach((l,u)=>{l.forEach((c,d)=>{var f=tt(e[d],t[u],0);Array.isArray(f)&&f.length===2&&ae(f[0])&&ae(f[1])&&(c[0]=f[0],c[1]=f[1])})}),o};function ZT(e){return e==null?void 0:String(e)}function bo(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Me(i[t.dataKey])){var l=FP(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var u=tt(i,Me(o)?t.dataKey:o),c=t.scale.map(u);return ae(c)?c:null}var Sk=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var l=tt(a,t.dataKey,t.scale.domain()[o]);if(Me(l))return null;var u=t.scale.map(l);return ae(u)?u-i/2+r:null},h3=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},p3=e=>{var t=e.flat(2).filter(ae);return[Math.min(...t),Math.max(...t)]},m3=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],g3=(e,t,n)=>{if(e!=null)return m3(Object.keys(e).reduce((r,i)=>{var a=e[i];if(!a)return r;var{stackedData:o}=a,l=o.reduce((u,c)=>{var d=YT(c,t,n),f=p3(d);return!pe(f[0])||!pe(f[1])?u:[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},Nk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ek=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_a=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Nh(t,d=>d.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var u=i[o],c=i[o-1];a=Math.min(((u==null?void 0:u.coordinate)||0)-((c==null?void 0:c.coordinate)||0),a)}return a===1/0?0:a}return n?void 0:0};function Pk(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return qs(qs({},t),{},{dataKey:n,payload:r,value:i,name:a})}function Oa(e,t){if(e)return String(e);if(typeof t=="string")return t}var y3=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},v3=(e,t)=>t==="centric"?e.angle:e.radius,Fi=e=>e.layout.width,Bi=e=>e.layout.height,x3=e=>e.layout.scale,JT=e=>e.layout.margin,Lh=F(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Mh=F(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),b3="data-recharts-item-index",eA="data-recharts-item-id",Ru=60;function Tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(n),!0).forEach(function(r){w3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w3(e,t,n){return(t=k3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k3(e){var t=j3(e,"string");return typeof t=="symbol"?t:t+""}function j3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _3=e=>e.brush.height;function S3(e){var t=Mh(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ru;return n+i}return n},0)}function N3(e){var t=Mh(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ru;return n+i}return n},0)}function E3(e){var t=Lh(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function P3(e){var t=Lh(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Wt=F([Fi,Bi,JT,_3,S3,N3,E3,P3,vT,eF],(e,t,n,r,i,a,o,l,u,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+a},f={top:(n.top||0)+o,bottom:(n.bottom||0)+l},h=_c(_c({},f),d),p=h.bottom;h.bottom+=r,h=o3(h,u,c);var g=e-h.left-h.right,y=t-h.top-h.bottom;return _c(_c({brushBottom:p},h),{},{width:Math.max(g,0),height:Math.max(y,0)})}),T3=F(Wt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ux=F(Fi,Bi,(e,t)=>({x:0,y:0,width:e,height:t})),A3=m.createContext(null),Nt=()=>m.useContext(A3)!=null,$h=e=>e.brush,zh=F([$h,Wt,JT],(e,t,n)=>({height:e.height,x:ae(e.x)?e.x:t.left,y:ae(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:ae(e.width)?e.width:t.width})),tA={},nA={},rA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,l=null;const u=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},f=()=>{c&&d(),y()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},r)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),o=void 0,l=null},x=()=>{d()},v=function(...b){if(i!=null&&i.aborted)return;o=this,l=b;const w=h==null;p(),u&&w&&d()};return v.schedule=p,v.cancel=y,v.flush=x,i==null||i.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(rA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rA;function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:u}=a,c=Array(2);o&&(c[0]="leading"),l&&(c[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=r.apply(this,y),f=null},i,{edges:c}),p=function(...y){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(d=r.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=n})(nA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nA;function n(r,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(tA);var O3=tA.throttle;const C3=zr(O3);var rf=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},Zr={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},iA=(e,t,n)=>{var{width:r=Zr.width,height:i=Zr.height,aspect:a,maxHeight:o}=n,l=fs(r)?e:Number(r),u=fs(i)?t:Number(i);return a&&a>0&&(l?u=l/a:u&&(l=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:l,calculatedHeight:u}},I3={width:0,height:0,overflow:"visible"},D3={width:0,overflowX:"visible"},R3={height:0,overflowY:"visible"},L3={},M3=e=>{var{width:t,height:n}=e,r=fs(t),i=fs(n);return r&&i?I3:r?D3:i?R3:L3};function $3(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i=Zr.width,a=Zr.height):i===void 0?i=r&&r>0?void 0:Zr.width:a===void 0&&(a=r&&r>0?void 0:Zr.height),{width:i,height:a}}function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},by.apply(null,arguments)}function Ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ok(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(n),!0).forEach(function(r){z3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z3(e,t,n){return(t=F3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F3(e){var t=B3(e,"string");return typeof t=="symbol"?t:t+""}function B3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aA=m.createContext(Zr.initialDimension);function U3(e){return ii(e.width)&&ii(e.height)}function sA(e){var{children:t,width:n,height:r}=e,i=m.useMemo(()=>({width:n,height:r}),[n,r]);return U3(i)?m.createElement(aA.Provider,{value:i},t):null}var Wx=()=>m.useContext(aA),W3=m.forwardRef((e,t)=>{var{aspect:n,initialDimension:r=Zr.initialDimension,width:i,height:a,minWidth:o=Zr.minWidth,minHeight:l,maxHeight:u,children:c,debounce:d=Zr.debounce,id:f,className:h,onResize:p,style:g={}}=e,y=m.useRef(null),x=m.useRef();x.current=p,m.useImperativeHandle(t,()=>y.current);var[v,b]=m.useState({containerWidth:r.width,containerHeight:r.height}),w=m.useCallback((A,T)=>{b(S=>{var P=Math.round(A),C=Math.round(T);return S.containerWidth===P&&S.containerHeight===C?S:{containerWidth:P,containerHeight:C}})},[]);m.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return Aa;var A=C=>{var B,M=C[0];if(M!=null){var{width:D,height:q}=M.contentRect;w(D,q),(B=x.current)===null||B===void 0||B.call(x,D,q)}};d>0&&(A=C3(A,d,{trailing:!0,leading:!1}));var T=new ResizeObserver(A),{width:S,height:P}=y.current.getBoundingClientRect();return w(S,P),T.observe(y.current),()=>{T.disconnect()}},[w,d]);var{containerWidth:j,containerHeight:_}=v;rf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:k,calculatedHeight:E}=iA(j,_,{width:i,height:a,aspect:n,maxHeight:u});return rf(k!=null&&k>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,E,i,a,o,l,n),m.createElement("div",{id:f?"".concat(f):void 0,className:Pe("recharts-responsive-container",h),style:Ok(Ok({},g),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:u}),ref:y},m.createElement("div",{style:M3({width:i,height:a})},m.createElement(sA,{width:k,height:E},c)))}),We=m.forwardRef((e,t)=>{var n=Wx();if(ii(n.width)&&ii(n.height))return e.children;var{width:r,height:i}=$3({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=iA(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ae(a)&&ae(o)?m.createElement(sA,{width:a,height:o},e.children):m.createElement(W3,by({},e,{width:r,height:i,ref:t}))});function Hx(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Ro=()=>{var e,t=Nt(),n=le(T3),r=le(zh),i=(e=le($h))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},H3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},oA=()=>{var e;return(e=le(Wt))!==null&&e!==void 0?e:H3},Kx=()=>le(Fi),Vx=()=>le(Bi),K3=()=>le(e=>e.layout.margin),Ae=e=>e.layout.layoutType,Ca=()=>le(Ae),Gx=()=>{var e=Ca();if(e==="horizontal"||e==="vertical")return e},lA=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},V3=()=>{var e=Ca();return e!==void 0},Lu=e=>{var t=dt(),n=Nt(),{width:r,height:i}=e,a=Wx(),o=r,l=i;return a&&(o=a.width>0?a.width:r,l=a.height>0?a.height:i),m.useEffect(()=>{!n&&ii(o)&&ii(l)&&t(t3({width:o,height:l}))},[t,n,o,l]),null},uA=Symbol.for("immer-nothing"),Ck=Symbol.for("immer-draftable"),Qn=Symbol.for("immer-state");function Pr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fu=Object.getPrototypeOf;function wo(e){return!!e&&!!e[Qn]}function ps(e){var t;return e?cA(e)||Array.isArray(e)||!!e[Ck]||!!((t=e.constructor)!=null&&t[Ck])||Mu(e)||Bh(e):!1}var G3=Object.prototype.constructor.toString(),Ik=new WeakMap;function cA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=Ik.get(n);return r===void 0&&(r=Function.toString.call(n),Ik.set(n,r)),r===G3}function af(e,t,n=!0){Fh(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Fh(e){const t=e[Qn];return t?t.type_:Array.isArray(e)?1:Mu(e)?2:Bh(e)?3:0}function wy(e,t){return Fh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dA(e,t,n){const r=Fh(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function q3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Mu(e){return e instanceof Map}function Bh(e){return e instanceof Set}function Wa(e){return e.copy_||e.base_}function ky(e,t){if(Mu(e))return new Map(e);if(Bh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=cA(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Qn];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],l=r[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(fu(e),r)}else{const r=fu(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function qx(e,t=!1){return Uh(e)||wo(e)||!ps(e)||(Fh(e)>1&&Object.defineProperties(e,{set:Sc,add:Sc,clear:Sc,delete:Sc}),Object.freeze(e),t&&Object.values(e).forEach(n=>qx(n,!0))),e}function Y3(){Pr(2)}var Sc={value:Y3};function Uh(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var X3={};function ms(e){const t=X3[e];return t||Pr(0,e),t}var hu;function fA(){return hu}function Q3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dk(e,t){t&&(ms("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jy(e){_y(e),e.drafts_.forEach(Z3),e.drafts_=null}function _y(e){e===hu&&(hu=e.parent_)}function Rk(e){return hu=Q3(hu,e)}function Z3(e){const t=e[Qn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Lk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Qn].modified_&&(jy(t),Pr(4)),ps(e)&&(e=sf(t,e),t.parent_||of(t,e)),t.patches_&&ms("Patches").generateReplacementPatches_(n[Qn].base_,e,t.patches_,t.inversePatches_)):e=sf(t,n,[]),jy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uA?e:void 0}function sf(e,t,n){if(Uh(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Qn];if(!i)return af(t,(a,o)=>Mk(e,i,t,a,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return of(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),af(o,(u,c)=>Mk(e,i,a,u,c,n,l),r),of(e,a,!1),n&&e.patches_&&ms("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Mk(e,t,n,r,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=Uh(i);if(!(l&&!o)){if(wo(i)){const u=a&&t&&t.type_!==3&&!wy(t.assigned_,r)?a.concat(r):void 0,c=sf(e,i,u);if(dA(n,r,c),wo(c))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ps(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&l)return;sf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Mu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&of(e,i)}}}function of(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qx(t,n)}function J3(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:fA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=Yx;n&&(i=[r],a=pu);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=o,l}var Yx={get(e,t){if(t===Qn)return e;const n=Wa(e);if(!wy(n,t))return eB(e,n,t);const r=n[t];return e.finalized_||!ps(r)?r:r===wm(e.base_,t)?(km(e),e.copy_[t]=Ny(r,e)):r},has(e,t){return t in Wa(e)},ownKeys(e){return Reflect.ownKeys(Wa(e))},set(e,t,n){const r=hA(Wa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=wm(Wa(e),t),a=i==null?void 0:i[Qn];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(q3(n,i)&&(n!==void 0||wy(e.base_,t)))return!0;km(e),Sy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,km(e),Sy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Wa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Pr(11)},getPrototypeOf(e){return fu(e.base_)},setPrototypeOf(){Pr(12)}},pu={};af(Yx,(e,t)=>{pu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});pu.deleteProperty=function(e,t){return pu.set.call(this,e,t,void 0)};pu.set=function(e,t,n){return Yx.set.call(this,e[0],t,n,e[0])};function wm(e,t){const n=e[Qn];return(n?Wa(n):e)[t]}function eB(e,t,n){var i;const r=hA(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function hA(e,t){if(!(t in e))return;let n=fu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fu(n)}}function Sy(e){e.modified_||(e.modified_=!0,e.parent_&&Sy(e.parent_))}function km(e){e.copy_||(e.copy_=ky(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(u=a,...c){return o.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&Pr(6),r!==void 0&&typeof r!="function"&&Pr(7);let i;if(ps(t)){const a=Rk(this),o=Ny(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?jy(a):_y(a)}return Dk(a,r),Lk(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===uA&&(i=void 0),this.autoFreeze_&&qx(i,!0),r){const a=[],o=[];ms("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else Pr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,u=>t(u,...l));let r,i;return[this.produce(t,n,(o,l)=>{r=o,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ps(e)||Pr(8),wo(e)&&(e=nB(e));const t=Rk(this),n=Ny(e,void 0);return n[Qn].isManual_=!0,_y(t),n}finishDraft(e,t){const n=e&&e[Qn];(!n||!n.isManual_)&&Pr(9);const{scope_:r}=n;return Dk(r,t),Lk(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ms("Patches").applyPatches_;return wo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Ny(e,t){const n=Mu(e)?ms("MapSet").proxyMap_(e,t):Bh(e)?ms("MapSet").proxySet_(e,t):J3(e,t);return(t?t.scope_:fA()).drafts_.push(n),n}function nB(e){return wo(e)||Pr(10,e),pA(e)}function pA(e){if(!ps(e)||Uh(e))return e;const t=e[Qn];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ky(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=ky(e,!0);return af(n,(i,a)=>{dA(n,i,pA(a))},r),t&&(t.finalized_=!1),n}var rB=new tB;rB.produce;var iB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mA=$n({name:"legend",initialState:iB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:lt()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ir(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:lt()},removeLegendPayload:{reducer(e,t){var n=Ir(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:lt()}}}),{setLegendSize:$k,setLegendSettings:aB,addLegendPayload:sB,replaceLegendPayload:oB,removeLegendPayload:lB}=mA.actions,uB=mA.reducer,cB=["contextPayload"];function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ey.apply(null,arguments)}function zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zk(Object(n),!0).forEach(function(r){dB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dB(e,t,n){return(t=fB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fB(e){var t=hB(e,"string");return typeof t=="symbol"?t:t+""}function hB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pB(e,t){if(e==null)return{};var n,r,i=mB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function gB(e){return e.value}function yB(e){var{contextPayload:t}=e,n=pB(e,cB),r=oT(t,e.payloadUniqBy,gB),i=ko(ko({},n),{},{payload:r});return m.isValidElement(e.content)?m.cloneElement(e.content,i):typeof e.content=="function"?m.createElement(e.content,i):m.createElement(xz,i)}function vB(e,t,n,r,i,a){var{layout:o,align:l,verticalAlign:u}=t,c,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?c={left:((r||0)-a.width)/2}:c=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?d={top:((i||0)-a.height)/2}:d=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),ko(ko({},c),d)}function xB(e){var t=dt();return m.useEffect(()=>{t(aB(e))},[t,e]),null}function bB(e){var t=dt();return m.useEffect(()=>(t($k(e)),()=>{t($k({width:0,height:0}))}),[t,e]),null}function wB(e,t,n,r){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:n||r}:null}var kB={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ns(e){var t=_t(e,kB),n=rF(),r=f$(),i=K3(),{width:a,height:o,wrapperStyle:l,portal:u}=t,[c,d]=xT([n]),f=Kx(),h=Vx();if(f==null||h==null)return null;var p=f-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),g=wB(t.layout,o,a,p),y=u?l:ko(ko({position:"absolute",width:(g==null?void 0:g.width)||a||"auto",height:(g==null?void 0:g.height)||o||"auto"},vB(l,t,i,f,h,c)),l),x=u??r;if(x==null||n==null)return null;var v=m.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:d},m.createElement(xB,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!u&&m.createElement(bB,{width:c.width,height:c.height}),m.createElement(yB,Ey({},t,g,{margin:i,chartWidth:f,chartHeight:h,contextPayload:n})));return dh.createPortal(v,x)}ns.displayName="Legend";function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Py.apply(null,arguments)}function Fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(n),!0).forEach(function(r){jB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jB(e,t,n){return(t=_B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _B(e){var t=SB(e,"string");return typeof t=="symbol"?t:t+""}function SB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NB(e){return Array.isArray(e)&&gr(e[0])&&gr(e[1])?e.join(" ~ "):e}var Es={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},EB=e=>{var{separator:t=Es.separator,contentStyle:n,itemStyle:r,labelStyle:i=Es.labelStyle,payload:a,formatter:o,itemSorter:l,wrapperClassName:u,labelClassName:c,label:d,labelFormatter:f,accessibilityLayer:h=Es.accessibilityLayer}=e,p=()=>{if(a&&a.length){var _={padding:0,margin:0},k=(l?Nh(a,l):a).map((E,A)=>{if(E.type==="none")return null;var T=E.formatter||o||NB,{value:S,name:P}=E,C=S,B=P;if(T){var M=T(S,P,E,A,a);if(Array.isArray(M))[C,B]=M;else if(M!=null)C=M;else return null}var D=ol(ol({},Es.itemStyle),{},{color:E.color||Es.itemStyle.color},r);return m.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:D},gr(B)?m.createElement("span",{className:"recharts-tooltip-item-name"},B):null,gr(B)?m.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,m.createElement("span",{className:"recharts-tooltip-item-value"},C),m.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return m.createElement("ul",{className:"recharts-tooltip-item-list",style:_},k)}return null},g=ol(ol({},Es.contentStyle),n),y=ol({margin:0},i),x=!Me(d),v=x?d:"",b=Pe("recharts-default-tooltip",u),w=Pe("recharts-tooltip-label",c);x&&f&&a!==void 0&&a!==null&&(v=f(d,a));var j=h?{role:"status","aria-live":"assertive"}:{};return m.createElement("div",Py({className:b,style:g},j),m.createElement("p",{className:w,style:y},m.isValidElement(v)?v:"".concat(v)),p())},ll="recharts-tooltip-wrapper",PB={visibility:"hidden"};function TB(e){var{coordinate:t,translateX:n,translateY:r}=e;return Pe(ll,{["".concat(ll,"-right")]:ae(n)&&t&&ae(t.x)&&n>=t.x,["".concat(ll,"-left")]:ae(n)&&t&&ae(t.x)&&n<t.x,["".concat(ll,"-bottom")]:ae(r)&&t&&ae(t.y)&&r>=t.y,["".concat(ll,"-top")]:ae(r)&&t&&ae(t.y)&&r<t.y})}function Bk(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offset:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:u,viewBoxDimension:c}=e;if(a&&ae(a[r]))return a[r];var d=n[r]-l-(i>0?i:0),f=n[r]+i;if(t[r])return o[r]?d:f;var h=u[r];if(h==null)return 0;if(o[r]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(c==null)return 0;var y=f+l,x=h+c;return y>x?Math.max(d,h):Math.max(f,h)}function AB(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function OB(e){var{allowEscapeViewBox:t,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:o,tooltipBox:l,useTranslate3d:u,viewBox:c}=e,d,f,h;return l.height>0&&l.width>0&&n?(f=Bk({allowEscapeViewBox:t,coordinate:n,key:"x",offset:i,position:a,reverseDirection:o,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),h=Bk({allowEscapeViewBox:t,coordinate:n,key:"y",offset:r,position:a,reverseDirection:o,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=AB({translateX:f,translateY:h,useTranslate3d:u})):d=PB,{cssProperties:d,cssClasses:TB({translateX:f,translateY:h,coordinate:n})}}function Uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(n),!0).forEach(function(r){Ty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ty(e,t,n){return(t=CB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CB(e){var t=IB(e,"string");return typeof t=="symbol"?t:t+""}function IB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class DB extends m.PureComponent{constructor(){super(...arguments),Ty(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ty(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:u,offset:c,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:y,innerRef:x,hasPortalFromProps:v}=this.props,b=typeof c=="number"?c:c.x,w=typeof c=="number"?c:c.y,{cssClasses:j,cssProperties:_}=OB({allowEscapeViewBox:n,coordinate:o,offsetLeft:b,offsetTop:w,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:p}),k=v?{}:Nc(Nc({transition:u&&t?"transform ".concat(r,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),E=Nc(Nc({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:E,ref:x},a)}}var gA=()=>{var e;return(e=le(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ay.apply(null,arguments)}function Wk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(n),!0).forEach(function(r){RB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RB(e,t,n){return(t=LB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LB(e){var t=MB(e,"string");return typeof t=="symbol"?t:t+""}function MB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kk={curveBasisClosed:O$,curveBasisOpen:C$,curveBasis:A$,curveBumpX:g$,curveBumpY:y$,curveLinearClosed:I$,curveLinear:yh,curveMonotoneX:D$,curveMonotoneY:R$,curveNatural:L$,curveStep:M$,curveStepAfter:z$,curveStepBefore:$$},lf=e=>pe(e.x)&&pe(e.y),Vk=e=>e.base!=null&&lf(e.base)&&lf(e),ul=e=>e.x,cl=e=>e.y,$B=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Ou(e));if((n==="curveMonotone"||n==="curveBump")&&t){var r=Kk["".concat(n).concat(t==="vertical"?"Y":"X")];if(r)return r}return Kk[n]||yh},Gk={connectNulls:!1,type:"linear"},zB=e=>{var{type:t=Gk.type,points:n=[],baseLine:r,layout:i,connectNulls:a=Gk.connectNulls}=e,o=$B(t,i),l=a?n.filter(lf):n;if(Array.isArray(r)){var u,c=n.map((g,y)=>Hk(Hk({},g),{},{base:r[y]}));i==="vertical"?u=vc().y(cl).x1(ul).x0(g=>g.base.x):u=vc().x(ul).y1(cl).y0(g=>g.base.y);var d=u.defined(Vk).curve(o),f=a?c.filter(Vk):c;return d(f)}var h;i==="vertical"&&ae(r)?h=vc().y(cl).x1(ul).x0(r):ae(r)?h=vc().x(ul).y1(cl).y0(r):h=NP().x(ul).y(cl);var p=h.defined(lf).curve(o);return p(l)},ao=e=>{var{className:t,points:n,path:r,pathRef:i}=e,a=Ca();if((!n||!n.length)&&!r)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},l=n&&n.length?zB(o):r;return m.createElement("path",Ay({},vn(e),_x(e),{className:Pe("recharts-curve",t),d:l===null?void 0:l,ref:i}))},FB=["x","y","top","left","width","height","className"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oy.apply(null,arguments)}function qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(n),!0).forEach(function(r){UB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UB(e,t,n){return(t=WB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KB(e,t){if(e==null)return{};var n,r,i=VB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var GB=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),qB=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:l}=e,u=KB(e,FB),c=BB({x:t,y:n,top:r,left:i,width:a,height:o},u);return!ae(t)||!ae(n)||!ae(a)||!ae(o)||!ae(r)||!ae(i)?null:m.createElement("path",Oy({},Jt(c),{className:Pe("recharts-cross",l),d:GB(t,n,a,o,r,i)}))};function YB(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function Yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(n),!0).forEach(function(r){XB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XB(e,t,n){return(t=QB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QB(e){var t=ZB(e,"string");return typeof t=="symbol"?t:t+""}function ZB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),yA=(e,t,n)=>e.map(r=>"".concat(JB(r)," ").concat(t,"ms ").concat(n)).join(","),e4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),mu=(e,t)=>Object.keys(t).reduce((n,r)=>Xk(Xk({},n),{},{[r]:e(r,t[r])}),{});function Qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(n),!0).forEach(function(r){t4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t4(e,t,n){return(t=n4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n4(e){var t=r4(e,"string");return typeof t=="symbol"?t:t+""}function r4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uf=(e,t,n)=>e+(t-e)*n,Cy=e=>{var{from:t,to:n}=e;return t!==n},vA=(e,t,n)=>{var r=mu((i,a)=>{if(Cy(a)){var[o,l]=e(a.from,a.to,a.velocity);return It(It({},a),{},{from:o,velocity:l})}return a},t);return n<1?mu((i,a)=>Cy(a)&&r[i]!=null?It(It({},a),{},{velocity:uf(a.velocity,r[i].velocity,n),from:uf(a.from,r[i].from,n)}):a,t):vA(e,r,n-1)};function i4(e,t,n,r,i,a){var o,l=r.reduce((h,p)=>It(It({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),u=()=>mu((h,p)=>p.from,l),c=()=>!Object.values(l).filter(Cy).length,d=null,f=h=>{o||(o=h);var p=h-o,g=p/n.dt;l=vA(n,l,g),i(It(It(It({},e),t),u())),o=h,c()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function a4(e,t,n,r,i,a,o){var l=null,u=i.reduce((f,h)=>{var p=e[h],g=t[h];return p==null||g==null?f:It(It({},f),{},{[h]:[p,g]})},{}),c,d=f=>{c||(c=f);var h=(f-c)/r,p=mu((y,x)=>uf(...x,n(h)),u);if(a(It(It(It({},e),t),p)),h<1)l=o.setTimeout(d);else{var g=mu((y,x)=>uf(...x,n(1)),u);a(It(It(It({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const s4=(e,t,n,r,i,a)=>{var o=e4(e,t);return n==null?()=>(i(It(It({},e),t)),()=>{}):n.isStepper===!0?i4(e,t,n,o,i,a):a4(e,t,n,r,o,i,a)};var cf=1e-4,xA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bA=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),Zk=(e,t)=>n=>{var r=xA(e,t);return bA(r,n)},o4=(e,t)=>n=>{var r=xA(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return bA(i,n)},l4=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},u4=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=l4(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},c4=(e,t,n,r)=>{var i=Zk(e,n),a=Zk(t,r),o=o4(e,n),l=c=>c>1?1:c<0?0:c,u=c=>{for(var d=c>1?1:c,f=d,h=0;h<8;++h){var p=i(f)-d,g=o(f);if(Math.abs(p-d)<cf||g<cf)return a(f);f=l(f-p/g)}return a(f)};return u.isStepper=!1,u},Jk=function(){return c4(...u4(...arguments))},d4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,l,u)=>{var c=-(o-l)*n,d=u*r,f=u+(c-d)*i/1e3,h=u*i/1e3+o;return Math.abs(h-l)<cf&&Math.abs(f)<cf?[l,0]:[h,f]};return a.isStepper=!0,a.dt=i,a},f4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Jk(e);case"spring":return d4();default:if(e.split("(")[0]==="cubic-bezier")return Jk(e)}return typeof e=="function"?e:null};function h4(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var l=o,[u,...c]=l;if(typeof u=="number"){i=e.setTimeout(a.bind(null,c),u);return}a(u),i=e.setTimeout(a.bind(null,c));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class p4{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function m4(){return h4(new p4)}var g4=m.createContext(m4);function y4(e,t){var n=m.useContext(g4);return m.useMemo(()=>t??n(e),[e,t,n])}var v4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$u={isSsr:v4()},x4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ej={t:0},jm={t:1};function Lo(e){var t=_t(e,x4),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:u,children:c}=t,d=n==="auto"?!$u.isSsr:n,f=y4(t.animationId,t.animationManager),[h,p]=m.useState(d?ej:jm),g=m.useRef(null);return m.useEffect(()=>{d||p(jm)},[d]),m.useEffect(()=>{if(!d||!r)return Aa;var y=s4(ej,jm,f4(a),i,p,f.getTimeoutController()),x=()=>{g.current=y()};return f.start([u,o,x,i,l]),()=>{f.stop(),g.current&&g.current(),l()}},[d,r,i,a,o,u,l,f]),c(h.t)}function Mo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=m.useRef(lu(t)),r=m.useRef(e);return r.current!==e&&(n.current=lu(t),r.current=e),n.current}var b4=["radius"],w4=["radius"],tj,nj,rj,ij,aj,sj,oj,lj,uj,cj;function dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(n),!0).forEach(function(r){k4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k4(e,t,n){return(t=j4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function df(){return df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},df.apply(null,arguments)}function hj(e,t){if(e==null)return{};var n,r,i=S4(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Hr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pj=(e,t,n,r,i)=>{var a=ua(n),o=ua(r),l=Math.min(Math.abs(a)/2,Math.abs(o)/2),u=o>=0?1:-1,c=a>=0?1:-1,d=o>=0&&a>=0||o<0&&a<0?1:0,f;if(l>0&&Array.isArray(i)){for(var h=[0,0,0,0],p=0,g=4;p<g;p++){var y,x=(y=i[p])!==null&&y!==void 0?y:0;h[p]=x>l?l:x}f=bt(tj||(tj=Hr(["M",",",""])),e,t+u*h[0]),h[0]>0&&(f+=bt(nj||(nj=Hr(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,e+c*h[0],t)),f+=bt(rj||(rj=Hr(["L ",",",""])),e+n-c*h[1],t),h[1]>0&&(f+=bt(ij||(ij=Hr(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,e+n,t+u*h[1])),f+=bt(aj||(aj=Hr(["L ",",",""])),e+n,t+r-u*h[2]),h[2]>0&&(f+=bt(sj||(sj=Hr(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,e+n-c*h[2],t+r)),f+=bt(oj||(oj=Hr(["L ",",",""])),e+c*h[3],t+r),h[3]>0&&(f+=bt(lj||(lj=Hr(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,e,t+r-u*h[3])),f+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);f=bt(uj||(uj=Hr(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+u*v,v,v,d,e+c*v,t,e+n-c*v,t,v,v,d,e+n,t+u*v,e+n,t+r-u*v,v,v,d,e+n-c*v,t+r,e+c*v,t+r,v,v,d,e,t+r-u*v)}else f=bt(cj||(cj=Hr(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return f},mj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wA=e=>{var t=_t(e,mj),n=m.useRef(null),[r,i]=m.useState(-1);m.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&i(z)}catch{}},[]);var{x:a,y:o,width:l,height:u,radius:c,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:y}=t,x=m.useRef(l),v=m.useRef(u),b=m.useRef(a),w=m.useRef(o),j=m.useMemo(()=>({x:a,y:o,width:l,height:u,radius:c}),[a,o,l,u,c]),_=Mo(j,"rectangle-");if(a!==+a||o!==+o||l!==+l||u!==+u||l===0||u===0)return null;var k=Pe("recharts-rectangle",d);if(!y){var E=Jt(t),{radius:A}=E,T=hj(E,b4);return m.createElement("path",df({},T,{x:ua(a),y:ua(o),width:ua(l),height:ua(u),radius:typeof c=="number"?c:void 0,className:k,d:pj(a,o,l,u,c)}))}var S=x.current,P=v.current,C=b.current,B=w.current,M="0px ".concat(r===-1?1:r,"px"),D="".concat(r,"px 0px"),q=yA(["strokeDasharray"],h,typeof f=="string"?f:mj.animationEasing);return m.createElement(Lo,{animationId:_,key:_,canBegin:r>0,duration:h,easing:f,isActive:y,begin:p},z=>{var $=Ee(S,l,z),R=Ee(P,u,z),N=Ee(C,a,z),Y=Ee(B,o,z);n.current&&(x.current=$,v.current=R,b.current=N,w.current=Y);var U;g?z>0?U={transition:q,strokeDasharray:D}:U={strokeDasharray:M}:U={strokeDasharray:D};var O=Jt(t),{radius:ne}=O,ge=hj(O,w4);return m.createElement("path",df({},ge,{radius:typeof c=="number"?c:void 0,className:k,d:pj(N,Y,$,R,c),ref:n,style:fj(fj({},U),t.style)}))})};function gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gj(Object(n),!0).forEach(function(r){N4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N4(e,t,n){return(t=E4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E4(e){var t=P4(e,"string");return typeof t=="symbol"?t:t+""}function P4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ff=Math.PI/180,T4=e=>e*180/Math.PI,Xt=(e,t,n,r)=>({x:e+Math.cos(-ff*r)*n,y:t+Math.sin(-ff*r)*n}),A4=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},O4=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},C4=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=O4({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,u=Math.acos(l);return r>a&&(u=2*Math.PI-u),{radius:o,angle:T4(u),angleInRadian:u}},I4=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},D4=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},R4=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=C4({x:n,y:r},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:u,endAngle:c}=I4(t),d=a,f;if(u<=c){for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}else{for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}return f?yj(yj({},t),{},{radius:i,angle:D4(d,t)}):null};function kA(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=Xt(t,n,r,i),l=Xt(t,n,r,a);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}var vj,xj,bj,wj,kj,jj,_j;function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(null,arguments)}function Ya(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var L4=(e,t)=>{var n=On(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Ec=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:u}=e,c=l*(o?1:-1)+r,d=Math.asin(l/c)/ff,f=u?i:i+a*d,h=Xt(t,n,c,f),p=Xt(t,n,r,f),g=u?i-a*d:i,y=Xt(t,n,c*Math.cos(d*ff),g);return{center:h,circleTangency:p,lineTangency:y,theta:d}},jA=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,l=L4(a,o),u=a+l,c=Xt(t,n,i,a),d=Xt(t,n,i,u),f=bt(vj||(vj=Ya(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(l)>180),+(a>u),d.x,d.y);if(r>0){var h=Xt(t,n,r,a),p=Xt(t,n,r,u);f+=bt(xj||(xj=Ya(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),p.x,p.y,r,r,+(Math.abs(l)>180),+(a<=u),h.x,h.y)}else f+=bt(bj||(bj=Ya(["L ",","," Z"])),t,n);return f},M4=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:c}=e,d=On(c-u),{circleTangency:f,lineTangency:h,theta:p}=Ec({cx:t,cy:n,radius:i,angle:u,sign:d,cornerRadius:a,cornerIsExternal:l}),{circleTangency:g,lineTangency:y,theta:x}=Ec({cx:t,cy:n,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:l}),v=l?Math.abs(u-c):Math.abs(u-c)-p-x;if(v<0)return o?bt(wj||(wj=Ya(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,a,a,a*2,a,a,-a*2):jA({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:c});var b=bt(kj||(kj=Ya(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,a,a,+(d<0),f.x,f.y,i,i,+(v>180),+(d<0),g.x,g.y,a,a,+(d<0),y.x,y.y);if(r>0){var{circleTangency:w,lineTangency:j,theta:_}=Ec({cx:t,cy:n,radius:r,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:k,lineTangency:E,theta:A}=Ec({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),T=l?Math.abs(u-c):Math.abs(u-c)-_-A;if(T<0&&a===0)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+=bt(jj||(jj=Ya(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,a,a,+(d<0),k.x,k.y,r,r,+(T>180),+(d>0),w.x,w.y,a,a,+(d<0),j.x,j.y)}else b+=bt(_j||(_j=Ya(["L",",","Z"])),t,n);return b},$4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_A=e=>{var t=_t(e,$4),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d,className:f}=t;if(a<i||c===d)return null;var h=Pe("recharts-sector",f),p=a-i,g=Mr(o,p,0,!0),y;return g>0&&Math.abs(c-d)<360?y=M4({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):y=jA({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),m.createElement("path",Iy({},Jt(t),{className:h,d:y}))};function z4(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(UP(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:o,angle:l}=t,u=Xt(r,i,a,l),c=Xt(r,i,o,l);return[{x:u.x,y:u.y},{x:c.x,y:c.y}]}return kA(t)}}var SA={},NA={},EA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dx;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(EA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EA;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(NA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rx,n=NA;function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(l);for(let c=0;c<l;c++)u[c]=i,i+=o;return u}e.range=r})(SA);var F4=SA.range;const PA=zr(F4);function ba(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function B4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xx(e){let t,n,r;e.length!==2?(t=ba,n=(l,u)=>ba(e(l),u),r=(l,u)=>e(l)-u):(t=e===ba||e===B4?e:U4,n=e,r=e);function i(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<0?c=f+1:d=f}while(c<d)}return c}function a(l,u,c=0,d=l.length){if(c<d){if(t(u,u)!==0)return d;do{const f=c+d>>>1;n(l[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function o(l,u,c=0,d=l.length){const f=i(l,u,c,d-1);return f>c&&r(l[f-1],u)>-r(l[f],u)?f-1:f}return{left:i,center:o,right:a}}function U4(){return 0}function TA(e){return e===null?NaN:+e}function*W4(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const H4=Xx(ba),zu=H4.right;Xx(TA).center;class Sj extends Map{constructor(t,n=G4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Nj(this,t))}has(t){return super.has(Nj(this,t))}set(t,n){return super.set(K4(this,t),n)}delete(t){return super.delete(V4(this,t))}}function Nj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function K4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function V4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function G4(e){return e!==null&&typeof e=="object"?e.valueOf():e}function q4(e=ba){if(e===ba)return AA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function AA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Y4=Math.sqrt(50),X4=Math.sqrt(10),Q4=Math.sqrt(2);function hf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Y4?10:a>=X4?5:a>=Q4?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/o,l=Math.round(e*c),u=Math.round(t*c),l/c<e&&++l,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*o,l=Math.round(e/c),u=Math.round(t/c),l*c<e&&++l,u*c>t&&--u),u<l&&.5<=n&&n<2?hf(e,t,n*2):[l,u,c]}function Dy(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?hf(t,e,n):hf(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let c=0;c<l;++c)u[c]=(a-c)/-o;else for(let c=0;c<l;++c)u[c]=(a-c)*o;else if(o<0)for(let c=0;c<l;++c)u[c]=(i+c)/-o;else for(let c=0;c<l;++c)u[c]=(i+c)*o;return u}function Ry(e,t,n){return t=+t,e=+e,n=+n,hf(e,t,n)[2]}function Ly(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Ry(t,e,n):Ry(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ej(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Pj(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function OA(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?AA:q4(i);r>n;){if(r-n>600){const u=r-n+1,c=t-n+1,d=Math.log(u),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(n,Math.floor(t-c*f/u+h)),g=Math.min(r,Math.floor(t+(u-c)*f/u+h));OA(e,t,p,g,i)}const a=e[t];let o=n,l=r;for(dl(e,n,t),i(e[r],a)>0&&dl(e,n,r);o<l;){for(dl(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?dl(e,n,l):(++l,dl(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function dl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Z4(e,t,n){if(e=Float64Array.from(W4(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Pj(e);if(t>=1)return Ej(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ej(OA(e,a).subarray(0,a+1)),l=Pj(e.subarray(a+1));return o+(l-o)*(i-a)}}function J4(e,t,n=TA){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function e5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function wr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ui(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const My=Symbol("implicit");function Qx(){var e=new Sj,t=[],n=[],r=My;function i(a){let o=e.get(a);if(o===void 0){if(r!==My)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Sj;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Qx(t,n).unknown(r)},wr.apply(i,arguments),i}function Zx(){var e=Qx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,l=!1,u=0,c=0,d=.5;delete e.unknown;function f(){var h=t().length,p=i<r,g=p?i:r,y=p?r:i;a=(y-g)/Math.max(1,h-u+c*2),l&&(a=Math.floor(a)),g+=(y-g-a*(h-u))*d,o=a*(1-u),l&&(g=Math.round(g),o=Math.round(o));var x=e5(h).map(function(v){return g+a*v});return n(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(u=Math.min(1,c=+h),f()):u},e.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Zx(t(),[r,i]).round(l).paddingInner(u).paddingOuter(c).align(d)},wr.apply(f(),arguments)}function CA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CA(t())},e}function t5(){return CA(Zx.apply(null,arguments).paddingInner(1))}function Jx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function IA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fu(){}var gu=.7,pf=1/gu,so="\\s*([+-]?\\d+)\\s*",yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",n5=/^#([0-9a-f]{3,8})$/,r5=new RegExp(`^rgb\\(${so},${so},${so}\\)$`),i5=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),a5=new RegExp(`^rgba\\(${so},${so},${so},${yu}\\)$`),s5=new RegExp(`^rgba\\(${ni},${ni},${ni},${yu}\\)$`),o5=new RegExp(`^hsl\\(${yu},${ni},${ni}\\)$`),l5=new RegExp(`^hsla\\(${yu},${ni},${ni},${yu}\\)$`),Tj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jx(Fu,vu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Aj,formatHex:Aj,formatHex8:u5,formatHsl:c5,formatRgb:Oj,toString:Oj});function Aj(){return this.rgb().formatHex()}function u5(){return this.rgb().formatHex8()}function c5(){return DA(this).formatHsl()}function Oj(){return this.rgb().formatRgb()}function vu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=n5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cj(t):n===3?new In(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=r5.exec(e))?new In(t[1],t[2],t[3],1):(t=i5.exec(e))?new In(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a5.exec(e))?Pc(t[1],t[2],t[3],t[4]):(t=s5.exec(e))?Pc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o5.exec(e))?Rj(t[1],t[2]/100,t[3]/100,1):(t=l5.exec(e))?Rj(t[1],t[2]/100,t[3]/100,t[4]):Tj.hasOwnProperty(e)?Cj(Tj[e]):e==="transparent"?new In(NaN,NaN,NaN,0):null}function Cj(e){return new In(e>>16&255,e>>8&255,e&255,1)}function Pc(e,t,n,r){return r<=0&&(e=t=n=NaN),new In(e,t,n,r)}function d5(e){return e instanceof Fu||(e=vu(e)),e?(e=e.rgb(),new In(e.r,e.g,e.b,e.opacity)):new In}function $y(e,t,n,r){return arguments.length===1?d5(e):new In(e,t,n,r??1)}function In(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Jx(In,$y,IA(Fu,{brighter(e){return e=e==null?pf:Math.pow(pf,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gu:Math.pow(gu,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new In(rs(this.r),rs(this.g),rs(this.b),mf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ij,formatHex:Ij,formatHex8:f5,formatRgb:Dj,toString:Dj}));function Ij(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}`}function f5(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}${Xa((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dj(){const e=mf(this.opacity);return`${e===1?"rgb(":"rgba("}${rs(this.r)}, ${rs(this.g)}, ${rs(this.b)}${e===1?")":`, ${e})`}`}function mf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xa(e){return e=rs(e),(e<16?"0":"")+e.toString(16)}function Rj(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tr(e,t,n,r)}function DA(e){if(e instanceof Tr)return new Tr(e.h,e.s,e.l,e.opacity);if(e instanceof Fu||(e=vu(e)),!e)return new Tr;if(e instanceof Tr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Tr(o,l,u,e.opacity)}function h5(e,t,n,r){return arguments.length===1?DA(e):new Tr(e,t,n,r??1)}function Tr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Jx(Tr,h5,IA(Fu,{brighter(e){return e=e==null?pf:Math.pow(pf,e),new Tr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gu:Math.pow(gu,e),new Tr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new In(_m(e>=240?e-240:e+120,i,r),_m(e,i,r),_m(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Tr(Lj(this.h),Tc(this.s),Tc(this.l),mf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mf(this.opacity);return`${e===1?"hsl(":"hsla("}${Lj(this.h)}, ${Tc(this.s)*100}%, ${Tc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lj(e){return e=(e||0)%360,e<0?e+360:e}function Tc(e){return Math.max(0,Math.min(1,e||0))}function _m(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const e0=e=>()=>e;function p5(e,t){return function(n){return e+n*t}}function m5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function g5(e){return(e=+e)==1?RA:function(t,n){return n-t?m5(t,n,e):e0(isNaN(t)?n:t)}}function RA(e,t){var n=t-e;return n?p5(e,n):e0(isNaN(e)?t:e)}const Mj=function e(t){var n=g5(t);function r(i,a){var o=n((i=$y(i)).r,(a=$y(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),c=RA(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function y5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function v5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function x5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=$o(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function b5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=$o(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var zy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sm=new RegExp(zy.source,"g");function k5(e){return function(){return e}}function j5(e){return function(t){return e(t)+""}}function _5(e,t){var n=zy.lastIndex=Sm.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=zy.exec(e))&&(i=Sm.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:gf(r,i)})),n=Sm.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?j5(u[0].x):k5(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(c);return l.join("")})}function $o(e,t){var n=typeof t,r;return t==null||n==="boolean"?e0(t):(n==="number"?gf:n==="string"?(r=vu(t))?(t=r,Mj):_5:t instanceof vu?Mj:t instanceof Date?b5:v5(t)?y5:Array.isArray(t)?x5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w5:gf)(e,t)}function t0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function S5(e,t){t===void 0&&(t=e,e=$o);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function N5(e){return function(){return e}}function yf(e){return+e}var $j=[0,1];function pn(e){return e}function Fy(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:N5(isNaN(t)?NaN:.5)}function E5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function P5(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Fy(i,r),a=n(o,a)):(r=Fy(r,i),a=n(a,o)),function(l){return a(r(l))}}function T5(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Fy(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=zu(e,l,1,r)-1;return a[u](i[u](l))}}function Bu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wh(){var e=$j,t=$j,n=$o,r,i,a,o=pn,l,u,c;function d(){var h=Math.min(e.length,t.length);return o!==pn&&(o=E5(e[0],e[h-1])),l=h>2?T5:P5,u=c=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=l(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((c||(c=l(t,e.map(r),gf)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,yf),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=t0,d()},f.clamp=function(h){return arguments.length?(o=h?!0:pn,d()):o!==pn},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,d()}}function n0(){return Wh()(pn,pn)}function A5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vf(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jo(e){return e=vf(Math.abs(e)),e?e[1]:NaN}function O5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function C5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var I5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xu(e){if(!(t=I5.exec(e)))throw new Error("invalid format: "+e);var t;return new r0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xu.prototype=r0.prototype;function r0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}r0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function D5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xf;function R5(e,t){var n=vf(e,t);if(!n)return xf=void 0,e.toPrecision(t);var r=n[0],i=n[1],a=i-(xf=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+vf(e,Math.max(0,t+a-1))[0]}function zj(e,t){var n=vf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Fj={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:A5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zj(e*100,t),r:zj,s:R5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Bj(e){return e}var Uj=Array.prototype.map,Wj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function L5(e){var t=e.grouping===void 0||e.thousands===void 0?Bj:O5(Uj.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Bj:C5(Uj.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f,h){f=xu(f);var p=f.fill,g=f.align,y=f.sign,x=f.symbol,v=f.zero,b=f.width,w=f.comma,j=f.precision,_=f.trim,k=f.type;k==="n"?(w=!0,k="g"):Fj[k]||(j===void 0&&(j=12),_=!0,k="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var E=(h&&h.prefix!==void 0?h.prefix:"")+(x==="$"?n:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),A=(x==="$"?r:/[%p]/.test(k)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),T=Fj[k],S=/[defgprs%]/.test(k);j=j===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function P(C){var B=E,M=A,D,q,z;if(k==="c")M=T(C)+M,C="";else{C=+C;var $=C<0||1/C<0;if(C=isNaN(C)?u:T(Math.abs(C),j),_&&(C=D5(C)),$&&+C==0&&y!=="+"&&($=!1),B=($?y==="("?y:l:y==="-"||y==="("?"":y)+B,M=(k==="s"&&!isNaN(C)&&xf!==void 0?Wj[8+xf/3]:"")+M+($&&y==="("?")":""),S){for(D=-1,q=C.length;++D<q;)if(z=C.charCodeAt(D),48>z||z>57){M=(z===46?i+C.slice(D+1):C.slice(D))+M,C=C.slice(0,D);break}}}w&&!v&&(C=t(C,1/0));var R=B.length+C.length+M.length,N=R<b?new Array(b-R+1).join(p):"";switch(w&&v&&(C=t(N+C,N.length?b-M.length:1/0),N=""),g){case"<":C=B+C+M+N;break;case"=":C=B+N+C+M;break;case"^":C=N.slice(0,R=N.length>>1)+B+C+M+N.slice(R);break;default:C=N+B+C+M;break}return a(C)}return P.toString=function(){return f+""},P}function d(f,h){var p=Math.max(-8,Math.min(8,Math.floor(jo(h)/3)))*3,g=Math.pow(10,-p),y=c((f=xu(f),f.type="f",f),{suffix:Wj[8+p/3]});return function(x){return y(g*x)}}return{format:c,formatPrefix:d}}var Ac,i0,LA;M5({thousands:",",grouping:[3],currency:["$",""]});function M5(e){return Ac=L5(e),i0=Ac.format,LA=Ac.formatPrefix,Ac}function $5(e){return Math.max(0,-jo(Math.abs(e)))}function z5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jo(t)/3)))*3-jo(Math.abs(e)))}function F5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jo(t)-jo(e))+1}function MA(e,t,n,r){var i=Ly(e,t,n),a;switch(r=xu(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=z5(i,o))&&(r.precision=a),LA(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=F5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=$5(i))&&(r.precision=a-(r.type==="%")*2);break}}return i0(r)}function Ia(e){var t=e.domain;return e.ticks=function(n){var r=t();return Dy(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return MA(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,c,d=10;for(l<o&&(c=o,o=l,l=c,c=i,i=a,a=c);d-- >0;){if(c=Ry(o,l,n),c===u)return r[i]=o,r[a]=l,t(r);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;u=c}return e},e}function $A(){var e=n0();return e.copy=function(){return Bu(e,$A())},wr.apply(e,arguments),Ia(e)}function zA(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return zA(e).unknown(t)},e=arguments.length?Array.from(e,yf):[0,1],Ia(n)}function FA(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Hj(e){return Math.log(e)}function Kj(e){return Math.exp(e)}function B5(e){return-Math.log(-e)}function U5(e){return-Math.exp(-e)}function W5(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H5(e){return e===10?W5:e===Math.E?Math.exp:t=>Math.pow(e,t)}function K5(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Vj(e){return(t,n)=>-e(-t,n)}function a0(e){const t=e(Hj,Kj),n=t.domain;let r=10,i,a;function o(){return i=K5(r),a=H5(r),n()[0]<0?(i=Vj(i),a=Vj(a),e(B5,U5)):e(Hj,Kj),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let c=u[0],d=u[u.length-1];const f=d<c;f&&([c,d]=[d,c]);let h=i(c),p=i(d),g,y;const x=l==null?10:+l;let v=[];if(!(r%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(g=1;g<r;++g)if(y=h<0?g/a(-h):g*a(h),!(y<c)){if(y>d)break;v.push(y)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(y=h>0?g/a(-h):g*a(h),!(y<c)){if(y>d)break;v.push(y)}v.length*2<x&&(v=Dy(c,d,x))}else v=Dy(h,p,Math.min(p-h,x)).map(a);return f?v.reverse():v},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=xu(u)).precision==null&&(u.trim=!0),u=i0(u)),l===1/0)return u;const c=Math.max(1,r*l/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=c?u(d):""}},t.nice=()=>n(FA(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function BA(){const e=a0(Wh()).domain([1,10]);return e.copy=()=>Bu(e,BA()).base(e.base()),wr.apply(e,arguments),e}function Gj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s0(e){var t=1,n=e(Gj(t),qj(t));return n.constant=function(r){return arguments.length?e(Gj(t=+r),qj(t)):t},Ia(n)}function UA(){var e=s0(Wh());return e.copy=function(){return Bu(e,UA()).constant(e.constant())},wr.apply(e,arguments)}function Yj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function V5(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function G5(e){return e<0?-e*e:e*e}function o0(e){var t=e(pn,pn),n=1;function r(){return n===1?e(pn,pn):n===.5?e(V5,G5):e(Yj(n),Yj(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ia(t)}function l0(){var e=o0(Wh());return e.copy=function(){return Bu(e,l0()).exponent(e.exponent())},wr.apply(e,arguments),e}function q5(){return l0.apply(null,arguments).exponent(.5)}function Xj(e){return Math.sign(e)*e*e}function Y5(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function WA(){var e=n0(),t=[0,1],n=!1,r;function i(a){var o=Y5(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(Xj(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,yf)).map(Xj)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return WA(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},wr.apply(i,arguments),Ia(i)}function HA(){var e=[],t=[],n=[],r;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=J4(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[zu(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ba),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return HA().domain(e).range(t).unknown(r)},wr.apply(a,arguments)}function KA(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[zu(r,u,0,n)]:a}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},o.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return KA().domain([e,t]).range(i).unknown(a)},wr.apply(Ia(o),arguments)}function VA(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[zu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return VA().domain(e).range(t).unknown(n)},wr.apply(i,arguments)}const Nm=new Date,Em=new Date;function Rt(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return u;let c;do u.push(c=new Date(+a)),t(a,l),e(a);while(c<a&&a<o);return u},i.filter=a=>Rt(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Nm.setTime(+a),Em.setTime(+o),e(Nm),e(Em),Math.floor(n(Nm,Em))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const bf=Rt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Rt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bf);bf.range;const ki=1e3,fr=ki*60,ji=fr*60,Ci=ji*24,u0=Ci*7,Qj=Ci*30,Pm=Ci*365,Qa=Rt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCSeconds());Qa.range;const c0=Rt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ki)},(e,t)=>{e.setTime(+e+t*fr)},(e,t)=>(t-e)/fr,e=>e.getMinutes());c0.range;const d0=Rt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fr)},(e,t)=>(t-e)/fr,e=>e.getUTCMinutes());d0.range;const f0=Rt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ki-e.getMinutes()*fr)},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getHours());f0.range;const h0=Rt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getUTCHours());h0.range;const Uu=Rt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fr)/Ci,e=>e.getDate()-1);Uu.range;const Hh=Rt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>e.getUTCDate()-1);Hh.range;const GA=Rt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>Math.floor(e/Ci));GA.range;function ks(e){return Rt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fr)/u0)}const Kh=ks(0),wf=ks(1),X5=ks(2),Q5=ks(3),_o=ks(4),Z5=ks(5),J5=ks(6);Kh.range;wf.range;X5.range;Q5.range;_o.range;Z5.range;J5.range;function js(e){return Rt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/u0)}const Vh=js(0),kf=js(1),eU=js(2),tU=js(3),So=js(4),nU=js(5),rU=js(6);Vh.range;kf.range;eU.range;tU.range;So.range;nU.range;rU.range;const p0=Rt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p0.range;const m0=Rt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());m0.range;const Ii=Rt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ii.range;const Di=Rt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Rt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Di.range;function qA(e,t,n,r,i,a){const o=[[Qa,1,ki],[Qa,5,5*ki],[Qa,15,15*ki],[Qa,30,30*ki],[a,1,fr],[a,5,5*fr],[a,15,15*fr],[a,30,30*fr],[i,1,ji],[i,3,3*ji],[i,6,6*ji],[i,12,12*ji],[r,1,Ci],[r,2,2*Ci],[n,1,u0],[t,1,Qj],[t,3,3*Qj],[e,1,Pm]];function l(c,d,f){const h=d<c;h&&([c,d]=[d,c]);const p=f&&typeof f.range=="function"?f:u(c,d,f),g=p?p.range(c,+d+1):[];return h?g.reverse():g}function u(c,d,f){const h=Math.abs(d-c)/f,p=Xx(([,,x])=>x).right(o,h);if(p===o.length)return e.every(Ly(c/Pm,d/Pm,f));if(p===0)return bf.every(Math.max(Ly(c,d,f),1));const[g,y]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return g.every(y)}return[l,u]}const[iU,aU]=qA(Di,m0,Vh,GA,h0,d0),[sU,oU]=qA(Ii,p0,Kh,Uu,f0,c0);function Tm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Am(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lU(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,c=hl(i),d=pl(i),f=hl(a),h=pl(a),p=hl(o),g=pl(o),y=hl(l),x=pl(l),v=hl(u),b=pl(u),w={a:z,A:$,b:R,B:N,c:null,d:r_,e:r_,f:OU,g:BU,G:WU,H:PU,I:TU,j:AU,L:YA,m:CU,M:IU,p:Y,q:U,Q:s_,s:o_,S:DU,u:RU,U:LU,V:MU,w:$U,W:zU,x:null,X:null,y:FU,Y:UU,Z:HU,"%":a_},j={a:O,A:ne,b:ge,B:re,c:null,d:i_,e:i_,f:qU,g:iW,G:sW,H:KU,I:VU,j:GU,L:QA,m:YU,M:XU,p:me,q:Fe,Q:s_,s:o_,S:QU,u:ZU,U:JU,V:eW,w:tW,W:nW,x:null,X:null,y:rW,Y:aW,Z:oW,"%":a_},_={a:S,A:P,b:C,B,c:M,d:t_,e:t_,f:_U,g:e_,G:Jj,H:n_,I:n_,j:bU,L:jU,m:xU,M:wU,p:T,q:vU,Q:NU,s:EU,S:kU,u:hU,U:pU,V:mU,w:fU,W:gU,x:D,X:q,y:e_,Y:Jj,Z:yU,"%":SU};w.x=k(n,w),w.X=k(r,w),w.c=k(t,w),j.x=k(n,j),j.X=k(r,j),j.c=k(t,j);function k(W,ie){return function(Z){var I=[],K=-1,te=0,fe=W.length,ue,je,nt;for(Z instanceof Date||(Z=new Date(+Z));++K<fe;)W.charCodeAt(K)===37&&(I.push(W.slice(te,K)),(je=Zj[ue=W.charAt(++K)])!=null?ue=W.charAt(++K):je=ue==="e"?" ":"0",(nt=ie[ue])&&(ue=nt(Z,je)),I.push(ue),te=K+1);return I.push(W.slice(te,K)),I.join("")}}function E(W,ie){return function(Z){var I=fl(1900,void 0,1),K=A(I,W,Z+="",0),te,fe;if(K!=Z.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(ie&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(te=Am(fl(I.y,0,1)),fe=te.getUTCDay(),te=fe>4||fe===0?kf.ceil(te):kf(te),te=Hh.offset(te,(I.V-1)*7),I.y=te.getUTCFullYear(),I.m=te.getUTCMonth(),I.d=te.getUTCDate()+(I.w+6)%7):(te=Tm(fl(I.y,0,1)),fe=te.getDay(),te=fe>4||fe===0?wf.ceil(te):wf(te),te=Uu.offset(te,(I.V-1)*7),I.y=te.getFullYear(),I.m=te.getMonth(),I.d=te.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),fe="Z"in I?Am(fl(I.y,0,1)).getUTCDay():Tm(fl(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(fe+5)%7:I.w+I.U*7-(fe+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,Am(I)):Tm(I)}}function A(W,ie,Z,I){for(var K=0,te=ie.length,fe=Z.length,ue,je;K<te;){if(I>=fe)return-1;if(ue=ie.charCodeAt(K++),ue===37){if(ue=ie.charAt(K++),je=_[ue in Zj?ie.charAt(K++):ue],!je||(I=je(W,Z,I))<0)return-1}else if(ue!=Z.charCodeAt(I++))return-1}return I}function T(W,ie,Z){var I=c.exec(ie.slice(Z));return I?(W.p=d.get(I[0].toLowerCase()),Z+I[0].length):-1}function S(W,ie,Z){var I=p.exec(ie.slice(Z));return I?(W.w=g.get(I[0].toLowerCase()),Z+I[0].length):-1}function P(W,ie,Z){var I=f.exec(ie.slice(Z));return I?(W.w=h.get(I[0].toLowerCase()),Z+I[0].length):-1}function C(W,ie,Z){var I=v.exec(ie.slice(Z));return I?(W.m=b.get(I[0].toLowerCase()),Z+I[0].length):-1}function B(W,ie,Z){var I=y.exec(ie.slice(Z));return I?(W.m=x.get(I[0].toLowerCase()),Z+I[0].length):-1}function M(W,ie,Z){return A(W,t,ie,Z)}function D(W,ie,Z){return A(W,n,ie,Z)}function q(W,ie,Z){return A(W,r,ie,Z)}function z(W){return o[W.getDay()]}function $(W){return a[W.getDay()]}function R(W){return u[W.getMonth()]}function N(W){return l[W.getMonth()]}function Y(W){return i[+(W.getHours()>=12)]}function U(W){return 1+~~(W.getMonth()/3)}function O(W){return o[W.getUTCDay()]}function ne(W){return a[W.getUTCDay()]}function ge(W){return u[W.getUTCMonth()]}function re(W){return l[W.getUTCMonth()]}function me(W){return i[+(W.getUTCHours()>=12)]}function Fe(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var ie=k(W+="",w);return ie.toString=function(){return W},ie},parse:function(W){var ie=E(W+="",!1);return ie.toString=function(){return W},ie},utcFormat:function(W){var ie=k(W+="",j);return ie.toString=function(){return W},ie},utcParse:function(W){var ie=E(W+="",!0);return ie.toString=function(){return W},ie}}}var Zj={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,uU=/^%/,cU=/[\\^$*+?|[\]().{}]/g;function Te(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function dU(e){return e.replace(cU,"\\$&")}function hl(e){return new RegExp("^(?:"+e.map(dU).join("|")+")","i")}function pl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fU(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hU(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Jj(e,t,n){var r=Ht.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function e_(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yU(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vU(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function xU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function t_(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bU(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function n_(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function kU(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jU(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _U(e,t,n){var r=Ht.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function SU(e,t,n){var r=uU.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function NU(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function EU(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function r_(e,t){return Te(e.getDate(),t,2)}function PU(e,t){return Te(e.getHours(),t,2)}function TU(e,t){return Te(e.getHours()%12||12,t,2)}function AU(e,t){return Te(1+Uu.count(Ii(e),e),t,3)}function YA(e,t){return Te(e.getMilliseconds(),t,3)}function OU(e,t){return YA(e,t)+"000"}function CU(e,t){return Te(e.getMonth()+1,t,2)}function IU(e,t){return Te(e.getMinutes(),t,2)}function DU(e,t){return Te(e.getSeconds(),t,2)}function RU(e){var t=e.getDay();return t===0?7:t}function LU(e,t){return Te(Kh.count(Ii(e)-1,e),t,2)}function XA(e){var t=e.getDay();return t>=4||t===0?_o(e):_o.ceil(e)}function MU(e,t){return e=XA(e),Te(_o.count(Ii(e),e)+(Ii(e).getDay()===4),t,2)}function $U(e){return e.getDay()}function zU(e,t){return Te(wf.count(Ii(e)-1,e),t,2)}function FU(e,t){return Te(e.getFullYear()%100,t,2)}function BU(e,t){return e=XA(e),Te(e.getFullYear()%100,t,2)}function UU(e,t){return Te(e.getFullYear()%1e4,t,4)}function WU(e,t){var n=e.getDay();return e=n>=4||n===0?_o(e):_o.ceil(e),Te(e.getFullYear()%1e4,t,4)}function HU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Te(t/60|0,"0",2)+Te(t%60,"0",2)}function i_(e,t){return Te(e.getUTCDate(),t,2)}function KU(e,t){return Te(e.getUTCHours(),t,2)}function VU(e,t){return Te(e.getUTCHours()%12||12,t,2)}function GU(e,t){return Te(1+Hh.count(Di(e),e),t,3)}function QA(e,t){return Te(e.getUTCMilliseconds(),t,3)}function qU(e,t){return QA(e,t)+"000"}function YU(e,t){return Te(e.getUTCMonth()+1,t,2)}function XU(e,t){return Te(e.getUTCMinutes(),t,2)}function QU(e,t){return Te(e.getUTCSeconds(),t,2)}function ZU(e){var t=e.getUTCDay();return t===0?7:t}function JU(e,t){return Te(Vh.count(Di(e)-1,e),t,2)}function ZA(e){var t=e.getUTCDay();return t>=4||t===0?So(e):So.ceil(e)}function eW(e,t){return e=ZA(e),Te(So.count(Di(e),e)+(Di(e).getUTCDay()===4),t,2)}function tW(e){return e.getUTCDay()}function nW(e,t){return Te(kf.count(Di(e)-1,e),t,2)}function rW(e,t){return Te(e.getUTCFullYear()%100,t,2)}function iW(e,t){return e=ZA(e),Te(e.getUTCFullYear()%100,t,2)}function aW(e,t){return Te(e.getUTCFullYear()%1e4,t,4)}function sW(e,t){var n=e.getUTCDay();return e=n>=4||n===0?So(e):So.ceil(e),Te(e.getUTCFullYear()%1e4,t,4)}function oW(){return"+0000"}function a_(){return"%"}function s_(e){return+e}function o_(e){return Math.floor(+e/1e3)}var Ps,JA,eO;lW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lW(e){return Ps=lU(e),JA=Ps.format,Ps.parse,eO=Ps.utcFormat,Ps.utcParse,Ps}function uW(e){return new Date(e)}function cW(e){return e instanceof Date?+e:+new Date(+e)}function g0(e,t,n,r,i,a,o,l,u,c){var d=n0(),f=d.invert,h=d.domain,p=c(".%L"),g=c(":%S"),y=c("%I:%M"),x=c("%I %p"),v=c("%a %d"),b=c("%b %d"),w=c("%B"),j=c("%Y");function _(k){return(u(k)<k?p:l(k)<k?g:o(k)<k?y:a(k)<k?x:r(k)<k?i(k)<k?v:b:n(k)<k?w:j)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?h(Array.from(k,cW)):h().map(uW)},d.ticks=function(k){var E=h();return e(E[0],E[E.length-1],k??10)},d.tickFormat=function(k,E){return E==null?_:c(E)},d.nice=function(k){var E=h();return(!k||typeof k.range!="function")&&(k=t(E[0],E[E.length-1],k??10)),k?h(FA(E,k)):d},d.copy=function(){return Bu(d,g0(e,t,n,r,i,a,o,l,u,c))},d}function dW(){return wr.apply(g0(sU,oU,Ii,p0,Kh,Uu,f0,c0,Qa,JA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fW(){return wr.apply(g0(iU,aU,Di,m0,Vh,Hh,h0,d0,Qa,eO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gh(){var e=0,t=1,n,r,i,a,o=pn,l=!1,u;function c(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(a(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(f){return arguments.length?(l=!!f,c):l},c.interpolator=function(f){return arguments.length?(o=f,c):o};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,o=f(p,g),c):[o(0),o(1)]}}return c.range=d($o),c.rangeRound=d(t0),c.unknown=function(f){return arguments.length?(u=f,c):u},function(f){return a=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),c}}function Da(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tO(){var e=Ia(Gh()(pn));return e.copy=function(){return Da(e,tO())},Ui.apply(e,arguments)}function nO(){var e=a0(Gh()).domain([1,10]);return e.copy=function(){return Da(e,nO()).base(e.base())},Ui.apply(e,arguments)}function rO(){var e=s0(Gh());return e.copy=function(){return Da(e,rO()).constant(e.constant())},Ui.apply(e,arguments)}function y0(){var e=o0(Gh());return e.copy=function(){return Da(e,y0()).exponent(e.exponent())},Ui.apply(e,arguments)}function hW(){return y0.apply(null,arguments).exponent(.5)}function iO(){var e=[],t=pn;function n(r){if(r!=null&&!isNaN(r=+r))return t((zu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ba),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Z4(e,a/r))},n.copy=function(){return iO(t).domain(e)},Ui.apply(n,arguments)}function qh(){var e=0,t=.5,n=1,r=1,i,a,o,l,u,c=pn,d,f=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(r*y<r*a?l:u),c(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,n]=y,i=d(e=+e),a=d(t=+t),o=d(n=+n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,p):[e,t,n]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(c=y,p):c};function g(y){return function(x){var v,b,w;return arguments.length?([v,b,w]=x,c=S5(y,[v,b,w]),p):[c(0),c(.5),c(1)]}}return p.range=g($o),p.rangeRound=g(t0),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return d=y,i=y(e),a=y(t),o=y(n),l=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,p}}function aO(){var e=Ia(qh()(pn));return e.copy=function(){return Da(e,aO())},Ui.apply(e,arguments)}function sO(){var e=a0(qh()).domain([.1,1,10]);return e.copy=function(){return Da(e,sO()).base(e.base())},Ui.apply(e,arguments)}function oO(){var e=s0(qh());return e.copy=function(){return Da(e,oO()).constant(e.constant())},Ui.apply(e,arguments)}function v0(){var e=o0(qh());return e.copy=function(){return Da(e,v0()).exponent(e.exponent())},Ui.apply(e,arguments)}function pW(){return v0.apply(null,arguments).exponent(.5)}const Sl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zx,scaleDiverging:aO,scaleDivergingLog:sO,scaleDivergingPow:v0,scaleDivergingSqrt:pW,scaleDivergingSymlog:oO,scaleIdentity:zA,scaleImplicit:My,scaleLinear:$A,scaleLog:BA,scaleOrdinal:Qx,scalePoint:t5,scalePow:l0,scaleQuantile:HA,scaleQuantize:KA,scaleRadial:WA,scaleSequential:tO,scaleSequentialLog:nO,scaleSequentialPow:y0,scaleSequentialQuantile:iO,scaleSequentialSqrt:hW,scaleSequentialSymlog:rO,scaleSqrt:q5,scaleSymlog:UA,scaleThreshold:VA,scaleTime:dW,scaleUtc:fW,tickFormat:MA},Symbol.toStringTag,{value:"Module"}));var Wi=e=>e.chartData,lO=F([Wi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Yh=(e,t,n,r)=>r?lO(e):Wi(e),uO=(e,t,n)=>n?lO(e):Wi(e);function Ri(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(pe(t)&&pe(n))return!0}return!1}function l_(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function cO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(pe(n))i=n;else if(typeof n=="function")return;if(pe(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(Ri(o))return o}}function mW(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Ri(r))return l_(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(ae(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&Nk.test(i)){var u=Nk.exec(i);if(u==null||u[1]==null||t==null)o=void 0;else{var c=+u[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(a==="auto")t!=null&&(l=Math.max(...t));else if(ae(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&Ek.test(a)){var d=Ek.exec(a);if(d==null||d[1]==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(Ri(h))return t==null?h:l_(h,t,n)}}}var zo=1e9,gW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b0,ct=!0,vr="[DecimalError] ",is=vr+"Invalid argument: ",x0=vr+"Exponent out of range: ",Fo=Math.floor,Ha=Math.pow,yW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hn,Ft=1e7,it=7,dO=9007199254740991,jf=Fo(dO/it),oe={};oe.absoluteValue=oe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};oe.comparedTo=oe.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};oe.decimalPlaces=oe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*it;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};oe.dividedBy=oe.div=function(e){return Si(this,new this.constructor(e))};oe.dividedToIntegerBy=oe.idiv=function(e){var t=this,n=t.constructor;return Ve(Si(t,new n(e),0,1),n.precision)};oe.equals=oe.eq=function(e){return!this.cmp(e)};oe.exponent=function(){return At(this)};oe.greaterThan=oe.gt=function(e){return this.cmp(e)>0};oe.greaterThanOrEqualTo=oe.gte=function(e){return this.cmp(e)>=0};oe.isInteger=oe.isint=function(){return this.e>this.d.length-2};oe.isNegative=oe.isneg=function(){return this.s<0};oe.isPositive=oe.ispos=function(){return this.s>0};oe.isZero=function(){return this.s===0};oe.lessThan=oe.lt=function(e){return this.cmp(e)<0};oe.lessThanOrEqualTo=oe.lte=function(e){return this.cmp(e)<1};oe.logarithm=oe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Hn))throw Error(vr+"NaN");if(n.s<1)throw Error(vr+(n.s?"NaN":"-Infinity"));return n.eq(Hn)?new r(0):(ct=!1,t=Si(bu(n,a),bu(e,a),a),ct=!0,Ve(t,i))};oe.minus=oe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pO(t,e):fO(t,(e.s=-e.s,e))};oe.modulo=oe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(vr+"NaN");return n.s?(ct=!1,t=Si(n,e,0,1).times(e),ct=!0,n.minus(t)):Ve(new r(n),i)};oe.naturalExponential=oe.exp=function(){return hO(this)};oe.naturalLogarithm=oe.ln=function(){return bu(this)};oe.negated=oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};oe.plus=oe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fO(t,e):pO(t,(e.s=-e.s,e))};oe.precision=oe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(is+e);if(t=At(i)+1,r=i.d.length-1,n=r*it+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};oe.squareRoot=oe.sqrt=function(){var e,t,n,r,i,a,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(vr+"NaN")}for(e=At(l),ct=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Jr(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Fo((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new u(t)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(Si(l,a,o+2)).times(.5),Jr(a.d).slice(0,o)===(t=Jr(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Ve(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(t!="9999")break;o+=4}return ct=!0,Ve(r,n)};oe.times=oe.mul=function(e){var t,n,r,i,a,o,l,u,c,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,u=h.length,c=p.length,u<c&&(a=h,h=p,p=a,o=u,u=c,c=o),a=[],o=u+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)l=a[i]+p[r]*h[i-r-1]+t,a[i--]=l%Ft|0,t=l/Ft|0;a[i]=(a[i]+t)%Ft|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,ct?Ve(e,f.precision):e};oe.toDecimalPlaces=oe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ai(e,0,zo),t===void 0?t=r.rounding:ai(t,0,8),Ve(n,e+At(n)+1,t))};oe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=gs(r,!0):(ai(e,0,zo),t===void 0?t=i.rounding:ai(t,0,8),r=Ve(new i(r),e+1,t),n=gs(r,!0,e+1)),n};oe.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?gs(i):(ai(e,0,zo),t===void 0?t=a.rounding:ai(t,0,8),r=Ve(new a(i),e+At(i)+1,t),n=gs(r.abs(),!1,e+At(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};oe.toInteger=oe.toint=function(){var e=this,t=e.constructor;return Ve(new t(e),At(e)+1,t.rounding)};oe.toNumber=function(){return+this};oe.toPower=oe.pow=function(e){var t,n,r,i,a,o,l=this,u=l.constructor,c=12,d=+(e=new u(e));if(!e.s)return new u(Hn);if(l=new u(l),!l.s){if(e.s<1)throw Error(vr+"Infinity");return l}if(l.eq(Hn))return l;if(r=u.precision,e.eq(Hn))return Ve(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=d<0?-d:d)<=dO){for(i=new u(Hn),t=Math.ceil(r/it+4),ct=!1;n%2&&(i=i.times(l),c_(i.d,t)),n=Fo(n/2),n!==0;)l=l.times(l),c_(l.d,t);return ct=!0,e.s<0?new u(Hn).div(i):Ve(i,r)}}else if(a<0)throw Error(vr+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,ct=!1,i=e.times(bu(l,r+c)),ct=!0,i=hO(i),i.s=a,i};oe.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=At(i),r=gs(i,n<=a.toExpNeg||n>=a.toExpPos)):(ai(e,1,zo),t===void 0?t=a.rounding:ai(t,0,8),i=Ve(new a(i),e,t),n=At(i),r=gs(i,e<=n||n<=a.toExpNeg,e)),r};oe.toSignificantDigits=oe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ai(e,1,zo),t===void 0?t=r.rounding:ai(t,0,8)),Ve(new r(n),e,t)};oe.toString=oe.valueOf=oe.val=oe.toJSON=oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=At(e),n=e.constructor;return gs(e,t<=n.toExpNeg||t>=n.toExpPos)};function fO(e,t){var n,r,i,a,o,l,u,c,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ct?Ve(t,f):t;if(u=e.d,c=t.d,o=e.e,i=t.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,l=c.length):(r=c,i=o,l=u.length),o=Math.ceil(f/it),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=c.length,l-a<0&&(a=l,r=c,c=u,u=r),n=0;a;)n=(u[--a]=u[a]+c[a]+n)/Ft|0,u[a]%=Ft;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=i,ct?Ve(t,f):t}function ai(e,t,n){if(e!==~~e||e<t||e>n)throw Error(is+e)}function Jr(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=it-r.length,n&&(a+=ta(n)),a+=r;o=e[t],r=o+"",n=it-r.length,n&&(a+=ta(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Si=function(){function e(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%Ft|0,o=a/Ft|0;return o&&r.unshift(o),r}function t(r,i,a,o){var l,u;if(a!=o)u=a>o?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Ft+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,u,c,d,f,h,p,g,y,x,v,b,w,j,_,k,E,A,T=r.constructor,S=r.s==i.s?1:-1,P=r.d,C=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(vr+"Division by zero");for(u=r.e-i.e,E=C.length,_=P.length,p=new T(S),g=p.d=[],c=0;C[c]==(P[c]||0);)++c;if(C[c]>(P[c]||0)&&--u,a==null?b=a=T.precision:o?b=a+(At(r)-At(i))+1:b=a,b<0)return new T(0);if(b=b/it+2|0,c=0,E==1)for(d=0,C=C[0],b++;(c<_||d)&&b--;c++)w=d*Ft+(P[c]||0),g[c]=w/C|0,d=w%C|0;else{for(d=Ft/(C[0]+1)|0,d>1&&(C=e(C,d),P=e(P,d),E=C.length,_=P.length),j=E,y=P.slice(0,E),x=y.length;x<E;)y[x++]=0;A=C.slice(),A.unshift(0),k=C[0],C[1]>=Ft/2&&++k;do d=0,l=t(C,y,E,x),l<0?(v=y[0],E!=x&&(v=v*Ft+(y[1]||0)),d=v/k|0,d>1?(d>=Ft&&(d=Ft-1),f=e(C,d),h=f.length,x=y.length,l=t(f,y,h,x),l==1&&(d--,n(f,E<h?A:C,h))):(d==0&&(l=d=1),f=C.slice()),h=f.length,h<x&&f.unshift(0),n(y,f,x),l==-1&&(x=y.length,l=t(C,y,E,x),l<1&&(d++,n(y,E<x?A:C,x))),x=y.length):l===0&&(d++,y=[0]),g[c++]=d,l&&y[0]?y[x++]=P[j]||0:(y=[P[j]],x=1);while((j++<_||y[0]!==void 0)&&b--)}return g[0]||g.shift(),p.e=u,Ve(p,o?a+At(p)+1:a)}}();function hO(e,t){var n,r,i,a,o,l,u=0,c=0,d=e.constructor,f=d.precision;if(At(e)>16)throw Error(x0+At(e));if(!e.s)return new d(Hn);for(ct=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(r=Math.log(Ha(2,c))/Math.LN10*2+5|0,l+=r,n=i=a=new d(Hn),d.precision=l;;){if(i=Ve(i.times(e),l),n=n.times(++u),o=a.plus(Si(i,n,l)),Jr(o.d).slice(0,l)===Jr(a.d).slice(0,l)){for(;c--;)a=Ve(a.times(a),l);return d.precision=f,t==null?(ct=!0,Ve(a,f)):a}a=o}}function At(e){for(var t=e.e*it,n=e.d[0];n>=10;n/=10)t++;return t}function Om(e,t,n){if(t>e.LN10.sd())throw ct=!0,n&&(e.precision=n),Error(vr+"LN10 precision limit exceeded");return Ve(new e(e.LN10),t)}function ta(e){for(var t="";e--;)t+="0";return t}function bu(e,t){var n,r,i,a,o,l,u,c,d,f=1,h=10,p=e,g=p.d,y=p.constructor,x=y.precision;if(p.s<1)throw Error(vr+(p.s?"NaN":"-Infinity"));if(p.eq(Hn))return new y(0);if(t==null?(ct=!1,c=x):c=t,p.eq(10))return t==null&&(ct=!0),Om(y,c);if(c+=h,y.precision=c,n=Jr(g),r=n.charAt(0),a=At(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Jr(p.d),r=n.charAt(0),f++;a=At(p),r>1?(p=new y("0."+n),a++):p=new y(r+"."+n.slice(1))}else return u=Om(y,c+2,x).times(a+""),p=bu(new y(r+"."+n.slice(1)),c-h).plus(u),y.precision=x,t==null?(ct=!0,Ve(p,x)):p;for(l=o=p=Si(p.minus(Hn),p.plus(Hn),c),d=Ve(p.times(p),c),i=3;;){if(o=Ve(o.times(d),c),u=l.plus(Si(o,new y(i),c)),Jr(u.d).slice(0,c)===Jr(l.d).slice(0,c))return l=l.times(2),a!==0&&(l=l.plus(Om(y,c+2,x).times(a+""))),l=Si(l,new y(f),c),y.precision=x,t==null?(ct=!0,Ve(l,x)):l;l=u,i+=2}}function u_(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Fo(n/it),e.d=[],r=(n+1)%it,n<0&&(r+=it),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=it;r<i;)e.d.push(+t.slice(r,r+=it));t=t.slice(r),r=it-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),ct&&(e.e>jf||e.e<-jf))throw Error(x0+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ve(e,t,n){var r,i,a,o,l,u,c,d,f=e.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=it,i=t,c=f[d=0];else{if(d=Math.ceil((r+1)/it),a=f.length,d>=a)return e;for(c=a=f[d],o=1;a>=10;a/=10)o++;r%=it,i=r-it+o}if(n!==void 0&&(a=Ha(10,o-i-1),l=c/a%10|0,u=t<0||f[d+1]!==void 0||c%a,u=n<4?(l||u)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?c/Ha(10,o-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return u?(a=At(e),f.length=1,t=t-a-1,f[0]=Ha(10,(it-t%it)%it),e.e=Fo(-t/it)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=Ha(10,it-r),f[d]=i>0?(c/Ha(10,o-i)%Ha(10,i)|0)*a:0),u)for(;;)if(d==0){(f[0]+=a)==Ft&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=Ft)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(ct&&(e.e>jf||e.e<-jf))throw Error(x0+At(e));return e}function pO(e,t){var n,r,i,a,o,l,u,c,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ct?Ve(t,p):t;if(u=e.d,f=t.d,r=t.e,c=e.e,u=u.slice(),o=c-r,o){for(d=o<0,d?(n=u,o=-o,l=f.length):(n=f,r=c,l=u.length),i=Math.max(Math.ceil(p/it),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}o=0}for(d&&(n=u,u=f,f=n,t.s=-t.s),l=u.length,i=f.length-l;i>0;--i)u[l++]=0;for(i=f.length;i>o;){if(u[--i]<f[i]){for(a=i;a&&u[--a]===0;)u[a]=Ft-1;--u[a],u[i]+=Ft}u[i]-=f[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=r,ct?Ve(t,p):t):new h(0)}function gs(e,t,n){var r,i=At(e),a=Jr(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ta(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ta(-i-1)+a,n&&(r=n-o)>0&&(a+=ta(r))):i>=o?(a+=ta(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+ta(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=ta(r))),e.s<0?"-"+a:a}function c_(e,t){if(e.length>t)return e.length=t,!0}function mO(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(is+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return u_(o,a.toString())}else if(typeof a!="string")throw Error(is+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,yW.test(a))u_(o,a);else throw Error(is+a)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=mO,i.config=i.set=vW,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vW(e){if(!e||typeof e!="object")throw Error(vr+"Object expected");var t,n,r,i=["precision",1,zo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Fo(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(is+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(is+n+": "+r);return this}var b0=mO(gW);Hn=new b0(1);const Le=b0;function gO(e){var t;return e===0?t=1:t=Math.floor(new Le(e).abs().log(10).toNumber())+1,t}function yO(e,t,n){for(var r=new Le(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var vO=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},xO=(e,t,n)=>{if(e.lte(0))return new Le(0);var r=gO(e.toNumber()),i=new Le(10).pow(r),a=e.div(i),o=r!==1?.05:.1,l=new Le(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=l.mul(i);return t?new Le(u.toNumber()):new Le(Math.ceil(u.toNumber()))},xW=(e,t,n)=>{var r=new Le(1),i=new Le(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new Le(10).pow(gO(e)-1),i=new Le(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Le(Math.floor(e)))}else e===0?i=new Le(Math.floor((t-1)/2)):n||(i=new Le(Math.floor(e)));for(var o=Math.floor((t-1)/2),l=[],u=0;u<t;u++)l.push(i.add(new Le(u-o).mul(r)).toNumber());return l},bO=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Le(0),tickMin:new Le(0),tickMax:new Le(0)};var o=xO(new Le(n).sub(t).div(r-1),i,a),l;t<=0&&n>=0?l=new Le(0):(l=new Le(t).add(n).div(2),l=l.sub(new Le(l).mod(o)));var u=Math.ceil(l.sub(t).div(o).toNumber()),c=Math.ceil(new Le(n).sub(l).div(o).toNumber()),d=u+c+1;return d>r?bO(t,n,r,i,a+1):(d<r&&(c=n>0?c+(r-d):c,u=n>0?u:u+(r-d)),{step:o,tickMin:l.sub(new Le(u).mul(o)),tickMax:l.add(new Le(c).mul(o))})},bW=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,u]=vO([n,r]);if(l===-1/0||u===1/0){var c=u===1/0?[l,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),u];return n>r?c.reverse():c}if(l===u)return xW(l,i,a);var{step:d,tickMin:f,tickMax:h}=bO(l,u,o,a,0),p=yO(f,h.add(new Le(.1).mul(d)),d);return n>r?p.reverse():p},wW=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=vO([r,i]);if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var u=Math.max(n,2),c=xO(new Le(l).sub(o).div(u-1),a,0),d=[...yO(new Le(o),new Le(l),c),l];return a===!1&&(d=d.map(f=>Math.round(f))),r>i?d.reverse():d},wO=e=>e.rootProps.maxBarSize,kW=e=>e.rootProps.barGap,kO=e=>e.rootProps.barCategoryGap,jW=e=>e.rootProps.barSize,Xh=e=>e.rootProps.stackOffset,jO=e=>e.rootProps.reverseStackOrder,w0=e=>e.options.chartName,k0=e=>e.rootProps.syncId,_O=e=>e.rootProps.syncMethod,j0=e=>e.options.eventEmitter,_W=e=>e.rootProps.baseValue,kt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ma={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Kr={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Qh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Zh(e,t,n){if(n!=="auto")return n;if(e!=null)return Br(e,t)?"category":"number"}function d_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d_(Object(n),!0).forEach(function(r){SW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SW(e,t,n){return(t=NW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NW(e){var t=EW(e,"string");return typeof t=="symbol"?t:t+""}function EW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f_={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:Ma.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ma.angleAxisId,includeHidden:!1,name:void 0,reversed:Ma.reversed,scale:Ma.scale,tick:Ma.tick,tickCount:void 0,ticks:void 0,type:Ma.type,unit:void 0},h_={allowDataOverflow:Kr.allowDataOverflow,allowDecimals:Kr.allowDecimals,allowDuplicatedCategory:Kr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Kr.radiusAxisId,includeHidden:Kr.includeHidden,name:void 0,reversed:Kr.reversed,scale:Kr.scale,tick:Kr.tick,tickCount:Kr.tickCount,ticks:void 0,type:Kr.type,unit:void 0},PW=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},_0=F([PW,lA],(e,t)=>{var n;if(e!=null)return e;var r=(n=Zh(t,"angleAxis",f_.type))!==null&&n!==void 0?n:"category";return _f(_f({},f_),{},{type:r})}),TW=(e,t)=>e.polarAxis.radiusAxis[t],S0=F([TW,lA],(e,t)=>{var n;if(e!=null)return e;var r=(n=Zh(t,"radiusAxis",h_.type))!==null&&n!==void 0?n:"category";return _f(_f({},h_),{},{type:r})}),Jh=e=>e.polarOptions,N0=F([Fi,Bi,Wt],A4),SO=F([Jh,N0],(e,t)=>{if(e!=null)return Mr(e.innerRadius,t,0)}),NO=F([Jh,N0],(e,t)=>{if(e!=null)return Mr(e.outerRadius,t,t*.8)}),AW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},EO=F([Jh],AW);F([_0,EO],Qh);var PO=F([N0,SO,NO],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});F([S0,PO],Qh);var TO=F([Ae,Jh,SO,NO,Fi,Bi],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:l,startAngle:u,endAngle:c}=t;return{cx:Mr(o,i,i/2),cy:Mr(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:c,clockWise:!1}}}),Kt=(e,t)=>t,ep=(e,t,n)=>n;function tp(e){return e==null?void 0:e.id}function AO(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(l=>{var u,c=(u=l.data)!==null&&u!==void 0?u:r;if(!(c==null||c.length===0)){var d=tp(l);c.forEach((f,h)=>{var p=a==null||i?h:String(tt(f,a,null)),g=tt(f,l.dataKey,0),y;o.has(p)?y=o.get(p):y={},Object.assign(y,{[d]:g}),o.set(p,y)})}}),Array.from(o.values())}function np(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var rp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function ip(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function OW(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Vt=e=>{var t=Ae(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Bo=e=>e.tooltip.settings.axisId;function CW(e){if(e in Sl)return Sl[e]();var t="scale".concat(Ou(e));if(t in Sl)return Sl[t]()}function p_(e){var t=e.ticks,n=e.bandwidth,r=e.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>e.domain(),range:function(a){function o(){return a.apply(this,arguments)}return o.toString=function(){return a.toString()},o}(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var o=i[0],l=i[1];return o<=l?a>=o&&a<=l:a>=l&&a<=o},bandwidth:n?()=>n.call(e):void 0,ticks:t?a=>t.call(e,a):void 0,map:(a,o)=>{var l=e(a);if(l!=null){if(e.bandwidth&&o!==null&&o!==void 0&&o.position){var u=e.bandwidth();switch(o.position){case"middle":l+=u/2;break;case"end":l+=u;break}}return l}}}}function m_(e,t,n){if(typeof e=="function")return p_(e.copy().domain(t).range(n));if(e!=null){var r=CW(e);if(r!=null)return r.domain(t).range(n),p_(r)}}var IW=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ri(t)){for(var n,r,i=0;i<t.length;i++){var a=t[i];pe(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return t}default:return t}};function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(n),!0).forEach(function(r){DW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DW(e,t,n){return(t=RW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RW(e){var t=LW(e,"string");return typeof t=="symbol"?t:t+""}function LW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var By=[0,"auto"],$t={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},OO=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var n=OO(e,t);return n??$t},zt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:By,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ru},CO=(e,t)=>e.cartesianAxis.yAxis[t],ui=(e,t)=>{var n=CO(e,t);return n??zt},IO={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},E0=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??IO},kn=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ui(e,n);case"zAxis":return E0(e,n);case"angleAxis":return _0(e,n);case"radiusAxis":return S0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},MW=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ui(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Wu=(e,t,n)=>{switch(t){case"xAxis":return li(e,n);case"yAxis":return ui(e,n);case"angleAxis":return _0(e,n);case"radiusAxis":return S0(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},DO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function RO(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Uo=e=>e.graphicalItems.cartesianItems,$W=F([Kt,ep],RO),LO=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Hu=F([Uo,kn,$W],LO,{memoizeOptions:{resultEqualityCheck:ip}}),MO=F([Hu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(np)),$O=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),zW=F([Hu],$O),zO=e=>e.map(t=>t.data).filter(Boolean).flat(1),FW=F([Hu],zO,{memoizeOptions:{resultEqualityCheck:ip}}),FO=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},P0=F([FW,Yh],FO),BO=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:tt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:tt(i,r)}))):e.map(r=>({value:r})),ap=F([P0,kn,Hu],BO);function UO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ad(e){if(gr(e)||e instanceof Date){var t=Number(e);if(pe(t))return t}}function y_(e){if(Array.isArray(e)){var t=[ad(e[0]),ad(e[1])];return Ri(t)?t:void 0}var n=ad(e);if(n!=null)return[n,n]}function Li(e){return e.map(ad).filter(Cn)}function BW(e,t,n){return!n||typeof t!="number"||Lr(t)?[]:n.length?Li(n.flatMap(r=>{var i=tt(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!pe(a)||!pe(o)))return[t-a,t+o]})):[]}var Lt=e=>{var t=Vt(e),n=Bo(e);return Wu(e,t,n)},Ku=F([Lt],e=>e==null?void 0:e.dataKey),UW=F([MO,Yh,Lt],AO),WO=(e,t,n,r)=>{var i={},a=t.reduce((o,l)=>{if(l.stackId==null)return o;var u=o[l.stackId];return u==null&&(u=[]),u.push(l),o[l.stackId]=u,o},i);return Object.fromEntries(Object.entries(a).map(o=>{var[l,u]=o,c=r?[...u].reverse():u,d=c.map(tp);return[l,{stackedData:f3(e,d,n),graphicalItems:c}]}))},Nf=F([UW,MO,Xh,jO],WO),HO=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=g3(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},WW=F([kn],e=>e.allowDataOverflow),T0=e=>{var t;if(e==null||!("domain"in e))return By;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Li(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:By},KO=F([kn],T0),VO=F([KO,WW],cO),HW=F([Nf,Wi,Kt,VO],HO,{memoizeOptions:{resultEqualityCheck:rp}}),A0=e=>e.errorBars,KW=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>UO(n,r)),Ef=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},GO=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(l=>{n.forEach(u=>{var c,d,f=(c=r[u.id])===null||c===void 0?void 0:c.filter(v=>UO(i,v)),h=tt(l,(d=t.dataKey)!==null&&d!==void 0?d:u.dataKey),p=BW(l,h,f);if(p.length>=2){var g=Math.min(...p),y=Math.max(...p);(a==null||g<a)&&(a=g),(o==null||y>o)&&(o=y)}var x=y_(h);x!=null&&(a=a==null?x[0]:Math.min(a,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var u=y_(tt(l,t.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),pe(a)&&pe(o))return[a,o]},VW=F([P0,kn,zW,A0,Kt],GO,{memoizeOptions:{resultEqualityCheck:rp}});function GW(e){var{value:t}=e;if(gr(t)||t instanceof Date)return t}var qW=(e,t,n)=>{var r=e.map(GW).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&zP(r))?PA(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},qO=e=>e.referenceElements.dots,Wo=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),YW=F([qO,Kt,ep],Wo),YO=e=>e.referenceElements.areas,XW=F([YO,Kt,ep],Wo),XO=e=>e.referenceElements.lines,QW=F([XO,Kt,ep],Wo),QO=(e,t)=>{if(e!=null){var n=Li(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ZW=F(YW,Kt,QO),ZO=(e,t)=>{if(e!=null){var n=Li(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},JW=F([XW,Kt],ZO);function e6(e){var t;if(e.x!=null)return Li([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:Li(n)}function t6(e){var t;if(e.y!=null)return Li([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:Li(n)}var JO=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?e6(r):t6(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},n6=F([QW,Kt],JO),r6=F(ZW,n6,JW,(e,t,n)=>Ef(e,n,t)),eC=(e,t,n,r,i,a,o,l)=>{if(n!=null)return n;var u=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",c=u?Ef(r,a,i):Ef(a,i);return mW(t,c,e.allowDataOverflow)},i6=F([kn,KO,VO,HW,VW,r6,Ae,Kt],eC,{memoizeOptions:{resultEqualityCheck:rp}}),a6=[0,1],tC=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:u}=e,c=Br(t,a);if(c&&l==null){var d;return PA(0,(d=n==null?void 0:n.length)!==null&&d!==void 0?d:0)}return u==="category"?qW(r,e,c):i==="expand"?a6:o}},O0=F([kn,Ae,P0,ap,Xh,Kt,i6],tC);function s6(e){return e in Sl}var nC=(e,t,n)=>{if(e!=null){var{scale:r,type:i}=e;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(Ou(r));return s6(a)?a:"point"}}},Ho=F([kn,DO,w0],nC);function C0(e,t,n,r){if(!(n==null||r==null))return typeof e.scale=="function"?m_(e.scale,n,r):m_(t,n,r)}var rC=(e,t,n)=>{var r=T0(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ri(e))return bW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ri(e))return wW(e,t.tickCount,t.allowDecimals)}},I0=F([O0,Wu,Ho],rC),iC=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ri(t)&&Array.isArray(n)&&n.length>0){var i,a,o=t[0],l=(i=n[0])!==null&&i!==void 0?i:0,u=t[1],c=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(o,l),Math.max(u,c)]}return t},o6=F([kn,O0,I0,Kt],iC),l6=F(ap,kn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Li(e.map(f=>f.value))).sort((f,h)=>f-h),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var o=a-i;if(o===0)return 1/0;for(var l=0;l<r.length-1;l++){var u=r[l],c=r[l+1];if(!(u==null||c==null)){var d=c-u;n=Math.min(n,d)}}return n/o}}),aC=F(l6,Ae,kO,Wt,(e,t,n,r,i)=>i,(e,t,n,r,i)=>{if(!pe(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=Mr(n,e*a),l=e*a/2;return l-o-(l-o)/a*o}return 0}),u6=(e,t,n)=>{var r=li(e,t);return r==null||typeof r.padding!="string"?0:aC(e,"xAxis",t,n,r.padding)},c6=(e,t,n)=>{var r=ui(e,t);return r==null||typeof r.padding!="string"?0:aC(e,"yAxis",t,n,r.padding)},d6=F(li,u6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),f6=F(ui,c6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),h6=F([Wt,d6,zh,$h,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),p6=F([Wt,Ae,f6,zh,$h,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Vu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return h6(e,n,r);case"yAxis":return p6(e,n,r);case"zAxis":return(i=E0(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return EO(e);case"radiusAxis":return PO(e,n);default:return}},sC=F([kn,Vu],Qh),m6=F([Ho,o6],IW),No=F([kn,Ho,m6,sC],C0);F([Hu,A0,Kt],KW);function oC(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var sp=(e,t)=>t,op=(e,t,n)=>n,g6=F(Lh,sp,op,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(oC)),y6=F(Mh,sp,op,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(oC)),lC=(e,t)=>({width:e.width,height:t.height}),v6=(e,t)=>{var n=typeof t.width=="number"?t.width:Ru;return{width:n,height:e.height}},uC=F(Wt,li,lC),x6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},b6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},w6=F(Bi,Wt,g6,sp,op,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=lC(t,l);o==null&&(o=x6(t,r,e));var c=r==="top"&&!i||r==="bottom"&&i;a[l.id]=o-Number(c)*u.height,o+=(c?-1:1)*u.height}),a}),k6=F(Fi,Wt,y6,sp,op,(e,t,n,r,i)=>{var a={},o;return n.forEach(l=>{var u=v6(t,l);o==null&&(o=b6(t,r,e));var c=r==="left"&&!i||r==="right"&&i;a[l.id]=o-Number(c)*u.width,o+=(c?-1:1)*u.width}),a}),j6=(e,t)=>{var n=li(e,t);if(n!=null)return w6(e,n.orientation,n.mirror)},_6=F([Wt,li,j6,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),S6=(e,t)=>{var n=ui(e,t);if(n!=null)return k6(e,n.orientation,n.mirror)},N6=F([Wt,ui,S6,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),cC=F(Wt,ui,(e,t)=>{var n=typeof t.width=="number"?t.width:Ru;return{width:n,height:e.height}}),v_=(e,t,n)=>{switch(t){case"xAxis":return uC(e,n).width;case"yAxis":return cC(e,n).height;default:return}},dC=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,l=Br(e,r),u=t.map(c=>c.value);if(o&&l&&a==="category"&&i&&zP(u))return u}},D0=F([Ae,ap,kn,Kt],dC),fC=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Br(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(l=>l.value)}},R0=F([Ae,ap,Wu,Kt],fC),x_=F([Ae,MW,Ho,No,D0,R0,Vu,I0,Kt],(e,t,n,r,i,a,o,l,u)=>{if(t!=null){var c=Br(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:l,range:o,realScaleType:n,scale:r}}}),E6=(e,t,n,r,i,a,o,l,u)=>{if(!(t==null||r==null)){var c=Br(e,u),{type:d,ticks:f,tickCount:h}=t,p=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,g=d==="category"&&r.bandwidth?r.bandwidth()/p:0;g=u==="angleAxis"&&a!=null&&a.length>=2?On(a[0]-a[1])*2*g:g;var y=f||i;return y?y.map((x,v)=>{var b=o?o.indexOf(x):x,w=r.map(b);return pe(w)?{index:v,coordinate:w+g,value:x,offset:g}:null}).filter(Cn):c&&l?l.map((x,v)=>{var b=r.map(x);return pe(b)?{coordinate:b+g,value:x,index:v,offset:g}:null}).filter(Cn):r.ticks?r.ticks(h).map((x,v)=>{var b=r.map(x);return pe(b)?{coordinate:b+g,value:x,index:v,offset:g}:null}).filter(Cn):r.domain().map((x,v)=>{var b=r.map(x);return pe(b)?{coordinate:b+g,value:o?o[x]:x,index:v,offset:g}:null}).filter(Cn)}},hC=F([Ae,Wu,Ho,No,I0,Vu,D0,R0,Kt],E6),P6=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var l=Br(e,o),{tickCount:u}=t,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?On(r[0]-r[1])*2*c:c,l&&a?a.map((d,f)=>{var h=n.map(d);return pe(h)?{coordinate:h+c,value:d,index:f,offset:c}:null}).filter(Cn):n.ticks?n.ticks(u).map((d,f)=>{var h=n.map(d);return pe(h)?{coordinate:h+c,value:d,index:f,offset:c}:null}).filter(Cn):n.domain().map((d,f)=>{var h=n.map(d);return pe(h)?{coordinate:h+c,value:i?i[d]:d,index:f,offset:c}:null}).filter(Cn)}},xr=F([Ae,Wu,No,Vu,D0,R0,Kt],P6),br=F(kn,No,(e,t)=>{if(!(e==null||t==null))return Sf(Sf({},e),{},{scale:t})}),T6=F([kn,Ho,O0,sC],C0),A6=F((e,t,n)=>E0(e,n),T6,(e,t)=>{if(!(e==null||t==null))return Sf(Sf({},e),{},{scale:t})}),O6=F([Ae,Lh,Mh],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pC=e=>e.options.defaultTooltipEventType,mC=e=>e.options.validateTooltipEventTypes;function gC(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function L0(e,t){var n=pC(e),r=mC(e);return gC(t,n,r)}function C6(e){return le(t=>L0(t,e))}var yC=(e,t)=>{var n,r=Number(t);if(!(Lr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},I6=e=>e.tooltip.settings,aa={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},D6={itemInteraction:{click:aa,hover:aa},axisInteraction:{click:aa,hover:aa},keyboardInteraction:aa,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},vC=$n({name:"tooltip",initialState:D6,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:lt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ir(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:lt()},removeTooltipEntrySettings:{reducer(e,t){var n=Ir(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:lt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:R6,replaceTooltipEntrySettings:L6,removeTooltipEntrySettings:M6,setTooltipSettingsState:$6,setActiveMouseOverItemIndex:xC,mouseLeaveItem:z6,mouseLeaveChart:bC,setActiveClickItemIndex:F6,setMouseOverAxisIndex:wC,setMouseClickAxisIndex:B6,setSyncInteraction:Uy,setKeyboardInteraction:Wy}=vC.actions,U6=vC.reducer;function b_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(n),!0).forEach(function(r){W6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W6(e,t,n){return(t=H6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H6(e){var t=K6(e,"string");return typeof t=="symbol"?t:t+""}function K6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function G6(e){return e.index!=null}var kC=(e,t,n,r)=>{if(t==null)return aa;var i=V6(e,t,n);if(i==null)return aa;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(G6(i)){if(a)return Oc(Oc({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Oc(Oc({},aa),{},{coordinate:i.coordinate})};function q6(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Y6(e,t){var n=q6(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),o=Math.max(r,i);return n>=a&&n<=o}function X6(e,t,n){if(n==null||t==null)return!0;var r=tt(e,t);return r==null||!Ri(n)?!0:Y6(r,n)}var M0=(e,t,n,r)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!pe(a))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var u=Math.max(o,Math.min(a,l)),c=t[u];return c==null||X6(c,n,r)?String(u):null},jC=(e,t,n,r,i,a,o)=>{if(a!=null){var l=o[0],u=l==null?void 0:l.getPosition(a);if(u!=null)return u;var c=i==null?void 0:i[Number(a)];if(c)switch(n){case"horizontal":return{x:c.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:c.coordinate}}}},_C=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=e.tooltipItemPayloads[0];return a!=null?[a]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===i})},SC=e=>e.options.tooltipPayloadSearcher,Ko=e=>e.tooltip;function w_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function k_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(n),!0).forEach(function(r){Q6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q6(e,t,n){return(t=Z6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z6(e){var t=J6(e,"string");return typeof t=="symbol"?t:t+""}function J6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eH(e,t){return e??t}var NC=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:l,computedData:u,dataStartIndex:c,dataEndIndex:d}=n,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:y,settings:x}=p,v=eH(y,l),b=Array.isArray(v)?YT(v,c,d):v,w=(g=x==null?void 0:x.dataKey)!==null&&g!==void 0?g:r,j=x==null?void 0:x.nameKey,_;if(r&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?_=FP(b,r,i):_=a(b,t,u,j),Array.isArray(_))_.forEach(E=>{var A=k_(k_({},x),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(Pk({tooltipEntrySettings:A,dataKey:E.dataKey,payload:E.payload,value:tt(E.payload,E.dataKey),name:E.name}))});else{var k;h.push(Pk({tooltipEntrySettings:x,dataKey:w,payload:_,value:tt(_,w),name:(k=tt(_,j))!==null&&k!==void 0?k:x==null?void 0:x.name}))}return h},f)}},$0=F([Lt,DO,w0],nC),tH=F([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),nH=F([Vt,Bo],RO),Vo=F([tH,Lt,nH],LO,{memoizeOptions:{resultEqualityCheck:ip}}),rH=F([Vo],e=>e.filter(np)),iH=F([Vo],zO,{memoizeOptions:{resultEqualityCheck:ip}}),Go=F([iH,Wi],FO),aH=F([rH,Wi,Lt],AO),z0=F([Go,Lt,Vo],BO),EC=F([Lt],T0),sH=F([Lt],e=>e.allowDataOverflow),PC=F([EC,sH],cO),oH=F([Vo],e=>e.filter(np)),lH=F([aH,oH,Xh,jO],WO),uH=F([lH,Wi,Vt,PC],HO),cH=F([Vo],$O),dH=F([Go,Lt,cH,A0,Vt],GO,{memoizeOptions:{resultEqualityCheck:rp}}),fH=F([qO,Vt,Bo],Wo),hH=F([fH,Vt],QO),pH=F([YO,Vt,Bo],Wo),mH=F([pH,Vt],ZO),gH=F([XO,Vt,Bo],Wo),yH=F([gH,Vt],JO),vH=F([hH,yH,mH],Ef),xH=F([Lt,EC,PC,uH,dH,vH,Ae,Vt],eC),Gu=F([Lt,Ae,Go,z0,Xh,Vt,xH],tC),bH=F([Gu,Lt,$0],rC),wH=F([Lt,Gu,bH,Vt],iC),TC=e=>{var t=Vt(e),n=Bo(e),r=!1;return Vu(e,t,n,r)},AC=F([Lt,TC],Qh),OC=F([Lt,$0,wH,AC],C0),kH=F([Ae,z0,Lt,Vt],dC),jH=F([Ae,z0,Lt,Vt],fC),_H=(e,t,n,r,i,a,o,l)=>{if(t){var{type:u}=t,c=Br(e,l);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=u==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?On(i[0]-i[1])*2*f:f,c&&o?o.map((h,p)=>{var g=r.map(h);return pe(g)?{coordinate:g+f,value:h,index:p,offset:f}:null}).filter(Cn):r.domain().map((h,p)=>{var g=r.map(h);return pe(g)?{coordinate:g+f,value:a?a[h]:h,index:p,offset:f}:null}).filter(Cn)}}},Hi=F([Ae,Lt,$0,OC,TC,kH,jH,Vt],_H),F0=F([pC,mC,I6],(e,t,n)=>gC(n.shared,e,t)),CC=e=>e.tooltip.settings.trigger,B0=e=>e.tooltip.settings.defaultIndex,qu=F([Ko,F0,CC,B0],kC),Sa=F([qu,Go,Ku,Gu],M0),IC=F([Hi,Sa],yC),DC=F([qu],e=>{if(e)return e.dataKey});F([qu],e=>{if(e)return e.graphicalItemId});var RC=F([Ko,F0,CC,B0],_C),SH=F([Fi,Bi,Ae,Wt,Hi,B0,RC],jC),NH=F([qu,SH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),EH=F([qu],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),PH=F([RC,Sa,Wi,Ku,IC,SC,F0],NC),TH=F([PH],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function __(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(n),!0).forEach(function(r){AH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AH(e,t,n){return(t=OH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OH(e){var t=CH(e,"string");return typeof t=="symbol"?t:t+""}function CH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IH=()=>le(Lt),DH=()=>{var e=IH(),t=le(Hi),n=le(OC);return _a(!e||!n?void 0:__(__({},e),{},{scale:n}),t)};function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(r){RH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RH(e,t,n){return(t=LH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LH(e){var t=MH(e,"string");return typeof t=="symbol"?t:t+""}function MH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $H=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},zH=(e,t,n,r)=>{var i=t.find(c=>c&&c.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:o}=r;return Ts(Ts(Ts({},r),Xt(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:u}=r;return Ts(Ts(Ts({},r),Xt(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function FH(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var LC=(e,t,n,r,i)=>{var a,o=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u,c,d,f,h,p=l>0?(u=n[l-1])===null||u===void 0?void 0:u.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,g=(d=n[l])===null||d===void 0?void 0:d.coordinate,y=l>=o-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(h=n[l+1])===null||h===void 0?void 0:h.coordinate,x=void 0;if(!(p==null||g==null||y==null))if(On(g-p)!==On(y-g)){var v=[];if(On(y-g)===On(i[1]-i[0])){x=y;var b=g+i[1]-i[0];v[0]=Math.min(b,(b+p)/2),v[1]=Math.max(b,(b+p)/2)}else{x=p;var w=y+i[1]-i[0];v[0]=Math.min(g,(w+g)/2),v[1]=Math.max(g,(w+g)/2)}var j=[Math.min(g,(x+g)/2),Math.max(g,(x+g)/2)];if(e>j[0]&&e<=j[1]||e>=v[0]&&e<=v[1]){var _;return(_=n[l])===null||_===void 0?void 0:_.index}}else{var k=Math.min(p,y),E=Math.max(p,y);if(e>(k+g)/2&&e<=(E+g)/2){var A;return(A=n[l])===null||A===void 0?void 0:A.index}}}else if(t)for(var T=0;T<o;T++){var S=t[T];if(S!=null){var P=t[T+1],C=t[T-1];if(T===0&&P!=null&&e<=(S.coordinate+P.coordinate)/2||T===o-1&&C!=null&&e>(S.coordinate+C.coordinate)/2||T>0&&T<o-1&&C!=null&&P!=null&&e>(S.coordinate+C.coordinate)/2&&e<=(S.coordinate+P.coordinate)/2)return S.index}}return-1},MC=()=>le(w0),U0=(e,t)=>t,$C=(e,t,n)=>n,W0=(e,t,n,r)=>r,BH=F(Hi,e=>Nh(e,t=>t.coordinate)),H0=F([Ko,U0,$C,W0],kC),K0=F([H0,Go,Ku,Gu],M0),UH=(e,t,n)=>{if(t!=null){var r=Ko(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},zC=F([Ko,U0,$C,W0],_C),Pf=F([Fi,Bi,Ae,Wt,Hi,W0,zC],jC),WH=F([H0,Pf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),FC=F([Hi,K0],yC),HH=F([zC,K0,Wi,Ku,FC,SC,U0],NC),KH=F([H0,K0],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),VH=(e,t,n,r,i,a,o)=>{if(!(!e||!n||!r||!i)&&FH(e,o)){var l=y3(e,t),u=LC(l,a,i,n,r),c=$H(t,i,u,e);return{activeIndex:String(u),activeCoordinate:c}}},GH=(e,t,n,r,i,a,o)=>{if(!(!e||!r||!i||!a||!n)){var l=R4(e,n);if(l){var u=v3(l,t),c=LC(u,o,a,r,i),d=zH(t,a,c,l);return{activeIndex:String(c),activeCoordinate:d}}}},qH=(e,t,n,r,i,a,o,l)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?VH(e,t,r,i,a,o,l):GH(e,t,n,r,i,a,o)},YH=F(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),XH=F(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(kt)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:OW}});function N_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(n),!0).forEach(function(r){QH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QH(e,t,n){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZH(e){var t=JH(e,"string");return typeof t=="symbol"?t:t+""}function JH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e8={},t8={zIndexMap:Object.values(kt).reduce((e,t)=>E_(E_({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),e8)},n8=new Set(Object.values(kt));function r8(e){return n8.has(e)}var BC=$n({name:"zIndex",initialState:t8,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:lt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!r8(n)&&delete e.zIndexMap[n])},prepare:lt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:lt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:lt()}}}),{registerZIndexPortal:i8,unregisterZIndexPortal:a8,registerZIndexPortalElement:s8,unregisterZIndexPortalElement:o8}=BC.actions,l8=BC.reducer;function un(e){var{zIndex:t,children:n}=e,r=V3(),i=r&&t!==void 0&&t!==0,a=Nt(),o=dt();m.useLayoutEffect(()=>i?(o(i8({zIndex:t})),()=>{o(a8({zIndex:t}))}):Aa,[o,t,i]);var l=le(u=>YH(u,t,a));return i?l?dh.createPortal(n,l):null:n}function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hy.apply(null,arguments)}function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(n),!0).forEach(function(r){u8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u8(e,t,n){return(t=c8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c8(e){var t=d8(e,"string");return typeof t=="symbol"?t:t+""}function d8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f8(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return m.isValidElement(t)?m.cloneElement(t,r):m.createElement(n,r)}function h8(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:o,layout:l,cursor:u,tooltipEventType:c,chartName:d}=e,f=n,h=r,p=i;if(!u||!f||d!=="ScatterChart"&&c!=="axis")return null;var g,y,x;if(d==="ScatterChart")g=f,y=qB,x=kt.cursorLine;else if(d==="BarChart")g=YB(l,f,a,o),y=wA,x=kt.cursorRectangle;else if(l==="radial"&&UP(f)){var{cx:v,cy:b,radius:w,startAngle:j,endAngle:_}=kA(f);g={cx:v,cy:b,startAngle:j,endAngle:_,innerRadius:w,outerRadius:w},y=_A,x=kt.cursorLine}else g={points:z4(l,f,a)},y=ao,x=kt.cursorLine;var k=typeof u=="object"&&"className"in u?u.className:void 0,E=Cc(Cc(Cc(Cc({stroke:"#ccc",pointerEvents:"none"},a),g),Do(u)),{},{payload:h,payloadIndex:p,className:Pe("recharts-tooltip-cursor",k)});return m.createElement(un,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:x},m.createElement(f8,{cursor:u,cursorComp:y,cursorProps:E}))}function p8(e){var t=DH(),n=oA(),r=Ca(),i=MC();return t==null||n==null||r==null||i==null?null:m.createElement(h8,Hy({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var UC=m.createContext(null),m8=()=>m.useContext(UC),WC={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,c,d){this.fn=u,this.context=c,this.once=d||!1}function a(u,c,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||u,h),g=n?n+c:c;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)t.call(d,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},l.prototype.listeners=function(c){var d=n?n+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(c){var d=n?n+c:c,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(c,d,f,h,p,g){var y=n?n+c:c;if(!this._events[y])return!1;var x=this._events[y],v=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,p),!0;case 6:return x.fn.call(x.context,d,f,h,p,g),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var j=x.length,_;for(w=0;w<j;w++)switch(x[w].once&&this.removeListener(c,x[w].fn,void 0,!0),v){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,f);break;case 4:x[w].fn.call(x[w].context,d,f,h);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},l.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},l.prototype.removeListener=function(c,d,f,h){var p=n?n+c:c;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var y=0,x=[],v=g.length;y<v;y++)(g[y].fn!==d||h&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},l.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(WC);var g8=WC.exports;const y8=zr(g8);var wu=new y8,Ky="recharts.syncEvent.tooltip",T_="recharts.syncEvent.brush",lp=(e,t)=>{if(t&&Array.isArray(e)){var n=Number.parseInt(t,10);if(!Lr(n))return e[n]}},v8={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},HC=$n({name:"options",initialState:v8,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),x8=HC.reducer,{createEventEmitter:b8}=HC.actions;function w8(e){return e.tooltip.syncInteraction}var k8={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KC=$n({name:"chartData",initialState:k8,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:A_,setDataStartEndIndexes:j8,setComputedData:Ese}=KC.actions,_8=KC.reducer,S8=["x","y"];function O_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O_(Object(n),!0).forEach(function(r){N8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N8(e,t,n){return(t=E8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E8(e){var t=P8(e,"string");return typeof t=="symbol"?t:t+""}function P8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T8(e,t){if(e==null)return{};var n,r,i=A8(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A8(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function O8(){var e=le(k0),t=le(j0),n=dt(),r=le(_O),i=le(Hi),a=Ca(),o=Ro(),l=le(u=>u.rootProps.className);m.useEffect(()=>{if(e==null)return Aa;var u=(c,d,f)=>{if(t!==f&&e===c){if(r==="index"){var h;if(o&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var p=d.payload.coordinate,{x:g,y}=p,x=T8(p,S8),{x:v,y:b,width:w,height:j}=d.payload.sourceViewBox,_=As(As({},x),{},{x:o.x+(w?(g-v)/w:0)*o.width,y:o.y+(j?(y-b)/j:0)*o.height});n(As(As({},d),{},{payload:As(As({},d.payload),{},{coordinate:_})}))}else n(d);return}if(i!=null){var k;if(typeof r=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},A=r(i,E);k=i[A]}else r==="value"&&(k=i.find(q=>String(q.value)===d.payload.label));var{coordinate:T}=d.payload;if(k==null||d.payload.active===!1||T==null||o==null){n(Uy({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:S,y:P}=T,C=Math.min(S,o.x+o.width),B=Math.min(P,o.y+o.height),M={x:a==="horizontal"?k.coordinate:C,y:a==="horizontal"?B:k.coordinate},D=Uy({active:d.payload.active,coordinate:M,dataKey:d.payload.dataKey,index:String(k.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(D)}}};return wu.on(Ky,u),()=>{wu.off(Ky,u)}},[l,n,t,e,r,i,a,o])}function C8(){var e=le(k0),t=le(j0),n=dt();m.useEffect(()=>{if(e==null)return Aa;var r=(i,a,o)=>{t!==o&&e===i&&n(j8(a))};return wu.on(T_,r),()=>{wu.off(T_,r)}},[n,t,e])}function I8(){var e=dt();m.useEffect(()=>{e(b8())},[e]),O8(),C8()}function D8(e,t,n,r,i,a){var o=le(p=>UH(p,e,t)),l=le(j0),u=le(k0),c=le(_O),d=le(w8),f=d==null?void 0:d.active,h=Ro();m.useEffect(()=>{if(!f&&u!=null&&l!=null){var p=Uy({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:h,graphicalItemId:void 0});wu.emit(Ky,u,p,l)}},[f,n,o,i,r,l,u,c,a,h])}function C_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function I_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(n),!0).forEach(function(r){R8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R8(e,t,n){return(t=L8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L8(e){var t=M8(e,"string");return typeof t=="symbol"?t:t+""}function M8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $8(e){return e.dataKey}function z8(e,t){return m.isValidElement(e)?m.cloneElement(e,t):typeof e=="function"?m.createElement(e,t):m.createElement(EB,t)}var D_=[],F8={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function He(e){var t,n,r=_t(e,F8),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:l,content:u,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:h,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:x,cursor:v,shared:b,trigger:w,defaultIndex:j,portal:_,axisId:k}=r,E=dt(),A=typeof j=="number"?String(j):j;m.useEffect(()=>{E($6({shared:b,trigger:w,axisId:k,active:i,defaultIndex:A}))},[E,b,w,k,i,A]);var T=Ro(),S=gA(),P=C6(b),{activeIndex:C,isActive:B}=(t=le(me=>KH(me,P,w,A)))!==null&&t!==void 0?t:{},M=le(me=>HH(me,P,w,A)),D=le(me=>FC(me,P,w,A)),q=le(me=>WH(me,P,w,A)),z=M,$=m8(),R=(n=i??B)!==null&&n!==void 0?n:!1,[N,Y]=xT([z,R]),U=P==="axis"?D:void 0;D8(P,w,q,U,C,R);var O=_??$;if(O==null||T==null||P==null)return null;var ne=z??D_;R||(ne=D_),c&&ne.length&&(ne=oT(ne.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),h,$8));var ge=ne.length>0,re=m.createElement(DB,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:d,active:R,coordinate:q,hasPayload:ge,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:T,wrapperStyle:x,lastBoundingBox:N,innerRef:Y,hasPortalFromProps:!!_},z8(u,I_(I_({},r),{},{payload:ne,label:U,active:R,activeIndex:C,coordinate:q,accessibilityLayer:S})));return m.createElement(m.Fragment,null,dh.createPortal(re,O),R&&m.createElement(p8,{cursor:v,tooltipEventType:P,coordinate:q,payload:ne,index:C}))}var Ki=e=>null;Ki.displayName="Cell";function B8(e,t,n){return(t=U8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U8(e){var t=W8(e,"string");return typeof t=="symbol"?t:t+""}function W8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H8{constructor(t){B8(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(n),!0).forEach(function(r){V8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V8(e,t,n){return(t=G8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G8(e){var t=q8(e,"string");return typeof t=="symbol"?t:t+""}function q8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y8={cacheSize:2e3,enableCache:!0},VC=K8({},Y8),L_=new H8(VC.cacheSize),X8={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},M_="recharts_measurement_span";function Q8(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var $_=(e,t)=>{try{var n=document.getElementById(M_);n||(n=document.createElement("span"),n.setAttribute("id",M_),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,X8,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},$l=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$u.isSsr)return{width:0,height:0};if(!VC.enableCache)return $_(t,n);var r=Q8(t,n),i=L_.get(r);if(i)return i;var a=$_(t,n);return L_.set(r,a),a},GC;function Z8(e,t,n){return(t=J8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J8(e){var t=eK(e,"string");return typeof t=="symbol"?t:t+""}function eK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,F_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iK=["cm","mm","pt","pc","in","Q","px"];function aK(e){return iK.includes(e)}var Ys="NaN";function sK(e,t){return e*rK[t]}class Yt{static parse(t){var n,[,r,i]=(n=nK.exec(t))!==null&&n!==void 0?n:[];return r==null?Yt.NaN:new Yt(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Lr(t)&&(this.unit=""),n!==""&&!tK.test(n)&&(this.num=NaN,this.unit=""),aK(n)&&(this.num=sK(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Yt(NaN,""):new Yt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Yt(NaN,""):new Yt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yt(NaN,""):new Yt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Yt(NaN,""):new Yt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Lr(this.num)}}GC=Yt;Z8(Yt,"NaN",new GC(NaN,""));function qC(e){if(e==null||e.includes(Ys))return Ys;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=z_.exec(t))!==null&&n!==void 0?n:[],o=Yt.parse(r??""),l=Yt.parse(a??""),u=i==="*"?o.multiply(l):o.divide(l);if(u.isNaN())return Ys;t=t.replace(z_,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,f,h]=(c=F_.exec(t))!==null&&c!==void 0?c:[],p=Yt.parse(d??""),g=Yt.parse(h??""),y=f==="+"?p.add(g):p.subtract(g);if(y.isNaN())return Ys;t=t.replace(F_,y.toString())}return t}var B_=/\(([^()]*)\)/;function oK(e){for(var t=e,n;(n=B_.exec(t))!=null;){var[,r]=n;t=t.replace(B_,qC(r))}return t}function lK(e){var t=e.replace(/\s+/g,"");return t=oK(t),t=qC(t),t}function uK(e){try{return lK(e)}catch{return Ys}}function Cm(e){var t=uK(e.slice(5,-1));return t===Ys?"":t}var cK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dK=["dx","dy","angle","className","breakAll"];function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(null,arguments)}function U_(e,t){if(e==null)return{};var n,r,i=fK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var YC=/[ \f\n\r\t\v\u2028\u2029]+/,XC=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Me(t)||(n?i=t.toString().split(""):i=t.toString().split(YC));var a=i.map(l=>({word:l,width:$l(l,r).width})),o=n?0:$l("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function hK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var QC=(e,t,n,r)=>e.reduce((i,a)=>{var{word:o,width:l}=a,u=i[i.length-1];if(u&&l!=null&&(t==null||r||u.width+l+n<Number(t)))u.words.push(o),u.width+=l+n;else{var c={words:[o],width:l};i.push(c)}return i},[]),ZC=e=>e.reduce((t,n)=>t.width>n.width?t:n),pK="",W_=(e,t,n,r,i,a,o,l)=>{var u=e.slice(0,t),c=XC({breakAll:n,style:r,children:u+pK});if(!c)return[!1,[]];var d=QC(c.wordsWithComputedWidth,a,o,l),f=d.length>i||ZC(d).width>Number(a);return[f,d]},mK=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:l,breakAll:u}=e,c=ae(a),d=String(o),f=QC(t,r,n,i);if(!c||i)return f;var h=f.length>a||ZC(f).width>Number(r);if(!h)return f;for(var p=0,g=d.length-1,y=0,x;p<=g&&y<=d.length-1;){var v=Math.floor((p+g)/2),b=v-1,[w,j]=W_(d,b,u,l,a,r,n,i),[_]=W_(d,v,u,l,a,r,n,i);if(!w&&!_&&(p=v+1),w&&_&&(g=v-1),!w&&_){x=j;break}y++}return x||f},H_=e=>{var t=Me(e)?[]:e.toString().split(YC);return[{words:t,width:void 0}]},gK=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!$u.isSsr){var l,u,c=XC({breakAll:a,children:r,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:f}=c;l=d,u=f}else return H_(r);return mK({breakAll:a,children:r,maxLines:o,style:i},l,u,t,!!n)}return H_(r)},JC="#808080",yK={angle:0,breakAll:!1,capHeight:"0.71em",fill:JC,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},V0=m.forwardRef((e,t)=>{var n=_t(e,yK),{x:r,y:i,lineHeight:a,capHeight:o,fill:l,scaleToFit:u,textAnchor:c,verticalAnchor:d}=n,f=U_(n,cK),h=m.useMemo(()=>gK({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:u,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,u,f.style,f.width]),{dx:p,dy:g,angle:y,className:x,breakAll:v}=f,b=U_(f,dK);if(!gr(r)||!gr(i)||h.length===0)return null;var w=Number(r)+(ae(p)?p:0),j=Number(i)+(ae(g)?g:0);if(!pe(w)||!pe(j))return null;var _;switch(d){case"start":_=Cm("calc(".concat(o,")"));break;case"middle":_=Cm("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:_=Cm("calc(".concat(h.length-1," * -").concat(a,")"));break}var k=[],E=h[0];if(u&&E!=null){var A=E.width,{width:T}=f;k.push("scale(".concat(ae(T)&&ae(A)?T/A:1,")"))}return y&&k.push("rotate(".concat(y,", ").concat(w,", ").concat(j,")")),k.length&&(b.transform=k.join(" ")),m.createElement("text",Vy({},Jt(b),{ref:t,x:w,y:j,className:Pe("recharts-text",x),textAnchor:c,fill:l.includes("url")?JC:l}),h.map((S,P)=>{var C=S.words.join(v?"":" ");return m.createElement("tspan",{x:w,dy:P===0?_:a,key:"".concat(C,"-").concat(P)},C)}))});V0.displayName="Text";function K_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K_(Object(n),!0).forEach(function(r){vK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vK(e,t,n){return(t=xK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wK=e=>{var{viewBox:t,position:n,offset:r=0,parentViewBox:i}=e,{x:a,y:o,height:l,upperWidth:u,lowerWidth:c}=Hx(t),d=a,f=a+(u-c)/2,h=(d+f)/2,p=(u+c)/2,g=d+u/2,y=l>=0?1:-1,x=y*r,v=y>0?"end":"start",b=y>0?"start":"end",w=u>=0?1:-1,j=w*r,_=w>0?"end":"start",k=w>0?"start":"end",E=i;if(n==="top"){var A={x:d+u/2,y:o-x,horizontalAnchor:"middle",verticalAnchor:v};return E&&(A.height=Math.max(o-E.y,0),A.width=u),A}if(n==="bottom"){var T={x:f+c/2,y:o+l+x,horizontalAnchor:"middle",verticalAnchor:b};return E&&(T.height=Math.max(E.y+E.height-(o+l),0),T.width=c),T}if(n==="left"){var S={x:h-j,y:o+l/2,horizontalAnchor:_,verticalAnchor:"middle"};return E&&(S.width=Math.max(S.x-E.x,0),S.height=l),S}if(n==="right"){var P={x:h+p+j,y:o+l/2,horizontalAnchor:k,verticalAnchor:"middle"};return E&&(P.width=Math.max(E.x+E.width-P.x,0),P.height=l),P}var C=E?{width:p,height:l}:{};return n==="insideLeft"?Vr({x:h+j,y:o+l/2,horizontalAnchor:k,verticalAnchor:"middle"},C):n==="insideRight"?Vr({x:h+p-j,y:o+l/2,horizontalAnchor:_,verticalAnchor:"middle"},C):n==="insideTop"?Vr({x:d+u/2,y:o+x,horizontalAnchor:"middle",verticalAnchor:b},C):n==="insideBottom"?Vr({x:f+c/2,y:o+l-x,horizontalAnchor:"middle",verticalAnchor:v},C):n==="insideTopLeft"?Vr({x:d+j,y:o+x,horizontalAnchor:k,verticalAnchor:b},C):n==="insideTopRight"?Vr({x:d+u-j,y:o+x,horizontalAnchor:_,verticalAnchor:b},C):n==="insideBottomLeft"?Vr({x:f+j,y:o+l-x,horizontalAnchor:k,verticalAnchor:v},C):n==="insideBottomRight"?Vr({x:f+c-j,y:o+l-x,horizontalAnchor:_,verticalAnchor:v},C):n&&typeof n=="object"&&(ae(n.x)||fs(n.x))&&(ae(n.y)||fs(n.y))?Vr({x:a+Mr(n.x,p),y:o+Mr(n.y,l),horizontalAnchor:"end",verticalAnchor:"end"},C):Vr({x:g,y:o+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},C)},kK=["labelRef"],jK=["content"];function V_(e,t){if(e==null)return{};var n,r,i=_K(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _K(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function G_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(n),!0).forEach(function(r){SK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SK(e,t,n){return(t=NK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xi(){return xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xi.apply(null,arguments)}var eI=m.createContext(null),tI=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o,children:l}=e,u=m.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:o}),[t,n,r,i,a,o]);return m.createElement(eI.Provider,{value:u},l)},nI=()=>{var e=m.useContext(eI),t=Ro();return e||(t?Hx(t):void 0)},PK=m.createContext(null),TK=()=>{var e=m.useContext(PK),t=le(TO);return e||t},AK=e=>{var{value:t,formatter:n}=e,r=Me(e.children)?t:e.children;return typeof n=="function"?n(r):r},G0=e=>e!=null&&typeof e=="function",OK=(e,t)=>{var n=On(t-e),r=Math.min(Math.abs(t-e),360);return n*r},CK=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:l,cy:u,innerRadius:c,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=i,g=(c+d)/2,y=OK(f,h),x=y>=0?1:-1,v,b;switch(t){case"insideStart":v=f+x*a,b=p;break;case"insideEnd":v=h-x*a,b=!p;break;case"end":v=h+x*a,b=p;break;default:throw new Error("Unsupported position ".concat(t))}b=y<=0?b:!b;var w=Xt(l,u,g,v),j=Xt(l,u,g,v+(b?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),k=Me(e.id)?lu("recharts-radial-line-"):e.id;return m.createElement("text",xi({},r,{dominantBaseline:"central",className:Pe("recharts-radial-bar-label",o)}),m.createElement("defs",null,m.createElement("path",{id:k,d:_})),m.createElement("textPath",{xlinkHref:"#".concat(k)},n))},IK=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:u}=e,c=(l+u)/2;if(n==="outside"){var{x:d,y:f}=Xt(r,i,o+t,c);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+o)/2,{x:p,y:g}=Xt(r,i,h,c);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},sd=e=>e!=null&&"cx"in e&&ae(e.cx),DK={angle:0,offset:5,zIndex:kt.label,position:"middle",textBreakAll:!1};function RK(e){if(!sd(e))return e;var{cx:t,cy:n,outerRadius:r}=e,i=r*2;return{x:t-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function na(e){var t=_t(e,DK),{viewBox:n,parentViewBox:r,position:i,value:a,children:o,content:l,className:u="",textBreakAll:c,labelRef:d}=t,f=TK(),h=nI(),p=i==="center"?h:f??h,g,y,x;n==null?g=p:sd(n)?g=n:g=Hx(n);var v=RK(g);if(!g||Me(a)&&Me(o)&&!m.isValidElement(l)&&typeof l!="function")return null;var b=Nl(Nl({},t),{},{viewBox:g});if(m.isValidElement(l)){var{labelRef:w}=b,j=V_(b,kK);return m.cloneElement(l,j)}if(typeof l=="function"){var{content:_}=b,k=V_(b,jK);if(y=m.createElement(l,k),m.isValidElement(y))return y}else y=AK(t);var E=Jt(t);if(sd(g)){if(i==="insideStart"||i==="insideEnd"||i==="end")return CK(t,i,y,E,g);x=IK(g,t.offset,t.position)}else{if(!v)return null;var A=wK({viewBox:v,position:i,offset:t.offset,parentViewBox:sd(r)?void 0:r});x=Nl(Nl({x:A.x,y:A.y,textAnchor:A.horizontalAnchor,verticalAnchor:A.verticalAnchor},A.width!==void 0?{width:A.width}:{}),A.height!==void 0?{height:A.height}:{})}return m.createElement(un,{zIndex:t.zIndex},m.createElement(V0,xi({ref:d,className:Pe("recharts-label",u)},E,x,{textAnchor:hK(E.textAnchor)?E.textAnchor:x.textAnchor,breakAll:c}),y))}na.displayName="Label";var LK=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?m.createElement(na,xi({key:"label-implicit"},r)):gr(e)?m.createElement(na,xi({key:"label-implicit",value:e},r)):m.isValidElement(e)?e.type===na?m.cloneElement(e,Nl({key:"label-implicit"},r)):m.createElement(na,xi({key:"label-implicit",content:e},r)):G0(e)?m.createElement(na,xi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?m.createElement(na,xi({},e,{key:"label-implicit"},r)):null};function rI(e){var{label:t,labelRef:n}=e,r=nI();return LK(t,r,n)||null}var iI={},aI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(aI);var sI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(sI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aI,n=sI,r=jh;function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(iI);var MK=iI.last;const $K=zr(MK);var zK=["valueAccessor"],FK=["dataKey","clockWise","id","textBreakAll","zIndex"];function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tf.apply(null,arguments)}function q_(e,t){if(e==null)return{};var n,r,i=BK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var UK=e=>Array.isArray(e.value)?$K(e.value):e.value,oI=m.createContext(void 0),up=oI.Provider,lI=m.createContext(void 0);lI.Provider;function WK(){return m.useContext(oI)}function HK(){return m.useContext(lI)}function od(e){var{valueAccessor:t=UK}=e,n=q_(e,zK),{dataKey:r,clockWise:i,id:a,textBreakAll:o,zIndex:l}=n,u=q_(n,FK),c=WK(),d=HK(),f=c||d;return!f||!f.length?null:m.createElement(un,{zIndex:l??kt.label},m.createElement(jt,{className:"recharts-label-list"},f.map((h,p)=>{var g,y=Me(r)?t(h,p):tt(h.payload,r),x=Me(a)?{}:{id:"".concat(a,"-").concat(p)};return m.createElement(na,Tf({key:"label-".concat(p)},Jt(h),u,x,{fill:(g=n.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:o,viewBox:h.viewBox,index:p,zIndex:0}))})))}od.displayName="LabelList";function cp(e){var{label:t}=e;return t?t===!0?m.createElement(od,{key:"labelList-implicit"}):m.isValidElement(t)||G0(t)?m.createElement(od,{key:"labelList-implicit",content:t}):typeof t=="object"?m.createElement(od,Tf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gy.apply(null,arguments)}var uI=e=>{var{cx:t,cy:n,r,className:i}=e,a=Pe("recharts-dot",i);return ae(t)&&ae(n)&&ae(r)?m.createElement("circle",Gy({},vn(e),_x(e),{className:a,cx:t,cy:n,r})):null},KK={radiusAxis:{},angleAxis:{}},cI=$n({name:"polarAxis",initialState:KK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Pse,removeRadiusAxis:Tse,addAngleAxis:Ase,removeAngleAxis:Ose}=cI.actions,VK=cI.reducer;function GK(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var dI={exports:{}},qe={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=Symbol.for("react.transitional.element"),Y0=Symbol.for("react.portal"),dp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),pp=Symbol.for("react.consumer"),mp=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),qK=Symbol.for("react.view_transition"),YK=Symbol.for("react.client.reference");function kr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case q0:switch(e=e.type,e){case dp:case hp:case fp:case yp:case vp:case qK:return e;default:switch(e=e&&e.$$typeof,e){case mp:case gp:case bp:case xp:return e;case pp:return e;default:return t}}case Y0:return t}}}qe.ContextConsumer=pp;qe.ContextProvider=mp;qe.Element=q0;qe.ForwardRef=gp;qe.Fragment=dp;qe.Lazy=bp;qe.Memo=xp;qe.Portal=Y0;qe.Profiler=hp;qe.StrictMode=fp;qe.Suspense=yp;qe.SuspenseList=vp;qe.isContextConsumer=function(e){return kr(e)===pp};qe.isContextProvider=function(e){return kr(e)===mp};qe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===q0};qe.isForwardRef=function(e){return kr(e)===gp};qe.isFragment=function(e){return kr(e)===dp};qe.isLazy=function(e){return kr(e)===bp};qe.isMemo=function(e){return kr(e)===xp};qe.isPortal=function(e){return kr(e)===Y0};qe.isProfiler=function(e){return kr(e)===hp};qe.isStrictMode=function(e){return kr(e)===fp};qe.isSuspense=function(e){return kr(e)===yp};qe.isSuspenseList=function(e){return kr(e)===vp};qe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dp||e===hp||e===fp||e===yp||e===vp||typeof e=="object"&&e!==null&&(e.$$typeof===bp||e.$$typeof===xp||e.$$typeof===mp||e.$$typeof===pp||e.$$typeof===gp||e.$$typeof===YK||e.getModuleId!==void 0)};qe.typeOf=kr;dI.exports=qe;var XK=dI.exports,Y_=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",X_=null,Im=null,fI=e=>{if(e===X_&&Array.isArray(Im))return Im;var t=[];return m.Children.forEach(e,n=>{Me(n)||(XK.isFragment(n)?t=t.concat(fI(n.props.children)):t.push(n))}),Im=t,X_=e,t};function hI(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>Y_(i)):r=[Y_(t)],fI(e).forEach(i=>{var a=yo(i,"type.displayName")||yo(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var X0=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,pI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(pI);var QK=pI.isPlainObject;const ZK=zr(QK);var Q_,Z_,J_,eS,tS;function nS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(n),!0).forEach(function(r){JK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JK(e,t,n){return(t=e9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e9(e){var t=t9(e,"string");return typeof t=="symbol"?t:t+""}function t9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(null,arguments)}function ml(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var iS=(e,t,n,r,i)=>{var a=n-r,o;return o=bt(Q_||(Q_=ml(["M ",",",""])),e,t),o+=bt(Z_||(Z_=ml(["L ",",",""])),e+n,t),o+=bt(J_||(J_=ml(["L ",",",""])),e+n-a/2,t+i),o+=bt(eS||(eS=ml(["L ",",",""])),e+n-a/2-r,t+i),o+=bt(tS||(tS=ml(["L ",","," Z"])),e,t),o},n9={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r9=e=>{var t=_t(e,n9),{x:n,y:r,upperWidth:i,lowerWidth:a,height:o,className:l}=t,{animationEasing:u,animationDuration:c,animationBegin:d,isUpdateAnimationActive:f}=t,h=m.useRef(null),[p,g]=m.useState(-1),y=m.useRef(i),x=m.useRef(a),v=m.useRef(o),b=m.useRef(n),w=m.useRef(r),j=Mo(e,"trapezoid-");if(m.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var M=h.current.getTotalLength();M&&g(M)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var _=Pe("recharts-trapezoid",l);if(!f)return m.createElement("g",null,m.createElement("path",Af({},Jt(t),{className:_,d:iS(n,r,i,a,o)})));var k=y.current,E=x.current,A=v.current,T=b.current,S=w.current,P="0px ".concat(p===-1?1:p,"px"),C="".concat(p,"px 0px"),B=yA(["strokeDasharray"],c,u);return m.createElement(Lo,{animationId:j,key:j,canBegin:p>0,duration:c,easing:u,isActive:f,begin:d},M=>{var D=Ee(k,i,M),q=Ee(E,a,M),z=Ee(A,o,M),$=Ee(T,n,M),R=Ee(S,r,M);h.current&&(y.current=D,x.current=q,v.current=z,b.current=$,w.current=R);var N=M>0?{transition:B,strokeDasharray:C}:{strokeDasharray:P};return m.createElement("path",Af({},Jt(t),{className:_,d:iS($,R,D,q,z),ref:h,style:rS(rS({},N),t.style)}))})},i9=["option","shapeType","activeClassName"];function a9(e,t){if(e==null)return{};var n,r,i=s9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(n),!0).forEach(function(r){o9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o9(e,t,n){return(t=l9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e){var t=u9(e,"string");return typeof t=="symbol"?t:t+""}function u9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c9(e,t){return Of(Of({},t),e)}function d9(e,t){return e==="symbols"}function sS(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return m.createElement(wA,n);case"trapezoid":return m.createElement(r9,n);case"sector":return m.createElement(_A,n);case"symbols":if(d9(t))return m.createElement(kh,n);break;case"curve":return m.createElement(ao,n);default:return null}}function f9(e){return m.isValidElement(e)?e.props:e}function Cf(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,i=a9(e,i9),a;if(m.isValidElement(t))a=m.cloneElement(t,Of(Of({},i),f9(t)));else if(typeof t=="function")a=t(i,i.index);else if(ZK(t)&&typeof t!="boolean"){var o=c9(t,i);a=m.createElement(sS,{shapeType:n,elementProps:o})}else{var l=i;a=m.createElement(sS,{shapeType:n,elementProps:l})}return i.isActive?m.createElement(jt,{className:r},a):a}var Q0=(e,t,n)=>{var r=dt();return(i,a)=>o=>{e==null||e(i,a,o),r(xC({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Z0=e=>{var t=dt();return(n,r)=>i=>{e==null||e(n,r,i),t(z6())}},J0=(e,t,n)=>{var r=dt();return(i,a)=>o=>{e==null||e(i,a,o),r(F6({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function wp(e){var{tooltipEntrySettings:t}=e,n=dt(),r=Nt(),i=m.useRef(null);return m.useLayoutEffect(()=>{r||(i.current===null?n(R6(t)):i.current!==t&&n(L6({prev:i.current,next:t})),i.current=t)},[t,n,r]),m.useLayoutEffect(()=>()=>{i.current&&(n(M6(i.current)),i.current=null)},[n]),null}function kp(e){var{legendPayload:t}=e,n=dt(),r=Nt(),i=m.useRef(null);return m.useLayoutEffect(()=>{r||(i.current===null?n(sB(t)):i.current!==t&&n(oB({prev:i.current,next:t})),i.current=t)},[n,r,t]),m.useLayoutEffect(()=>()=>{i.current&&(n(lB(i.current)),i.current=null)},[n]),null}var Dm,h9=()=>{var[e]=m.useState(()=>lu("uid-"));return e},p9=(Dm=iN.useId)!==null&&Dm!==void 0?Dm:h9;function m9(e,t){var n=p9();return t||(e?"".concat(e,"-").concat(n):n)}var g9=m.createContext(void 0),jp=e=>{var{id:t,type:n,children:r}=e,i=m9("recharts-".concat(n),t);return m.createElement(g9.Provider,{value:i},r(i))},y9={cartesianItems:[],polarItems:[]},mI=$n({name:"graphicalItems",initialState:y9,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:lt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ir(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:lt()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ir(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:lt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:lt()},removePolarGraphicalItem:{reducer(e,t){var n=Ir(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:lt()}}}),{addCartesianGraphicalItem:v9,replaceCartesianGraphicalItem:x9,removeCartesianGraphicalItem:b9,addPolarGraphicalItem:Cse,removePolarGraphicalItem:Ise}=mI.actions,w9=mI.reducer,k9=e=>{var t=dt(),n=m.useRef(null);return m.useLayoutEffect(()=>{n.current===null?t(v9(e)):n.current!==e&&t(x9({prev:n.current,next:e})),n.current=e},[t,e]),m.useLayoutEffect(()=>()=>{n.current&&(t(b9(n.current)),n.current=null)},[t]),null},_p=m.memo(k9),j9=["points"];function oS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(n),!0).forEach(function(r){_9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _9(e,t,n){return(t=S9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},If.apply(null,arguments)}function E9(e,t){if(e==null)return{};var n,r,i=P9(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function T9(e){var{option:t,dotProps:n,className:r}=e;if(m.isValidElement(t))return m.cloneElement(t,n);if(typeof t=="function")return t(n);var i=Pe(r,typeof t!="boolean"?t.className:""),a=n??{},{points:o}=a,l=E9(a,j9);return m.createElement(uI,If({},l,{className:i}))}function A9(e,t){return e==null?!1:t?!0:e.length===1}function gI(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:o,needClip:l,clipPathId:u,zIndex:c=kt.scatter}=e;if(!A9(t,n))return null;var d=X0(n),f=a$(n),h=t.map((g,y)=>{var x,v,b=Rm(Rm(Rm({r:3},o),f),{},{index:y,cx:(x=g.x)!==null&&x!==void 0?x:void 0,cy:(v=g.y)!==null&&v!==void 0?v:void 0,dataKey:a,value:g.value,payload:g.payload,points:t});return m.createElement(T9,{key:"dot-".concat(y),option:n,dotProps:b,className:i})}),p={};return l&&u!=null&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(u,")")),m.createElement(un,{zIndex:c},m.createElement(jt,If({className:r},p),h))}function lS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(n),!0).forEach(function(r){O9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O9(e,t,n){return(t=C9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yI=0,D9={xAxis:{},yAxis:{},zAxis:{}},vI=$n({name:"cartesianAxis",initialState:D9,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:lt()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:lt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:lt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:lt()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:lt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:lt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:lt()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:lt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:lt()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a,o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-((a=o[0])!==null&&a!==void 0?a:0))<=1)return;var l=[...o,r].slice(-3);e.yAxis[n]=uS(uS({},i),{},{width:r,widthHistory:l})}}}}),{addXAxis:R9,replaceXAxis:L9,removeXAxis:M9,addYAxis:$9,replaceYAxis:z9,removeYAxis:F9,addZAxis:Dse,replaceZAxis:Rse,removeZAxis:Lse,updateYAxisWidth:B9}=vI.actions,U9=vI.reducer,W9=F([Wt],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),H9=F([W9,Fi,Bi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Sp=()=>le(H9),K9=()=>le(TH);function cS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cS(Object(n),!0).forEach(function(r){V9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V9(e,t,n){return(t=G9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y9=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},u=Lm(Lm(Lm({},l),Do(i)),_x(i)),c;return m.isValidElement(i)?c=m.cloneElement(i,u):typeof i=="function"?c=i(u):c=m.createElement(uI,u),m.createElement(jt,{className:"recharts-active-dot",clipPath:o},c)};function qy(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:o=kt.activeDot}=e,l=le(Sa),u=K9();if(t==null||u==null)return null;var c=t.find(d=>u.includes(d.payload));return Me(c)?null:m.createElement(un,{zIndex:o},m.createElement(Y9,{point:c,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var dS=(e,t,n)=>{var r=n??e;if(!Me(r))return Mr(r,t,0)},X9=(e,t,n)=>{var r={},i=e.filter(np),a=e.filter(c=>c.stackId==null),o=i.reduce((c,d)=>{var f=c[d.stackId];return f==null&&(f=[]),f.push(d),c[d.stackId]=f,c},r),l=Object.entries(o).map(c=>{var d,[f,h]=c,p=h.map(y=>y.dataKey),g=dS(t,n,(d=h[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:p,barSize:g}}),u=a.map(c=>{var d=[c.dataKey].filter(h=>h!=null),f=dS(t,n,c.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...u]};function fS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(n),!0).forEach(function(r){Q9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q9(e,t,n){return(t=Z9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z9(e){var t=J9(e,"string");return typeof t=="symbol"?t:t+""}function J9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eV(e,t,n,r,i){var a,o=r.length;if(!(o<1)){var l=Mr(e,n,0,!0),u,c=[];if(pe((a=r[0])===null||a===void 0?void 0:a.barSize)){var d=!1,f=n/o,h=r.reduce((b,w)=>b+(w.barSize||0),0);h+=(o-1)*l,h>=n&&(h-=(o-1)*l,l=0),h>=n&&f>0&&(d=!0,f*=.9,h=o*f);var p=(n-h)/2>>0,g={offset:p-l,size:0};u=r.reduce((b,w)=>{var j,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g.offset+g.size+l,size:d?f:(j=w.barSize)!==null&&j!==void 0?j:0}},k=[...b,_];return g=_.position,k},c)}else{var y=Mr(t,n,0,!0);n-2*y-(o-1)*l<=0&&(l=0);var x=(n-2*y-(o-1)*l)/o;x>1&&(x>>=0);var v=pe(i)?Math.min(x,i):x;u=r.reduce((b,w,j)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:y+(x+l)*j+(x-v)/2,size:v}}],c)}return u}}var tV=(e,t,n,r,i,a,o)=>{var l=Me(o)?t:o,u=eV(n,r,i!==a?i:a,e,l);return i!==a&&u!=null&&(u=u.map(c=>Ic(Ic({},c),{},{position:Ic(Ic({},c.position),{},{offset:c.position.offset-i/2})}))),u},nV=(e,t)=>{var n=tp(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===n)}}}},rV=(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}};function iV(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&pe(e.zIndex)?e.zIndex:t}var aV=e=>{var{chartData:t}=e,n=dt(),r=Nt();return m.useEffect(()=>r?()=>{}:(n(A_(t)),()=>{n(A_(void 0))}),[t,n,r]),null},hS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xI=$n({name:"brush",initialState:hS,reducers:{setBrushSettings(e,t){return t.payload==null?hS:t.payload}}}),{setBrushSettings:Mse}=xI.actions,sV=xI.reducer,oV=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},lV=e=>{var{x1:t,y1:n,x2:r,y2:i}=e;return oV({x:t,y:n},{x:r,y:i})};function uV(e){return(e%180+180)%180}var cV=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=uV(i),o=a*Math.PI/180,l=Math.atan(r/n),u=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},dV={dots:[],areas:[],lines:[]},bI=$n({name:"referenceElements",initialState:dV,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ir(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ir(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ir(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:$se,removeDot:zse,addArea:Fse,removeArea:Bse,addLine:fV,removeLine:hV}=bI.actions,pV=bI.reducer,wI=m.createContext(void 0),mV=e=>{var{children:t}=e,[n]=m.useState("".concat(lu("recharts"),"-clip")),r=Sp();if(r==null)return null;var{x:i,y:a,width:o,height:l}=r;return m.createElement(wI.Provider,{value:n},m.createElement("defs",null,m.createElement("clipPath",{id:n},m.createElement("rect",{x:i,y:a,height:l,width:o}))),t)},gV=()=>m.useContext(wI);class yV{constructor(t){var{x:n,y:r}=t;this.xAxisScale=n,this.yAxisScale=r}map(t,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(t.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(t.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(t,n){var r,i,{position:a,fallback:o}=n,l,u;return o==="rangeMin"?l=this.yAxisScale.rangeMin():o==="rangeMax"?l=this.yAxisScale.rangeMax():l=0,o==="rangeMin"?u=this.xAxisScale.rangeMin():o==="rangeMax"?u=this.xAxisScale.rangeMax():u=0,{x:(r=this.xAxisScale.map(t.x,{position:a}))!==null&&r!==void 0?r:u,y:(i=this.yAxisScale.map(t.y,{position:a}))!==null&&i!==void 0?i:l}}isInRange(t){var{x:n,y:r}=t,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function pS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(n),!0).forEach(function(r){vV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vV(e,t,n){return(t=xV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xV(e){var t=bV(e,"string");return typeof t=="symbol"?t:t+""}function bV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(null,arguments)}var wV=(e,t)=>{var n;if(m.isValidElement(e))n=m.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{if(!pe(t.x1)||!pe(t.y1)||!pe(t.x2)||!pe(t.y2))return null;n=m.createElement("line",Df({},t,{className:"recharts-reference-line-line"}))}return n},kV=(e,t,n,r,i,a)=>{var{x:o,width:l}=a,u=i.map(e,{position:n});if(!pe(u)||t==="discard"&&!i.isInRange(u))return null;var c=[{x:o+l,y:u},{x:o,y:u}];return r==="left"?c.reverse():c},jV=(e,t,n,r,i,a)=>{var{y:o,height:l}=a,u=i.map(e,{position:n});if(!pe(u)||t==="discard"&&!i.isInRange(u))return null;var c=[{x:u,y:o+l},{x:u,y:o}];return r==="top"?c.reverse():c},_V=(e,t,n,r)=>{var i=[r.mapWithFallback(e[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(e[1],{position:n,fallback:"rangeMax"})];return t==="discard"&&i.some(a=>!r.isInRange(a))?null:i},SV=(e,t,n,r,i,a,o)=>{var{x:l,y:u,segment:c,ifOverflow:d}=o,f=gr(l),h=gr(u);return h?kV(u,d,r,a,t,n):f?jV(l,d,r,i,e,n):c!=null&&c.length===2?_V(c,d,r,new yV({x:e,y:t})):null};function NV(e){var t=dt();return m.useEffect(()=>(t(fV(e)),()=>{t(hV(e))})),null}function EV(e){var{xAxisId:t,yAxisId:n,shape:r,className:i,ifOverflow:a}=e,o=Nt(),l=gV(),u=le(E=>li(E,t)),c=le(E=>ui(E,n)),d=le(E=>No(E,"xAxis",t,o)),f=le(E=>No(E,"yAxis",n,o)),h=Ro();if(!l||!h||u==null||c==null||d==null||f==null)return null;var p=SV(d,f,h,e.position,u.orientation,c.orientation,e);if(!p)return null;var g=p[0],y=p[1];if(g==null||y==null)return null;var{x,y:v}=g,{x:b,y:w}=y,j=a==="hidden"?"url(#".concat(l,")"):void 0,_=mS(mS({clipPath:j},Jt(e)),{},{x1:x,y1:v,x2:b,y2:w}),k=lV({x1:x,y1:v,x2:b,y2:w});return m.createElement(un,{zIndex:e.zIndex},m.createElement(jt,{className:Pe("recharts-reference-line",i)},wV(r,_),m.createElement(tI,Df({},k,{lowerWidth:k.width,upperWidth:k.width}),m.createElement(rI,{label:e.label}),e.children)))}var PV={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:kt.line};function yn(e){var t=_t(e,PV);return m.createElement(m.Fragment,null,m.createElement(NV,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),m.createElement(EV,t))}yn.displayName="ReferenceLine";function kI(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var i=e[r];i!==void 0&&n.push(i)}return n}function TV(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return cV(r,n)}function AV(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:l}=e;return t===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function ku(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function OV(e,t){return kI(e,t+1)}function CV(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:l}=t,u=0,c=1,d=o,f=function(){var g=r==null?void 0:r[u];if(g===void 0)return{v:kI(r,c)};var y=u,x,v=()=>(x===void 0&&(x=n(g,y)),x),b=g.coordinate,w=u===0||ku(e,b,v,d,l);w||(u=0,d=o,c+=1),w&&(d=b+e*(v()/2+i),u+=c)},h;c<=a.length;)if(h=f(),h)return h.v;return[]}function IV(e,t,n,r,i){var a=(r||[]).slice(),o=a.length;if(o===0)return[];for(var{start:l,end:u}=t,c=1;c<=o;c++){for(var d=(o-1)%c,f=l,h=!0,p=function(){var j=r[y];if(j==null)return 0;var _=y,k,E=()=>(k===void 0&&(k=n(j,_)),k),A=j.coordinate,T=y===d||ku(e,A,E,f,u);if(!T)return h=!1,1;T&&(f=A+e*(E()/2+i))},g,y=d;y<o&&(g=p(),!(g!==0&&g===1));y+=c);if(h){for(var x=[],v=d;v<o;v+=c){var b=r[v];b!=null&&x.push(b)}return x}}return[]}function gS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(n),!0).forEach(function(r){DV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DV(e,t,n){return(t=RV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RV(e){var t=LV(e,"string");return typeof t=="symbol"?t:t+""}function LV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MV(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:l}=t,{end:u}=t,c=function(h){var p=a[h];if(p==null)return 1;var g=p,y,x=()=>(y===void 0&&(y=n(p,h)),y);if(h===o-1){var v=e*(g.coordinate+e*x()/2-u);a[h]=g=rn(rn({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=rn(rn({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var b=ku(e,g.tickCoord,x,l,u);b&&(u=g.tickCoord-e*(x()/2+i),a[h]=rn(rn({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)c(d);return a}function $V(e,t,n,r,i,a){var o=(r||[]).slice(),l=o.length,{start:u,end:c}=t;if(a){var d=r[l-1];if(d!=null){var f=n(d,l-1),h=e*(d.coordinate+e*f/2-c);if(o[l-1]=d=rn(rn({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var p=ku(e,d.tickCoord,()=>f,u,c);p&&(c=d.tickCoord-e*(f/2+i),o[l-1]=rn(rn({},d),{},{isShow:!0}))}}}for(var g=a?l-1:l,y=function(b){var w=o[b];if(w==null)return 1;var j=w,_,k=()=>(_===void 0&&(_=n(w,b)),_);if(b===0){var E=e*(j.coordinate-e*k()/2-u);o[b]=j=rn(rn({},j),{},{tickCoord:E<0?j.coordinate-E*e:j.coordinate})}else o[b]=j=rn(rn({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var A=ku(e,j.tickCoord,k,u,c);A&&(u=j.tickCoord+e*(k()/2+i),o[b]=rn(rn({},j),{},{isShow:!0}))}},x=0;x<g;x++)y(x);return o}function eb(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:u,tickFormatter:c,unit:d,angle:f}=e;if(!i||!i.length||!r)return[];if(ae(u)||$u.isSsr){var h;return(h=OV(i,ae(u)?u:0))!==null&&h!==void 0?h:[]}var p=[],g=l==="top"||l==="bottom"?"width":"height",y=d&&g==="width"?$l(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=(_,k)=>{var E=typeof c=="function"?c(_.value,k):_.value;return g==="width"?TV($l(E,{fontSize:t,letterSpacing:n}),y,f):$l(E,{fontSize:t,letterSpacing:n})[g]},v=i[0],b=i[1],w=i.length>=2&&v!=null&&b!=null?On(b.coordinate-v.coordinate):1,j=AV(a,w,g);return u==="equidistantPreserveStart"?CV(w,j,x,i,o):u==="equidistantPreserveEnd"?IV(w,j,x,i,o):(u==="preserveStart"||u==="preserveStartEnd"?p=$V(w,j,x,i,o,u==="preserveStartEnd"):p=MV(w,j,x,i,o),p.filter(_=>_.isShow))}var zV=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+a,c=o+u+l+(n?r:0);return Math.round(c)}return 0},FV=["axisLine","width","height","className","hide","ticks","axisType"];function BV(e,t){if(e==null)return{};var n,r,i=UV(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ys.apply(null,arguments)}function yS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yS(Object(n),!0).forEach(function(r){WV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WV(e,t,n){return(t=HV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HV(e){var t=KV(e,"string");return typeof t=="symbol"?t:t+""}function KV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ni={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:kt.axis};function VV(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:u}=e;if(!l)return null;var c=xt(xt(xt({},u),vn(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);c=xt(xt({},c),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var f=+(a==="left"&&!o||a==="right"&&o);c=xt(xt({},c),{},{x1:t+f*r,y1:n,x2:t+f*r,y2:n+i})}return m.createElement("line",ys({},c,{className:Pe("recharts-cartesian-axis-line",yo(l,"className"))}))}function GV(e,t,n,r,i,a,o,l,u){var c,d,f,h,p,g,y=l?-1:1,x=e.tickSize||o,v=ae(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,h=n+ +!l*i,f=h-y*x,g=f-y*u,p=v;break;case"left":f=h=e.coordinate,d=t+ +!l*r,c=d-y*x,p=c-y*u,g=v;break;case"right":f=h=e.coordinate,d=t+ +l*r,c=d+y*x,p=c+y*u,g=v;break;default:c=d=e.coordinate,h=n+ +l*i,f=h+y*x,g=f+y*u,p=v;break}return{line:{x1:c,y1:f,x2:d,y2:h},tick:{x:p,y:g}}}function qV(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function YV(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function XV(e){var{option:t,tickProps:n,value:r}=e,i,a=Pe(n.className,"recharts-cartesian-axis-tick-value");if(m.isValidElement(t))i=m.cloneElement(t,xt(xt({},n),{},{className:a}));else if(typeof t=="function")i=t(xt(xt({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Pe(o,GK(t))),i=m.createElement(V0,ys({},n,{className:o}),r)}return i}var QV=m.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:o,unit:l,padding:u,tickTextProps:c,orientation:d,mirror:f,x:h,y:p,width:g,height:y,tickSize:x,tickMargin:v,fontSize:b,letterSpacing:w,getTicksConfig:j,events:_,axisType:k}=e,E=eb(xt(xt({},j),{},{ticks:n}),b,w),A=qV(d,f),T=YV(d,f),S=vn(j),P=Do(r),C={};typeof i=="object"&&(C=i);var B=xt(xt({},S),{},{fill:"none"},C),M=E.map(z=>xt({entry:z},GV(z,h,p,g,y,d,x,f,v))),D=M.map(z=>{var{entry:$,line:R}=z;return m.createElement(jt,{className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},i&&m.createElement("line",ys({},B,R,{className:Pe("recharts-cartesian-axis-tick-line",yo(i,"className"))})))}),q=M.map((z,$)=>{var R,N,{entry:Y,tick:U}=z,O=xt(xt(xt(xt({verticalAnchor:T},S),{},{textAnchor:A,stroke:"none",fill:a},U),{},{index:$,payload:Y,visibleTicksCount:E.length,tickFormatter:o,padding:u},c),{},{angle:(R=(N=c==null?void 0:c.angle)!==null&&N!==void 0?N:S.angle)!==null&&R!==void 0?R:0}),ne=xt(xt({},O),P);return m.createElement(jt,ys({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},Cu(_,Y,$)),r&&m.createElement(XV,{option:r,tickProps:ne,value:"".concat(typeof o=="function"?o(Y.value,$):Y.value).concat(l||"")}))});return m.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},q.length>0&&m.createElement(un,{zIndex:kt.label},m.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},q)),D.length>0&&m.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},D))}),ZV=m.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:l,axisType:u}=e,c=BV(e,FV),[d,f]=m.useState(""),[h,p]=m.useState(""),g=m.useRef(null);m.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var x;return zV({ticks:g.current,label:(x=e.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=m.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=v;var b=v[0];if(b){var w=window.getComputedStyle(b),j=w.fontSize,_=w.letterSpacing;(j!==d||_!==h)&&(f(j),p(_))}}},[d,h]);return o||r!=null&&r<=0||i!=null&&i<=0?null:m.createElement(un,{zIndex:e.zIndex},m.createElement(jt,{className:Pe("recharts-cartesian-axis",a)},m.createElement(VV,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:vn(e)}),m.createElement(QV,{ref:y,axisType:u,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),m.createElement(tI,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},m.createElement(rI,{label:e.label,labelRef:e.labelRef}),e.children)))}),tb=m.forwardRef((e,t)=>{var n=_t(e,Ni);return m.createElement(ZV,ys({},n,{ref:t}))});tb.displayName="CartesianAxis";var JV=["x1","y1","x2","y2","key"],eG=["offset"],tG=["xAxisId","yAxisId"],nG=["xAxisId","yAxisId"];function vS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(n),!0).forEach(function(r){rG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rG(e,t,n){return(t=iG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iG(e){var t=aG(e,"string");return typeof t=="symbol"?t:t+""}function aG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Za.apply(null,arguments)}function Rf(e,t){if(e==null)return{};var n,r,i=sG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var oG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:l}=e;return m.createElement("rect",{x:r,y:i,ry:l,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function jI(e){var{option:t,lineItemProps:n}=e,r;if(m.isValidElement(t))r=m.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:o,x2:l,y2:u,key:c}=n,d=Rf(n,JV),f=(i=vn(d))!==null&&i!==void 0?i:{},{offset:h}=f,p=Rf(f,eG);r=m.createElement("line",Za({},p,{x1:a,y1:o,x2:l,y2:u,fill:"none",key:c}))}return r}function lG(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=Rf(e,tG),u=i.map((c,d)=>{var f=sn(sn({},l),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(d),index:d});return m.createElement(jI,{key:"line-".concat(d),option:r,lineItemProps:f})});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function uG(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,l=Rf(e,nG),u=i.map((c,d)=>{var f=sn(sn({},l),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(d),index:d});return m.createElement(jI,{option:r,lineItemProps:f,key:"line-".concat(d)})});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function cG(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length||l==null)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==c[0]&&c.unshift(0);var d=c.map((f,h)=>{var p=c[h+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=h%t.length;return m.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:y,width:a,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function dG(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:l,verticalPoints:u}=e;if(!t||!n||!n.length)return null;var c=u.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==c[0]&&c.unshift(0);var d=c.map((f,h)=>{var p=c[h+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=h%n.length;return m.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:y,height:l,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var fG=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return XT(eb(sn(sn(sn({},Ni),n),{},{ticks:QT(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},hG=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return XT(eb(sn(sn(sn({},Ni),n),{},{ticks:QT(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},pG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:kt.grid};function st(e){var t=Kx(),n=Vx(),r=oA(),i=sn(sn({},_t(e,pG)),{},{x:ae(e.x)?e.x:r.left,y:ae(e.y)?e.y:r.top,width:ae(e.width)?e.width:r.width,height:ae(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:l,y:u,width:c,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=i,g=Nt(),y=le(T=>x_(T,"xAxis",a,g)),x=le(T=>x_(T,"yAxis",o,g));if(!ii(c)||!ii(d)||!ae(l)||!ae(u))return null;var v=i.verticalCoordinatesGenerator||fG,b=i.horizontalCoordinatesGenerator||hG,{horizontalPoints:w,verticalPoints:j}=i;if((!w||!w.length)&&typeof b=="function"){var _=h&&h.length,k=b({yAxis:x?sn(sn({},x),{},{ticks:_?h:x.ticks}):void 0,width:t??c,height:n??d,offset:r},_?!0:f);rf(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(w=k)}if((!j||!j.length)&&typeof v=="function"){var E=p&&p.length,A=v({xAxis:y?sn(sn({},y),{},{ticks:E?p:y.ticks}):void 0,width:t??c,height:n??d,offset:r},E?!0:f);rf(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(j=A)}return m.createElement(un,{zIndex:i.zIndex},m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(oG,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),m.createElement(cG,Za({},i,{horizontalPoints:w})),m.createElement(dG,Za({},i,{verticalPoints:j})),m.createElement(lG,Za({},i,{offset:r,horizontalPoints:w,xAxis:y,yAxis:x})),m.createElement(uG,Za({},i,{offset:r,verticalPoints:j,xAxis:y,yAxis:x}))))}st.displayName="CartesianGrid";var mG={},_I=$n({name:"errorBars",initialState:mG,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Use,replaceErrorBar:Wse,removeErrorBar:Hse}=_I.actions,gG=_I.reducer,yG=["children"];function vG(e,t){if(e==null)return{};var n,r,i=xG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},wG=m.createContext(bG);function nb(e){var{children:t}=e,n=vG(e,yG);return m.createElement(wG.Provider,{value:n},t)}function Yu(e,t){var n,r,i=le(c=>li(c,e)),a=le(c=>ui(c,t)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:$t.allowDataOverflow,l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:zt.allowDataOverflow,u=o||l;return{needClip:u,needClipX:o,needClipY:l}}function Np(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=Sp(),{needClipX:a,needClipY:o,needClip:l}=Yu(t,n);if(!l||!i)return null;var{x:u,y:c,width:d,height:f}=i;return m.createElement("clipPath",{id:"clipPath-".concat(r)},m.createElement("rect",{x:a?u:u-d/2,y:o?c:c-f/2,width:a?d:d*2,height:o?f:f*2}))}var SI=(e,t,n,r)=>br(e,"xAxis",t,r),NI=(e,t,n,r)=>xr(e,"xAxis",t,r),EI=(e,t,n,r)=>br(e,"yAxis",n,r),PI=(e,t,n,r)=>xr(e,"yAxis",n,r),kG=F([Ae,SI,EI,NI,PI],(e,t,n,r,i)=>Br(e,"xAxis")?_a(t,r,!1):_a(n,i,!1)),jG=(e,t,n,r,i)=>i;function _G(e){return e.type==="line"}var SG=F([Uo,jG],(e,t)=>e.filter(_G).find(n=>n.id===t)),NG=F([Ae,SI,EI,NI,PI,SG,kG,Yh],(e,t,n,r,i,a,o,l)=>{var{chartData:u,dataStartIndex:c,dataEndIndex:d}=l;if(!(a==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:h}=a,p;if(h!=null&&h.length>0?p=h:p=u==null?void 0:u.slice(c,d+1),p!=null)return gq({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:o,displayedData:p})}});function TI(e){var t=Do(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,o=Number(i),l=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=r),{r:o,strokeWidth:l}}return{r:n,strokeWidth:r}}var EG={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=m;function PG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TG=typeof Object.is=="function"?Object.is:PG,AG=Xu.useSyncExternalStore,OG=Xu.useRef,CG=Xu.useEffect,IG=Xu.useMemo,DG=Xu.useDebugValue;EG.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=OG(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=IG(function(){function u(p){if(!c){if(c=!0,d=p,p=r(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return f=g}return f=p}if(g=f,TG(d,p))return g;var y=r(p);return i!==void 0&&i(g,y)?(d=p,g):(d=p,f=y)}var c=!1,d,f,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,r,i]);var l=AG(e,a[0],a[1]);return CG(function(){o.hasValue=!0,o.value=l},[l]),DG(l),l};function RG(e){e()}function LG(){let e=null,t=null;return{clear(){e=null,t=null},notify(){RG(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var xS={notify(){},get:()=>[]};function MG(e,t){let n,r=xS,i=0,a=!1;function o(y){d();const x=r.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){r.notify()}function u(){g.onStateChange&&g.onStateChange()}function c(){return a}function d(){i++,n||(n=e.subscribe(u),r=LG())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=xS)}function h(){a||(a=!0,d())}function p(){a&&(a=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return g}var $G=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zG=$G(),FG=()=>typeof navigator<"u"&&navigator.product==="ReactNative",BG=FG(),UG=()=>zG||BG?m.useLayoutEffect:m.useEffect,WG=UG();function bS(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function HG(e,t){if(bS(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!bS(e[n[i]],t[n[i]]))return!1;return!0}var Mm=Symbol.for("react-redux-context"),$m=typeof globalThis<"u"?globalThis:{};function KG(){if(!m.createContext)return{};const e=$m[Mm]??($m[Mm]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var VG=KG();function GG(e){const{children:t,context:n,serverState:r,store:i}=e,a=m.useMemo(()=>{const u=MG(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=m.useMemo(()=>i.getState(),[i]);WG(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=n||VG;return m.createElement(l.Provider,{value:a},t)}var qG=GG,YG=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function XG(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function qo(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(YG.has(r)){if(e[r]==null&&t[r]==null)continue;if(!HG(e[r],t[r]))return!1}else if(!XG(e[r],t[r]))return!1;return!0}var QG=["id"],ZG=["type","layout","connectNulls","needClip","shape"],JG=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(null,arguments)}function wS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(n),!0).forEach(function(r){eq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eq(e,t,n){return(t=tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tq(e){var t=nq(e,"string");return typeof t=="symbol"?t:t+""}function nq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rb(e,t){if(e==null)return{};var n,r,i=rq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iq=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Oa(n,t),payload:e}]},aq=m.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:c,id:d}=e,f={dataDefinedOnItem:n,getPosition:Aa,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Oa(o,t),hide:l,type:c,color:r,unit:u,graphicalItemId:d}};return m.createElement(wp,{tooltipEntrySettings:f})}),AI=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function sq(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var oq=(e,t,n)=>{var r=n.reduce((p,g)=>p+g);if(!r)return AI(t,e);for(var i=Math.floor(e/r),a=e%r,o=t-e,l=[],u=0,c=0;u<n.length;c+=(d=n[u])!==null&&d!==void 0?d:0,++u){var d,f=n[u];if(f!=null&&c+f>a){l=[...n.slice(0,u),a-c];break}}var h=l.length%2===0?[0,o]:[o];return[...sq(n,i),...l,...h].map(p=>"".concat(p,"px")).join(", ")};function lq(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:a,needClip:o}=r,{id:l}=r,u=rb(r,QG),c=vn(u);return m.createElement(gI,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:c,needClip:o,clipPathId:t})}function uq(e){var{showLabels:t,children:n,points:r}=e,i=m.useMemo(()=>r==null?void 0:r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Xr(Xr({},u),{},{value:a.value,payload:a.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[r]);return m.createElement(up,{value:t?i:void 0},n)}function kS(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:a}=e,{type:o,layout:l,connectNulls:u,needClip:c,shape:d}=a,f=rb(a,ZG),h=Xr(Xr({},Jt(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:r,type:o,layout:l,connectNulls:u,strokeDasharray:i??a.strokeDasharray});return m.createElement(m.Fragment,null,(r==null?void 0:r.length)>1&&m.createElement(Cf,ju({shapeType:"curve",option:d},h,{pathRef:n})),m.createElement(lq,{points:r,clipPathId:t,props:a}))}function cq(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function dq(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:o,strokeDasharray:l,isAnimationActive:u,animationBegin:c,animationDuration:d,animationEasing:f,animateNewValues:h,width:p,height:g,onAnimationEnd:y,onAnimationStart:x}=n,v=i.current,b=Mo(o,"recharts-line-"),w=m.useRef(b),[j,_]=m.useState(!1),k=!j,E=m.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),A=m.useCallback(()=>{typeof x=="function"&&x(),_(!0)},[x]),T=cq(r.current),S=m.useRef(0);w.current!==b&&(S.current=a.current,w.current=b);var P=S.current;return m.createElement(uq,{points:o,showLabels:k},n.children,m.createElement(Lo,{animationId:b,begin:c,duration:d,isActive:u,easing:f,onAnimationEnd:E,onAnimationStart:A,key:b},C=>{var B=Ee(P,T+P,C),M=Math.min(B,T),D;if(u)if(l){var q="".concat(l).split(/[,\s]+/gim).map(R=>parseFloat(R));D=oq(M,T,q)}else D=AI(T,M);else D=l==null?void 0:String(l);if(C>0&&T>0&&(i.current=o,a.current=Math.max(a.current,M)),v){var z=v.length/o.length,$=C===1?o:o.map((R,N)=>{var Y=Math.floor(N*z);if(v[Y]){var U=v[Y];return Xr(Xr({},R),{},{x:Ee(U.x,R.x,C),y:Ee(U.y,R.y,C)})}return h?Xr(Xr({},R),{},{x:Ee(p*2,R.x,C),y:Ee(g/2,R.y,C)}):Xr(Xr({},R),{},{x:R.x,y:R.y})});return i.current=$,m.createElement(kS,{props:n,points:$,clipPathId:t,pathRef:r,strokeDasharray:D})}return m.createElement(kS,{props:n,points:o,clipPathId:t,pathRef:r,strokeDasharray:D})}),m.createElement(cp,{label:n.label}))}function fq(e){var{clipPathId:t,props:n}=e,r=m.useRef(null),i=m.useRef(0),a=m.useRef(null);return m.createElement(dq,{props:n,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var hq=(e,t)=>{var n,r;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:tt(e.payload,t)}};class pq extends m.Component{render(){var{hide:t,dot:n,points:r,className:i,xAxisId:a,yAxisId:o,top:l,left:u,width:c,height:d,id:f,needClip:h,zIndex:p}=this.props;if(t)return null;var g=Pe("recharts-line",i),y=f,{r:x,strokeWidth:v}=TI(n),b=X0(n),w=x*2+v,j=h?"url(#clipPath-".concat(b?"":"dots-").concat(y,")"):void 0;return m.createElement(un,{zIndex:p},m.createElement(jt,{className:g},h&&m.createElement("defs",null,m.createElement(Np,{clipPathId:y,xAxisId:a,yAxisId:o}),!b&&m.createElement("clipPath",{id:"clipPath-dots-".concat(y)},m.createElement("rect",{x:u-w/2,y:l-w/2,width:c+w,height:d+w}))),m.createElement(nb,{xAxisId:a,yAxisId:o,data:r,dataPointFormatter:hq,errorBarOffset:0},m.createElement(fq,{props:this.props,clipPathId:y}))),m.createElement(qy,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:j}))}}var OI={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:kt.line,type:"linear"};function mq(e){var t=_t(e,OI),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,hide:c,isAnimationActive:d,label:f,legendType:h,xAxisId:p,yAxisId:g,id:y}=t,x=rb(t,JG),{needClip:v}=Yu(p,g),b=Sp(),w=Ca(),j=Nt(),_=le(S=>NG(S,p,g,j,y));if(w!=="horizontal"&&w!=="vertical"||_==null||b==null)return null;var{height:k,width:E,x:A,y:T}=b;return m.createElement(pq,ju({},x,{id:y,connectNulls:l,dot:u,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:d,hide:c,label:f,legendType:h,xAxisId:p,yAxisId:g,points:_,layout:w,height:k,width:E,left:A,top:T,needClip:v}))}function gq(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:l,displayedData:u}=e;return u.map((c,d)=>{var f=tt(c,o);if(t==="horizontal"){var h=bo({axis:n,ticks:i,bandSize:l,entry:c,index:d}),p=Me(f)?null:r.scale.map(f);return{x:h,y:p??null,value:f,payload:c}}var g=Me(f)?null:n.scale.map(f),y=bo({axis:r,ticks:a,bandSize:l,entry:c,index:d});return g==null||y==null?null:{x:g,y,value:f,payload:c}}).filter(Boolean)}function yq(e){var t=_t(e,OI),n=Nt();return m.createElement(jp,{id:t.id,type:"line"},r=>m.createElement(m.Fragment,null,m.createElement(kp,{legendPayload:iq(t)}),m.createElement(aq,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),m.createElement(_p,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),m.createElement(mq,ju({},t,{id:r}))))}var pt=m.memo(yq,qo);pt.displayName="Line";function ci(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:yI}function di(e,t){var n,r;return(n=(r=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:yI}var CI=(e,t,n)=>br(e,"xAxis",ci(e,t),n),II=(e,t,n)=>xr(e,"xAxis",ci(e,t),n),DI=(e,t,n)=>br(e,"yAxis",di(e,t),n),RI=(e,t,n)=>xr(e,"yAxis",di(e,t),n),vq=F([Ae,CI,DI,II,RI],(e,t,n,r,i)=>Br(e,"xAxis")?_a(t,r,!1):_a(n,i,!1)),xq=(e,t)=>t,LI=F([Uo,xq],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),MI=e=>{var t=Ae(e),n=Br(t,"xAxis");return n?"yAxis":"xAxis"},bq=(e,t)=>{var n=MI(e);return n==="yAxis"?di(e,t):ci(e,t)},wq=(e,t,n)=>Nf(e,MI(e),bq(e,t),n),kq=F([LI,wq],(e,t)=>{var n;if(!(e==null||t==null)){var{stackId:r}=e,i=tp(e);if(!(r==null||i==null)){var a=(n=t[r])===null||n===void 0?void 0:n.stackedData,o=a==null?void 0:a.find(l=>l.key===i);if(o!=null)return o.map(l=>[l[0],l[1]])}}}),jq=F([Ae,CI,DI,II,RI,kq,uO,vq,LI,_W],(e,t,n,r,i,a,o,l,u,c)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:h}=o;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:p}=u,g;if(p&&p.length>0?g=p:g=d==null?void 0:d.slice(f,h+1),g!=null)return Uq({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:f,areaSettings:u,stackedData:a,displayedData:g,chartBaseValue:c,bandSize:l})}}),_q=["id"],Sq=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},as.apply(null,arguments)}function $I(e,t){if(e==null)return{};var n,r,i=Nq(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(n),!0).forEach(function(r){Eq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eq(e,t,n){return(t=Pq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lf(e,t){return e&&e!=="none"?e:t}var Aq=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:Lf(r,i),value:Oa(n,t),payload:e}]},Oq=m.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,unit:u,tooltipType:c,id:d}=e,f={dataDefinedOnItem:n,getPosition:Aa,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Oa(o,t),hide:l,type:c,color:Lf(r,a),unit:u,graphicalItemId:d}};return m.createElement(wp,{tooltipEntrySettings:f})});function Cq(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:a,dataKey:o}=r,l=vn(r);return m.createElement(gI,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function Iq(e){var{showLabels:t,children:n,points:r}=e,i=r.map(a=>{var o,l,u={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Xs(Xs({},u),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return m.createElement(up,{value:t?i:void 0},n)}function _S(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:a}=e,{layout:o,type:l,stroke:u,connectNulls:c,isRange:d}=a,{id:f}=a,h=$I(a,_q),p=vn(h),g=Jt(h);return m.createElement(m.Fragment,null,(t==null?void 0:t.length)>1&&m.createElement(jt,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},m.createElement(ao,as({},g,{id:f,points:t,connectNulls:c,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&m.createElement(ao,as({},p,{className:"recharts-area-curve",layout:o,type:l,connectNulls:c,fill:"none",points:t})),u!=="none"&&d&&m.createElement(ao,as({},p,{className:"recharts-area-curve",layout:o,type:l,connectNulls:c,fill:"none",points:n}))),m.createElement(Cq,{points:t,props:h,clipPathId:i}))}function Dq(e){var t,n,{alpha:r,baseLine:i,points:a,strokeWidth:o}=e,l=(t=a[0])===null||t===void 0?void 0:t.y,u=(n=a[a.length-1])===null||n===void 0?void 0:n.y;if(!pe(l)||!pe(u))return null;var c=r*Math.abs(l-u),d=Math.max(...a.map(f=>f.x||0));return ae(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(f=>f.x||0),d)),ae(d)?m.createElement("rect",{x:0,y:l<u?l:l-c,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function Rq(e){var t,n,{alpha:r,baseLine:i,points:a,strokeWidth:o}=e,l=(t=a[0])===null||t===void 0?void 0:t.x,u=(n=a[a.length-1])===null||n===void 0?void 0:n.x;if(!pe(l)||!pe(u))return null;var c=r*Math.abs(l-u),d=Math.max(...a.map(f=>f.y||0));return ae(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(f=>f.y||0),d)),ae(d)?m.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}function Lq(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:a}=e;return n==="vertical"?m.createElement(Dq,{alpha:t,points:r,baseLine:i,strokeWidth:a}):m.createElement(Rq,{alpha:t,points:r,baseLine:i,strokeWidth:a})}function Mq(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=e,{points:o,baseLine:l,isAnimationActive:u,animationBegin:c,animationDuration:d,animationEasing:f,onAnimationStart:h,onAnimationEnd:p}=r,g=m.useMemo(()=>({points:o,baseLine:l}),[o,l]),y=Mo(g,"recharts-area-"),x=Gx(),[v,b]=m.useState(!1),w=!v,j=m.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),_=m.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);if(x==null)return null;var k=i.current,E=a.current;return m.createElement(Iq,{showLabels:w,points:o},r.children,m.createElement(Lo,{animationId:y,begin:c,duration:d,isActive:u,easing:f,onAnimationEnd:j,onAnimationStart:_,key:y},A=>{if(k){var T=k.length/o.length,S=A===1?o:o.map((C,B)=>{var M=Math.floor(B*T);if(k[M]){var D=k[M];return Xs(Xs({},C),{},{x:Ee(D.x,C.x,A),y:Ee(D.y,C.y,A)})}return C}),P;return ae(l)?P=Ee(E,l,A):Me(l)||Lr(l)?P=Ee(E,0,A):P=l.map((C,B)=>{var M=Math.floor(B*T);if(Array.isArray(E)&&E[M]){var D=E[M];return Xs(Xs({},C),{},{x:Ee(D.x,C.x,A),y:Ee(D.y,C.y,A)})}return C}),A>0&&(i.current=S,a.current=P),m.createElement(_S,{points:S,baseLine:P,needClip:t,clipPathId:n,props:r})}return A>0&&(i.current=o,a.current=l),m.createElement(jt,null,u&&m.createElement("defs",null,m.createElement("clipPath",{id:"animationClipPath-".concat(n)},m.createElement(Lq,{alpha:A,points:o,baseLine:l,layout:x,strokeWidth:r.strokeWidth}))),m.createElement(jt,{clipPath:"url(#animationClipPath-".concat(n,")")},m.createElement(_S,{points:o,baseLine:l,needClip:t,clipPathId:n,props:r})))}),m.createElement(cp,{label:r.label}))}function $q(e){var{needClip:t,clipPathId:n,props:r}=e,i=m.useRef(null),a=m.useRef();return m.createElement(Mq,{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class zq extends m.PureComponent{render(){var{hide:t,dot:n,points:r,className:i,top:a,left:o,needClip:l,xAxisId:u,yAxisId:c,width:d,height:f,id:h,baseLine:p,zIndex:g}=this.props;if(t)return null;var y=Pe("recharts-area",i),x=h,{r:v,strokeWidth:b}=TI(n),w=X0(n),j=v*2+b,_=l?"url(#clipPath-".concat(w?"":"dots-").concat(x,")"):void 0;return m.createElement(un,{zIndex:g},m.createElement(jt,{className:y},l&&m.createElement("defs",null,m.createElement(Np,{clipPathId:x,xAxisId:u,yAxisId:c}),!w&&m.createElement("clipPath",{id:"clipPath-dots-".concat(x)},m.createElement("rect",{x:o-j/2,y:a-j/2,width:d+j,height:f+j}))),m.createElement($q,{needClip:l,clipPathId:x,props:this.props})),m.createElement(qy,{points:r,mainColor:Lf(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:_}),this.props.isRange&&Array.isArray(p)&&m.createElement(qy,{points:p,mainColor:Lf(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:_}))}}var zI={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:kt.area};function Fq(e){var t,n=_t(e,zI),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:u,fill:c,fillOpacity:d,hide:f,isAnimationActive:h,legendType:p,stroke:g,xAxisId:y,yAxisId:x}=n,v=$I(n,Sq),b=Ca(),w=MC(),{needClip:j}=Yu(y,x),_=Nt(),{points:k,isRange:E,baseLine:A}=(t=le(M=>jq(M,e.id,_)))!==null&&t!==void 0?t:{},T=Sp();if(b!=="horizontal"&&b!=="vertical"||T==null||w!=="AreaChart"&&w!=="ComposedChart")return null;var{height:S,width:P,x:C,y:B}=T;return!k||!k.length?null:m.createElement(zq,as({},v,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:A,connectNulls:l,dot:u,fill:c,fillOpacity:d,height:S,hide:f,layout:b,isAnimationActive:h==="auto"?!$u.isSsr:h,isRange:E,legendType:p,needClip:j,points:k,stroke:g,width:P,left:C,top:B,xAxisId:y,yAxisId:x}))}var Bq=(e,t,n,r,i)=>{var a=n??t;if(ae(a))return a;var o=e==="horizontal"?i:r,l=o.scale.domain();if(o.type==="number"){var u=Math.max(l[0],l[1]),c=Math.min(l[0],l[1]);return a==="dataMin"?c:a==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return a==="dataMin"?l[0]:a==="dataMax"?l[1]:l[0]};function Uq(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:l,yAxis:u,displayedData:c,dataStartIndex:d,xAxisTicks:f,yAxisTicks:h,bandSize:p}=e,g=i&&i.length,y=Bq(a,o,n,l,u),x=a==="horizontal",v=!1,b=c.map((j,_)=>{var k,E,A,T;if(g)T=i[d+_];else{var S=tt(j,r);Array.isArray(S)?(T=S,v=!0):T=[y,S]}var P=(k=(E=T)===null||E===void 0?void 0:E[1])!==null&&k!==void 0?k:null,C=P==null||g&&!t&&tt(j,r)==null;if(x){var B;return{x:bo({axis:l,ticks:f,bandSize:p,entry:j,index:_}),y:C?null:(B=u.scale.map(P))!==null&&B!==void 0?B:null,value:T,payload:j}}return{x:C?null:(A=l.scale.map(P))!==null&&A!==void 0?A:null,y:bo({axis:u,ticks:h,bandSize:p,entry:j,index:_}),value:T,payload:j}}),w;return g||v?w=b.map(j=>{var _,k=Array.isArray(j.value)?j.value[0]:null;if(x){var E;return{x:j.x,y:k!=null&&j.y!=null&&(E=u.scale.map(k))!==null&&E!==void 0?E:null,payload:j.payload}}return{x:k!=null&&(_=l.scale.map(k))!==null&&_!==void 0?_:null,y:j.y,payload:j.payload}}):w=x?u.scale.map(y):l.scale.map(y),{points:b,baseLine:w??0,isRange:v}}function Wq(e){var t=_t(e,zI),n=Nt();return m.createElement(jp,{id:t.id,type:"area"},r=>m.createElement(m.Fragment,null,m.createElement(kp,{legendPayload:Aq(t)}),m.createElement(Oq,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),m.createElement(_p,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:ZT(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),m.createElement(Fq,as({},t,{id:r}))))}var ib=m.memo(Wq,qo);ib.displayName="Area";var Hq="Invariant failed";function Kq(e,t){throw new Error(Hq)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(null,arguments)}function Mf(e){return m.createElement(Cf,Yy({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Vq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ae(t))return t;var a=ae(r)||Me(r);return a?t(r,i):(a||Kq(),n)}},Gq=(e,t,n)=>n,qq=(e,t)=>t,Qu=F([Uo,qq],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Yq=F([Qu],e=>e==null?void 0:e.maxBarSize),Xq=(e,t,n,r)=>r,Qq=F([Ae,Uo,ci,di,Gq],(e,t,n,r,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Zq=(e,t,n)=>{var r=Ae(e),i=ci(e,t),a=di(e,t);if(!(i==null||a==null))return r==="horizontal"?Nf(e,"yAxis",a,n):Nf(e,"xAxis",i,n)},Jq=(e,t)=>{var n=Ae(e),r=ci(e,t),i=di(e,t);if(!(r==null||i==null))return n==="horizontal"?v_(e,"xAxis",r):v_(e,"yAxis",i)},e7=F([Qq,jW,Jq],X9),t7=(e,t,n)=>{var r,i,a=Qu(e,t);if(a==null)return 0;var o=ci(e,t),l=di(e,t);if(o==null||l==null)return 0;var u=Ae(e),c=wO(e),{maxBarSize:d}=a,f=Me(d)?c:d,h,p;return u==="horizontal"?(h=br(e,"xAxis",o,n),p=xr(e,"xAxis",o,n)):(h=br(e,"yAxis",l,n),p=xr(e,"yAxis",l,n)),(r=(i=_a(h,p,!0))!==null&&i!==void 0?i:f)!==null&&r!==void 0?r:0},FI=(e,t,n)=>{var r=Ae(e),i=ci(e,t),a=di(e,t);if(!(i==null||a==null)){var o,l;return r==="horizontal"?(o=br(e,"xAxis",i,n),l=xr(e,"xAxis",i,n)):(o=br(e,"yAxis",a,n),l=xr(e,"yAxis",a,n)),_a(o,l)}},n7=F([e7,wO,kW,kO,t7,FI,Yq],tV),r7=(e,t,n)=>{var r=ci(e,t);if(r!=null)return br(e,"xAxis",r,n)},i7=(e,t,n)=>{var r=di(e,t);if(r!=null)return br(e,"yAxis",r,n)},a7=(e,t,n)=>{var r=ci(e,t);if(r!=null)return xr(e,"xAxis",r,n)},s7=(e,t,n)=>{var r=di(e,t);if(r!=null)return xr(e,"yAxis",r,n)},o7=F([n7,Qu],rV),l7=F([Zq,Qu],nV),u7=F([Wt,Ux,r7,i7,a7,s7,o7,Ae,uO,FI,l7,Qu,Xq],(e,t,n,r,i,a,o,l,u,c,d,f,h)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:y}=u;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||i==null||a==null||c==null)){var{data:x}=f,v;if(x!=null&&x.length>0?v=x:v=p==null?void 0:p.slice(g,y+1),v!=null)return M7({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:v,offset:e,cells:h,dataStartIndex:g})}}),c7=["index"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function d7(e,t){if(e==null)return{};var n,r,i=f7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BI=m.createContext(void 0),h7=e=>{var t=m.useContext(BI);if(t!=null)return t.stackId;if(e!=null)return ZT(e)},p7=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),m7=e=>{var t=m.useContext(BI);if(t!=null){var{stackId:n}=t;return"url(#".concat(p7(n,e),")")}},UI=e=>{var{index:t}=e,n=d7(e,c7),r=m7(t);return m.createElement(jt,Xy({className:"recharts-bar-stack-layer",clipPath:r},n))},g7=["onMouseEnter","onMouseLeave","onClick"],y7=["value","background","tooltipPosition"],v7=["id"],x7=["onMouseEnter","onClick","onMouseLeave"];function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(null,arguments)}function SS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(n),!0).forEach(function(r){b7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b7(e,t,n){return(t=w7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w7(e){var t=k7(e,"string");return typeof t=="symbol"?t:t+""}function k7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $f(e,t){if(e==null)return{};var n,r,i=j7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function j7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _7=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Oa(n,t),payload:e}]},S7=m.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,unit:l,tooltipType:u,id:c}=e,d={dataDefinedOnItem:void 0,getPosition:Aa,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Oa(a,t),hide:o,type:u,color:i,unit:l,graphicalItemId:c}};return m.createElement(wp,{tooltipEntrySettings:d})});function N7(e){var t=le(Sa),{data:n,dataKey:r,background:i,allOtherBarProps:a}=e,{onMouseEnter:o,onMouseLeave:l,onClick:u}=a,c=$f(a,g7),d=Q0(o,r,a.id),f=Z0(l),h=J0(u,r,a.id);if(!i||n==null)return null;var p=Do(i);return m.createElement(un,{zIndex:iV(i,kt.barBackground)},n.map((g,y)=>{var{value:x,background:v,tooltipPosition:b}=g,w=$f(g,y7);if(!v)return null;var j=d(g,y),_=f(g,y),k=h(g,y),E=fn(fn(fn(fn(fn({option:i,isActive:String(y)===t},w),{},{fill:"#eee"},v),p),Cu(c,g,y)),{},{onMouseEnter:j,onMouseLeave:_,onClick:k,dataKey:r,index:y,className:"recharts-bar-background-rectangle"});return m.createElement(Mf,Mi({key:"background-bar-".concat(y)},E))}))}function E7(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(a=>{var o={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return fn(fn({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return m.createElement(up,{value:t?i:void 0},n)}function P7(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:a,dataKey:o}=e,l=le(Sa),u=le(DC),c=n&&String(a)===l&&(u==null||o===u),d=c?n:t;return c?m.createElement(un,{zIndex:kt.activeBar},m.createElement(UI,{index:a},m.createElement(Mf,Mi({},r,{name:String(r.name)},i,{isActive:c,option:d,index:a,dataKey:o})))):m.createElement(Mf,Mi({},r,{name:String(r.name)},i,{isActive:c,option:d,index:a,dataKey:o}))}function T7(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:a}=e;return m.createElement(Mf,Mi({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:i,dataKey:a}))}function A7(e){var t,{data:n,props:r}=e,i=(t=vn(r))!==null&&t!==void 0?t:{},{id:a}=i,o=$f(i,v7),{shape:l,dataKey:u,activeBar:c}=r,{onMouseEnter:d,onClick:f,onMouseLeave:h}=r,p=$f(r,x7),g=Q0(d,u,a),y=Z0(h),x=J0(f,u,a);return n?m.createElement(m.Fragment,null,n.map((v,b)=>m.createElement(UI,Mi({index:b,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(b),className:"recharts-bar-rectangle"},Cu(p,v,b),{onMouseEnter:g(v,b),onMouseLeave:y(v,b),onClick:x(v,b)}),c?m.createElement(P7,{shape:l,activeBar:c,baseProps:o,entry:v,index:b,dataKey:u}):m.createElement(T7,{shape:l,baseProps:o,entry:v,index:b,dataKey:u})))):null}function O7(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:l,animationEasing:u,onAnimationEnd:c,onAnimationStart:d}=t,f=n.current,h=Mo(t,"recharts-bar-"),[p,g]=m.useState(!1),y=!p,x=m.useCallback(()=>{typeof c=="function"&&c(),g(!1)},[c]),v=m.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return m.createElement(E7,{showLabels:y,rects:r},m.createElement(Lo,{animationId:h,begin:o,duration:l,isActive:a,easing:u,onAnimationEnd:x,onAnimationStart:v,key:h},b=>{var w=b===1?r:r==null?void 0:r.map((j,_)=>{var k=f&&f[_];if(k)return fn(fn({},j),{},{x:Ee(k.x,j.x,b),y:Ee(k.y,j.y,b),width:Ee(k.width,j.width,b),height:Ee(k.height,j.height,b)});if(i==="horizontal"){var E=Ee(0,j.height,b),A=Ee(j.stackedBarStart,j.y,b);return fn(fn({},j),{},{y:A,height:E})}var T=Ee(0,j.width,b),S=Ee(j.stackedBarStart,j.x,b);return fn(fn({},j),{},{width:T,x:S})});return b>0&&(n.current=w??null),w==null?null:m.createElement(jt,null,m.createElement(A7,{props:t,data:w}))}),m.createElement(cp,{label:t.label}),t.children)}function C7(e){var t=m.useRef(null);return m.createElement(O7,{previousRectanglesRef:t,props:e})}var WI=0,I7=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:tt(e,t)}};class D7 extends m.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:o,needClip:l,background:u,id:c}=this.props;if(t||n==null)return null;var d=Pe("recharts-bar",i),f=c;return m.createElement(jt,{className:d,id:c},l&&m.createElement("defs",null,m.createElement(Np,{clipPathId:f,xAxisId:a,yAxisId:o})),m.createElement(jt,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},m.createElement(N7,{data:n,dataKey:r,background:u,allOtherBarProps:this.props}),m.createElement(C7,this.props)))}}var R7={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:WI,xAxisId:0,yAxisId:0,zIndex:kt.bar};function L7(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:u,animationEasing:c,isAnimationActive:d}=e,{needClip:f}=Yu(t,n),h=Ca(),p=Nt(),g=hI(e.children,Ki),y=le(b=>u7(b,e.id,p,g));if(h!=="vertical"&&h!=="horizontal")return null;var x,v=y==null?void 0:y[0];return v==null||v.height==null||v.width==null?x=0:x=h==="vertical"?v.height/2:v.width/2,m.createElement(nb,{xAxisId:t,yAxisId:n,data:y,dataPointFormatter:I7,errorBarOffset:x},m.createElement(D7,Mi({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:u,animationEasing:c,isAnimationActive:d})))}function M7(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:o,yAxis:l,xAxisTicks:u,yAxisTicks:c,stackedData:d,displayedData:f,offset:h,cells:p,parentViewBox:g,dataStartIndex:y}=e,x=t==="horizontal"?l:o,v=d?x.scale.domain():null,b=h3({numericAxis:x}),w=x.scale.map(b);return f.map((j,_)=>{var k,E,A,T,S,P;if(d){var C=d[_+y];if(C==null)return null;k=l3(C,v)}else k=tt(j,n),Array.isArray(k)||(k=[b,k]);var B=Vq(r,WI)(k[1],_);if(t==="horizontal"){var M,D=l.scale.map(k[0]),q=l.scale.map(k[1]);if(D==null||q==null)return null;E=Sk({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:j,index:_}),A=(M=q??D)!==null&&M!==void 0?M:void 0,T=i.size;var z=D-q;if(S=Lr(z)?0:z,P={x:E,y:h.top,width:T,height:h.height},Math.abs(B)>0&&Math.abs(S)<Math.abs(B)){var $=On(S||B)*(Math.abs(B)-Math.abs(S));A-=$,S+=$}}else{var R=o.scale.map(k[0]),N=o.scale.map(k[1]);if(R==null||N==null)return null;if(E=R,A=Sk({axis:l,ticks:c,bandSize:a,offset:i.offset,entry:j,index:_}),T=N-R,S=i.size,P={x:h.left,y:A,width:h.width,height:S},Math.abs(B)>0&&Math.abs(T)<Math.abs(B)){var Y=On(T||B)*(Math.abs(B)-Math.abs(T));T+=Y}}if(E==null||A==null||T==null||S==null)return null;var U=fn(fn({},j),{},{stackedBarStart:w,x:E,y:A,width:T,height:S,value:d?k:k[1],payload:j,background:P,tooltipPosition:{x:E+T/2,y:A+S/2},parentViewBox:g},p&&p[_]&&p[_].props);return U}).filter(Boolean)}function $7(e){var t=_t(e,R7),n=h7(t.stackId),r=Nt();return m.createElement(jp,{id:t.id,type:"bar"},i=>m.createElement(m.Fragment,null,m.createElement(kp,{legendPayload:_7(t)}),m.createElement(S7,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),m.createElement(_p,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),m.createElement(un,{zIndex:t.zIndex},m.createElement(L7,Mi({},t,{id:i})))))}var mt=m.memo($7,qo);mt.displayName="Bar";var z7=["option","isActive"];function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(null,arguments)}function F7(e,t){if(e==null)return{};var n,r,i=B7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function B7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function U7(e){var{option:t,isActive:n}=e,r=F7(e,z7);return typeof t=="string"?m.createElement(Cf,zl({option:m.createElement(kh,zl({type:t},r)),isActive:n,shapeType:"symbols"},r)):m.createElement(Cf,zl({option:t,isActive:n,shapeType:"symbols"},r))}var W7=(e,t,n,r,i,a,o)=>br(e,"xAxis",t,o),H7=(e,t,n,r,i,a,o)=>xr(e,"xAxis",t,o),K7=(e,t,n,r,i,a,o)=>br(e,"yAxis",n,o),V7=(e,t,n,r,i,a,o)=>xr(e,"yAxis",n,o),G7=(e,t,n,r)=>A6(e,"zAxis",r,!1),q7=(e,t,n,r,i)=>i,Y7=(e,t,n,r,i,a)=>a,X7=(e,t,n,r,i,a,o)=>Yh(e,void 0,void 0,o),Q7=F([Uo,q7],(e,t)=>e.filter(n=>n.type==="scatter").find(n=>n.id===t)),Z7=F([X7,W7,H7,K7,V7,G7,Q7,Y7],(e,t,n,r,i,a,o,l)=>{var{chartData:u,dataStartIndex:c,dataEndIndex:d}=e;if(o!=null){var f;if((o==null?void 0:o.data)!=null&&o.data.length>0?f=o.data:f=u==null?void 0:u.slice(c,d+1),!(f==null||t==null||r==null||n==null||i==null||(n==null?void 0:n.length)===0||(i==null?void 0:i.length)===0))return fY({displayedData:f,xAxis:t,yAxis:r,zAxis:a,scatterSettings:o,xAxisTicks:n,yAxisTicks:i,cells:l})}}),J7=["id"],eY=["onMouseEnter","onClick","onMouseLeave"],tY=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function Qy(e,t){if(e==null)return{};var n,r,i=nY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vs.apply(null,arguments)}function NS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(n),!0).forEach(function(r){rY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rY(e,t,n){return(t=iY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sY=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Oa(n,t),payload:e}]},oY=m.memo(e=>{var{dataKey:t,points:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:l,tooltipType:u,id:c}=e,d={dataDefinedOnItem:n==null?void 0:n.map(f=>f.tooltipPayload),getPosition:f=>{var h;return n==null||(h=n[Number(f)])===null||h===void 0?void 0:h.tooltipPosition},settings:{stroke:r,strokeWidth:i,fill:a,nameKey:void 0,dataKey:t,name:Oa(o,t),hide:l,type:u,color:a,unit:"",graphicalItemId:c}};return m.createElement(wp,{tooltipEntrySettings:d})});function lY(e){var{points:t,props:n}=e,{line:r,lineType:i,lineJointType:a}=n;if(!r)return null;var o=vn(n),l=Do(r),u,c;if(i==="joint")u=t.map(x=>{var v,b;return{x:(v=x.cx)!==null&&v!==void 0?v:null,y:(b=x.cy)!==null&&b!==void 0?b:null}});else if(i==="fitting"){var{xmin:d,xmax:f,a:h,b:p}=Y$(t),g=x=>h*x+p;u=[{x:d,y:g(d)},{x:f,y:g(f)}]}var y=Dn(Dn(Dn({},o),{},{fill:"none",stroke:o&&o.fill},l),{},{points:u});return m.isValidElement(r)?c=m.cloneElement(r,y):typeof r=="function"?c=r(y):c=m.createElement(ao,vs({},y,{type:a})),m.createElement(jt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},c)}function uY(e){var{showLabels:t,points:n,children:r}=e,i=Ro(),a=m.useMemo(()=>n==null?void 0:n.map(o=>{var l,u,c={x:(l=o.x)!==null&&l!==void 0?l:0,y:(u=o.y)!==null&&u!==void 0?u:0,width:o.width,height:o.height,lowerWidth:o.width,upperWidth:o.width};return Dn(Dn({},c),{},{value:void 0,payload:o.payload,viewBox:c,parentViewBox:i,fill:void 0})}),[i,n]);return m.createElement(up,{value:t?a:void 0},r)}function cY(e){var{points:t,allOtherScatterProps:n}=e,{shape:r,activeShape:i,dataKey:a}=n,{id:o}=n,l=Qy(n,J7),u=le(Sa),{onMouseEnter:c,onClick:d,onMouseLeave:f}=n,h=Qy(n,eY),p=Q0(c,a,o),g=Z0(f),y=J0(d,a,o);if(!oz(t))return null;var x=vn(l);return m.createElement(m.Fragment,null,m.createElement(lY,{points:t,props:l}),t.map((v,b)=>{var w=i!=null&&i!==!1,j=w&&u===String(b),_=w&&j?i:r,k=Dn(Dn(Dn({},x),v),{},{index:b,[eA]:String(o)});return m.createElement(un,{key:"symbol-".concat(v==null?void 0:v.cx,"-").concat(v==null?void 0:v.cy,"-").concat(v==null?void 0:v.size,"-").concat(b),zIndex:j?kt.activeDot:void 0},m.createElement(jt,vs({className:"recharts-scatter-symbol"},Cu(h,v,b),{onMouseEnter:p(v,b),onMouseLeave:g(v,b),onClick:y(v,b)}),m.createElement(U7,vs({option:_,isActive:j},k))))}))}function dY(e){var{previousPointsRef:t,props:n}=e,{points:r,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:l}=n,u=t.current,c=Mo(n,"recharts-scatter-"),[d,f]=m.useState(!1),h=m.useCallback(()=>{f(!1)},[]),p=m.useCallback(()=>{f(!0)},[]),g=!d;return m.createElement(uY,{showLabels:g,points:r},n.children,m.createElement(Lo,{animationId:c,begin:a,duration:o,isActive:i,easing:l,onAnimationEnd:h,onAnimationStart:p,key:c},y=>{var x=y===1?r:r==null?void 0:r.map((v,b)=>{var w=u&&u[b];return w?Dn(Dn({},v),{},{cx:v.cx==null?void 0:Ee(w.cx,v.cx,y),cy:v.cy==null?void 0:Ee(w.cy,v.cy,y),size:Ee(w.size,v.size,y)}):Dn(Dn({},v),{},{size:Ee(0,v.size,y)})});return y>0&&(t.current=x),m.createElement(jt,null,m.createElement(cY,{points:x,allOtherScatterProps:n,showLabels:g}))}),m.createElement(cp,{label:n.label}))}function fY(e){var{displayedData:t,xAxis:n,yAxis:r,zAxis:i,scatterSettings:a,xAxisTicks:o,yAxisTicks:l,cells:u}=e,c=Me(n.dataKey)?a.dataKey:n.dataKey,d=Me(r.dataKey)?a.dataKey:r.dataKey,f=i&&i.dataKey,h=i?i.range:IO.range,p=h&&h[0],g=n.scale.bandwidth?n.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0;return t.map((x,v)=>{var b=tt(x,c),w=tt(x,d),j=!Me(f)&&tt(x,f)||"-",_=[{name:Me(n.dataKey)?a.name:n.name||String(n.dataKey),unit:n.unit||"",value:b,payload:x,dataKey:c,type:a.tooltipType},{name:Me(r.dataKey)?a.name:r.name||String(r.dataKey),unit:r.unit||"",value:w,payload:x,dataKey:d,type:a.tooltipType}];j!=="-"&&i!=null&&_.push({name:i.name||i.dataKey,unit:i.unit||"",value:j,payload:x,dataKey:f,type:a.tooltipType});var k=bo({axis:n,ticks:o,bandSize:g,entry:x,index:v,dataKey:c}),E=bo({axis:r,ticks:l,bandSize:y,entry:x,index:v,dataKey:d}),A=j!=="-"&&i!=null?i.scale.map(j):p,T=A==null?0:Math.sqrt(Math.max(A,0)/Math.PI);return Dn(Dn({},x),{},{cx:k,cy:E,x:k==null?void 0:k-T,y:E==null?void 0:E-T,width:2*T,height:2*T,size:A,node:{x:b,y:w,z:j},tooltipPayload:_,tooltipPosition:{x:k,y:E},payload:x},u&&u[v]&&u[v].props)})}var hY=(e,t,n)=>({x:e.cx,y:e.cy,value:Number(n==="x"?e.node.x:e.node.y),errorVal:tt(e,t)});function pY(e){var{hide:t,points:n,className:r,needClip:i,xAxisId:a,yAxisId:o,id:l}=e,u=m.useRef(null);if(t)return null;var c=Pe("recharts-scatter",r),d=l;return m.createElement(un,{zIndex:e.zIndex},m.createElement(jt,{className:c,clipPath:i?"url(#clipPath-".concat(d,")"):void 0,id:l},i&&m.createElement("defs",null,m.createElement(Np,{clipPathId:d,xAxisId:a,yAxisId:o})),m.createElement(nb,{xAxisId:a,yAxisId:o,data:n,dataPointFormatter:hY,errorBarOffset:0},m.createElement(jt,{key:"recharts-scatter-symbols"},m.createElement(dY,{props:e,previousPointsRef:u})))))}var HI={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:kt.scatter};function mY(e){var t=_t(e,HI),{animationBegin:n,animationDuration:r,animationEasing:i,hide:a,isAnimationActive:o,legendType:l,lineJointType:u,lineType:c,shape:d,xAxisId:f,yAxisId:h,zAxisId:p}=t,g=Qy(t,tY),{needClip:y}=Yu(f,h),x=m.useMemo(()=>hI(e.children,Ki),[e.children]),v=Nt(),b=le(w=>Z7(w,f,h,p,e.id,x,v));return y==null||b==null?null:m.createElement(m.Fragment,null,m.createElement(oY,{dataKey:e.dataKey,points:b,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),m.createElement(pY,vs({},g,{xAxisId:f,yAxisId:h,zAxisId:p,lineType:c,lineJointType:u,legendType:l,shape:d,hide:a,isAnimationActive:o,animationBegin:n,animationDuration:r,animationEasing:i,points:b,needClip:y})))}function gY(e){var t=_t(e,HI),n=Nt();return m.createElement(jp,{id:t.id,type:"scatter"},r=>m.createElement(m.Fragment,null,m.createElement(kp,{legendPayload:sY(t)}),m.createElement(_p,{type:"scatter",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:n}),m.createElement(mY,vs({},t,{id:r}))))}var ld=m.memo(gY,qo);ld.displayName="Scatter";var yY=["domain","range"],vY=["domain","range"];function ES(e,t){if(e==null)return{};var n,r,i=xY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function PS(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function KI(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=ES(e,yY),{domain:a,range:o}=t,l=ES(t,vY);return!PS(n,a)||!PS(r,o)?!1:qo(i,l)}var bY=["type"],wY=["dangerouslySetInnerHTML","ticks","scale"],kY=["id","scale"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(null,arguments)}function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(n),!0).forEach(function(r){jY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jY(e,t,n){return(t=_Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Y(e){var t=SY(e,"string");return typeof t=="symbol"?t:t+""}function SY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jy(e,t){if(e==null)return{};var n,r,i=NY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function EY(e){var t=dt(),n=m.useRef(null),r=Gx(),{type:i}=e,a=Jy(e,bY),o=Zh(r,"xAxis",i),l=m.useMemo(()=>{if(o!=null)return AS(AS({},a),{},{type:o})},[a,o]);return m.useLayoutEffect(()=>{l!=null&&(n.current===null?t(R9(l)):n.current!==l&&t(L9({prev:n.current,next:l})),n.current=l)},[l,t]),m.useLayoutEffect(()=>()=>{n.current&&(t(M9(n.current)),n.current=null)},[t]),null}var PY=e=>{var{xAxisId:t,className:n}=e,r=le(Ux),i=Nt(),a="xAxis",o=le(v=>hC(v,a,t,i)),l=le(v=>uC(v,t)),u=le(v=>_6(v,t)),c=le(v=>OO(v,t));if(l==null||u==null||c==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:h}=e,p=Jy(e,wY),{id:g,scale:y}=c,x=Jy(c,kY);return m.createElement(tb,Zy({},p,x,{x:u.x,y:u.y,width:l.width,height:l.height,className:Pe("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:o,axisType:a}))},TY={allowDataOverflow:$t.allowDataOverflow,allowDecimals:$t.allowDecimals,allowDuplicatedCategory:$t.allowDuplicatedCategory,angle:$t.angle,axisLine:Ni.axisLine,height:$t.height,hide:!1,includeHidden:$t.includeHidden,interval:$t.interval,label:!1,minTickGap:$t.minTickGap,mirror:$t.mirror,orientation:$t.orientation,padding:$t.padding,reversed:$t.reversed,scale:$t.scale,tick:$t.tick,tickCount:$t.tickCount,tickLine:Ni.tickLine,tickSize:Ni.tickSize,type:$t.type,xAxisId:0},AY=e=>{var t=_t(e,TY);return m.createElement(m.Fragment,null,m.createElement(EY,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),m.createElement(PY,t))},$e=m.memo(AY,KI);$e.displayName="XAxis";var OY=["type"],CY=["dangerouslySetInnerHTML","ticks","scale"],IY=["id","scale"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function OS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(n),!0).forEach(function(r){DY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DY(e,t,n){return(t=RY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RY(e){var t=LY(e,"string");return typeof t=="symbol"?t:t+""}function LY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tv(e,t){if(e==null)return{};var n,r,i=MY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function $Y(e){var t=dt(),n=m.useRef(null),r=Gx(),{type:i}=e,a=tv(e,OY),o=Zh(r,"yAxis",i),l=m.useMemo(()=>{if(o!=null)return CS(CS({},a),{},{type:o})},[o,a]);return m.useLayoutEffect(()=>{l!=null&&(n.current===null?t($9(l)):n.current!==l&&t(z9({prev:n.current,next:l})),n.current=l)},[l,t]),m.useLayoutEffect(()=>()=>{n.current&&(t(F9(n.current)),n.current=null)},[t]),null}function zY(e){var{yAxisId:t,className:n,width:r,label:i}=e,a=m.useRef(null),o=m.useRef(null),l=le(Ux),u=Nt(),c=dt(),d="yAxis",f=le(k=>cC(k,t)),h=le(k=>N6(k,t)),p=le(k=>hC(k,d,t,u)),g=le(k=>CO(k,t));if(m.useLayoutEffect(()=>{if(!(r!=="auto"||!f||G0(i)||m.isValidElement(i)||g==null)){var k=a.current;if(k){var E=k.getCalculatedWidth();Math.round(f.width)!==Math.round(E)&&c(B9({id:t,width:E}))}}},[p,f,c,i,t,r,g]),f==null||h==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:x,scale:v}=e,b=tv(e,CY),{id:w,scale:j}=g,_=tv(g,IY);return m.createElement(tb,ev({},b,_,{ref:a,labelRef:o,x:h.x,y:h.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:Pe("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:p,axisType:d}))}var FY={allowDataOverflow:zt.allowDataOverflow,allowDecimals:zt.allowDecimals,allowDuplicatedCategory:zt.allowDuplicatedCategory,angle:zt.angle,axisLine:Ni.axisLine,hide:!1,includeHidden:zt.includeHidden,interval:zt.interval,label:!1,minTickGap:zt.minTickGap,mirror:zt.mirror,orientation:zt.orientation,padding:zt.padding,reversed:zt.reversed,scale:zt.scale,tick:zt.tick,tickCount:zt.tickCount,tickLine:Ni.tickLine,tickSize:Ni.tickSize,type:zt.type,width:zt.width,yAxisId:0},BY=e=>{var t=_t(e,FY);return m.createElement(m.Fragment,null,m.createElement($Y,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),m.createElement(zY,t))},Ce=m.memo(BY,KI);Ce.displayName="YAxis";var UY=(e,t)=>t,ab=F([UY,Ae,TO,Vt,AC,Hi,BH,Wt],qH),sb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},VI=yr("mouseClick"),GI=Du();GI.startListening({actionCreator:VI,effect:(e,t)=>{var n=e.payload,r=ab(t.getState(),sb(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(B6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var nv=yr("mouseMove"),qI=Du(),Dc=null;qI.startListening({actionCreator:nv,effect:(e,t)=>{var n=e.payload;Dc!==null&&cancelAnimationFrame(Dc);var r=sb(n);Dc=requestAnimationFrame(()=>{var i=t.getState(),a=L0(i,i.tooltip.settings.shared);if(a==="axis"){var o=ab(i,r);(o==null?void 0:o.activeIndex)!=null?t.dispatch(wC({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(bC())}Dc=null})}});function WY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var IS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},YI=$n({name:"rootProps",initialState:IS,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:IS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),HY=YI.reducer,{updateOptions:KY}=YI.actions,VY=null,GY={updatePolarOptions:(e,t)=>t.payload},XI=$n({name:"polarOptions",initialState:VY,reducers:GY}),{updatePolarOptions:Kse}=XI.actions,qY=XI.reducer,QI=yr("keyDown"),ZI=yr("focus"),ob=Du();ob.startListening({actionCreator:QI,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=M0(i,Go(n),Ku(n),Gu(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var u=Hi(n);if(a==="Enter"){var c=Pf(n,"axis","hover",String(i.index));t.dispatch(Wy({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var d=O6(n),f=d==="left-to-right"?1:-1,h=a==="ArrowRight"?1:-1,p=l+h*f;if(!(u==null||p>=u.length||p<0)){var g=Pf(n,"axis","hover",String(p));t.dispatch(Wy({active:!0,activeIndex:p.toString(),activeCoordinate:g}))}}}}}});ob.startListening({actionCreator:ZI,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=Pf(n,"axis","hover",String(a));t.dispatch(Wy({active:!0,activeIndex:a,activeCoordinate:o}))}}}});var ar=yr("externalEvent"),JI=Du(),zm=new Map;JI.startListening({actionCreator:ar,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=zm.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var l=t.getState(),u={activeCoordinate:NH(l),activeDataKey:DC(l),activeIndex:Sa(l),activeLabel:IC(l),activeTooltipIndex:Sa(l),isTooltipActive:EH(l)};n(u,r)}finally{zm.delete(i)}});zm.set(i,o)}}});var YY=F([Ko],e=>e.tooltipItemPayloads),XY=F([YY,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{if(t!=null){var r=e.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(t)}}}),eD=yr("touchMove"),tD=Du();tD.startListening({actionCreator:eD,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=L0(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var o=ab(r,sb({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(wC({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0];if(document.elementFromPoint==null||u==null)return;var c=document.elementFromPoint(u.clientX,u.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(b3),f=(l=c.getAttribute(eA))!==null&&l!==void 0?l:void 0,h=Vo(r).find(y=>y.id===f);if(d==null||h==null||f==null)return;var{dataKey:p}=h,g=XY(r,d,f);t.dispatch(xC({activeDataKey:p,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:f}))}}}});var QY=wT({brush:sV,cartesianAxis:U9,chartData:_8,errorBars:gG,graphicalItems:w9,layout:r3,legend:uB,options:x8,polarAxis:VK,polarOptions:qY,referenceElements:pV,rootProps:HY,tooltip:U6,zIndex:l8}),ZY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return PF({reducer:QY,preloadedState:t,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([GI.middleware,qI.middleware,ob.middleware,JI.middleware,tD.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(LT({type:"raf"}))},devTools:{serialize:{replacer:WY},name:"recharts-".concat(n)}})};function JY(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Nt(),a=m.useRef(null);if(i)return n;a.current==null&&(a.current=ZY(t,r));var o=Ix;return m.createElement(qG,{context:o,store:a.current},n)}function eX(e){var{layout:t,margin:n}=e,r=dt(),i=Nt();return m.useEffect(()=>{i||(r(e3(t)),r(JF(n)))},[r,i,t,n]),null}var tX=m.memo(eX,qo);function nX(e){var t=dt();return m.useEffect(()=>{t(KY(e))},[t,e]),null}function DS(e){var{zIndex:t,isPanorama:n}=e,r=m.useRef(null),i=dt();return m.useLayoutEffect(()=>(r.current&&i(s8({zIndex:t,element:r.current,isPanorama:n})),()=>{i(o8({zIndex:t,isPanorama:n}))}),[i,t,n]),m.createElement("g",{tabIndex:-1,ref:r})}function RS(e){var{children:t,isPanorama:n}=e,r=le(XH);if(!r||r.length===0)return t;var i=r.filter(o=>o<0),a=r.filter(o=>o>0);return m.createElement(m.Fragment,null,i.map(o=>m.createElement(DS,{key:o,zIndex:o,isPanorama:n})),t,a.map(o=>m.createElement(DS,{key:o,zIndex:o,isPanorama:n})))}var rX=["children"];function iX(e,t){if(e==null)return{};var n,r,i=aX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zf.apply(null,arguments)}var sX={width:"100%",height:"100%",display:"block"},oX=m.forwardRef((e,t)=>{var n=Kx(),r=Vx(),i=gA();if(!ii(n)||!ii(r))return null;var{children:a,otherAttributes:o,title:l,desc:u}=e,c,d;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0),m.createElement(xx,zf({},o,{title:l,desc:u,role:d,tabIndex:c,width:n,height:r,style:sX,ref:t}),a)}),lX=e=>{var{children:t}=e,n=le(zh);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return m.createElement(xx,{width:r,height:i,x:o,y:a},t)},LS=m.forwardRef((e,t)=>{var{children:n}=e,r=iX(e,rX),i=Nt();return i?m.createElement(lX,null,m.createElement(RS,{isPanorama:!0},n)):m.createElement(oX,zf({ref:t},r),m.createElement(RS,{isPanorama:!1},n))});function uX(){var e=dt(),[t,n]=m.useState(null),r=le(x3);return m.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;pe(a)&&a!==r&&e(n3(a))}},[t,e,r]),n}function MS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(n),!0).forEach(function(r){dX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dX(e,t,n){return(t=fX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fX(e){var t=hX(e,"string");return typeof t=="symbol"?t:t+""}function hX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wa(){return wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wa.apply(null,arguments)}var pX=()=>(I8(),null);function Ff(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var mX=m.forwardRef((e,t)=>{var n,r,i=m.useRef(null),[a,o]=m.useState({containerWidth:Ff((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Ff((r=e.style)===null||r===void 0?void 0:r.height)}),l=m.useCallback((c,d)=>{o(f=>{var h=Math.round(c),p=Math.round(d);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),u=m.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=c.getBoundingClientRect();l(d,f);var h=g=>{var y=g[0];if(y!=null){var{width:x,height:v}=y.contentRect;l(x,v)}},p=new ResizeObserver(h);p.observe(c),i.current=p}},[t,l]);return m.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[l]),m.createElement(m.Fragment,null,m.createElement(Lu,{width:a.containerWidth,height:a.containerHeight}),m.createElement("div",wa({ref:u},e)))}),gX=m.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=m.useState({containerWidth:Ff(n),containerHeight:Ff(r)}),o=m.useCallback((u,c)=>{a(d=>{var f=Math.round(u),h=Math.round(c);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=m.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:c,height:d}=u.getBoundingClientRect();o(c,d)}},[t,o]);return m.createElement(m.Fragment,null,m.createElement(Lu,{width:i.containerWidth,height:i.containerHeight}),m.createElement("div",wa({ref:l},e)))}),yX=m.forwardRef((e,t)=>{var{width:n,height:r}=e;return m.createElement(m.Fragment,null,m.createElement(Lu,{width:n,height:r}),m.createElement("div",wa({ref:t},e)))}),vX=m.forwardRef((e,t)=>{var{width:n,height:r}=e;return typeof n=="string"||typeof r=="string"?m.createElement(gX,wa({},e,{ref:t})):typeof n=="number"&&typeof r=="number"?m.createElement(yX,wa({},e,{width:n,height:r,ref:t})):m.createElement(m.Fragment,null,m.createElement(Lu,{width:n,height:r}),m.createElement("div",wa({ref:t},e)))});function xX(e){return e?mX:vX}var bX=m.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:c,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:y,style:x,width:v,responsive:b,dispatchTouchEvents:w=!0}=e,j=m.useRef(null),_=dt(),[k,E]=m.useState(null),[A,T]=m.useState(null),S=uX(),P=Wx(),C=(P==null?void 0:P.width)>0?P.width:v,B=(P==null?void 0:P.height)>0?P.height:i,M=m.useCallback(W=>{S(W),typeof t=="function"&&t(W),E(W),T(W),W!=null&&(j.current=W)},[S,t,E,T]),D=m.useCallback(W=>{_(VI(W)),_(ar({handler:a,reactEvent:W}))},[_,a]),q=m.useCallback(W=>{_(nv(W)),_(ar({handler:c,reactEvent:W}))},[_,c]),z=m.useCallback(W=>{_(bC()),_(ar({handler:d,reactEvent:W}))},[_,d]),$=m.useCallback(W=>{_(nv(W)),_(ar({handler:f,reactEvent:W}))},[_,f]),R=m.useCallback(()=>{_(ZI())},[_]),N=m.useCallback(W=>{_(QI(W.key))},[_]),Y=m.useCallback(W=>{_(ar({handler:o,reactEvent:W}))},[_,o]),U=m.useCallback(W=>{_(ar({handler:l,reactEvent:W}))},[_,l]),O=m.useCallback(W=>{_(ar({handler:u,reactEvent:W}))},[_,u]),ne=m.useCallback(W=>{_(ar({handler:h,reactEvent:W}))},[_,h]),ge=m.useCallback(W=>{_(ar({handler:y,reactEvent:W}))},[_,y]),re=m.useCallback(W=>{w&&_(eD(W)),_(ar({handler:g,reactEvent:W}))},[_,w,g]),me=m.useCallback(W=>{_(ar({handler:p,reactEvent:W}))},[_,p]),Fe=xX(b);return m.createElement(UC.Provider,{value:k},m.createElement(bP.Provider,{value:A},m.createElement(Fe,{width:C??(x==null?void 0:x.width),height:B??(x==null?void 0:x.height),className:Pe("recharts-wrapper",r),style:cX({position:"relative",cursor:"default",width:C,height:B},x),onClick:D,onContextMenu:Y,onDoubleClick:U,onFocus:R,onKeyDown:N,onMouseDown:O,onMouseEnter:q,onMouseLeave:z,onMouseMove:$,onMouseUp:ne,onTouchEnd:me,onTouchMove:re,onTouchStart:ge,ref:M},m.createElement(pX,null),n)))}),wX=["width","height","responsive","children","className","style","compact","title","desc"];function kX(e,t){if(e==null)return{};var n,r,i=jX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _X=m.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:l,compact:u,title:c,desc:d}=e,f=kX(e,wX),h=vn(f);return u?m.createElement(m.Fragment,null,m.createElement(Lu,{width:n,height:r}),m.createElement(LS,{otherAttributes:h,title:c,desc:d},a)):m.createElement(bX,{className:o,style:l,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},m.createElement(LS,{otherAttributes:h,title:c,desc:d,ref:t},m.createElement(mV,null,a)))});function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(null,arguments)}var SX={top:5,right:5,bottom:5,left:5},NX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:SX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ep=m.forwardRef(function(t,n){var r,i=_t(t.categoricalChartProps,NX),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:c}=t,d={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return m.createElement(JY,{preloadedState:{options:d},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:a},m.createElement(aV,{chartData:c.data}),m.createElement(tX,{layout:i.layout,margin:i.margin}),m.createElement(nX,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),m.createElement(_X,rv({},i,{ref:n})))}),EX=["axis"],si=m.forwardRef((e,t)=>m.createElement(Ep,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EX,tooltipPayloadSearcher:lp,categoricalChartProps:e,ref:t})),PX=["axis","item"],mn=m.forwardRef((e,t)=>m.createElement(Ep,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:PX,tooltipPayloadSearcher:lp,categoricalChartProps:e,ref:t})),TX=["axis"],nD=m.forwardRef((e,t)=>m.createElement(Ep,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:TX,tooltipPayloadSearcher:lp,categoricalChartProps:e,ref:t})),AX=["axis"],OX=m.forwardRef((e,t)=>m.createElement(Ep,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:AX,tooltipPayloadSearcher:lp,categoricalChartProps:e,ref:t}));function CX(e){if(!e)return null;try{return Math.round((Date.now()-new Date(e).getTime())/6e4)}catch{return null}}function $S(e,t=2){return e==null?"":`${(e*100).toFixed(t)}%`}function Rc(e){return e==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function En(e,...t){var n;for(const r of t){if(e[r]!=null)return e[r];if(e[(n=r.toLowerCase)==null?void 0:n.call(r)]!=null)return e[r.toLowerCase()]}return null}function IX({level:e,pulse:t}){return s.jsx("span",{className:`ck-attention ck-attention--${e||"neutral"} ${t?"ck-attention--pulse":""}`})}function rD({isAi:e,modelInfo:t}){return e?s.jsx("span",{className:"ck-badge ck-badge--ai",title:`Model: ${t}`,children:"Cortex AI"}):s.jsx("span",{className:"ck-badge ck-badge--fallback",children:"Deterministic"})}function DX({createdAt:e}){const t=CX(e);if(t===null)return null;const n=t<120;return s.jsxs("span",{className:`ck-badge ${n?"ck-badge--fresh":"ck-badge--stale"}`,children:[n?"Fresh":"Stale"," (",t<60?`${t}m ago`:`${Math.round(t/60)}h ago`,")"]})}function RX({gateState:e}){const t={SAFE:{cls:"ck-gate--safe",label:"Safe"},CAUTION:{cls:"ck-gate--caution",label:"Caution"},STOPPED:{cls:"ck-gate--stopped",label:"Stopped"}},n=t[e]||t.SAFE;return s.jsx("span",{className:`ck-gate-badge ${n.cls}`,children:n.label})}function LX({healthState:e}){const t={OK:{cls:"ck-health--ok",label:"Healthy"},NEW:{cls:"ck-health--new",label:"New"},STALE:{cls:"ck-health--stale",label:"Stale"},BROKEN:{cls:"ck-health--broken",label:"Broken"}},n=t[e]||t.OK;return s.jsx("span",{className:`ck-health-badge ${n.cls}`,children:n.label})}function MX(){return s.jsxs("span",{className:"ck-nasdaq-badge",title:"Data sourced from Nasdaq-listed symbols",children:[s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"-2px",marginRight:"3px"},children:[s.jsx("rect",{x:"1",y:"1",width:"22",height:"22",rx:"4",fill:"#0996C7"}),s.jsx("path",{d:"M7 17V7l10 10V7",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Nasdaq"]})}function zS({direction:e}){const t={UP:{label:"Markets Up",cls:"ck-dir--up",icon:""},DOWN:{label:"Markets Down",cls:"ck-dir--down",icon:""},MIXED:{label:"Mixed",cls:"ck-dir--mixed",icon:""},NO_DATA:{label:"No Data",cls:"ck-dir--neutral",icon:""}},n=t[e]||t.NO_DATA;return s.jsxs("span",{className:`ck-direction-badge ${n.cls}`,children:[n.icon," ",n.label]})}function iD({detectors:e}){if(!(e!=null&&e.length))return null;const t=e.filter(n=>n.fired);return t.length?s.jsx("div",{className:"ck-detectors",children:t.map((n,r)=>{const i=(n.severity||"low").toLowerCase();return s.jsx("span",{className:`ck-detector ck-detector--${i}`,title:JSON.stringify(n.detail,null,2),children:(n.detector||"").replace(/_/g," ")},r)})}):null}function Ds({attention:e,headline:t,summary:n,badges:r,children:i,defaultOpen:a,accent:o,onOpen:l}){const[u,c]=m.useState(a||!1),d=m.useCallback(()=>{const f=!u;c(f),f&&l&&l()},[u,l]);return s.jsxs("div",{className:`ck-story ${u?"ck-story--open":""} ${o?`ck-story--${o}`:""}`,children:[s.jsxs("button",{className:"ck-story-header",onClick:d,type:"button",children:[s.jsx("div",{className:"ck-story-indicator",children:s.jsx(IX,{level:e,pulse:e==="critical"})}),s.jsxs("div",{className:"ck-story-headline-area",children:[s.jsx("h3",{className:"ck-story-headline",children:t}),s.jsx("p",{className:"ck-story-summary",children:n})]}),s.jsxs("div",{className:"ck-story-meta",children:[r,s.jsx("span",{className:`ck-story-chevron ${u?"ck-story-chevron--open":""}`,children:""})]})]}),u&&s.jsx("div",{className:"ck-story-body",children:i})]})}function vi({title:e,icon:t,bullets:n,variant:r}){return!n||n.length===0?null:s.jsxs("div",{className:`ck-section ck-section--${r||"default"}`,children:[s.jsxs("h4",{className:"ck-section-title",children:[s.jsx("span",{className:"ck-section-icon",children:t}),e]}),s.jsx("ul",{className:"ck-bullets",children:n.map((i,a)=>s.jsx("li",{className:"ck-bullet",children:typeof i=="string"?i:JSON.stringify(i)},a))})]})}function aD({whereToLook:e,links:t}){const n=[];return e!=null&&e.length&&e.forEach(r=>{r!=null&&r.route&&(r!=null&&r.label)&&n.push({to:r.route,label:r.label})}),t&&["signals","training","portfolio","market_timeline","digest"].forEach(r=>{if(t[r]&&!n.find(i=>i.to===t[r])){const i={signals:"Signals",training:"Training",portfolio:"Portfolio",market_timeline:"Timeline",digest:"Digest"};n.push({to:t[r],label:i[r]||r})}}),n.length?s.jsx("div",{className:"ck-drill-links",children:n.map((r,i)=>s.jsxs(xe,{to:r.to,className:"ck-drill-link",children:[r.label," "]},i))}):null}function $X({symbols:e}){if(!(e!=null&&e.length))return null;const t=e.filter(n=>n.day_return!=null).map(n=>({symbol:n.symbol,return_pct:+(n.day_return*100).toFixed(2)})).sort((n,r)=>r.return_pct-n.return_pct);return s.jsxs("div",{className:"ck-market-chart",children:[s.jsx("h4",{className:"ck-chart-title",children:"Daily Returns by Symbol"}),s.jsx(We,{width:"100%",height:Math.max(280,t.length*24),children:s.jsxs(mn,{data:t,layout:"vertical",margin:{left:50,right:20,top:5,bottom:5},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx($e,{type:"number",tickFormatter:n=>`${n}%`,fontSize:11}),s.jsx(Ce,{type:"category",dataKey:"symbol",width:50,fontSize:11,tick:{fill:"#495057"}}),s.jsx(He,{formatter:n=>[`${n}%`,"Return"]}),s.jsx(yn,{x:0,stroke:"#adb5bd"}),s.jsx(mt,{dataKey:"return_pct",radius:[0,3,3,0],children:t.map((n,r)=>s.jsx(Ki,{fill:n.return_pct>=0?"#198754":"#dc3545"},r))})]})})]})}function zX({indexSeries:e}){var r;if(!(e!=null&&e.length))return null;const t=e.map(i=>({ts:new Date(i.ts).toLocaleDateString(void 0,{month:"short",day:"numeric"}),value:i.index_return_pct})),n=((r=t[t.length-1])==null?void 0:r.value)??0;return s.jsxs("div",{className:"ck-market-chart",children:[s.jsxs("h4",{className:"ck-chart-title",children:["Equal-Weight Universe Index (",n>=0?"+":"",n.toFixed(1),"% over period)"]}),s.jsx(We,{width:"100%",height:200,children:s.jsxs(nD,{data:t,margin:{left:10,right:10,top:5,bottom:5},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"indexGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:n>=0?"#198754":"#dc3545",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:n>=0?"#198754":"#dc3545",stopOpacity:.05})]})}),s.jsx(st,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx($e,{dataKey:"ts",fontSize:10,tick:{fill:"#6c757d"}}),s.jsx(Ce,{tickFormatter:i=>`${i}%`,fontSize:10,tick:{fill:"#6c757d"}}),s.jsx(He,{formatter:i=>[`${i.toFixed(2)}%`,"Index Return"]}),s.jsx(yn,{y:0,stroke:"#adb5bd",strokeDasharray:"3 3"}),s.jsx(ib,{type:"monotone",dataKey:"value",stroke:n>=0?"#198754":"#dc3545",fill:"url(#indexGrad)",strokeWidth:2})]})})]})}function FX({symbols:e}){if(!(e!=null&&e.length))return null;const t=e.filter(i=>i.session_return!=null),n=t.slice(0,3),r=t.slice(-3).reverse();return!n.length&&!r.length?null:s.jsxs("div",{className:"ck-movers",children:[s.jsxs("div",{className:"ck-movers-group",children:[s.jsx("h4",{className:"ck-movers-label ck-movers-label--up",children:"Top Gainers"}),n.map((i,a)=>s.jsxs("div",{className:"ck-mover ck-mover--up",children:[s.jsx("span",{className:"ck-mover-symbol",children:i.symbol}),s.jsxs("span",{className:"ck-mover-return",children:["+",(i.session_return*100).toFixed(2),"%"]})]},a))]}),s.jsxs("div",{className:"ck-movers-group",children:[s.jsx("h4",{className:"ck-movers-label ck-movers-label--down",children:"Top Losers"}),r.map((i,a)=>s.jsxs("div",{className:"ck-mover ck-mover--down",children:[s.jsx("span",{className:"ck-mover-symbol",children:i.symbol}),s.jsxs("span",{className:"ck-mover-return",children:[(i.session_return*100).toFixed(2),"%"]})]},a))]})]})}function BX({symbols:e}){if(!(e!=null&&e.length))return null;const t=e.filter(n=>n.session_return!=null).map(n=>({symbol:n.symbol,return_pct:+(n.session_return*100).toFixed(2)})).sort((n,r)=>r.return_pct-n.return_pct);return t.length?s.jsxs("div",{className:"ck-market-chart",children:[s.jsx("h4",{className:"ck-chart-title",children:"Session Returns by Symbol"}),s.jsx(We,{width:"100%",height:Math.max(280,t.length*24),children:s.jsxs(mn,{data:t,layout:"vertical",margin:{left:50,right:20,top:5,bottom:5},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx($e,{type:"number",tickFormatter:n=>`${n}%`,fontSize:11}),s.jsx(Ce,{type:"category",dataKey:"symbol",width:50,fontSize:11,tick:{fill:"#495057"}}),s.jsx(He,{formatter:n=>[`${n}%`,"Return"]}),s.jsx(yn,{x:0,stroke:"#adb5bd"}),s.jsx(mt,{dataKey:"return_pct",radius:[0,3,3,0],children:t.map((n,r)=>s.jsx(Ki,{fill:n.return_pct>=0?"#198754":"#dc3545"},r))})]})})]}):null}function UX({isToday:e}){return s.jsx("span",{className:`ck-badge ${e?"ck-badge--fresh":"ck-badge--stale"}`,children:e?"Live Session":"Previous Session"})}function WX({symbols:e}){if(!(e!=null&&e.length))return null;const t=e.filter(r=>r.day_return!=null).slice(0,3),n=e.filter(r=>r.day_return!=null).slice(-3).reverse();return s.jsxs("div",{className:"ck-movers",children:[s.jsxs("div",{className:"ck-movers-group",children:[s.jsx("h4",{className:"ck-movers-label ck-movers-label--up",children:"Top Gainers"}),t.map((r,i)=>s.jsxs("div",{className:"ck-mover ck-mover--up",children:[s.jsx("span",{className:"ck-mover-symbol",children:r.symbol}),s.jsxs("span",{className:"ck-mover-return",children:["+",(r.day_return*100).toFixed(2),"%"]})]},i))]}),s.jsxs("div",{className:"ck-movers-group",children:[s.jsx("h4",{className:"ck-movers-label ck-movers-label--down",children:"Top Losers"}),n.map((r,i)=>s.jsxs("div",{className:"ck-mover ck-mover--down",children:[s.jsx("span",{className:"ck-mover-symbol",children:r.symbol}),s.jsxs("span",{className:"ck-mover-return",children:[(r.day_return*100).toFixed(2),"%"]})]},i))]})]})}function iv({stage:e}){const t=(e||"").toLowerCase().replace("_","-");return s.jsx("span",{className:`ck-stage-pill ck-stage-pill--${t}`,children:e})}function HX({trainingData:e}){const t=(e==null?void 0:e.snapshot)||{},n=t.near_miss_symbols||[],r=t.top_confident_symbols||[];return!n.length&&!r.length?s.jsx("p",{className:"ck-empty",children:"No near-miss or upcoming symbol data available yet."}):s.jsxs(s.Fragment,{children:[n.length>0&&s.jsx("div",{className:"ck-upcoming-list",children:n.slice(0,6).map((i,a)=>{const o=i.gap_to_next??"?",l=i.maturity_score??0,u=i.maturity_stage||"?",c=u==="INSUFFICIENT"?"WARMING_UP":u==="WARMING_UP"?"LEARNING":u==="LEARNING"?"CONFIDENT":"NEXT";return s.jsxs("div",{className:"ck-upcoming-item",children:[s.jsxs("div",{className:"ck-upcoming-header",children:[s.jsxs("span",{className:"ck-upcoming-rank",children:["#",a+1]}),s.jsx(xe,{to:`/training?symbol=${i.symbol}&market_type=${i.market_type}`,className:"ck-upcoming-symbol",children:i.symbol}),s.jsx("span",{className:"ck-upcoming-market",children:i.market_type}),s.jsx(iv,{stage:u})]}),s.jsx("div",{className:"ck-upcoming-bar-wrap",children:s.jsx("div",{className:"ck-upcoming-bar",style:{width:`${Math.min(100,Math.max(0,l))}%`}})}),s.jsxs("div",{className:"ck-upcoming-detail",children:[s.jsxs("span",{children:["Score: ",l,"/100"]}),s.jsxs("span",{className:"ck-upcoming-gap",children:["Gap to ",c,": ",o," pts"]})]})]},a)})}),r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"ck-subsection-title",children:"Trade-Ready (CONFIDENT)"}),s.jsx("div",{className:"ck-upcoming-list",children:r.slice(0,4).map((i,a)=>s.jsx("div",{className:"ck-upcoming-item ck-upcoming-item--confident",children:s.jsxs("div",{className:"ck-upcoming-header",children:[s.jsx(xe,{to:`/training?symbol=${i.symbol}&market_type=${i.market_type}`,className:"ck-upcoming-symbol",children:i.symbol}),s.jsx("span",{className:"ck-upcoming-market",children:i.market_type}),s.jsx(iv,{stage:"CONFIDENT"}),s.jsxs("span",{className:"ck-upcoming-score",children:["Score: ",i.maturity_score,"/100"]})]})},a))})]})]})}function FS({portfolio:e}){var _,k,E,A,T,S;const t=En(e,"PORTFOLIO_ID","portfolio_id"),n=En(e,"NAME","name")||`Portfolio ${t}`,r=(En(e,"STATUS","status")||"ACTIVE").toUpperCase(),i=(En(e,"GATE_STATE","gate_state")||"SAFE").toUpperCase(),a=En(e,"health_state")||"OK",o=En(e,"latest_equity","FINAL_EQUITY","final_equity")||0,l=En(e,"TOTAL_RETURN","total_return"),u=En(e,"MAX_DRAWDOWN","max_drawdown"),c=En(e,"total_paid_out","TOTAL_PAID_OUT")||0,d=En(e,"gate_tooltip")||"",[f,h]=m.useState(null),[p,g]=m.useState(!1),[y,x]=m.useState(!1),v=m.useMemo(()=>i==="STOPPED"||a==="BROKEN"?"critical":i==="CAUTION"||a==="STALE"?"warning":r!=="ACTIVE"?"neutral":l!=null&&l>0?"positive":"info",[i,a,r,l]),b=m.useMemo(()=>{const P=l!=null?`  ${l>=0?"+":""}${(l*100).toFixed(1)}%`:"";return`${n}${P}`},[n,l]),w=m.useMemo(()=>{const P=[`Equity: ${Rc(o)}`];return i!=="SAFE"&&P.push(`Gate: ${i}`),c>0&&P.push(`Paid out: ${Rc(c)}`),u!=null&&P.push(`Max DD: ${(u*100).toFixed(1)}%`),P.join("    ")},[o,i,c,u]),j=m.useCallback(()=>{y||p||(g(!0),fetch(`${J}/digest/latest?portfolio_id=${t}`).then(P=>P.ok?P.json():null).catch(()=>null).then(P=>{h(P),g(!1),x(!0)}))},[t,y,p]);return s.jsxs(Ds,{attention:v,headline:b,summary:w,accent:"portfolio",onOpen:j,badges:s.jsxs(s.Fragment,{children:[s.jsx(RX,{gateState:i}),s.jsx(LX,{healthState:a})]}),children:[s.jsxs("div",{className:"ck-kpi-row",children:[s.jsxs("div",{className:"ck-kpi-item",children:[s.jsx("span",{className:"ck-kpi-label",children:"Equity"}),s.jsx("span",{className:"ck-kpi-value",children:Rc(o)})]}),l!=null&&s.jsxs("div",{className:"ck-kpi-item",children:[s.jsx("span",{className:"ck-kpi-label",children:"Return"}),s.jsx("span",{className:`ck-kpi-value ${l>0?"ck-kpi--positive":l<0?"ck-kpi--negative":""}`,children:$S(l)})]}),u!=null&&s.jsxs("div",{className:"ck-kpi-item",children:[s.jsx("span",{className:"ck-kpi-label",children:"Max DD"}),s.jsx("span",{className:"ck-kpi-value ck-kpi--negative",children:$S(u)})]}),c>0&&s.jsxs("div",{className:"ck-kpi-item",children:[s.jsx("span",{className:"ck-kpi-label",children:"Paid Out"}),s.jsx("span",{className:"ck-kpi-value ck-kpi--positive",children:Rc(c)})]})]}),d&&s.jsx("p",{className:"ck-gate-explanation",children:d}),p&&s.jsx("p",{className:"ck-loading-inline",children:"Loading digest..."}),(f==null?void 0:f.found)&&s.jsxs("div",{className:"ck-digest-detail",children:[s.jsx("p",{className:"ck-headline",children:((_=f.narrative)==null?void 0:_.headline)||"Portfolio digest available"}),f.is_ai_narrative&&s.jsx("div",{style:{marginBottom:"0.4rem"},children:s.jsx(rD,{isAi:f.is_ai_narrative,modelInfo:f.model_info})}),s.jsx(iD,{detectors:(k=f.snapshot)==null?void 0:k.detectors}),s.jsx(vi,{title:"What Changed",icon:"",bullets:(E=f.narrative)==null?void 0:E.what_changed,variant:"changed"}),s.jsx(vi,{title:"What Matters",icon:"",bullets:(A=f.narrative)==null?void 0:A.what_matters,variant:"matters"}),s.jsx(vi,{title:"Waiting For",icon:"",bullets:(T=f.narrative)==null?void 0:T.waiting_for,variant:"waiting"}),s.jsx(aD,{whereToLook:(S=f.narrative)==null?void 0:S.where_to_look,links:f.links})]}),y&&!(f!=null&&f.found)&&s.jsx("p",{className:"ck-empty",children:"No digest yet for this portfolio. Run the pipeline to generate."}),s.jsxs("div",{className:"ck-drill-links",style:{marginTop:"0.5rem"},children:[s.jsx(xe,{to:`/portfolios/${t}`,className:"ck-drill-link",children:"Full Portfolio "}),s.jsx(xe,{to:`/suggestions?portfolio_id=${t}`,className:"ck-drill-link",children:"Suggestions "})]})]})}function KX(){var ge,re,me,Fe,W,ie;const{portfolios:e,loading:t}=Tb(),[n,r]=m.useState(null),[i,a]=m.useState(null),[o,l]=m.useState(null),[u,c]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState(!0);m.useEffect(()=>{if(t)return;let Z=!1;p(!0);const I=[fetch(`${J}/digest/latest?scope=GLOBAL`).then(K=>K.ok?K.json():null).catch(()=>null),fetch(`${J}/training/digest/latest`).then(K=>K.ok?K.json():null).catch(()=>null),fetch(`${J}/today`).then(K=>K.ok?K.json():null).catch(()=>null),fetch(`${J}/market/pulse`).then(K=>K.ok?K.json():null).catch(()=>null),fetch(`${J}/market/pulse/intraday`).then(K=>K.ok?K.json():null).catch(()=>null)];return Promise.all(I).then(([K,te,fe,ue,je])=>{Z||(r(K),a(te),l(fe),c(ue),f(je),p(!1))}),()=>{Z=!0}},[t]);const g=(o==null?void 0:o.insights)||[],y=(u==null?void 0:u.aggregate)||{},x=(u==null?void 0:u.symbols)||[],v=(u==null?void 0:u.index_series)||[],b=(d==null?void 0:d.aggregate)||{},w=(d==null?void 0:d.symbols)||[],j=d==null?void 0:d.session_date,_=d==null?void 0:d.is_today,k=m.useMemo(()=>{var te;if(!(n!=null&&n.found))return"neutral";const Z=((te=n.snapshot)==null?void 0:te.detectors)||[],I=Z.some(fe=>fe.fired&&fe.severity==="HIGH"),K=Z.some(fe=>fe.fired&&fe.severity==="MEDIUM");return I?"critical":K?"warning":"info"},[n]),E=m.useMemo(()=>y.direction?y.direction==="DOWN"?"warning":y.direction==="UP"?"positive":"info":"neutral",[y]),A=m.useMemo(()=>g.length===0?"neutral":g.length>=3?"positive":"info",[g]),T=m.useMemo(()=>(((i==null?void 0:i.snapshot)||{}).near_miss_symbols||[]).length>0?"info":"neutral",[i]),S=n!=null&&n.found&&((ge=n.narrative)==null?void 0:ge.headline)||"System Overview",P=m.useMemo(()=>{var K,te;if(!(n!=null&&n.found))return"No global digest yet. Run the pipeline to generate.";const Z=((K=n.narrative)==null?void 0:K.what_changed)||[],I=((te=n.narrative)==null?void 0:te.what_matters)||[];return Z.length>0?Z[0]:I.length>0?I[0]:"System digest generated. Expand for full details."},[n]),C=m.useMemo(()=>!y.direction||y.direction==="NO_DATA"?"Market Pulse  Awaiting Data":`Market Pulse  ${y.up_count} of ${y.total_symbols} symbols gained today`,[y]),B=m.useMemo(()=>{if(!x.length)return"No market data available.";const Z=x[0],I=x[x.length-1],K=y.avg_return_pct??0;return`Average return ${K>=0?"+":""}${K}%. Top: ${Z==null?void 0:Z.symbol} (+${(((Z==null?void 0:Z.day_return)||0)*100).toFixed(1)}%), Bottom: ${I==null?void 0:I.symbol} (${(((I==null?void 0:I.day_return)||0)*100).toFixed(1)}%).`},[x,y]),M=m.useMemo(()=>!b.direction||b.direction==="NO_DATA"?"neutral":b.direction==="DOWN"?"warning":b.direction==="UP"?"positive":"info",[b]),D=m.useMemo(()=>{if(!j)return"";try{return new Date(j+"T12:00:00").toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}catch{return j}},[j]),q=m.useMemo(()=>!b.direction||b.direction==="NO_DATA"?"Intraday Pulse  Awaiting Data":`Intraday Pulse  ${b.up_count} of ${b.total_symbols} symbols up this session`,[b]),z=m.useMemo(()=>{if(!w.length)return"No intraday data available.";const Z=w.filter(fe=>fe.session_return!=null);if(!Z.length)return"Session data loading.";const I=Z[0],K=Z[Z.length-1],te=b.avg_return_pct??0;return`${D}  Avg return ${te>=0?"+":""}${te}%. Top: ${I==null?void 0:I.symbol} (+${(((I==null?void 0:I.session_return)||0)*100).toFixed(1)}%), Bottom: ${K==null?void 0:K.symbol} (${(((K==null?void 0:K.session_return)||0)*100).toFixed(1)}%).`},[w,b,D]),$=g.length>0?`${g.length} Signal Candidate${g.length>1?"s":""} Today`:"Signal Candidates  None Today",R=m.useMemo(()=>{if(g.length===0)return"No eligible signals found today.";const Z=g[0];return`Top candidate: ${Z.symbol} (${Z.maturity_stage}, score ${Z.maturity_score}). ${Z.why_this_is_here||""}`},[g]),N=(i==null?void 0:i.narrative)||{},Y=N.headline||"Training Progress",U=m.useMemo(()=>{const Z=(i==null?void 0:i.snapshot)||{},I=Z.near_miss_symbols||[],K=Z.top_confident_symbols||[];return I.length>0?`${I.length} symbol${I.length>1?"s":""} approaching next stage. ${K.length} trade-ready.`:K.length>0?`${K.length} symbol${K.length>1?"s":""} trade-ready (CONFIDENT).`:"No near-miss symbols. Expand for training details."},[i]),O=m.useMemo(()=>e.filter(Z=>(En(Z,"STATUS","status")||"").toUpperCase()==="ACTIVE"),[e]),ne=m.useMemo(()=>e.filter(Z=>(En(Z,"STATUS","status")||"").toUpperCase()!=="ACTIVE"),[e]);return h?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Cockpit"}),s.jsx(Ot,{message:"Loading cockpit data..."})]}):s.jsxs("div",{className:"ck-page",children:[s.jsx("div",{className:"ck-page-header",children:s.jsx("h1",{children:"Cockpit"})}),s.jsxs("div",{className:"ck-news-grid",children:[s.jsxs("div",{className:"ck-news-column",children:[s.jsx("div",{className:"ck-column-label",children:"Portfolios"}),O.length===0&&ne.length===0&&s.jsx("div",{className:"ck-story ck-story--portfolio",children:s.jsx("div",{className:"ck-story-body",style:{padding:"1rem"},children:s.jsx(ht,{title:"No portfolios",action:"Create a portfolio to get started."})})}),O.map(Z=>s.jsx(FS,{portfolio:Z},En(Z,"PORTFOLIO_ID","portfolio_id"))),ne.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"ck-column-label",style:{marginTop:"0.5rem"},children:"Inactive / Ended"}),ne.map(Z=>s.jsx(FS,{portfolio:Z},En(Z,"PORTFOLIO_ID","portfolio_id")))]})]}),s.jsxs("div",{className:"ck-news-column",children:[s.jsx("div",{className:"ck-column-label",children:"Market & System"}),s.jsx(Ds,{attention:E,headline:C,summary:B,accent:"market",defaultOpen:!1,badges:s.jsxs(s.Fragment,{children:[s.jsx(MX,{}),s.jsx(zS,{direction:y.direction})]}),children:u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"ck-market-kpi-strip",children:[s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val ck-kpi--positive",children:y.up_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Up"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val ck-kpi--negative",children:y.down_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Down"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val",children:y.flat_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Flat"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsxs("span",{className:`ck-market-kpi-val ${y.avg_return_pct>=0?"ck-kpi--positive":"ck-kpi--negative"}`,children:[y.avg_return_pct>=0?"+":"",y.avg_return_pct,"%"]}),s.jsx("span",{className:"ck-market-kpi-label",children:"Avg Return"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsxs("span",{className:"ck-market-kpi-val",children:[y.breadth_pct,"%"]}),s.jsx("span",{className:"ck-market-kpi-label",children:"Breadth"})]})]}),s.jsx(WX,{symbols:x}),s.jsx(zX,{indexSeries:v}),s.jsx($X,{symbols:x})]}):s.jsx(ht,{title:"No market data",action:"Market data will appear after ingestion runs."})}),s.jsx(Ds,{attention:M,headline:q,summary:z,accent:"market",defaultOpen:!1,badges:s.jsxs(s.Fragment,{children:[d&&s.jsx(UX,{isToday:_}),s.jsx(zS,{direction:b.direction})]}),children:d&&b.direction!=="NO_DATA"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"ck-market-kpi-strip",children:[s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val ck-kpi--positive",children:b.up_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Up"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val ck-kpi--negative",children:b.down_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Down"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val",children:b.flat_count}),s.jsx("span",{className:"ck-market-kpi-label",children:"Flat"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsxs("span",{className:`ck-market-kpi-val ${b.avg_return_pct>=0?"ck-kpi--positive":"ck-kpi--negative"}`,children:[b.avg_return_pct>=0?"+":"",b.avg_return_pct,"%"]}),s.jsx("span",{className:"ck-market-kpi-label",children:"Avg Return"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsxs("span",{className:"ck-market-kpi-val",children:[b.breadth_pct,"%"]}),s.jsx("span",{className:"ck-market-kpi-label",children:"Breadth"})]}),s.jsxs("div",{className:"ck-market-kpi",children:[s.jsx("span",{className:"ck-market-kpi-val",children:b.total_symbols}),s.jsx("span",{className:"ck-market-kpi-label",children:"Symbols"})]})]}),s.jsx(FX,{symbols:w}),s.jsx(BX,{symbols:w})]}):s.jsx(ht,{title:"No intraday data",action:"Intraday pulse will appear after the pipeline ingests 15-min bars."})}),s.jsx(Ds,{attention:k,headline:S,summary:P,accent:"system",badges:s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"ck-badge ck-badge--scope",children:"Global"}),(n==null?void 0:n.found)&&s.jsx(rD,{isAi:n.is_ai_narrative,modelInfo:n.model_info}),(n==null?void 0:n.found)&&s.jsx(DX,{createdAt:n.snapshot_created_at})]}),children:n!=null&&n.found?s.jsxs(s.Fragment,{children:[s.jsx(iD,{detectors:(re=n.snapshot)==null?void 0:re.detectors}),s.jsx(vi,{title:"What Changed",icon:"",bullets:(me=n.narrative)==null?void 0:me.what_changed,variant:"changed"}),s.jsx(vi,{title:"What Matters",icon:"",bullets:(Fe=n.narrative)==null?void 0:Fe.what_matters,variant:"matters"}),s.jsx(vi,{title:"Waiting For",icon:"",bullets:(W=n.narrative)==null?void 0:W.waiting_for,variant:"waiting"}),s.jsx(aD,{whereToLook:(ie=n.narrative)==null?void 0:ie.where_to_look,links:n.links})]}):s.jsx(ht,{title:"No global digest yet",action:"Run the pipeline to generate."})}),s.jsx(Ds,{attention:A,headline:$,summary:R,accent:"signal",children:g.length>0?s.jsx("div",{className:"ck-insights-grid",children:g.slice(0,8).map((Z,I)=>s.jsxs("div",{className:"ck-insight-mini",children:[s.jsxs("div",{className:"ck-insight-mini-header",children:[s.jsxs("span",{className:"ck-insight-mini-rank",children:["#",I+1]}),s.jsx("span",{className:"ck-insight-mini-symbol",children:Z.symbol}),s.jsx(iv,{stage:Z.maturity_stage}),s.jsxs("span",{className:"ck-insight-mini-score",children:[Z.maturity_score,"/100"]})]}),s.jsx("div",{className:"ck-upcoming-bar-wrap",children:s.jsx("div",{className:"ck-upcoming-bar",style:{width:`${Math.min(100,Math.max(0,Z.maturity_score??0))}%`}})}),s.jsx("p",{className:"ck-insight-mini-why",children:Z.why_this_is_here||""})]},I))}):s.jsx(ht,{title:"No signal candidates today",action:"Signals appear when eligible symbols have sufficient maturity."})}),s.jsx(Ds,{attention:T,headline:Y,summary:U,accent:"training",children:i!=null&&i.found?s.jsxs(s.Fragment,{children:[s.jsx(vi,{title:"What Changed",icon:"",bullets:N.what_changed,variant:"changed"}),s.jsx(vi,{title:"What Matters",icon:"",bullets:N.what_matters,variant:"matters"}),s.jsx(vi,{title:"Waiting For",icon:"",bullets:N.waiting_for,variant:"waiting"}),s.jsx(HX,{trainingData:i})]}):s.jsx(ht,{title:"No training digest yet",action:"Run the pipeline to generate."})})]})]})]})}const VX={run_status:{short:"Whether this pipeline run finished successfully, failed, or was skipped.",long:"Run status tells you the outcome of one automated pipeline run. SUCCESS means all steps completed; FAILED means something broke; SKIPPED means the run did not execute (e.g. no new data). Use it to quickly see if you need to investigate.",what:"Run status is the outcome of one pipeline run: SUCCESS, FAIL, RUNNING, or a skip reason (e.g. no new bars).",why:"So you can see at a glance whether the pipeline ran and whether you need to look at logs or data.",how:"Read from MIP.APP.MIP_AUDIT_LOG; the completion row for each RUN_ID carries the final status.",next:"Open the run detail to see the timeline and interpreted summary."},has_new_bars:{short:"Whether new market data was available for this run.",long:"Has new bars indicates if the system had fresh price/candle data for the run. If false, the run may have skipped trading steps because there was nothing new to act on. Check this when a run seems to do nothing."},rate_limit:{short:"A cap on how often the system can run to avoid overloading.",long:"Rate limit is a safety setting that prevents the pipeline from running too frequently. If you see rate limit in skip reasons, the run was postponed until the next allowed time. This protects systems and data feeds."},latest_ts:{short:"The most recent timestamp recorded for this run or step.",long:"Latest timestamp (latest_ts) is when the last relevant event or data point occurred. It helps you see how fresh the run's inputs were and align events in time order."},skip_reasons:{short:"Why a run or step did not execute (e.g. no new data, rate limit).",long:"Skip reasons explain why a run or step was not executed. Common reasons include no new bars (no new data), rate limit (too soon since last run), or other business rules. Use these to debug why nothing ran."},error_message:{short:"The error message captured when a step failed (SQLERRM).",long:"Error message contains the actual error text from Snowflake when a pipeline step fails. This is the SQLERRM value captured in the exception handler. Use it to understand what went wrong without querying the database.",what:"The SQLERRM text from a failed SQL statement.",why:"So you can see the actual error without running SQL queries.",how:"Captured in exception handlers and stored in MIP_AUDIT_LOG.ERROR_MESSAGE."},error_sqlstate:{short:"SQL error state code from Snowflake (e.g., 02000, P0001).",long:"SQLSTATE is a 5-character code that categorizes the type of error. For example, 02000 means 'no data', P0001 means 'raise_exception'. Use it to programmatically handle error types or to search for similar errors.",what:"A 5-character SQL standard error code.",why:"Helps categorize errors and search for similar issues.",how:"Captured from :sqlstate in exception handlers and stored in MIP_AUDIT_LOG.ERROR_SQLSTATE."},error_query_id:{short:"Snowflake query ID of the failed statement.",long:"Query ID is the unique identifier Snowflake assigns to every query. When a step fails, we capture the query ID so you can look up the exact statement in QUERY_HISTORY. Use it to see the full SQL, execution plan, and detailed error info.",what:"The Snowflake QUERY_ID for the failed statement.",why:"Lets you look up the exact query in Snowflake's QUERY_HISTORY.",how:"Captured from last_query_id() in exception handlers and stored in MIP_AUDIT_LOG.ERROR_QUERY_ID.",next:"Copy the query ID and use it in: SELECT * FROM TABLE(INFORMATION_SCHEMA.QUERY_HISTORY()) WHERE QUERY_ID = '<query_id>';"},duration_ms:{short:"Time taken to execute this step in milliseconds.",long:"Duration in milliseconds shows how long a pipeline step took to execute. Use it to identify slow steps or to track performance over time. Calculated as the difference between started_at and completed_at.",what:"Execution time in milliseconds.",why:"Helps identify slow steps and track performance."},step_timeline:{short:"Ordered list of pipeline steps showing status and duration.",long:"The step timeline shows all pipeline steps in execution order. Each step shows its name, status (success/fail/skip), and duration. Failed steps are highlighted in red. Click a step to see its full details including error information.",what:"Visual timeline of all steps in a pipeline run.",why:"Quickly see which steps ran, which failed, and how long each took."},debug_sql:{short:"Pre-generated SQL queries to investigate this run in Snowflake.",long:"Debug SQL provides ready-to-use queries for investigating a run directly in Snowflake. Includes queries for all events, failed steps, and query history lookup. Copy and paste into Snowflake to get more details.",what:"Generated SQL for debugging in Snowflake.",why:"Saves time when you need to dig deeper than the UI shows.",next:"Click 'Show Debug SQL', select a query type, and copy the SQL to Snowflake."},error_details:{short:"Full error information including message, SQLSTATE, and query ID.",long:"Error details combines all captured error information for failed steps: the error message, SQLSTATE code, and query ID. Use these to diagnose issues without manually querying the audit log.",what:"Combined error message, SQLSTATE, and query ID for failed steps.",why:"One place to see everything you need to debug a failure."},run_explorer:{short:"Interactive two-pane view for exploring pipeline runs.",long:"The Run Explorer provides a left pane with filterable run list and a right pane with detailed run information. Select a run to see its summary, step timeline, error panel, and debug SQL. Failed steps are automatically highlighted."}},GX={starting_cash:{short:"Cash balance at the start of the simulation or period.",long:"Starting cash is the amount of money the portfolio had at the beginning of the run or period. It's the baseline for measuring gains and losses. Compare with final equity to see total return."},final_equity:{short:"Total portfolio value (cash + positions) at the end of the period.",long:"Final equity is the total value of the portfolio at the end of the runcash plus the value of any open positions. It's the number that matters for seeing how much the strategy made or lost."},total_return:{short:"Overall gain or loss as a percentage from start to end.",long:"Total return is the percentage change from starting value to final value. Positive means the portfolio grew; negative means it shrank. It's the main headline number for performance."},max_drawdown:{short:"Largest peak-to-trough drop in value during the period.",long:"Max drawdown is the biggest drop from a previous high to a low during the period. It shows the worst loss an investor would have seen. Lower is better; it's a key risk measure."},win_days:{short:"Number of days where the portfolio made money.",long:"Win days counts how many trading days ended with a profit. It doesn't tell you how much was made, but it gives a sense of how often the strategy is right."},loss_days:{short:"Number of days where the portfolio lost money.",long:"Loss days counts how many trading days ended with a loss. Used together with win days, it helps you see the balance of good vs bad days."},status:{short:"Current state of the portfolio (e.g. active, closed, bust).",long:"Portfolio status describes whether the portfolio is active (running), closed (manually stopped), or bust (hit a loss limit and stopped). Use it to see if the portfolio is still trading."}},qX={risk_gate:{short:"The rule that controls whether you can open new positions or only close them.",long:"The risk gate is a safety layer that limits what the portfolio can do. It has three modesNormal, Caution, and Defensiveand tells you clearly what is allowed and what to do next.",what:"The risk gate is the rule set that decides whether opening new positions is allowed or only closing/reducing positions is allowed. It reflects current risk state and drawdown limits.",why:"So you know at a glance what the system will and won't dowhether you can add risk or should only reduce itwithout reading raw codes or logs.",how:"The API normalizes risk state and risk gate views (e.g. V_PORTFOLIO_RISK_STATE, V_PORTFOLIO_RISK_GATE) into a single plain-language object: mode, entries_allowed, exits_allowed, reason_text, and what_to_do_now.",next:"Use the permission matrix and What to do now on the Portfolio Risk Gate panel to decide your next action."},mode:{short:"Current risk gate mode: Normal (full trading), Caution (warn), or Defensive (exits only).",long:"Risk gate mode tells you what the system allows right now. Normal means full trading; Caution means new positions allowed but be careful; Defensive means only closing or reducing positions, no new entries. The mode is derived from risk state and drawdown rules."},risk_status:{short:"Raw risk status from the system (e.g. OK, WARN) before it is turned into a mode.",long:"Risk status is the underlying signalOK, WARN, or similarthat the system uses to decide the gate mode. OK usually means Normal; WARN can mean Caution; combined with entries blocked it becomes Defensive.",what:"Risk status is the internal state (e.g. OK, WARN) that indicates whether the portfolio is within safe limits or approaching them.",why:"So the UI can show a human-friendly mode (Normal / Caution / Defensive) while the system still uses a simple status for logic.",how:"Read from risk state or risk gate views; the normalized object maps risk_status and entries_blocked into risk_label and mode.",next:"Look at the headline Risk Gate: Normal / Caution / Defensive to see how your status is presented."},entries_blocked:{short:"Whether new positions are currently allowed or blocked.",long:"Entries blocked means the system is not allowed to open new positions right now. It's a safety switchoften turned on after a big drawdown or when risk limits are hit. Existing positions may still be closed."},entries_allowed:{short:"Whether opening new positions is allowed.",long:"Entries allowed means the risk gate permits opening new positions. When false (Defensive mode), only closing or reducing positions is allowed. Use this with the permission matrix to see what you can do.",what:"Entries allowed is a yes/no: you are either allowed to open new positions (buy, add) or you are not. When not allowed, only closing or reducing positions is permitted.",why:"So you know immediately whether you can add exposure or must limit yourself to reducing it. No guessing from raw codes.",how:"Derived from risk state or risk gate (e.g. NOT entries_blocked, or allowed_actions = ALLOW_ENTRIES). The Portfolio panel shows it as Open new positions: Allowed or Blocked.",next:"If Allowed, you can use Suggestions to open new positions. If Blocked, follow What to do now and only close or reduce."},exits_allowed:{short:"Closing or reducing positions is always allowed when the gate is active.",long:"Exits allowed means you can always close or reduce existing positions, even when new entries are blocked. The gate never prevents unwinding riskonly adding new exposure.",what:"Exits allowed means you can close or reduce existing positions at any time. The risk gate never blocks unwindingonly adding new risk.",why:"So you know you can always reduce exposure when the gate is on. The system will not trap you in positions when you need to cut risk.",how:"The normalized risk gate sets exits_allowed to true whenever the gate is in use. The UI shows Close/reduce positions: Allowed.",next:"Use View Positions and your broker or simulator to close or reduce positions when the gate is Defensive or Caution."},drawdown_stop:{short:"A limit that pauses new entries when the portfolio has lost too much from a peak.",long:"Drawdown stop is a safety rule: when the portfolio's value has fallen too far from its high (e.g. past a set percentage), the system stops allowing new positions and may switch to Defensive mode. You can still close or reduce.",what:"Drawdown stop is the rule that says 'no new entries when loss from peak exceeds X.' It protects the portfolio from adding risk after a big drop.",why:"So losses don't snowball. Once the portfolio has hit the limit, the system stops adding exposure until conditions improve or you restart.",how:"Computed from portfolio equity vs peak; when the drop exceeds the configured threshold, entries are blocked and reason may reference drawdown (e.g. DRAWDOWN_STOP_ACTIVE).",next:"If the reason mentions drawdown, check max drawdown and equity. You can close positions or restart the episode (see Runbook) when appropriate."},allow_exits_only:{short:"Only closing positions is allowed; no new buys.",long:"Allow exits only means the portfolio can only close or reduce positions, not open new ones. It's a middle ground between full trading and a complete stop, used to reduce risk while letting the system unwind."},reason_text:{short:"Plain-language reason for the current gate state.",long:"Reason text explains in one sentence why the risk gate is in its current modee.g. within limits, drawdown hit, or safety pause. Use it to understand what triggered the state."},what_to_do_now:{short:"Actionable steps recommended for the current gate.",long:"What to do now lists concrete steps the system recommends for the current risk gate modee.g. use Suggestions, avoid opening many positions, or wait and close only. Follow these to stay aligned with risk policy.",what:"What to do now is a short list of recommended actions for the current risk gate modee.g. you can open positions normally, or only close them, or be cautious with new ones.",why:"So you have clear next steps instead of guessing. Each mode has different guidance to keep you aligned with risk policy.",how:"Built by the API from the normalized risk gate: one set of bullets for Normal, another for Caution, another for Defensive (and drawdown-specific lines when applicable).",next:"Follow the bullets on the Risk Gate panel; use Open Suggestions or View Positions as needed, and see the Runbook to restart an episode if required."},defensive_mode:{short:"Gate mode where only closing or reducing positions is allowed; no new entries.",long:"Defensive mode means the risk gate has turned on: you cannot open new positions, only close or reduce existing ones. It is used after a drawdown stop or when risk limits say no new exposure.",what:"Defensive mode is the risk gate state where entries are blocked and only exits (close or reduce) are allowed. The headline shows Defensive with a stop icon.",why:"So you know the system has paused new risk and you must limit yourself to unwinding. It protects the portfolio from adding exposure when conditions are bad.",how:"Set when entries_blocked is true or allowed_actions is ALLOW_EXITS_ONLY; the UI displays Risk Gate: Defensive and Exits only, with What to do now bullets.",next:"Do not open new positions. Use View Positions to close or reduce. See How to restart episode in the Risk Gate panel if you need to start a new episode."},stop_reason:{short:"Why trading was limited or stopped (e.g. drawdown, flat rule).",long:"Stop reason explains why the risk gate is onfor example drawdown limit hit, or a rule that says no new entries until the portfolio is flat. Use it to understand what triggered the restriction."}},YX={eligible_signals:{short:"Number of signals that passed filters and could be acted on.",long:"Eligible signals are recommendations that passed all checks (time, score, pattern) and could be used for trading. Not all become trades; this is the pool of candidates."},filtered_by_threshold:{short:"Signals removed because they didn't meet a score or quality bar.",long:"Filtered by threshold means some signals were excluded because their score or strength was below a set bar. It's a quality filter so only stronger signals are considered."},trusted_signals:{short:"Signals that passed trust and safety checks.",long:"Trusted signals are those that passed both quality and policy checks (e.g. risk, consistency). The system only trades on trusted signals to reduce bad or risky trades."}},XX={proposed_count:{short:"Number of orders the system suggested.",long:"Proposed count is how many order suggestions were generated in this run. Not all get approved or executed; this is the first step in the pipeline."},approved_count:{short:"Number of proposed orders that were approved.",long:"Approved count is how many of the proposed orders passed validation and were okayed. Approval can be automatic or manual depending on configuration."},executed_count:{short:"Number of orders that were actually filled in the market.",long:"Executed count is how many orders were actually filled. It can be lower than approved if the market moved or orders were cancelled. This is the real trading outcome."}},QX={symbol:{short:"The ticker or identifier for the holding (e.g. stock or asset).",long:"Symbol is the market identifier for the asset you holdlike a stock ticker. It tells you which asset this position is for."},side:{short:"Long = you own the asset; Short = you owe it (sold borrowed); Flat = no position.",long:"Side describes the direction of the position. Long means you own the asset (bought it). Short means you sold it (borrowed) and owe ityou profit if the price falls. Flat means no exposure."},quantity:{short:"How many units of the asset you hold.",long:"Quantity is the number of shares or units you own in this position. It's used with price to see current value."},cost_basis:{short:"Total amount you paid for this position (used to figure gain/loss).",long:"Cost basis is the total amount originally paid for this position. When you sell, it's compared to the sale amount to calculate your gain or loss."}},ZX={symbol:{short:"The ticker or identifier for the asset that was traded.",long:"Symbol is the market identifier for the asset that was bought or sold in this trade."},side:{short:"Whether the trade was a buy or a sell.",long:"Side tells you the direction: BUY means you added to the position; SELL means you reduced or closed it. It's the basic action of the trade."},quantity:{short:"How many units were bought or sold in this trade.",long:"Quantity is the number of shares or units traded. Together with price it determines the size of the trade."},price:{short:"Price per unit at which the trade was filled.",long:"Price is the per-unit execution pricewhat you actually paid or received for each share or unit. It's used with quantity to get the total value."},notional:{short:"Total value of the trade (quantity  price).",long:"Notional is the total dollar value of the tradequantity times price. It's how much money actually moved in this trade."},realized_pnl:{short:"Profit or loss locked in when the trade closed part of a position.",long:"Realized P&L is the profit or loss that was locked in when this trade closed or reduced a position. Positive means a gain; negative means a loss."}},JX={status_badge:{short:"A label showing the current state of a run, portfolio, or step.",long:"Status badges show at a glance whether something succeeded, failed, is pending, or was skipped. Hover for more detail on what that status means in this context."},system_status:{short:"API and Snowflake data backend health.",long:"Green means the API and Snowflake data backend are both reachable. Yellow means the API is up but Snowflake (where portfolios, briefs, and training data live) is not reachablecheck credentials and network. Red means the API itself is not reachablethe server may be down or unreachable."}},eQ={market_type:{short:"Asset class or market (e.g. STOCK, ETF, FX).",long:"Market type is the category of assets this row applies tostocks, ETFs, or forex. It lets you filter and compare training quality by market."},symbol:{short:"Ticker or identifier for the asset (e.g. AAPL, SPY).",long:"Symbol is the ticker or code for the assetlike a stock symbol. Use it to find a specific asset's training status."},pattern_id:{short:"Identifier for the signal pattern used.",long:"Pattern ID is the internal ID of the recommendation pattern. Different patterns can have different maturity and performance."},interval_minutes:{short:"Bar interval in minutes (e.g. 1440 = daily).",long:"Interval minutes is the timeframe of the barse.g. 1440 means daily bars. Training status here is for daily (1440) only."},as_of_ts:{short:"Timestamp of the latest data used for this row.",long:"As-of timestamp is when the most recent recommendation or outcome data was recorded. It tells you how fresh this status is."},recs_total:{short:"Number of recommendations (sample size) for this group.",long:"Sample size (recs_total) is how many recommendations were generated for this market/symbol/pattern. More recommendations usually mean a more reliable maturity score."},outcomes_total:{short:"Number of evaluated outcomes across horizons.",long:"Outcomes total is how many recommendation outcomes were evaluated (e.g. did the trade hit or miss). It feeds into coverage and horizon metrics."},horizons_covered:{short:"How many time windows (1, 3, 5, 10, 20 bars) have outcome data.",long:"Horizons covered is the number of evaluation windows (1, 3, 5, 10, 20 bars) that have outcome data. All five means full horizon completeness."},coverage_ratio:{short:"Share of possible outcomes that were evaluated (01).",long:"Coverage ratio is the fraction of possible outcomes that were actually evaluated. 1.0 means every recommendation has outcomes for all horizons; lower means some are still pending."},avg_outcome_h1:{short:"Average realized return over 1-bar horizon (null if missing).",long:"Avg outcome H1 is the average return realized when holding for 1 bar after the signal. It's one of five horizon windows used to judge pattern quality."},avg_outcome_h3:{short:"Average realized return over 3-bar horizon (null if missing).",long:"Avg outcome H3 is the average return over a 3-bar holding period. Used with other horizons to see how the pattern performs at different time windows."},avg_outcome_h5:{short:"Average realized return over 5-bar horizon (null if missing).",long:"Avg outcome H5 is the average return over a 5-bar horizon. Part of the five horizon metrics that feed into maturity."},avg_outcome_h10:{short:"Average realized return over 10-bar horizon (null if missing).",long:"Avg outcome H10 is the average return over a 10-bar holding period. Longer horizons can show different behavior than short ones."},avg_outcome_h20:{short:"Average realized return over 20-bar horizon (null if missing).",long:"Avg outcome H20 is the average return over a 20-bar horizon. The longest window in the standard set; null if not yet evaluated."},maturity_score:{short:"Overall data-quality score 0100 (sample + coverage + horizons).",long:"Maturity score is a 0100 number combining how much data you have (sample size), how complete outcomes are (coverage), and how many time windows have data (horizons). Higher means more reliable."},maturity_stage:{short:"Label for maturity band (INSUFFICIENT / WARMING_UP / LEARNING / CONFIDENT).",long:"Maturity stage is a simple label: INSUFFICIENT (score &lt;25), WARMING_UP (2549), LEARNING (5074), CONFIDENT (75+). It tells you at a glance if the data is enough to trust."},reasons:{short:"Plain-language explanations for the score (what happened and why).",long:"Reasons are short explanations for why the maturity score is what it ise.g. not enough recommendations yet, or all horizons have data. Use them to understand and act."},stage_insufficient:{short:"Score &lt;25  not enough data to be reliable.",long:"INSUFFICIENT means the maturity score is under 25. There isn't enough recommendation or outcome data yet to trust this row. Run more pipelines or wait for more data."},stage_warming_up:{short:"Score 2549  data is building; confidence is growing.",long:"WARMING_UP means the score is between 25 and 49. Data is accumulating and the score is becoming more meaningful, but it's not yet strong enough to rely on fully."},stage_learning:{short:"Score 5074  enough data to learn from; score is meaningful.",long:"LEARNING means the score is between 50 and 74. There's enough data to draw conclusions and the maturity score is a useful signal. Good for monitoring and tuning."},stage_confident:{short:"Score 75+  strong data coverage and outcome completeness.",long:"CONFIDENT means the score is 75 or higher. Data coverage and outcome completeness are strong. This row's metrics are reliable for decision-making."},filter_market_type:{short:"Filter rows by market (STOCK, ETF, FX).",long:"Market type filter limits the table to one asset class. Use it to focus on stocks, ETFs, or forex."},filter_symbol:{short:"Search by symbol (ticker)  partial match.",long:"Symbol search filters rows by ticker. Type part of a symbol to narrow the list; matching is case-insensitive."}},tQ={horizon_bars:{short:"Holding period in bars (e.g. 1, 3, 5, 10, 20) after the signal; for daily data, 1 bar = 1 day.",long:"Horizon bars is how many bars (e.g. days for daily data) the outcome was measured over. 1 = one bar hold; 5 = five bars. For daily data, horizon is in days. Different horizons can show different performance."},horizon_days:{short:"Horizon in days (for daily data, same as horizon_bars).",long:"For daily bars, horizon in days is the same as horizon_bars: 1 bar = 1 day, 5 bars = 5 days. Used in plain-language explanations."},n:{short:"Number of evaluated outcomes for this horizon.",long:"N is the count of outcomes (successful evaluations) for this horizon. Higher N means the mean and pct positive are based on more data."},mean_outcome:{short:"Average realized return for that horizon.",long:"Mean outcome is the average return realized when holding for this many bars after the signal. Positive means the pattern tended to make money over that horizon."},mean_realized_return:{short:"Average realized return over this horizon (decimal, e.g. 0.02 = 2%).",long:"Mean realized return is the average return actually achieved when holding for this many bars after the signal. It uses REALIZED_RETURN from evaluated outcomes. Positive means the pattern tended to make money over this horizon; the value is in decimal form (e.g. 0.02 = 2%)."},realized_return:{short:"Return from entry price to exit price over the chosen horizon (decimal).",long:"Realized return is the actual return from the entry price to the exit price at the chosen horizon. It is computed from completed evaluations only. Shown in decimal form (e.g. 0.02 = 2%)."},pct_positive:{short:"Share of outcomes that had positive return (01 as decimal, shown as 0100%).",long:"Pct positive is the fraction of evaluated outcomes where the return was positive. Higher means the pattern wins more often over this horizon."},pct_hit:{short:"Share of outcomes where HIT_FLAG was true (target hit).",long:"Pct hit is the fraction of evaluated outcomes where the hit flag was truei.e. the outcome met the pattern's target or success criterion. It is stored as 01 and shown as 0100%."},hit_rate:{short:"Hit rate: how often the move exceeded the minimum threshold (same as pct_hit).",long:"Hit rate shows how often the realized move exceeded the pattern's minimum threshold (HIT_FLAG = true). It is the same as pct_hit: the fraction of outcomes that met the success criterion."},min_outcome:{short:"Smallest realized return in the sample.",long:"Min outcome is the worst single outcome over this horizon. It shows the downside risk in the sample."},max_outcome:{short:"Largest realized return in the sample.",long:"Max outcome is the best single outcome over this horizon. Together with min, it shows the range of results."},last_recommendation_ts:{short:"Timestamp of the most recent recommendation for this symbol/pattern.",long:"Last recommendation timestamp is when the latest signal was generated. It tells you how fresh the data is for this row."}},nQ={rank_score:{short:"Deterministic rank score (maturity + sample); higher is better.",long:"Rank score is the maturity score (0100) used to order suggestions. Only rows that meet the minimum sample size are shown. Higher score means more data and more reliable metrics."},suggestion_score:{short:"Transparent score: 0.6maturity + 0.2(mean_return1000) + 0.2(pct_positive100). Uses horizon 5 if present; else best of {3,5,10}.",long:"Suggestion score is computed as: require recs_total  10 and horizons_covered  3; then score = 0.6  maturity_score (from Training Status or a proxy) + 0.2  (mean_realized_return  1000) + 0.2  (pct_positive  100). We use horizon 5 when present; otherwise we choose the best available horizon from {3, 5, 10} by pct_positive (then mean return). No magicformula is deterministic and shown in the tooltip."},suggestion_score_formula:{short:"Score = 0.6maturity + 0.2(mean_return1000) + 0.2(pct_positive100). Horizon: 5 if present, else best of {3,5,10}. Requires recs  10, horizons  3.",long:"The suggestion score uses: (1) maturity_score from Training Status if available, else a proxy from recs_total and horizons_covered; (2) performance at one horizonwe use horizon 5 when present, otherwise the best available of {3, 5, 10} by pct_positive (then mean return). Formula: 0.6maturity + 0.2(mean_return1000) + 0.2(pct_positive100). Minimum: recs_total  10 and at least 3 distinct horizons (e.g. 1, 3, 5, 10, 20) must have outcome data."},why_this_is_shown:{short:"Plain-English reason this candidate appears in the list (deterministic, no LLM).",long:"Why this is shown is a fixed template filled with this row's numbers: that it meets the minimums (recs_total  10, horizons_covered  3), its maturity score and stage, and its 5-bar mean return and pct positive. It explains why this symbol/pattern is ranked and shown."},min_sample:{short:"Minimum number of recommendations required to appear in suggestions.",long:"Minimum sample is the least number of recommendations a symbol/pattern must have to be listed. It filters out very new or thin data so rankings are meaningful."},min_recs_required:{short:"recs_total  10 required for a symbol/pattern to appear in the ranked list.",long:"Minimum recs required means at least 10 recommendations must exist for this market_type/symbol/pattern_id (daily bars) before the row is shown. This avoids ranking on too little data."},min_horizons_required:{short:"At least 3 distinct horizons (e.g. 1, 3, 5, 10, 20 bars) must have outcome data.",long:"Minimum horizons required means at least 3 of the standard evaluation windows (1, 3, 5, 10, 20 bars) must have evaluated outcomes. This ensures the score uses meaningful horizon coverage."},what_history_suggests:{short:"Two-line plain-English summary from evaluated history (template-based, no LLM).",long:"What history suggests is a fixed template: line 1 = sample size and pct positive at the strongest horizon; line 2 = mean return at that horizon. It summarizes what the data showsdeterministic, not AI-generated."},how_to_interpret:{short:"How to read the horizon table and use this for research (no trading advice).",long:"How to interpret: each row is one holding period (1, 3, 5, 10, 20 bars). N = outcome count; mean = average return; pct positive = share of wins. Use this to see which horizon performed best. Research guidance onlynot execution advice."},horizon_strip:{short:"Mini strip showing pct_positive or mean_outcome for horizons 1, 3, 5, 10, 20.",long:"The horizon strip shows a compact view of performance across the five standard horizons. Each cell is either pct_positive (share of positive returns) or mean_outcome (average return). Green shades = better; red = worse. Helps compare at a glance."},explanation_summary:{short:"Plain-English summary of why this row is ranked here (no LLM).",long:"The explanation is a fixed template filled with this row's numbersrecommendations, coverage, maturity stage, and how many horizons have positive average outcomes. It is deterministic, not AI-generated."},no_trades_notice:{short:"This page does not execute or propose trades.",long:"Suggestions are informational only. No trades are placed or proposed from this page. Use Training Status and Performance Summary for analysis; execution happens elsewhere."},detail_drawer:{short:"Click a candidate to open the detail drawer with full horizon table and how to interpret.",long:"The detail drawer shows the full per-horizon table (N, mean, pct positive, min, max) and short text on how to interpret the numbers. Close by clicking outside or the close control."},sample_size:{short:"Number of recommendations (recs_total) for this symbol/patternthe sample size.",long:"Sample size is recs_total: how many recommendations were generated for this market_type/symbol/pattern_id. Shown so you know how much history the suggestion is based on."}},rQ={as_of_ts:{short:"What is as-of time?",long:"As-of time is the timestamp of the data this brief was built from. It tells you how fresh the brief ise.g. the latest bar or pipeline run that fed into signals, risk, and proposals."},pipeline_run_id:{short:"What is pipeline run id?",long:"Pipeline run id is the unique identifier of the daily pipeline run that produced this brief. Use it to trace back to audit logs, order proposals, and the exact run that wrote this brief."}},iQ={hero_headline:{short:"Brand and product name for the platform.",long:"Market Intelligence Platform is the name of this system. It combines daily-bar research, outcomes-based learning, and explainable suggestions for symbol/pattern candidates."},hero_subtext:{short:"Three pillars: daily-bar research, outcomes-based learning, explainable suggestions.",long:"Daily-bar research means analysis on daily candles; outcomes-based learning means the system learns from realized returns and hit rates; explainable suggestions means ranked candidates with clear metrics and tooltips, not black-box signals."},quick_actions:{short:"Shortcuts to key views: Cockpit, Portfolio, Training Status, Suggestions.",long:"Quick actions take you directly to the most used pages: open the Cockpit for AI narratives and daily overview, view a portfolio (default portfolio 1), open training status by symbol/pattern, or open the ranked suggestions list."},system_at_a_glance:{short:"Summary of last pipeline run, new evaluations since run, and latest digest timestamp.",long:"System at a glance shows live metrics: when the last pipeline run completed and its status, how many new outcome evaluations were added since that run, and when the latest AI digest was generated. Helps you see if data is fresh."}},aQ={today_overview:{short:"Single view: system status, portfolio situation, and today's candidates from evaluated history.",long:"Today composes the most important information into one page: is the system alive, what is the portfolio risk state, what are the top things to look at today (ranked by maturity and outcome history). Research guidance onlyno auto-trading."},today_score:{short:"Deterministic score combining maturity and outcome performance for ranking today's candidates.",long:"Today score ranks candidates: a blend of data maturity (0100) and outcome history (mean return and pct positive at 5-bar horizon). Higher score means stronger data and better historical performance. Used only to order the list."},why_this_is_shown:{short:"Plain-English reason this candidate appears in today's list (deterministic, no LLM).",long:"Why it's shown is a fixed template: ranked by data maturity and outcome history, with 5-bar horizon mean return and pct positive. It explains why this symbol/pattern is in today's top candidates."},candidate:{short:"A symbol/pattern pair from today's eligible signals, ranked by maturity and outcome history.",long:"A candidate is a symbol and pattern that appeared in today's eligible signals (V_SIGNALS_ELIGIBLE_TODAY, daily bars). It is enriched with maturity metrics and outcome performance, then ranked. Shown only if maturity stage is not INSUFFICIENT and minimum sample is met."},recent_events:{short:"Run-level portfolio events (e.g. drawdown stop, first flat).",long:"Recent events come from V_PORTFOLIO_RUN_EVENTS: markers like drawdown stop and first time flat (no positions) after a stop. They help you see what happened in recent simulation runs."},latest_brief:{short:"Most recent AI digest for the selected portfolio.",long:"Latest digest is the most recent AI-generated digest for this portfolio. It includes as_of_ts and pipeline_run_id. Expand to see the full digest."}},sQ={audit:VX,portfolio:GX,risk_gate:qX,signals:YX,proposals:XX,positions:QX,trades:ZX,ui:JX,training_status:eQ,performance:tQ,suggestions:nQ,brief:rQ,home:iQ,today:aQ};function Re(e,t){if(!e||!t)return null;const n=sQ[e];if(!n)return null;const r=n[t];if(!r||typeof r.short!="string")return null;const i={short:r.short,long:r.long??r.short};return typeof r.what=="string"&&(i.what=r.what),typeof r.why=="string"&&(i.why=r.why),typeof r.how=="string"&&(i.how=r.how),typeof r.next=="string"&&(i.next=r.next),typeof r.calc=="string"&&(i.calc=r.calc),i}function sD(e){if(!e||typeof e!="string")return null;const t=e.indexOf(".");if(t<=0||t===e.length-1)return null;const n=e.slice(0,t),r=e.slice(t+1);return Re(n,r)}function ee({scope:e,key:t,entryKey:n,variant:r="short"}){const i=t??n,[a,o]=m.useState(!1),l=m.useRef(null),u=m.useRef(null),c=i!=null&&i.includes(".")?sD(i):Re(e,i);if(m.useEffect(()=>{if(!a||!l.current||!u.current)return;const g=l.current,y=u.current,x=g.getBoundingClientRect();y.style.left=`${x.left}px`,y.style.top=`${x.bottom+4}px`},[a]),!c)return null;const d=c.what||c.why||c.how,f=r==="long"?c.long:c.short,h=r==="long"&&(c.long.length>120||d),p=h&&a&&(d?s.jsxs("span",{ref:u,className:"info-tooltip-popover info-tooltip-popover--structured",role:"tooltip",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[c.what&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"What:"})," ",c.what,s.jsx("br",{})]}),c.why&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"Why:"})," ",c.why,s.jsx("br",{})]}),c.how&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"How:"})," ",c.how,s.jsx("br",{})]}),c.next&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"Next:"})," ",c.next]})]}):s.jsx("span",{ref:u,className:"info-tooltip-popover",role:"tooltip",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:c.long}));return s.jsxs("span",{className:"info-tooltip-wrap",ref:l,children:[s.jsx("span",{className:"info-tooltip-icon",title:h?c.short:f,onMouseEnter:()=>h&&o(!0),onMouseLeave:()=>h&&o(!1),onFocus:()=>h&&o(!0),onBlur:()=>h&&o(!1),tabIndex:0,role:"img","aria-label":"More info",children:"?"}),h&&a&&p]})}function Pp(e,t){const n=m.useRef(e);m.useEffect(()=>{n.current=e},[e]),m.useEffect(()=>{if(t==null)return;let r=null;function i(){a(),r=setInterval(()=>n.current(),t)}function a(){r!==null&&(clearInterval(r),r=null)}function o(){document.hidden?a():(n.current(),i())}return n.current(),i(),document.addEventListener("visibilitychange",o),()=>{a(),document.removeEventListener("visibilitychange",o)}},[t])}const BS=9e5;function ca(e){if(e==null)return"";const t=typeof e=="string"?new Date(e):e;if(Number.isNaN(t.getTime()))return"";const n=Date.now(),r=Math.floor((n-t.getTime())/1e3);if(r<0)return"just now";if(r<60)return`${r} sec ago`;const i=Math.floor(r/60);if(i<60)return`${i} min ago`;const a=Math.floor(i/60);if(a<24)return`${a} hour${a!==1?"s":""} ago`;const o=Math.floor(a/24);return`${o} day${o!==1?"s":""} ago`}function oQ(){const e=Ab(),[t,n]=m.useState(null),[r,i]=m.useState(!0),[a,o]=m.useState(null),[l,u]=m.useState(null),[c,d]=m.useState(0),f=m.useCallback(()=>{fetch(`${J}/live/metrics?portfolio_id=${e}`).then(w=>w.ok?w.json():Promise.reject(new Error(w.statusText))).then(w=>{n(w),u(Date.now()),o(null)}).catch(w=>{o(w.message),n(null)}).finally(()=>i(!1))},[e]);Pp(f,BS),m.useEffect(()=>{const w=setInterval(()=>d(j=>j+1),1e3);return()=>clearInterval(w)},[]);const h=l!=null?Math.max(0,Math.floor((Date.now()-l)/1e3)):null;if(r&&!t)return s.jsxs("div",{className:"live-header",role:"status","aria-label":"Live metrics loading",children:[s.jsx("span",{className:"live-header-label",children:"Live"}),s.jsx("span",{className:"live-header-value",children:"Loading"})]});const p=t==null?void 0:t.last_run,g=t==null?void 0:t.last_intraday_run,y=t==null?void 0:t.last_brief,x=(t==null?void 0:t.outcomes)??{},v=x.since_last_run??0,b=x.last_calculated_at??null;return s.jsxs("div",{className:"live-header",role:"region","aria-label":"Live metrics",children:[s.jsx("span",{className:"live-header-label",children:"Live"}),p&&s.jsxs("span",{className:"live-header-item",title:void 0,children:["Daily: ",ca(p.completed_at??p.started_at),s.jsx("span",{className:`live-header-badge live-header-badge--${(p.status||"").toLowerCase()}`,children:p.status??""}),s.jsx(ee,{scope:"live",entryKey:"last_pipeline_run",variant:"short"})]}),g&&s.jsxs("span",{className:"live-header-item",title:`${g.bars_ingested??0} bars, ${g.signals_generated??0} signals, ${g.symbols_processed??0} symbols`,children:["Intraday: ",ca(g.completed_at??g.started_at),s.jsx("span",{className:`live-header-badge live-header-badge--${(g.status||"").toLowerCase()}`,children:g.status??""})]}),(y==null?void 0:y.found)&&s.jsxs("span",{className:"live-header-item",title:void 0,children:["Latest digest: ",ca(y.as_of_ts),s.jsx(ee,{scope:"live",entryKey:"latest_brief",variant:"short"})]}),v>0&&s.jsxs("span",{className:"live-header-item live-header-item--pulse",title:void 0,children:["New evaluations since last run: +",v,s.jsx(ee,{scope:"live",entryKey:"new_evaluations_since_last_run",variant:"short"})]}),b&&s.jsxs("span",{className:"live-header-item",title:void 0,children:["Data freshness: outcomes updated ",ca(b)," ago",s.jsx(ee,{scope:"live",entryKey:"data_freshness",variant:"short"})]}),h!=null&&s.jsxs("span",{className:"live-header-item live-header-meta",children:["Next refresh in ",Math.max(0,Math.floor(BS/1e3)-h)," sec"]}),a&&s.jsx("span",{className:"live-header-error",role:"alert",children:"Live metrics unavailable"})]})}function lQ(){const e=Ab(),[t,n]=m.useState(!0),[r,i]=m.useState(null);if(m.useEffect(()=>{let c=!1;return fetch(`${J}/live/metrics?portfolio_id=${e}`).then(d=>d.ok?d.json():Promise.reject(new Error(d.statusText))).then(d=>{c||i(d)}).catch(()=>{c||i(null)}).finally(()=>{c||n(!1)}),()=>{c=!0}},[e]),t)return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"home-hero home-hero--loading","aria-hidden":"true",children:[s.jsx("div",{className:"home-hero-overlay"}),s.jsxs("div",{className:"home-hero-content",children:[s.jsx("h1",{className:"home-hero-title",children:"Market Intelligence Platform"}),s.jsx("p",{className:"home-hero-subtext",children:"Daily-bar research  outcomes-based learning  explainable suggestions"})]})]}),s.jsx(Ot,{message:"Loading"})]});const a=r==null?void 0:r.last_run,o=r==null?void 0:r.last_brief,u=((r==null?void 0:r.outcomes)??{}).since_last_run??0;return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"home-hero","aria-label":"Hero",children:[s.jsx("div",{className:"home-hero-bg",role:"img","aria-label":"Market intelligence visual"}),s.jsx("div",{className:"home-hero-overlay","aria-hidden":"true"}),s.jsxs("div",{className:"home-hero-content",children:[s.jsxs("h1",{className:"home-hero-title",children:["Market Intelligence Platform",s.jsx(ee,{scope:"home",entryKey:"hero_headline",variant:"short"})]}),s.jsxs("p",{className:"home-hero-subtext",children:["Daily-bar research  outcomes-based learning  explainable suggestions",s.jsx(ee,{scope:"home",entryKey:"hero_subtext",variant:"short"})]})]})]}),s.jsxs("section",{className:"home-quick-actions","aria-label":"Quick actions",children:[s.jsxs("h2",{className:"home-section-title",children:["Quick actions",s.jsx(ee,{scope:"home",entryKey:"quick_actions",variant:"short"})]}),s.jsxs("div",{className:"home-quick-actions-grid",children:[s.jsxs(xe,{to:"/portfolios",className:"home-card home-card--link",children:[s.jsx("span",{className:"home-card-title",children:"View Portfolios"}),s.jsx("span",{className:"home-card-desc",children:"All portfolios  positions, trades, episodes"})]}),e!=null&&s.jsxs(xe,{to:`/portfolios/${e}`,className:"home-card home-card--link",children:[s.jsx("span",{className:"home-card-title",children:"Default portfolio"}),s.jsxs("span",{className:"home-card-desc",children:["Portfolio ",e,"  quick link"]})]}),s.jsxs(xe,{to:"/cockpit",className:"home-card home-card--link",children:[s.jsx("span",{className:"home-card-title",children:"Open Cockpit"}),s.jsx("span",{className:"home-card-desc",children:"AI narratives, portfolio status, training"})]}),s.jsxs(xe,{to:"/training",className:"home-card home-card--link",children:[s.jsx("span",{className:"home-card-title",children:"Open Training Status"}),s.jsx("span",{className:"home-card-desc",children:"Maturity by symbol/pattern"})]}),s.jsxs(xe,{to:"/suggestions",className:"home-card home-card--link",children:[s.jsx("span",{className:"home-card-title",children:"Open Suggestions"}),s.jsx("span",{className:"home-card-desc",children:"Ranked symbol/pattern candidates"})]})]})]}),s.jsxs("section",{className:"home-glance","aria-label":"System at a glance",children:[s.jsxs("h2",{className:"home-section-title",children:["System at a glance",s.jsx(ee,{scope:"home",entryKey:"system_at_a_glance",variant:"short"})]}),s.jsxs("div",{className:"home-glance-grid",children:[s.jsxs("div",{className:"home-card",children:[s.jsxs("span",{className:"home-card-label",children:["Last pipeline run",s.jsx(ee,{scope:"live",entryKey:"last_pipeline_run",variant:"short"})]}),s.jsx("span",{className:"home-card-value",children:a?s.jsxs(s.Fragment,{children:[ca(a.completed_at??a.started_at),s.jsx("span",{className:`home-glance-badge home-glance-badge--${(a.status||"").toLowerCase()}`,children:a.status??""})]}):""})]}),s.jsxs("div",{className:"home-card",children:[s.jsxs("span",{className:"home-card-label",children:["New evaluations since last run",s.jsx(ee,{scope:"live",entryKey:"new_evaluations_since_last_run",variant:"short"})]}),s.jsx("span",{className:"home-card-value",children:u>0?`+${u}`:u===0?"0":""})]}),s.jsxs("div",{className:"home-card",children:[s.jsxs("span",{className:"home-card-label",children:["Latest digest (as-of)",s.jsx(ee,{scope:"live",entryKey:"data_freshness",variant:"short"})]}),s.jsx("span",{className:"home-card-value",children:o!=null&&o.found?ca(o.as_of_ts):"No digest yet"})]})]})]}),s.jsx(ht,{title:"Seeing empty pages?",action:s.jsxs(s.Fragment,{children:["Run the daily pipeline in Snowflake, then check ",s.jsx(xe,{to:"/runs",children:"Runs"}),"."]}),explanation:"MIP data is populated by the daily pipeline. If pages look empty, run SP_RUN_DAILY_PIPELINE in Snowflake.",reasons:["Pipeline has not run yet.","Snowflake credentials may be missing or invalid."]})]})}function Zn({message:e}){return s.jsxs("div",{className:"error-state",children:[s.jsx("p",{className:"error-state-message",children:e}),s.jsxs("p",{className:"error-state-action",children:[s.jsx(xe,{to:"/debug",className:"error-state-link",children:"Open Debug"})," ","to see which endpoints are failing and get diagnostics."]})]})}const uQ={SAFE:"SAFE",CAUTION:"CAUTION",STOPPED:"STOPPED"},Lc={SAFE:"#2e7d32",CAUTION:"#f9a825",STOPPED:"#c62828"};function Ar(e){return e?String(e).slice(0,10):""}function Mc({title:e,tooltip:t}){return s.jsxs("h4",{className:"mini-grid-chart-title",title:t,children:[e,t&&s.jsx("span",{className:"mini-grid-chart-q","aria-label":t,children:"?"})]})}function cQ({data:e,thresholds:t,events:n}){if(!Array.isArray(e)||e.length===0)return s.jsx("p",{className:"mini-grid-empty",children:"No equity data"});const r=(t==null?void 0:t.bust_threshold_pct)!=null&&(t==null?void 0:t.start_equity)!=null?t.start_equity*(t.bust_threshold_pct/100):null,i=e.some(a=>a.cash!=null);return s.jsx(We,{width:"100%",height:160,children:s.jsxs(si,{data:e,margin:{top:6,right:6,left:0,bottom:0},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:10},tickFormatter:Ar}),s.jsx(Ce,{tick:{fontSize:10},tickFormatter:a=>(a/1e3).toFixed(0)+"k",width:36}),s.jsx(He,{formatter:(a,o)=>[Number(a).toLocaleString(void 0,{minimumFractionDigits:2}),o],labelFormatter:Ar}),r!=null&&s.jsx(yn,{y:r,stroke:"#c62828",strokeDasharray:"2 2"}),s.jsx(pt,{type:"monotone",dataKey:"equity",stroke:"#1565c0",strokeWidth:2,dot:!1,name:"Total equity"}),i&&s.jsx(pt,{type:"monotone",dataKey:"cash",stroke:"#2e7d32",strokeWidth:1.5,dot:!1,strokeDasharray:"4 3",name:"Cash"})]})})}function dQ({data:e,drawdownStopPct:t}){if(!Array.isArray(e)||e.length===0)return s.jsx("p",{className:"mini-grid-empty",children:"No drawdown data"});const n=t!=null?-Math.abs(Number(t)):null,r=Math.min(...e.map(a=>a.drawdown_pct??0)),i=n!=null?Math.min(r,n)-1:r-1;return s.jsx(We,{width:"100%",height:160,children:s.jsxs(si,{data:e,margin:{top:6,right:6,left:0,bottom:0},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:10},tickFormatter:Ar}),s.jsx(Ce,{tick:{fontSize:10},tickFormatter:a=>a+"%",width:40,domain:[i,0],reversed:!0}),s.jsx(He,{formatter:a=>[a!=null?Number(a).toFixed(2)+"%":"","Drawdown"],labelFormatter:Ar}),n!=null&&s.jsx(yn,{y:n,stroke:"#c62828",strokeDasharray:"4 3",label:{value:"Stop",position:"right",fontSize:9,fill:"#c62828"}}),r<-.01&&s.jsx(yn,{y:r,stroke:"#6a1b9a",strokeDasharray:"3 3",label:{value:`Max ${r.toFixed(1)}%`,position:"right",fontSize:9,fill:"#6a1b9a"}}),s.jsx(pt,{type:"monotone",dataKey:"drawdown_pct",stroke:"#6a1b9a",strokeWidth:2,dot:!1,name:"Drawdown %"})]})})}function fQ({data:e}){const t=(e==null?void 0:e[0])!=null&&"day"in e[0]?"day":"ts";if(!Array.isArray(e)||e.length===0)return s.jsx("p",{className:"mini-grid-empty",children:"No trades in period"});if(e.some(i=>i.buy_count!=null||i.sell_count!=null))return s.jsx(We,{width:"100%",height:160,children:s.jsxs(mn,{data:e,margin:{top:6,right:6,left:0,bottom:0},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:t,tick:{fontSize:10},tickFormatter:Ar}),s.jsx(Ce,{tick:{fontSize:10},width:28,allowDecimals:!1}),s.jsx(He,{labelFormatter:Ar}),s.jsx(mt,{dataKey:"buy_count",stackId:"trades",fill:"#1565c0",name:"Buy",radius:[0,0,0,0]}),s.jsx(mt,{dataKey:"sell_count",stackId:"trades",fill:"#c62828",name:"Sell",radius:[2,2,0,0]})]})});const r=(e==null?void 0:e[0])!=null&&"trades_count"in e[0]?"trades_count":"tradesCount";return s.jsx(We,{width:"100%",height:160,children:s.jsxs(mn,{data:e,margin:{top:6,right:6,left:0,bottom:0},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:t,tick:{fontSize:10},tickFormatter:Ar}),s.jsx(Ce,{tick:{fontSize:10},width:28}),s.jsx(He,{formatter:i=>[i,"Trades"],labelFormatter:Ar}),s.jsx(mt,{dataKey:r,fill:"#2e7d32",radius:[2,2,0,0],name:"Trades"})]})})}function hQ({data:e}){const t=(e==null?void 0:e[0])!=null&&"day"in e[0]?"day":"ts",n=(e==null?void 0:e[0])!=null&&"gate_state"in e[0]?"gate_state":"gateState";if(!Array.isArray(e)||e.length===0)return s.jsx("p",{className:"mini-grid-empty",children:"No regime data"});const r=[];let i=null;for(let a=0;a<e.length;a++){const o=e[a][n]||e[a].gate_state||"SAFE";o!==i?(r.push({start:a,end:a,state:o}),i=o):r[r.length-1].end=a}return s.jsxs("div",{className:"mini-grid-regime-wrap",title:"Risk state by day (SAFE / CAUTION / STOPPED)",children:[s.jsx("div",{className:"mini-grid-regime-strip",children:r.map((a,o)=>s.jsx("div",{className:"mini-grid-regime-segment",style:{width:`${(a.end-a.start+1)/e.length*100}%`,backgroundColor:Lc[a.state]||"#9e9e9e"},title:`${Ar(e[a.start][t]??e[a.start].ts)}  ${uQ[a.state]||a.state}`},o))}),s.jsxs("div",{className:"mini-grid-regime-legend",children:[s.jsx("span",{style:{color:Lc.SAFE},children:"SAFE"}),s.jsx("span",{style:{color:Lc.CAUTION},children:"CAUTION"}),s.jsx("span",{style:{color:Lc.STOPPED},children:"STOPPED"})]})]})}function oD({titlePrefix:e,dateRange:t={},series:n={},thresholds:r={},events:i=[],headerLine:a,explainSentence:o}){const l=n.equity??[],u=n.drawdown??[],c=n.tradesPerDay??[],d=n.regime??[],f=t.start_ts??t.startTs,h=t.end_ts??t.endTs;return s.jsxs("div",{className:"portfolio-mini-grid",children:[(a||e||o)&&s.jsxs("div",{className:"mini-grid-header",children:[a&&s.jsx("p",{className:"mini-grid-header-line",children:a}),!a&&e&&s.jsxs("h3",{className:"mini-grid-title",children:[e,(f||h)&&s.jsxs("span",{className:"mini-grid-dates",children:["  ",Ar(f),"  ",h?Ar(h):"now"]})]}),o&&s.jsx("p",{className:"mini-grid-explain",children:o})]}),s.jsxs("div",{className:"mini-grid-grid",children:[s.jsxs("div",{className:"mini-grid-cell",children:[s.jsx(Mc,{title:"Equity & Cash",tooltip:"Total equity (solid blue) and available cash (dashed green) over time. Dashed red line = bust threshold if set."}),s.jsx(cQ,{data:l,thresholds:r,events:i})]}),s.jsxs("div",{className:"mini-grid-cell",children:[s.jsx(Mc,{title:"Drawdown",tooltip:"Drawdown %. Horizontal line = drawdown stop threshold; breach marks entries blocked."}),s.jsx(dQ,{data:u,drawdownStopPct:r.drawdown_stop_pct})]}),s.jsxs("div",{className:"mini-grid-cell",children:[s.jsx(Mc,{title:"Trades per day",tooltip:"Trades executed each day  blue = buys, red = sells."}),s.jsx(fQ,{data:c})]}),s.jsxs("div",{className:"mini-grid-cell",children:[s.jsx(Mc,{title:"Risk regime",tooltip:"Risk state by day: SAFE (green), CAUTION (amber), STOPPED (red)."}),s.jsx(hQ,{data:d})]})]})]})}function US(e){return e?String(e).slice(0,10):""}function pQ(e,t){if(!e)return"";const n=new Date(e),r=t?new Date(t):new Date,i=Math.ceil((r-n)/(1e3*60*60*24));return i<1?"< 1 day":i===1?"1 day":`${i} days`}function mQ({endReason:e,status:t,distributionAmount:n}){return t==="ACTIVE"?s.jsx("span",{className:"lifecycle-badge lifecycle-badge--active",children:" Active"}):e==="PROFIT_TARGET_HIT"?s.jsx("span",{className:"lifecycle-badge lifecycle-badge--crystallized",title:"Profit target hit, gains crystallized",children:" Crystallized"}):e==="DRAWDOWN_STOP"?s.jsx("span",{className:"lifecycle-badge lifecycle-badge--stopped",title:"Drawdown stop triggered",children:" Stopped"}):e==="MANUAL_RESET"?s.jsx("span",{className:"lifecycle-badge lifecycle-badge--reset",title:"Manually reset by user",children:" Reset"}):e==="BUST"?s.jsx("span",{className:"lifecycle-badge lifecycle-badge--bust",title:"Bust threshold hit",children:" Bust"}):s.jsx("span",{className:"lifecycle-badge lifecycle-badge--ended",children:"Ended"})}function gQ({episode:e,portfolioId:t,isActive:n}){const[r,i]=m.useState(!1),[a,o]=m.useState(null),[l,u]=m.useState(!1),[c,d]=m.useState(null),f=(e==null?void 0:e.episode_id)??(e==null?void 0:e.EPISODE_ID),h=(e==null?void 0:e.start_ts)??(e==null?void 0:e.START_TS)??"",p=(e==null?void 0:e.end_ts)??(e==null?void 0:e.END_TS)??null,g=(e==null?void 0:e.status)??(e==null?void 0:e.STATUS)??"",y=(e==null?void 0:e.end_reason)??(e==null?void 0:e.END_REASON)??null,x=(e==null?void 0:e.profile_name)??(e==null?void 0:e.PROFILE_NAME)??"",v=(e==null?void 0:e.total_return)??(e==null?void 0:e.total_return),b=(e==null?void 0:e.max_drawdown)??(e==null?void 0:e.MAX_DRAWDOWN),w=(e==null?void 0:e.trades_count)??(e==null?void 0:e.trades_count)??0,j=(e==null?void 0:e.win_days)??(e==null?void 0:e.win_days),_=(e==null?void 0:e.loss_days)??(e==null?void 0:e.loss_days);n&&(e==null||e.risk_status);const k=(e==null?void 0:e.distribution_amount)??(e==null?void 0:e.DISTRIBUTION_AMOUNT),E=k!=null&&Number(k)>0;m.useEffect(()=>{if(!r||!t||!f||a!=null)return;let S=!1;return u(!0),d(null),fetch(`${J}/portfolios/${t}/episodes/${f}`).then(P=>{if(!P.ok)throw new Error(P.statusText);return P.json()}).then(P=>{S||(o(P),u(!1))}).catch(P=>{S||(d(P.message),u(!1))}),()=>{S=!0}},[r,t,f,a]);const A=pQ(h,p);let T="";return y?y==="PROFIT_TARGET_HIT"?T=E?`Ran for ${A}. Profit target achieved  ${Number(k).toLocaleString(void 0,{minimumFractionDigits:2})} crystallized and withdrawn.`:`Ran for ${A}. Profit target achieved.`:y==="DRAWDOWN_STOP"?T=`Ran for ${A}. Drawdown protection triggered  entries blocked to prevent further losses.`:y==="MANUAL_RESET"?T=`Ran for ${A}. Manually reset by user.`:y==="BUST"?T=`Ran for ${A}. Bust threshold hit  portfolio liquidated.`:T=`Ran for ${A}. Ended: ${y}. Profile: ${x}.`:T=`Active episode running for ${A}. Profile: ${x}.`,s.jsxs("div",{className:`episode-card ${r?"episode-card--expanded":""} ${n?"episode-card--active":""}`,children:[s.jsxs("button",{type:"button",className:"episode-card-header",onClick:()=>i(!r),"aria-expanded":r,children:[s.jsxs("span",{className:"episode-card-id",children:["Episode ",f]}),s.jsxs("span",{className:"episode-card-dates",title:"Date range",children:[US(h),"  ",p?US(p):"now"]}),s.jsx(mQ,{endReason:y,status:g,distributionAmount:k}),E&&s.jsxs("span",{className:"episode-card-chip episode-card-chip--paidout",title:"Profits withdrawn at end of episode",children:[" ",Number(k).toLocaleString(void 0,{minimumFractionDigits:2})]}),s.jsx("span",{className:"episode-card-profile",children:x}),s.jsx("span",{className:"episode-card-expand-icon",children:r?"":""})]}),s.jsx("p",{className:"episode-card-story",children:T}),s.jsxs("dl",{className:"episode-card-stats",children:[s.jsx("dt",{children:"Start equity"}),s.jsx("dd",{children:(e==null?void 0:e.start_equity)!=null?Number(e.start_equity).toLocaleString(void 0,{minimumFractionDigits:2}):(a==null?void 0:a.start_equity)!=null?Number(a.start_equity).toLocaleString(void 0,{minimumFractionDigits:2}):""}),s.jsx("dt",{children:"End equity"}),s.jsx("dd",{children:(a==null?void 0:a.end_equity)!=null?Number(a.end_equity).toLocaleString(void 0,{minimumFractionDigits:2}):""}),s.jsx("dt",{children:"Total return"}),s.jsx("dd",{children:v!=null?(Number(v)*100).toFixed(2)+"%":""}),s.jsx("dt",{children:"Max drawdown"}),s.jsx("dd",{children:b!=null?Number(b).toFixed(2)+"%":""}),s.jsx("dt",{children:"Trades"}),s.jsx("dd",{children:w}),s.jsx("dt",{children:"Win / Loss days"}),s.jsx("dd",{children:j!=null&&_!=null?`${j} / ${_}`:""}),s.jsx("dt",{children:"Peak open symbols"}),s.jsx("dd",{children:(a==null?void 0:a.peak_open_symbols)??(e==null?void 0:e.peak_open_symbols)??""})]}),r&&s.jsxs("div",{className:"episode-card-charts",children:[l&&s.jsx(Ot,{}),c&&s.jsx("p",{className:"episode-chart-error",children:c}),a&&!l&&!c&&s.jsx(oD,{titlePrefix:`Episode #${f}`,dateRange:{start_ts:a.start_ts,end_ts:a.end_ts},series:{equity:a.equity_series??[],drawdown:a.drawdown_series??[],tradesPerDay:a.trades_per_day??[],regime:a.regime_per_day??[]},thresholds:a.thresholds??{},events:a.events??[]})]})]})}function WS(){var A,T,S,P,C,B,M;const{portfolioId:e}=yx(),t=(A=sD("ui.status_badge"))==null?void 0:A.long,[n,r]=m.useState([]),[i,a]=m.useState(null),[o,l]=m.useState(null),[u,c]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState(30),[g,y]=m.useState(!1),[x,v]=m.useState([]),[b,w]=m.useState(null),[j,_]=m.useState(null),[k,E]=m.useState(null);if(m.useEffect(()=>{let D=!1;async function q(){c(!0),f(null);try{if(e){const z=new URLSearchParams;z.set("lookback_days",String(h));const[$,R,N,Y,U,O]=await Promise.all([fetch(`${J}/portfolios`).then(re=>{if(!re.ok)throw new Error(re.statusText);return re.json()}),fetch(`${J}/portfolios/${e}`).then(re=>{if(!re.ok)throw new Error(re.statusText);return re.json()}),fetch(`${J}/portfolios/${e}/snapshot?${z.toString()}`).then(re=>{if(!re.ok)throw new Error(re.statusText);return re.json()}),fetch(`${J}/portfolios/${e}/episodes`).then(re=>re.ok?re.json():[]).catch(()=>[]),fetch(`${J}/portfolios/${e}/timeline`).then(re=>re.ok?re.json():null).catch(()=>null),fetch(`${J}/market-timeline/diagnostics?portfolio_id=${e}`).then(re=>re.ok?re.json():null).catch(()=>null)]);if(D)return;r($),a(R),l(N),v(Array.isArray(Y)?Y:[]),w(U),E(O);const ne=N==null?void 0:N.active_episode,ge=(ne==null?void 0:ne.episode_id)??(ne==null?void 0:ne.EPISODE_ID);ge&&!D?fetch(`${J}/portfolios/${e}/episodes/${ge}`).then(re=>re.ok?re.json():null).then(re=>{D||_(re)}).catch(()=>{D||_(null)}):D||_(null)}else{const z=await fetch(`${J}/portfolios`);if(!z.ok)throw new Error(z.statusText);const $=await z.json();D||(r($),a(null),l(null),v([]),w(null),_(null))}}catch(z){D||f(z.message)}finally{D||c(!1)}}return q(),()=>{D=!0}},[e,h]),u)return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:e?"Portfolio":"Portfolios"}),s.jsx(Ot,{})]});if(d)return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:e?"Portfolio":"Portfolios"}),e&&s.jsx("p",{children:s.jsx(xe,{to:"/portfolios",children:" Back to list"})}),s.jsx(Zn,{message:d})]});if(e&&i){const D=o==null?void 0:o.active_episode,q=D?`Episode ${D.episode_id??D.EPISODE_ID??""} since ${(D.start_ts??D.START_TS??"").slice(0,10)}`:null,z=o==null?void 0:o.active_episode,$=((z==null?void 0:z.start_ts)??(z==null?void 0:z.START_TS)??"").slice(0,10),R=(z==null?void 0:z.profile_id)??(z==null?void 0:z.PROFILE_ID),N=o==null?void 0:o.episode_risk_state,Y=(N==null?void 0:N.risk_label)??((T=o==null?void 0:o.risk_gate)==null?void 0:T.risk_label)??"NORMAL",U=(N==null?void 0:N.episode_drawdown_breached)??!1;let O="SAFE";N!=null&&N.entries_blocked?O="STOPPED":U||Y==="CAUTION"?O="CAUTION":Y==="DEFENSIVE"&&(O="STOPPED");let ne=((S=o==null?void 0:o.risk_gate)==null?void 0:S.reason_text)??"Portfolio is within safe limits.";if(N&&U&&O!=="STOPPED"){const K=((P=N.episode_drawdown_pct)==null?void 0:P.toFixed(1))??"?",te=((C=N.episode_drawdown_stop_pct)==null?void 0:C.toFixed(1))??"?";ne=`Episode drawdown at ${K}% (threshold: ${te}%). Approaching risk limit.`}const ge=z&&$?`Active since ${$}  Profile ${R??""}  ${O}`:null,re=o==null?void 0:o.portfolio_simulated_through_ts,me=o==null?void 0:o.pipeline_last_run_at,Fe=o==null?void 0:o.latest_available_bar_date,W=re?re.slice(0,10):null,ie=me?new Date(me).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null,Z=W&&Fe?W<Fe:!1,I=re||me;return s.jsxs(s.Fragment,{children:[s.jsxs("h1",{children:["Portfolio: ",i.NAME]}),q&&s.jsx("p",{className:"portfolio-episode-header",children:q}),s.jsx("div",{className:"portfolio-freshness-header",children:Z?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"freshness-badge freshness-stale",children:"PENDING UPDATE"}),s.jsxs("span",{className:"freshness-text",children:["Simulated through ",W,"  New market date available (",Fe,")"]})]}):I?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"freshness-badge freshness-current",children:"CURRENT"}),s.jsxs("span",{className:"freshness-text",children:[W&&`Simulated through ${W}`,W&&ie&&"  ",ie&&`Pipeline ran at ${ie}`]})]}):null}),s.jsx("p",{children:s.jsx(xe,{to:"/portfolios",children:" Back to list"})}),z&&s.jsxs("section",{className:"portfolio-active-period","aria-label":"Active period dashboard",children:[(ge||ne)&&s.jsxs(s.Fragment,{children:[ge&&s.jsx("p",{className:"mini-grid-header-line",children:ge}),ne&&s.jsx("p",{className:"mini-grid-explain",children:ne})]}),j?s.jsx(oD,{titlePrefix:"",dateRange:{start_ts:z.start_ts??z.START_TS,end_ts:null},series:{equity:j.equity_series??[],drawdown:j.drawdown_series??[],tradesPerDay:j.trades_per_day??[],regime:j.regime_per_day??[]},thresholds:j.thresholds??{},events:j.events??[]}):s.jsx("p",{className:"portfolio-active-period-loading",children:"Loading analytics"})]}),s.jsx("h2",{children:"Header"}),s.jsxs("div",{className:"kpi-cards",children:[i.STARTING_CASH!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Starting cash ",s.jsx(ee,{scope:"portfolio",variant:"short"},"starting_cash")]}),s.jsx("span",{className:"kpi-value",children:Number(i.STARTING_CASH).toLocaleString()})]}),((M=(B=o==null?void 0:o.cards)==null?void 0:B.cash_and_exposure)==null?void 0:M.cash)!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsx("span",{className:"kpi-label",children:"Current cash"}),s.jsx("span",{className:"kpi-value",children:Number(o.cards.cash_and_exposure.cash).toLocaleString(void 0,{minimumFractionDigits:2})})]}),i.FINAL_EQUITY!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Final equity ",s.jsx(ee,{scope:"portfolio",variant:"short"},"final_equity")]}),s.jsx("span",{className:"kpi-value",children:Number(i.FINAL_EQUITY).toLocaleString()})]}),i.TOTAL_RETURN!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Total return ",s.jsx(ee,{scope:"portfolio",variant:"short"},"total_return")]}),s.jsxs("span",{className:"kpi-value",children:[Number(i.TOTAL_RETURN*100).toFixed(2),"%"]})]}),i.MAX_DRAWDOWN!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Max drawdown ",s.jsx(ee,{scope:"portfolio",variant:"short"},"max_drawdown")]}),s.jsxs("span",{className:"kpi-value",children:[Number(i.MAX_DRAWDOWN*100).toFixed(2),"%"]})]}),i.WIN_DAYS!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Win days ",s.jsx(ee,{scope:"portfolio",variant:"short"},"win_days")]}),s.jsx("span",{className:"kpi-value",children:i.WIN_DAYS})]}),i.LOSS_DAYS!=null&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Loss days ",s.jsx(ee,{scope:"portfolio",variant:"short"},"loss_days")]}),s.jsx("span",{className:"kpi-value",children:i.LOSS_DAYS})]}),i.STATUS&&s.jsxs("div",{className:"kpi-card",children:[s.jsxs("span",{className:"kpi-label",children:["Status ",s.jsx(ee,{scope:"portfolio",variant:"short"},"status")]}),s.jsx("span",{className:"kpi-value status-badge",title:t,children:i.STATUS})]})]}),o&&(()=>{var H,L,G,ce,ye,_e,jn,Ur,tr,Gi,qi,en,hi,nr,Ob,Cb,Ib,Db;const K=o.cards||{};K.cash_and_exposure;const te=K.open_positions??o.positions??[];K.closed_this_bar_positions??o.closed_this_bar_positions;const fe=Array.isArray(o.trades)?o.trades:K.recent_trades??[],ue=o.trades_total??K.trades_total??0,je=o.last_trade_ts??K.last_trade_ts??null,nt=o.risk_gate||{},Be=o.risk_strategy||null,Ye=nt.risk_label||"NORMAL",De=nt.mode||"ALLOW_ENTRIES",be=nt.entries_allowed!==!1;nt.exits_allowed;const Ie=nt.reason_text??"Portfolio is within safe limits.",he=Array.isArray(nt.what_to_do_now)?nt.what_to_do_now:[];return s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:"Portfolio Overview"}),s.jsx("p",{className:"portfolio-overview-intro",children:"Where do we stand right now? Snapshot as of last simulation run."}),s.jsxs("p",{className:"portfolio-overview-semantics",children:["Positions are current holdings (snapshot); trades are execution history (events).",s.jsx(ee,{scope:"positions",entryKey:"snapshot",variant:"short"}),s.jsx(ee,{scope:"trades",entryKey:"event",variant:"short"})]}),s.jsxs("section",{className:"portfolio-cards portfolio-cards--two-col","aria-label":"Portfolio snapshot cards",children:[s.jsxs("div",{id:"portfolio-positions",className:"portfolio-card portfolio-card-positions",children:[s.jsxs("h3",{className:"portfolio-card-title",children:["Open Positions ",s.jsx(ee,{scope:"positions",entryKey:"symbol",variant:"short"})]}),(K.as_of_ts!=null||K.current_bar_index!=null)&&s.jsxs("p",{className:"portfolio-positions-as-of",title:"Snapshot date and current bar index (daily bars)",children:[K.as_of_ts!=null&&s.jsxs("span",{children:["As of ",String(K.as_of_ts).slice(0,10)]}),K.current_bar_index!=null&&s.jsxs("span",{children:[K.as_of_ts!=null?"  ":"","Bar ",K.current_bar_index]})]}),Array.isArray(te)&&te.length>0?s.jsx("div",{className:"portfolio-card-table-wrap",children:s.jsxs("table",{className:"portfolio-card-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Symbol"}),s.jsx("th",{children:"Qty"}),s.jsx("th",{children:"Mkt Value"}),s.jsx("th",{children:"Cost"}),s.jsx("th",{children:"P&L"}),s.jsx("th",{title:"Calendar date when this position is scheduled to close",children:"Closes"})]})}),s.jsx("tbody",{children:[...te].sort((V,ot)=>{const Ke=V.HOLD_UNTIL_INDEX??V.hold_until_index??0,Fn=ot.HOLD_UNTIL_INDEX??ot.hold_until_index??0;return Number(Ke)-Number(Fn)}).slice(0,20).map((V,ot)=>{const Ke=V.UNREALIZED_PNL??V.unrealized_pnl,Fn=V.UNREALIZED_PNL_PCT??V.unrealized_pnl_pct,Ss=V.MARKET_VALUE??V.market_value,La=V.COST_BASIS??V.cost_basis,_n=Ke!=null&&Number(Ke)>=0;return s.jsxs("tr",{children:[s.jsxs("td",{className:"pos-symbol",children:[s.jsx("span",{className:"pos-symbol-name",children:V.SYMBOL??V.symbol}),s.jsx("span",{className:"pos-symbol-meta",children:V.MARKET_TYPE??V.market_type})]}),s.jsx("td",{className:"num-cell",children:V.QUANTITY??V.quantity}),s.jsx("td",{children:Ss!=null?Number(Ss).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""}),s.jsx("td",{children:La!=null?Number(La).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""}),s.jsx("td",{className:`pnl-cell ${Ke!=null?_n?"pnl-up":"pnl-down":""}`,children:Ke!=null?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"pnl-arrow",children:_n?"":""}),s.jsx("span",{className:"pnl-value",children:(_n?"+":"")+Number(Ke).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),Fn!=null&&s.jsxs("span",{className:"pnl-pct",children:[(_n?"+":"")+Number(Fn).toFixed(2),"%"]})]}):""}),s.jsx("td",{className:"pos-closes",children:V.hold_until_ts?String(V.hold_until_ts).slice(0,10):V.HOLD_UNTIL_INDEX??V.hold_until_index??""})]},ot)})})]})}):s.jsx(ht,{title:"No open positions",action:"Run pipeline or wait for next run.",explanation:"This portfolio has no open positions right now. Positions are the assets (e.g. stocks) the strategy currently holds.",reasons:["The run has not opened any positions yet.","Data may be from a time before any trades.","The risk gate may be blocking new entries."]})]}),s.jsxs("div",{className:"portfolio-card portfolio-card-trades",children:[s.jsxs("h3",{className:"portfolio-card-title",children:["Trades ",s.jsx(ee,{scope:"trades",entryKey:"event",variant:"short"})]}),s.jsxs("div",{className:"portfolio-trades-lookback",children:[s.jsxs("label",{children:["Lookback",s.jsxs("select",{value:h,onChange:V=>p(Number(V.target.value)),"aria-label":"Trades lookback days",children:[s.jsx("option",{value:1,children:"1 day"}),s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:30,children:"30 days"}),s.jsx("option",{value:-1,children:"All"})]})]}),ue>0&&s.jsxs("span",{className:"portfolio-trades-total",children:[ue," total"]})]}),fe.length>0?s.jsx("div",{className:"portfolio-card-table-wrap",children:s.jsxs("table",{className:"portfolio-card-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Symbol"}),s.jsx("th",{children:"Side"}),s.jsx("th",{children:"Qty"}),s.jsx("th",{children:"Notional"}),s.jsx("th",{children:"P&L"})]})}),s.jsx("tbody",{children:fe.slice(0,20).map((V,ot)=>{const Ke=(V.SIDE??V.side??"").toUpperCase(),Fn=V.PRICE??V.price,Ss=V.QUANTITY??V.quantity,La=Fn!=null&&Ss!=null?Number(Fn)*Number(Ss):V.NOTIONAL??V.notional,_n=V.REALIZED_PNL??V.realized_pnl,Lp=La!=null&&_n!=null?Number(La)-Number(_n):null,Mp=Lp!=null&&Lp>0&&_n!=null?Number(_n)/Lp*100:null,$p=Ke==="SELL",zp=_n!=null&&Number(_n)>=0;return s.jsxs("tr",{className:`trade-row trade-row--${Ke.toLowerCase()} ${V.from_last_run?"portfolio-trade-from-last-run":""}`,title:V.from_last_run?"From latest run":void 0,children:[s.jsxs("td",{className:"trade-symbol",children:[s.jsx("span",{className:"trade-symbol-name",children:V.SYMBOL??V.symbol}),s.jsx("span",{className:"trade-symbol-date",children:V.TRADE_TS??V.trade_ts?String(V.TRADE_TS??V.trade_ts).slice(0,10):""})]}),s.jsx("td",{children:s.jsx("span",{className:`trade-side-badge trade-side-badge--${Ke.toLowerCase()}`,children:Ke})}),s.jsx("td",{className:"num-cell",children:Ss}),s.jsx("td",{children:La!=null?Number(La).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""}),s.jsx("td",{className:`pnl-cell ${$p&&_n!=null?zp?"pnl-up":"pnl-down":""}`,children:$p&&_n!=null?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"pnl-arrow",children:zp?"":""}),s.jsx("span",{className:"pnl-value",children:(zp?"+":"")+Number(_n).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),Mp!=null&&s.jsxs("span",{className:"pnl-pct",children:[(Number(Mp)>=0?"+":"")+Number(Mp).toFixed(2),"%"]})]}):$p?"":""})]},ot)})})]})}):ue>0?s.jsxs("p",{className:"portfolio-trades-no-range",children:["No trades in this range. Last trade: ",je!=null?String(je).slice(0,19):""]}):s.jsx(ht,{title:"No trades",action:"Run pipeline or wait for next run.",explanation:"Trades are execution history (events). None have been recorded for this portfolio yet.",reasons:["The run may not have executed any trades yet.","Data may be from before the first trade.","Score or threshold filters may have excluded all signals.","The risk gate may be blocking new entries."]})]}),s.jsxs("div",{className:"portfolio-card portfolio-card-risk-gate",children:[s.jsxs("h3",{className:"portfolio-card-title risk-gate-headline",title:((H=Re("risk_gate","mode"))==null?void 0:H.short)??"",children:["Risk Gate:"," ",s.jsxs("span",{className:"risk-gate-mode risk-gate-mode--current",children:[Ye==="NORMAL"&&" Normal",Ye==="CAUTION"&&" Caution",Ye==="DEFENSIVE"&&" Defensive",Ye!=="NORMAL"&&Ye!=="CAUTION"&&Ye!=="DEFENSIVE"&&" Normal"]}),s.jsx(ee,{scope:"risk_gate",entryKey:"mode",variant:"short"})]}),Be&&s.jsxs("div",{className:"risk-strategy-block",children:[s.jsx("p",{className:"risk-strategy-summary",children:Be.summary}),Array.isArray(Be.rules)&&Be.rules.length>0&&s.jsx("div",{className:"risk-strategy-rules",role:"list",children:Be.rules.map(V=>s.jsxs("div",{className:"risk-strategy-rule",role:"listitem",children:[s.jsx("span",{className:"risk-strategy-rule-label",title:V.tooltip??void 0,children:V.label}),s.jsx("span",{className:"risk-strategy-rule-value",children:V.value})]},V.key))}),Be.state&&s.jsxs("div",{className:"risk-strategy-state",children:[s.jsx("span",{className:`risk-strategy-chip risk-strategy-chip--${(Be.state.state_label||"SAFE").toLowerCase()}`,children:Be.state.state_label??"SAFE"}),Be.state.reason_text&&s.jsx("span",{className:"risk-strategy-reason",children:Be.state.reason_text})]})]}),s.jsx("p",{className:"risk-gate-subtext",children:De==="ALLOW_EXITS_ONLY"?"Exits only":"Entries allowed"}),s.jsxs("dl",{className:"portfolio-card-dl risk-gate-matrix",children:[s.jsxs("dt",{children:["Open new positions ",s.jsx(ee,{scope:"risk_gate",entryKey:"entries_allowed",variant:"short"})]}),s.jsx("dd",{children:be?"Allowed":"Blocked"}),s.jsxs("dt",{children:["Close/reduce positions ",s.jsx(ee,{scope:"risk_gate",entryKey:"exits_allowed",variant:"short"})]}),s.jsx("dd",{children:"Allowed"})]}),s.jsxs("p",{className:"risk-gate-reason",title:((L=Re("risk_gate","reason_text"))==null?void 0:L.short)??"",children:[Ie,s.jsx(ee,{scope:"risk_gate",entryKey:"reason_text",variant:"short"})]}),he.length>0&&s.jsxs("div",{className:"risk-gate-what-to-do",title:((G=Re("risk_gate","what_to_do_now"))==null?void 0:G.short)??"",children:[s.jsx("span",{className:"risk-gate-what-to-do-label",children:"What to do now"}),s.jsx(ee,{scope:"risk_gate",entryKey:"what_to_do_now",variant:"short"}),s.jsx("ul",{className:"risk-gate-bullets",children:he.map((V,ot)=>s.jsx("li",{children:V},ot))})]}),s.jsxs("div",{className:"risk-gate-actions",children:[s.jsx(xe,{to:"/suggestions",className:"risk-gate-link",children:"Open Suggestions"}),s.jsx("a",{href:"#portfolio-positions",className:"risk-gate-link",children:"View Positions"}),s.jsx("button",{type:"button",className:"risk-gate-link risk-gate-link--button",onClick:()=>y(!0),children:"How to restart episode"})]})]}),g&&s.jsx("div",{className:"risk-gate-modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"restart-modal-title",children:s.jsxs("div",{className:"risk-gate-modal",children:[s.jsx("h4",{id:"restart-modal-title",children:"How to restart a portfolio episode"}),s.jsx("p",{children:"Run the script:"}),s.jsx("code",{className:"risk-gate-modal-script",children:"MIP/SQL/scripts/restart_portfolio_episode.sql"}),s.jsxs("p",{children:["See ",s.jsx("strong",{children:"Restarting a portfolio episode"})," in the Runbook (docs/ux/73_UX_RUNBOOK.md) for full steps."]}),s.jsx("button",{type:"button",className:"risk-gate-modal-close",onClick:()=>y(!1),children:"Close"})]})}),k&&s.jsxs("div",{className:"portfolio-card portfolio-card-proposer-diagnostics",children:[s.jsx("h3",{className:"portfolio-card-title",children:"Proposer Diagnostics"}),s.jsx("p",{className:"proposer-diagnostics-subtitle",children:"Why proposals may be zero or low"}),s.jsxs("div",{className:"proposer-diagnostics-summary",children:[s.jsxs("div",{className:"proposer-stat",children:[s.jsx("span",{className:"proposer-stat-label",children:"Raw Signals (latest bar)"}),s.jsx("span",{className:`proposer-stat-value ${((ce=k.current_state)==null?void 0:ce.candidate_count_raw)>0?"positive":"zero"}`,children:((ye=k.current_state)==null?void 0:ye.candidate_count_raw)??0})]}),s.jsxs("div",{className:"proposer-stat",children:[s.jsx("span",{className:"proposer-stat-label",children:"Trusted Signals"}),s.jsx("span",{className:`proposer-stat-value ${((_e=k.current_state)==null?void 0:_e.candidate_count_trusted)>0?"positive":"zero"}`,children:((jn=k.current_state)==null?void 0:jn.candidate_count_trusted)??0})]}),s.jsxs("div",{className:"proposer-stat",children:[s.jsx("span",{className:"proposer-stat-label",children:"Trusted Patterns"}),s.jsx("span",{className:`proposer-stat-value ${((Ur=k.current_state)==null?void 0:Ur.trusted_pattern_count)>0?"positive":"zero"}`,children:((tr=k.current_state)==null?void 0:tr.trusted_pattern_count)??0})]}),s.jsxs("div",{className:"proposer-stat",children:[s.jsx("span",{className:"proposer-stat-label",children:"Rec TS = Bar TS?"}),s.jsx("span",{className:`proposer-stat-value ${(Gi=k.current_state)!=null&&Gi.rec_ts_matches_bar_ts?"positive":"warning"}`,children:(qi=k.current_state)!=null&&qi.rec_ts_matches_bar_ts?"Yes":"No"})]})]}),((en=k.proposer_events)==null?void 0:en.length)>0&&(()=>{var ot,Ke;const V=k.proposer_events[0];return s.jsxs("div",{className:"proposer-latest-event",children:[s.jsx("h4",{children:"Latest Proposer Run"}),s.jsxs("dl",{className:"proposer-event-details",children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{className:V.status==="SUCCESS"?"positive":"neutral",children:V.status}),s.jsx("dt",{children:"Raw candidates"}),s.jsx("dd",{children:V.candidate_count_raw??0}),s.jsx("dt",{children:"Trusted candidates"}),s.jsx("dd",{children:V.candidate_count_trusted??0}),s.jsx("dt",{children:"Proposals inserted"}),s.jsx("dd",{children:V.rows_affected??0}),V.no_candidates_reason&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Reason for zero"}),s.jsx("dd",{className:"reason-code",children:V.no_candidates_reason.replace(/_/g," ")})]}),V.entries_blocked&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Entries blocked"}),s.jsx("dd",{className:"warning",children:V.stop_reason||"Yes"})]})]}),V.diagnostics&&s.jsxs("div",{className:"proposer-diagnostics-extra",children:[s.jsx("span",{className:"extra-label",children:"Bar TS:"})," ",((ot=V.diagnostics.latest_bar_ts)==null?void 0:ot.slice(0,10))??""," |",s.jsx("span",{className:"extra-label",children:" Rec TS:"})," ",((Ke=V.diagnostics.latest_rec_ts)==null?void 0:Ke.slice(0,10))??""]})]})})(),((hi=k.rec_freshness_by_market_type)==null?void 0:hi.length)>0&&s.jsxs("div",{className:"proposer-rec-freshness",children:[s.jsx("h4",{children:"Recommendation Freshness by Market Type"}),s.jsxs("table",{className:"proposer-freshness-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Market Type"}),s.jsx("th",{children:"Count"}),s.jsx("th",{children:"Latest TS"})]})}),s.jsx("tbody",{children:k.rec_freshness_by_market_type.map((V,ot)=>{var Ke,Fn;return s.jsxs("tr",{children:[s.jsx("td",{children:V.MARKET_TYPE||V.market_type}),s.jsx("td",{children:V.CNT||V.cnt}),s.jsx("td",{children:((Fn=(Ke=V.MAX_TS||V.max_ts)==null?void 0:Ke.slice)==null?void 0:Fn.call(Ke,0,10))||V.MAX_TS||V.max_ts})]},ot)})})]})]}),s.jsx("p",{className:"proposer-diagnostics-hint",children:s.jsx(xe,{to:"/market-timeline",children:"View full Market Timeline "})})]})]}),b&&(((nr=b.per_episode)==null?void 0:nr.length)>0||((Ob=b.cumulative_series)==null?void 0:Ob.length)>0)&&s.jsxs("section",{className:"portfolio-cumulative-performance","aria-label":"Cumulative performance",children:[s.jsx("h2",{children:"Cumulative Performance"}),s.jsx("p",{className:"cumulative-intro",children:"Your investment journey across all episodes. Click a bar to jump to that episode."}),s.jsxs("div",{className:"cumulative-kpi-row",children:[s.jsxs("div",{className:"cumulative-kpi-tile cumulative-kpi-tile--paidout",children:[s.jsx("span",{className:"cumulative-kpi-icon",children:""}),s.jsx("span",{className:"cumulative-kpi-label",children:"Total Paid Out"}),s.jsxs("span",{className:"cumulative-kpi-value",children:["",Number(b.total_paid_out_amount??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsx("span",{className:"cumulative-kpi-hint",children:"Profits withdrawn at episode ends"})]}),s.jsxs("div",{className:"cumulative-kpi-tile cumulative-kpi-tile--pnl",children:[s.jsx("span",{className:"cumulative-kpi-icon",children:""}),s.jsx("span",{className:"cumulative-kpi-label",children:"Total Realized P&L"}),s.jsxs("span",{className:`cumulative-kpi-value ${(b.total_realized_pnl??0)>=0?"positive":"negative"}`,children:["",Number(b.total_realized_pnl??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsx("span",{className:"cumulative-kpi-hint",children:"Cumulative profit/loss across episodes"})]}),s.jsxs("div",{className:"cumulative-kpi-tile cumulative-kpi-tile--episodes",children:[s.jsx("span",{className:"cumulative-kpi-icon",children:""}),s.jsx("span",{className:"cumulative-kpi-label",children:"Episodes"}),s.jsx("span",{className:"cumulative-kpi-value",children:b.episode_count??((Cb=b.per_episode)==null?void 0:Cb.length)??0}),s.jsx("span",{className:"cumulative-kpi-hint",children:"Profile generations"})]})]}),((Ib=b.cumulative_series)==null?void 0:Ib.length)>0&&s.jsxs("div",{className:"portfolio-cumulative-chart",children:[s.jsx("h4",{className:"chart-section-title",children:"Cumulative Growth Over Time"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(si,{data:b.cumulative_series.map(V=>({ts:V.ts,paid_out:V.cum_distributed_amount,realized_pnl:V.cum_realized_pnl})),margin:{top:8,right:8,left:0,bottom:4},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:10},tickFormatter:V=>String(V).slice(0,10)}),s.jsx(Ce,{tick:{fontSize:10},tickFormatter:V=>Number(V).toLocaleString(void 0,{maximumFractionDigits:0}),width:48}),s.jsx(He,{formatter:(V,ot)=>[`${Number(V).toLocaleString(void 0,{minimumFractionDigits:2})}`,ot],labelFormatter:V=>String(V).slice(0,10)}),s.jsx(yn,{y:0,stroke:"#666",strokeDasharray:"2 2"}),s.jsx(pt,{type:"monotone",dataKey:"paid_out",stroke:"#2e7d32",strokeWidth:2,dot:!1,name:"Paid out"}),s.jsx(pt,{type:"monotone",dataKey:"realized_pnl",stroke:"#1565c0",strokeWidth:2,dot:!1,name:"Realized P&L"})]})}),s.jsxs("p",{className:"portfolio-cumulative-chart-legend",children:[s.jsx("span",{className:"legend-dot",style:{background:"#2e7d32"}})," Paid out",s.jsx("span",{className:"legend-dot",style:{background:"#1565c0"}})," Realized P&L"]})]}),((Db=b.per_episode)==null?void 0:Db.length)>0&&s.jsxs("div",{className:"portfolio-cumulative-bars",children:[s.jsx("h4",{className:"chart-section-title",children:"P&L by Episode"}),s.jsx(We,{width:"100%",height:140,children:s.jsxs(mn,{data:b.per_episode.map(V=>({episode_id:V.episode_id,name:`Ep. ${V.episode_id}`,pnl:V.realized_pnl??0,lifecycle:V.lifecycle_label??(V.status==="ACTIVE"?"Active":"Ended"),status:V.status})),margin:{top:4,right:8,left:0,bottom:4},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"name",tick:{fontSize:9}}),s.jsx(Ce,{tick:{fontSize:10},width:48,tickFormatter:V=>Number(V).toLocaleString(void 0,{maximumFractionDigits:0})}),s.jsx(He,{formatter:(V,ot,Ke)=>[`${Number(V).toLocaleString(void 0,{minimumFractionDigits:2})}`,Ke.payload.lifecycle],labelFormatter:V=>V}),s.jsx(yn,{y:0,stroke:"#666"}),s.jsx(mt,{dataKey:"pnl",name:"P&L",onClick:V=>{const ot=V==null?void 0:V.episode_id;if(ot){const Ke=document.getElementById(`episode-card-${ot}`);Ke&&Ke.scrollIntoView({behavior:"smooth",block:"center"})}},cursor:"pointer",children:b.per_episode.map(V=>{const ot=V.realized_pnl??0,Ke=V.status==="ACTIVE";let Fn=ot>=0?"#2e7d32":"#c62828";return Ke&&(Fn="#1565c0"),s.jsx(Ki,{fill:Fn},V.episode_id)})})]})}),s.jsx("p",{className:"bar-chart-hint",children:"Click a bar to scroll to that episode card below."})]})]}),x.length>0&&s.jsxs("section",{className:"episode-list-section","aria-label":"Episode timeline",children:[s.jsx("h2",{children:"Episodes"}),s.jsx("p",{className:"portfolio-overview-intro",children:"Profile generations and resets. Expand a card to see equity, drawdown, trades per day, and risk regime."}),s.jsx("div",{className:"episode-list",children:x.map(V=>{const ot=V.episode_id??V.EPISODE_ID;return s.jsx("div",{id:`episode-card-${ot}`,children:s.jsx(gQ,{episode:V,portfolioId:Number(e),isActive:V.status==="ACTIVE"||V.STATUS==="ACTIVE"})},ot)})})]})]})})()]})}return n.length===0?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Portfolios"}),s.jsx(ht,{title:"No portfolios yet",action:s.jsxs(s.Fragment,{children:["Run pipeline, then ",s.jsx(xe,{to:"/runs",children:"check Runs"}),"."]}),explanation:"Portfolios are created by the pipeline. Run the daily pipeline, then check Audit Viewer for runs.",reasons:["Pipeline has not run yet.","No portfolios have been created in MIP.APP.PORTFOLIO."]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Portfolio Control Tower"}),s.jsxs("p",{className:"control-tower-intro",children:["Monitor all portfolios at a glance. ",s.jsx("strong",{children:"Gate"})," = risk regime (entries allowed?). ",s.jsx("strong",{children:"Health"})," = data freshness."]}),s.jsx("div",{className:"control-tower-table-wrap",children:s.jsxs("table",{className:"control-tower-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{className:"col-id",children:"ID"}),s.jsx("th",{className:"col-gate",title:"Risk regime: SAFE = entries allowed, CAUTION = approaching threshold, STOPPED = entries blocked",children:"Gate"}),s.jsx("th",{className:"col-health",title:"Data freshness: OK = recent run, STALE = older than 24h, BROKEN = very old or failed",children:"Health"}),s.jsx("th",{className:"col-equity",title:"Latest total equity from last simulation",children:"Equity"}),s.jsx("th",{className:"col-paidout",title:"Cumulative profits withdrawn across all episodes",children:"Paid Out"}),s.jsx("th",{className:"col-episode",children:"Active Episode"}),s.jsx("th",{className:"col-status",children:"Status"})]})}),s.jsx("tbody",{children:n.map(D=>{const q=(D.GATE_STATE??D.gate_state??"SAFE").toUpperCase(),z=D.gate_tooltip??(q==="STOPPED"?"Entries blocked":q==="CAUTION"?"Approaching threshold":"Entries allowed"),$=(D.health_state??"OK").toUpperCase(),R=D.health_reason??"",N=D.active_episode,Y=N?`#${N.episode_id??""} since ${(N.start_ts??"").toString().slice(0,10)}`:"",U=D.latest_equity??D.FINAL_EQUITY??D.final_equity??0,O=D.total_paid_out??D.TOTAL_PAID_OUT??0,ne=D.STATUS??D.status??"ACTIVE";return s.jsxs("tr",{className:`control-tower-row control-tower-row--gate-${q.toLowerCase()}`,children:[s.jsx("td",{className:"col-name",children:s.jsx(xe,{to:`/portfolios/${D.PORTFOLIO_ID??D.portfolio_id}`,children:D.NAME??D.name})}),s.jsx("td",{className:"col-id",children:D.PORTFOLIO_ID??D.portfolio_id}),s.jsxs("td",{className:"col-gate",children:[s.jsx("span",{className:`traffic-light traffic-light--${q.toLowerCase()}`,title:z}),s.jsx("span",{className:"traffic-label",children:q})]}),s.jsxs("td",{className:"col-health",children:[s.jsx("span",{className:`traffic-light traffic-light--${$.toLowerCase()}`,title:R}),s.jsx("span",{className:"traffic-label",children:$})]}),s.jsxs("td",{className:"col-equity",children:["",Number(U).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]}),s.jsx("td",{className:"col-paidout",children:O>0?s.jsxs("span",{className:"paidout-value",children:["",Number(O).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]}):s.jsx("span",{className:"paidout-zero",children:""})}),s.jsx("td",{className:"col-episode",children:Y}),s.jsx("td",{className:"col-status",children:s.jsx("span",{className:`status-chip status-chip--${ne.toLowerCase()}`,children:ne})})]},D.PORTFOLIO_ID??D.portfolio_id)})})]})})]})}const Fm=15;function Yo({status:e,showTooltip:t=!1}){var i,a,o,l,u,c;const n=t?(i=Re("ui","status_badge"))==null?void 0:i.long:void 0,r=(a=e==null?void 0:e.toUpperCase())!=null&&a.includes("FAIL")||(o=e==null?void 0:e.toUpperCase())!=null&&o.includes("ERROR")?"status-badge--error":(l=e==null?void 0:e.toUpperCase())!=null&&l.includes("SKIP")||(u=e==null?void 0:e.toUpperCase())!=null&&u.includes("RUNNING")?"status-badge--warning":(c=e==null?void 0:e.toUpperCase())!=null&&c.includes("SUCCESS")?"status-badge--success":"";return s.jsx("span",{className:`status-badge ${r}`,title:n,children:e??""})}function ri({text:e,label:t="Copy"}){const[n,r]=m.useState(!1),i=m.useCallback(async()=>{try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(a){console.error("Failed to copy:",a)}},[e]);return s.jsx("button",{className:"copy-button",onClick:i,title:n?"Copied!":`Copy ${t}`,children:n?" Copied":t})}function yQ({filters:e,setFilters:t,onSearch:n,pipelineMode:r}){const i=r==="intraday"?[{value:"",label:"All statuses"},{value:"FAIL",label:"Failed"},{value:"SUCCESS",label:"Success"},{value:"PARTIAL",label:"Partial"},{value:"SKIPPED_DISABLED",label:"Skipped (disabled)"}]:[{value:"",label:"All statuses"},{value:"FAIL",label:"Failed"},{value:"SUCCESS",label:"Success"},{value:"SUCCESS_WITH_SKIPS",label:"Success with skips"},{value:"RUNNING",label:"Running"}];return s.jsxs("div",{className:"run-filters",children:[s.jsx("div",{className:"run-filters__row",children:s.jsx("select",{value:e.status,onChange:a=>t({...e,status:a.target.value}),className:"run-filters__select",title:"Filter runs by their final status",children:i.map(a=>s.jsx("option",{value:a.value,children:a.label},a.value))})}),s.jsxs("div",{className:"run-filters__row",children:[s.jsx("input",{type:"date",value:e.fromDate,onChange:a=>t({...e,fromDate:a.target.value}),className:"run-filters__date",title:"Filter runs started after this date"}),s.jsx("input",{type:"date",value:e.toDate,onChange:a=>t({...e,toDate:a.target.value}),className:"run-filters__date",title:"Filter runs started before this date"})]}),s.jsx("button",{onClick:n,className:"run-filters__search",children:"Apply Filters"})]})}function vQ({run:e,isSelected:t,onClick:n,pipelineMode:r}){var a;const i=o=>o?new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return s.jsxs("div",{className:`run-list-item ${t?"run-list-item--selected":""} ${e.has_errors?"run-list-item--error":""}`,onClick:n,role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),n())},title:"Click to view run details",children:[s.jsxs("div",{className:"run-list-item__header",children:[s.jsx(Yo,{status:e.status,showTooltip:!0}),s.jsx("span",{className:"run-list-item__time",children:i(e.started_at)})]}),s.jsxs("div",{className:"run-list-item__id",title:e.run_id,children:[(a=e.run_id)==null?void 0:a.slice(0,8),"..."]}),r==="intraday"&&s.jsxs("div",{className:"run-list-item__metrics",children:[e.bars_ingested!=null&&s.jsxs("span",{children:[e.bars_ingested," bars"]}),e.signals_generated!=null&&s.jsxs("span",{children:[e.signals_generated," signals"]})]}),e.summary_hint&&s.jsx("div",{className:"run-list-item__hint",children:e.summary_hint}),e.error_count>0&&s.jsxs("div",{className:"run-list-item__errors",children:[e.error_count," error",e.error_count>1?"s":""]})]})}function xQ({page:e,totalPages:t,onPageChange:n}){return t<=1?null:s.jsxs("div",{className:"run-pagination",children:[s.jsx("button",{className:"run-pagination__btn",disabled:e<=1,onClick:()=>n(e-1),children:"Prev"}),s.jsxs("span",{className:"run-pagination__info",children:[e," / ",t]}),s.jsx("button",{className:"run-pagination__btn",disabled:e>=t,onClick:()=>n(e+1),children:"Next"})]})}function bQ({steps:e,selectedStep:t,onSelectStep:n}){return!e||e.length===0?s.jsx("p",{className:"step-timeline__empty",children:"No steps recorded."}):s.jsx("div",{className:"step-timeline",title:"Pipeline execution steps in order",children:e.map((r,i)=>{var u,c,d,f,h,p;const a=t===i,o=((c=(u=r.status)==null?void 0:u.toUpperCase())==null?void 0:c.includes("FAIL"))||((f=(d=r.status)==null?void 0:d.toUpperCase())==null?void 0:f.includes("ERROR")),l=(p=(h=r.status)==null?void 0:h.toUpperCase())==null?void 0:p.includes("SKIP");return s.jsxs("div",{className:`step-timeline__item ${a?"step-timeline__item--selected":""} ${o?"step-timeline__item--failed":""} ${l?"step-timeline__item--skipped":""}`,onClick:()=>n(i),role:"button",tabIndex:0,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),n(i))},children:[s.jsx("div",{className:"step-timeline__indicator",children:o?"":l?"":""}),s.jsxs("div",{className:"step-timeline__content",children:[s.jsx("div",{className:"step-timeline__name",children:r.step_name||r.event_name}),s.jsxs("div",{className:"step-timeline__meta",children:[s.jsx(Yo,{status:r.status}),r.duration_ms!=null&&s.jsxs("span",{className:"step-timeline__duration",children:[(r.duration_ms/1e3).toFixed(1),"s"]}),r.portfolio_id!=null&&s.jsxs("span",{className:"step-timeline__portfolio",children:["Portfolio ",r.portfolio_id]})]})]})]},i)})})}function wQ({step:e}){var n,r,i,a;if(!e)return s.jsx("div",{className:"step-detail step-detail--empty",children:s.jsx("p",{children:"Select a step to view details"})});const t=((r=(n=e.status)==null?void 0:n.toUpperCase())==null?void 0:r.includes("FAIL"))||((a=(i=e.status)==null?void 0:i.toUpperCase())==null?void 0:a.includes("ERROR"));return s.jsxs("div",{className:`step-detail ${t?"step-detail--failed":""}`,children:[s.jsx("h4",{children:e.step_name||e.event_name}),s.jsxs("dl",{className:"step-detail__dl",children:[s.jsx("dt",{title:"Final status of this step",children:"Status"}),s.jsx("dd",{children:s.jsx(Yo,{status:e.status})}),e.duration_ms!=null&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{title:"Time taken to execute this step",children:"Duration"}),s.jsxs("dd",{children:[(e.duration_ms/1e3).toFixed(2),"s (",e.duration_ms,"ms)"]})]}),e.rows_affected!=null&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{title:"Number of database rows affected",children:"Rows Affected"}),s.jsx("dd",{children:e.rows_affected})]}),e.portfolio_id!=null&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Portfolio ID"}),s.jsx("dd",{children:e.portfolio_id})]}),e.started_at&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Started"}),s.jsx("dd",{children:e.started_at})]}),e.completed_at&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Completed"}),s.jsx("dd",{children:e.completed_at})]})]}),t&&e.error_message&&s.jsxs("div",{className:"step-detail__error",children:[s.jsx("h5",{children:"Error Details"}),s.jsxs("div",{className:"step-detail__error-message",children:[s.jsx("code",{children:e.error_message}),s.jsx(ri,{text:e.error_message,label:"Copy Error"})]}),e.error_sqlstate&&s.jsxs("div",{className:"step-detail__error-meta",children:[s.jsxs("span",{children:["SQLSTATE: ",s.jsx("code",{children:e.error_sqlstate})]}),s.jsx(ri,{text:e.error_sqlstate,label:"Copy"})]}),e.error_query_id&&s.jsxs("div",{className:"step-detail__error-meta",children:[s.jsxs("span",{children:["Query ID: ",s.jsx("code",{children:e.error_query_id})]}),s.jsx(ri,{text:e.error_query_id,label:"Copy"})]})]})]})}function kQ({errors:e,debugSql:t}){const[n,r]=m.useState(!1),[i,a]=m.useState("all_events");return!e||e.length===0?null:s.jsxs("div",{className:"error-panel",children:[s.jsxs("h3",{className:"error-panel__title",children:["Errors (",e.length,")",s.jsx(ee,{scope:"audit",entry:"error_details",variant:"short"})]}),e.map((o,l)=>s.jsxs("div",{className:"error-panel__item",children:[s.jsxs("div",{className:"error-panel__header",children:[s.jsx("span",{className:"error-panel__event",children:o.event_name}),s.jsx("span",{className:"error-panel__time",children:o.event_ts})]}),s.jsxs("div",{className:"error-panel__message",children:[s.jsx("code",{children:o.error_message}),s.jsx(ri,{text:o.error_message,label:"Copy"})]}),s.jsxs("div",{className:"error-panel__meta",children:[o.error_sqlstate&&s.jsxs("span",{title:"SQL error state code from Snowflake",children:["SQLSTATE: ",s.jsx("code",{children:o.error_sqlstate})]}),o.error_query_id&&s.jsxs("span",{title:"Snowflake query ID - use to look up in QUERY_HISTORY",children:["Query ID: ",s.jsx("code",{children:o.error_query_id}),s.jsx(ri,{text:o.error_query_id,label:"Copy"})]})]})]},l)),t&&s.jsxs("div",{className:"error-panel__debug",children:[s.jsx("button",{className:"error-panel__debug-toggle",onClick:()=>r(!n),children:n?" Hide Debug SQL":" Show Debug SQL"}),n&&s.jsxs("div",{className:"error-panel__debug-content",children:[s.jsx("div",{className:"error-panel__debug-tabs",children:Object.keys(t).map(o=>s.jsx("button",{className:`error-panel__debug-tab ${i===o?"error-panel__debug-tab--active":""}`,onClick:()=>a(o),children:o.replace(/_/g," ")},o))}),s.jsxs("div",{className:"error-panel__debug-sql",children:[s.jsx("pre",{children:t[i]}),s.jsx(ri,{text:t[i],label:"Copy SQL"})]})]})]})]})}function jQ({runDetail:e}){if(!e)return null;const t=e.timeline||[],n=t[0],r=t[t.length-1];n==null||n.EVENT_TS,r==null||r.EVENT_TS;const i=r==null?void 0:r.STATUS,a=e.total_duration_ms;let o=null;for(const u of t){const c=u.DETAILS;if(c!=null&&c.effective_to_ts){o=c.effective_to_ts;break}}const l=new Set;for(const u of e.steps||[])u.portfolio_id&&l.add(u.portfolio_id);return s.jsxs("div",{className:"run-summary-cards",children:[s.jsxs("div",{className:"run-summary-card",title:"Final status of the pipeline run",children:[s.jsx("div",{className:"run-summary-card__label",children:"Status"}),s.jsx("div",{className:"run-summary-card__value",children:s.jsx(Yo,{status:i,showTooltip:!0})})]}),s.jsxs("div",{className:"run-summary-card",title:"Total time from start to finish",children:[s.jsx("div",{className:"run-summary-card__label",children:"Duration"}),s.jsx("div",{className:"run-summary-card__value",children:a!=null?`${(a/1e3).toFixed(1)}s`:""})]}),s.jsxs("div",{className:"run-summary-card",title:"Market data timestamp the pipeline processed up to",children:[s.jsx("div",{className:"run-summary-card__label",children:"As-of"}),s.jsx("div",{className:"run-summary-card__value run-summary-card__value--small",children:o?new Date(o).toLocaleString():""})]}),s.jsxs("div",{className:"run-summary-card",title:"Number of portfolios processed",children:[s.jsx("div",{className:"run-summary-card__label",children:"Portfolios"}),s.jsx("div",{className:"run-summary-card__value",children:l.size||""})]}),e.error_count>0&&s.jsxs("div",{className:"run-summary-card run-summary-card--error",title:"Number of failed steps",children:[s.jsx("div",{className:"run-summary-card__label",children:"Errors"}),s.jsx("div",{className:"run-summary-card__value",children:e.error_count})]})]})}function _Q({runDetail:e}){return e?s.jsxs("div",{className:"run-summary-cards",children:[s.jsxs("div",{className:"run-summary-card",title:"Final status",children:[s.jsx("div",{className:"run-summary-card__label",children:"Status"}),s.jsx("div",{className:"run-summary-card__value",children:s.jsx(Yo,{status:e.status,showTooltip:!0})})]}),s.jsxs("div",{className:"run-summary-card",title:"Total duration",children:[s.jsx("div",{className:"run-summary-card__label",children:"Duration"}),s.jsx("div",{className:"run-summary-card__value",children:e.total_duration_ms!=null?`${(e.total_duration_ms/1e3).toFixed(1)}s`:""})]}),s.jsxs("div",{className:"run-summary-card",title:"Bars ingested in this run",children:[s.jsx("div",{className:"run-summary-card__label",children:"Bars Ingested"}),s.jsx("div",{className:"run-summary-card__value",children:e.bars_ingested??""})]}),s.jsxs("div",{className:"run-summary-card",title:"Signals generated by pattern detectors",children:[s.jsx("div",{className:"run-summary-card__label",children:"Signals"}),s.jsx("div",{className:"run-summary-card__value",children:e.signals_generated??""})]}),s.jsxs("div",{className:"run-summary-card",title:"Outcomes evaluated",children:[s.jsx("div",{className:"run-summary-card__label",children:"Outcomes"}),s.jsx("div",{className:"run-summary-card__value",children:e.outcomes_evaluated??""})]}),s.jsxs("div",{className:"run-summary-card",title:"Symbols processed",children:[s.jsx("div",{className:"run-summary-card__label",children:"Symbols"}),s.jsx("div",{className:"run-summary-card__value",children:e.symbols_processed??""})]}),s.jsxs("div",{className:"run-summary-card",title:"Compute time in seconds",children:[s.jsx("div",{className:"run-summary-card__label",children:"Compute"}),s.jsx("div",{className:"run-summary-card__value",children:e.compute_seconds!=null?`${Number(e.compute_seconds).toFixed(1)}s`:""})]}),e.has_errors&&s.jsxs("div",{className:"run-summary-card run-summary-card--error",title:"Run failed",children:[s.jsx("div",{className:"run-summary-card__label",children:"Error"}),s.jsx("div",{className:"run-summary-card__value",children:"1"})]})]}):null}function SQ({runDetail:e}){if(!e)return null;const t=i=>i?new Date(i).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",n=e.details||{},r=n.config||{};return n.ingest_result||n.ingest,n.signal_result||n.signals,s.jsxs("div",{className:"intraday-run-detail",children:[s.jsxs("section",{className:"intraday-detail-section",children:[s.jsx("h4",{children:"Run Info"}),s.jsxs("dl",{className:"intraday-detail-dl",children:[s.jsx("dt",{children:"Started"}),s.jsx("dd",{children:t(e.started_at)}),s.jsx("dt",{children:"Completed"}),s.jsx("dd",{children:t(e.completed_at)}),s.jsx("dt",{children:"Interval"}),s.jsxs("dd",{children:[e.interval_minutes??"","m"]}),s.jsx("dt",{children:"Daily Context"}),s.jsx("dd",{children:e.daily_context_used?"Yes":"No"})]})]}),Object.keys(r).length>0&&s.jsxs("section",{className:"intraday-detail-section",children:[s.jsx("h4",{children:"Configuration"}),s.jsx("dl",{className:"intraday-detail-dl",children:Object.entries(r).map(([i,a])=>s.jsxs("span",{children:[s.jsx("dt",{children:i}),s.jsx("dd",{children:String(a)})]},i))})]}),e.error_message&&s.jsxs("div",{className:"error-panel",style:{marginTop:"1rem"},children:[s.jsx("h3",{className:"error-panel__title",children:"Error"}),s.jsx("div",{className:"error-panel__item",children:s.jsxs("div",{className:"error-panel__message",children:[s.jsx("code",{children:e.error_message}),s.jsx(ri,{text:e.error_message,label:"Copy"})]})})]}),Object.keys(n).length>0&&s.jsxs("details",{className:"raw-timeline-section",style:{marginTop:"1rem"},children:[s.jsx("summary",{children:"Raw Details (JSON)"}),s.jsxs("div",{className:"error-panel__debug-sql",style:{marginTop:"0.5rem"},children:[s.jsx("pre",{children:JSON.stringify(n,null,2)}),s.jsx(ri,{text:JSON.stringify(n,null,2),label:"Copy JSON"})]})]})]})}function HS(){var D,q;const{runId:e}=yx(),t=Io(),[n,r]=mh(),[i,a]=m.useState(n.get("pipeline")||"daily"),[o,l]=m.useState([]),[u,c]=m.useState(e||null),[d,f]=m.useState(null),[h,p]=m.useState(null),[g,y]=m.useState(!0),[x,v]=m.useState(!1),[b,w]=m.useState(null),[j,_]=m.useState(1),[k,E]=m.useState({status:n.get("status")||"",fromDate:n.get("from")||"",toDate:n.get("to")||""}),A=Math.max(1,Math.ceil(o.length/Fm)),T=o.slice((j-1)*Fm,j*Fm),S=m.useCallback(async z=>{y(!0),w(null),l([]);try{const $=new URLSearchParams;$.set("limit","200"),k.status&&$.set("status",k.status),k.fromDate&&$.set("from_ts",new Date(k.fromDate).toISOString()),k.toDate&&$.set("to_ts",new Date(k.toDate).toISOString());const R=z==="intraday"?`${J}/runs/intraday`:`${J}/runs`,N=await fetch(`${R}?${$}`);if(!N.ok)throw new Error(N.statusText);const Y=await N.json();l(Y),_(1),Y.length>0&&!e&&c(Y[0].run_id)}catch($){w($.message)}finally{y(!1)}},[k,e]),P=m.useCallback(async(z,$)=>{if(!z){f(null);return}v(!0);try{const R=$==="intraday"?`${J}/runs/intraday/${encodeURIComponent(z)}`:`${J}/runs/${encodeURIComponent(z)}`,N=await fetch(R);if(!N.ok)throw new Error(N.statusText);const Y=await N.json();if(f(Y),p(null),$==="daily"&&Y.failed_step){const U=(Y.steps||[]).findIndex(O=>O.event_ts===Y.failed_step.event_ts&&O.step_name===Y.failed_step.step_name);U>=0&&p(U)}}catch(R){console.error("Failed to load run detail:",R)}finally{v(!1)}},[]);m.useEffect(()=>{S(i)},[i]),m.useEffect(()=>{P(u,i)},[u,i,P]),m.useEffect(()=>{u&&u!==e&&t(`/runs/${encodeURIComponent(u)}?pipeline=${i}`,{replace:!0})},[u,e,i,t]);const C=()=>{const z=new URLSearchParams;z.set("pipeline",i),k.status&&z.set("status",k.status),k.fromDate&&z.set("from",k.fromDate),k.toDate&&z.set("to",k.toDate),r(z),S(i)},B=z=>{a(z),l([]),c(null),f(null),p(null),_(1),E({status:"",fromDate:"",toDate:""})},M=z=>{c(z)};return g&&o.length===0?s.jsxs("div",{className:"run-explorer",children:[s.jsx("h1",{children:"Run Explorer"}),s.jsx(Ot,{})]}):b&&o.length===0?s.jsxs("div",{className:"run-explorer",children:[s.jsx("h1",{children:"Run Explorer"}),s.jsx(Zn,{message:b})]}):s.jsxs("div",{className:"run-explorer",children:[s.jsxs("h1",{children:["Run Explorer ",s.jsx(ee,{scope:"audit",entry:"run_explorer",variant:"short"})]}),s.jsxs("div",{className:"run-pipeline-toggle",children:[s.jsx("button",{className:`run-pipeline-btn ${i==="daily"?"run-pipeline-btn--active":""}`,onClick:()=>B("daily"),children:"Daily Pipeline"}),s.jsx("button",{className:`run-pipeline-btn ${i==="intraday"?"run-pipeline-btn--active":""}`,onClick:()=>B("intraday"),children:"Intraday Pipeline"})]}),s.jsxs("div",{className:"run-explorer__layout",children:[s.jsxs("div",{className:"run-explorer__left",children:[s.jsx(yQ,{filters:k,setFilters:E,onSearch:C,pipelineMode:i}),s.jsx("div",{className:"run-list",children:T.length===0?s.jsx(ht,{title:"No runs found",action:i==="intraday"?"The intraday pipeline runs hourly during market hours.":"Adjust filters or run the pipeline.",explanation:i==="intraday"?"Intraday pipeline runs appear here after TASK_RUN_INTRADAY_PIPELINE executes.":"Pipeline runs appear here after SP_RUN_DAILY_PIPELINE executes.",reasons:["No runs match filters.","Pipeline has not run yet."]}):T.map(z=>s.jsx(vQ,{run:z,isSelected:u===z.run_id,onClick:()=>M(z.run_id),pipelineMode:i},z.run_id))}),s.jsx(xQ,{page:j,totalPages:A,onPageChange:_}),s.jsxs("div",{className:"run-list-count",children:[o.length," run",o.length!==1?"s":""," total"]})]}),s.jsx("div",{className:"run-explorer__right",children:x?s.jsx(Ot,{}):d?i==="intraday"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"run-detail-header",children:s.jsxs("h2",{title:u,children:["Intraday Run: ",u==null?void 0:u.slice(0,12),"...",s.jsx(ri,{text:u,label:"Copy ID"})]})}),s.jsx(_Q,{runDetail:d}),s.jsx(SQ,{runDetail:d})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"run-detail-header",children:s.jsxs("h2",{title:u,children:["Run: ",u==null?void 0:u.slice(0,12),"...",s.jsx(ri,{text:u,label:"Copy ID"})]})}),s.jsx(jQ,{runDetail:d}),d.run_summary&&s.jsxs("section",{className:"run-summary-narrative",children:[s.jsx("h3",{children:d.run_summary.headline}),s.jsxs("dl",{children:[s.jsx("dt",{children:"What happened"}),s.jsx("dd",{children:d.run_summary.what_happened}),s.jsx("dt",{children:"Why"}),s.jsx("dd",{children:d.run_summary.why}),s.jsx("dt",{children:"Impact"}),s.jsx("dd",{children:d.run_summary.impact}),d.run_summary.next_check&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Next check"}),s.jsx("dd",{children:d.run_summary.next_check})]})]})]}),s.jsx(kQ,{errors:d.errors,debugSql:d.debug_sql}),s.jsxs("section",{className:"run-steps-section",children:[s.jsxs("h3",{children:["Step Timeline",s.jsx(ee,{scope:"audit",entry:"step_timeline",variant:"short"})]}),s.jsxs("div",{className:"run-steps-layout",children:[s.jsx(bQ,{steps:d.steps,selectedStep:h,onSelectStep:p}),s.jsx(wQ,{step:h!=null?d.steps[h]:null})]})]}),s.jsxs("details",{className:"raw-timeline-section",children:[s.jsxs("summary",{children:["Raw Timeline (",((D=d.timeline)==null?void 0:D.length)||0," events)"]}),s.jsxs("div",{className:"raw-timeline-wrap",children:[s.jsxs("table",{className:"raw-timeline-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Time"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Event"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Duration"}),s.jsx("th",{children:"Error"})]})}),s.jsx("tbody",{children:(d.timeline||[]).slice(0,100).map((z,$)=>{var N,Y,U,O;const R=((Y=(N=z.STATUS)==null?void 0:N.toUpperCase())==null?void 0:Y.includes("FAIL"))||((O=(U=z.STATUS)==null?void 0:U.toUpperCase())==null?void 0:O.includes("ERROR"));return s.jsxs("tr",{className:R?"raw-timeline-row--failed":"",children:[s.jsx("td",{children:z.EVENT_TS}),s.jsx("td",{children:z.EVENT_TYPE}),s.jsx("td",{children:z.EVENT_NAME}),s.jsx("td",{children:s.jsx(Yo,{status:z.STATUS})}),s.jsx("td",{children:z.DURATION_MS!=null?`${z.DURATION_MS}ms`:""}),s.jsx("td",{className:"raw-timeline-error",children:z.ERROR_MESSAGE?s.jsxs("span",{title:z.ERROR_MESSAGE,children:[z.ERROR_MESSAGE.slice(0,50),z.ERROR_MESSAGE.length>50?"...":""]}):""})]},$)})})]}),(((q=d.timeline)==null?void 0:q.length)||0)>100&&s.jsxs("p",{className:"raw-timeline-more",children:["Showing first 100 of ",d.timeline.length," events."]})]})]})]}):s.jsx("div",{className:"run-explorer__empty",children:s.jsx("p",{children:"Select a run to view details"})})})]})]})}function NQ(e){const{cx:t,cy:n,payload:r}=e;if(!(r!=null&&r.event))return null;const a={FIRST_OUTCOME:"#1565c0",MIN_SIGNALS_REACHED:"#7b1fa2",ENTERED_WATCH:"#f57c00",ENTERED_TRUSTED:"#2e7d32",DROPPED_FROM_TRUSTED:"#c62828",MISS_STREAK:"#c62828"}[r.event]||"#666";return s.jsx("g",{children:s.jsx("circle",{cx:t,cy:n,r:6,fill:a,stroke:"#fff",strokeWidth:2})})}function EQ({active:e,payload:t}){var i;if(!e||!t||!t.length)return null;const n=(i=t[0])==null?void 0:i.payload;if(!n)return null;const r={TRUSTED:"#2e7d32",WATCH:"#f57c00",UNTRUSTED:"#9e9e9e"};return s.jsxs("div",{className:"timeline-tooltip",children:[s.jsx("p",{className:"timeline-tooltip-date",children:n.ts?String(n.ts).slice(0,10):""}),s.jsxs("p",{className:"timeline-tooltip-row",children:[s.jsx("span",{children:"Hit rate:"}),s.jsx("strong",{children:n.rolling_hit_rate!=null?`${(n.rolling_hit_rate*100).toFixed(1)}%`:""})]}),s.jsxs("p",{className:"timeline-tooltip-row",children:[s.jsx("span",{children:"Evaluated:"}),s.jsx("strong",{children:n.evaluated_count??""})]}),s.jsxs("p",{className:"timeline-tooltip-row",children:[s.jsx("span",{children:"Avg return:"}),s.jsx("strong",{children:n.rolling_avg_return!=null?`${(n.rolling_avg_return*100).toFixed(3)}%`:""})]}),s.jsx("p",{className:"timeline-tooltip-state",style:{color:r[n.state]||"#666"},children:n.state??"UNKNOWN"}),n.event&&s.jsx("p",{className:"timeline-tooltip-event",children:n.event.replace(/_/g," ")})]})}function PQ(){return s.jsxs("div",{className:"timeline-inline-skeleton",children:[s.jsxs("div",{className:"skeleton-header",children:[s.jsx("div",{className:"skeleton-title"}),s.jsx("div",{className:"skeleton-subtitle"})]}),s.jsxs("div",{className:"skeleton-journey",children:[s.jsx("div",{className:"skeleton-line skeleton-line--short"}),s.jsx("div",{className:"skeleton-line"}),s.jsx("div",{className:"skeleton-line skeleton-line--medium"})]}),s.jsx("div",{className:"skeleton-chart"}),s.jsxs("div",{className:"skeleton-meta",children:[s.jsx("div",{className:"skeleton-tag"}),s.jsx("div",{className:"skeleton-tag"}),s.jsx("div",{className:"skeleton-tag"})]})]})}function TQ({symbol:e,marketType:t,patternId:n=1,horizonBars:r=5,intervalMinutes:i=1440,cachedData:a,onDataLoaded:o,onClose:l}){var v,b;const[u,c]=m.useState(a||null),[d,f]=m.useState(!a),[h,p]=m.useState(null);m.useEffect(()=>{if(a){c(a),f(!1);return}if(!e||!t){f(!1);return}let w=!1;f(!0),p(null);const j=new URLSearchParams({symbol:e,market_type:t,pattern_id:String(n),horizon_bars:String(r),interval_minutes:String(i)});return fetch(`${J}/training/timeline?${j}`).then(_=>_.ok?_.json():Promise.reject(new Error(_.statusText))).then(_=>{w||(c(_),o&&o(_))}).catch(_=>{w||p(_.message)}).finally(()=>{w||f(!1)}),()=>{w=!0}},[e,t,n,r,i,a,o]);const g=m.useMemo(()=>u!=null&&u.series?u.series.map(w=>({...w,hit_rate_pct:w.rolling_hit_rate!=null?w.rolling_hit_rate*100:null,avg_return_pct:w.rolling_avg_return!=null?w.rolling_avg_return*100:null,date_label:w.ts?String(w.ts).slice(0,10):""})):[],[u]),y=m.useMemo(()=>{if(!g.length)return[-1,1];const w=g.map(E=>E.avg_return_pct).filter(E=>E!=null);if(!w.length)return[-1,1];const j=Math.min(...w),_=Math.max(...w),k=Math.max(.5,(_-j)*.2);return[Math.floor((j-k)*10)/10,Math.ceil((_+k)*10)/10]},[g]),x=((v=u==null?void 0:u.thresholds)==null?void 0:v.min_hit_rate)!=null?u.thresholds.min_hit_rate*100:55;return d?s.jsx("div",{className:"training-timeline-inline",children:s.jsx(PQ,{})}):h?s.jsxs("div",{className:"training-timeline-inline",children:[s.jsxs("div",{className:"training-timeline-inline-header",children:[s.jsx("h4",{children:"Confidence over time"}),l&&s.jsx("button",{className:"timeline-inline-close",onClick:l,"aria-label":"Collapse details",children:""})]}),s.jsx(Zn,{message:h})]}):(b=u==null?void 0:u.series)!=null&&b.length?s.jsxs("div",{className:"training-timeline-inline",children:[s.jsxs("div",{className:"training-timeline-inline-header",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"Confidence over time (evidence accumulation)"}),s.jsx("p",{className:"training-timeline-inline-subtitle",children:"This is derived from evaluated outcomes, not a model weight."})]}),l&&s.jsx("button",{className:"timeline-inline-close",onClick:l,"aria-label":"Collapse details",children:""})]}),s.jsxs("div",{className:"training-timeline-inline-content",children:[s.jsxs("div",{className:"training-timeline-inline-left",children:[u.narrative&&u.narrative.length>0&&s.jsxs("div",{className:"training-journey-card-inline",children:[s.jsx("h5",{children:"Training Journey"}),s.jsx("ul",{className:"training-journey-bullets-inline",children:u.narrative.map((w,j)=>s.jsx("li",{children:w},j))})]}),s.jsxs("div",{className:"training-timeline-meta-inline",children:[s.jsxs("span",{children:["Symbol: ",s.jsx("strong",{children:u.symbol})]}),s.jsxs("span",{children:["Pattern: ",s.jsx("strong",{children:u.pattern_id})]}),s.jsxs("span",{children:["Horizon: ",s.jsxs("strong",{children:[u.horizon_bars," bars"]})]}),s.jsxs("span",{children:["Points: ",s.jsx("strong",{children:u.series.length})]})]})]}),s.jsx("div",{className:"training-timeline-inline-right",children:s.jsxs("div",{className:"training-timeline-chart-inline",children:[s.jsx(We,{width:"100%",height:200,children:s.jsxs(si,{data:g,margin:{top:8,right:40,left:0,bottom:4},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"date_label",tick:{fontSize:9},tickFormatter:w=>w.slice(5),interval:"preserveStartEnd"}),s.jsx(Ce,{yAxisId:"left",domain:[0,100],tick:{fontSize:9},tickFormatter:w=>`${w}%`,width:36}),s.jsx(Ce,{yAxisId:"right",orientation:"right",domain:y,tick:{fontSize:9},tickFormatter:w=>{var j;return`${((j=w==null?void 0:w.toFixed)==null?void 0:j.call(w,1))??w}%`},width:36}),s.jsx(He,{content:s.jsx(EQ,{})}),s.jsx(yn,{yAxisId:"left",y:x,stroke:"#2e7d32",strokeDasharray:"5 5",strokeWidth:1.5}),s.jsx(yn,{yAxisId:"left",y:50,stroke:"#9e9e9e",strokeDasharray:"2 2",strokeWidth:1}),s.jsx(yn,{yAxisId:"right",y:0,stroke:"#ff9800",strokeDasharray:"2 2",strokeWidth:1}),s.jsx(pt,{yAxisId:"left",type:"monotone",dataKey:"hit_rate_pct",stroke:"#1565c0",strokeWidth:2,dot:s.jsx(NQ,{}),activeDot:{r:4,fill:"#1565c0"},connectNulls:!0,name:"Rolling Hit Rate"}),s.jsx(pt,{yAxisId:"right",type:"monotone",dataKey:"avg_return_pct",stroke:"#ff9800",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#ff9800"},connectNulls:!0,name:"Rolling Avg Return"})]})}),s.jsxs("div",{className:"timeline-legend-inline",children:[s.jsxs("span",{className:"legend-item-inline",children:[s.jsx("span",{className:"legend-line-inline",style:{background:"#1565c0"}}),"Hit rate (left)"]}),s.jsxs("span",{className:"legend-item-inline",children:[s.jsx("span",{className:"legend-line-inline",style:{background:"#ff9800"}}),"Avg return (right)"]}),s.jsxs("span",{className:"legend-item-inline",children:[s.jsx("span",{className:"legend-line-inline legend-line-inline--dashed",style:{borderColor:"#2e7d32"}}),"Trusted threshold"]})]})]})})]}),s.jsx("p",{className:"training-timeline-note-inline",children:"Confidence increases as outcomes are evaluated. Opportunities may be shown even when evidence is still insufficient to act."})]}):s.jsxs("div",{className:"training-timeline-inline",children:[s.jsxs("div",{className:"training-timeline-inline-header",children:[s.jsx("h4",{children:"Confidence over time (evidence accumulation)"}),l&&s.jsx("button",{className:"timeline-inline-close",onClick:l,"aria-label":"Collapse details",children:""})]}),s.jsx(ht,{title:"No evaluated outcomes yet",action:"Still observing  outcomes will appear as signals mature.",explanation:"Training timeline shows how confidence evolves as outcomes are evaluated.",reasons:(u==null?void 0:u.narrative)||["No evaluated outcomes for this symbol yet."]})]})}function AQ(e){if(!e)return"";try{return new Date(e).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return String(e)}}function OQ({isAi:e,modelInfo:t}){return e?s.jsx("span",{className:"td-ai-badge td-ai-badge--ai",title:`Model: ${t}`,children:"Cortex AI"}):s.jsx("span",{className:"td-ai-badge td-ai-badge--fallback",children:"Deterministic"})}function CQ({journey:e}){return!e||e.length===0?null:s.jsx("div",{className:"td-journey",children:e.map((t,n)=>{const r=typeof t=="string"&&t.startsWith(">>"),i=r?t.replace(/^>>\s*/,""):t;return s.jsxs("span",{className:`td-journey-step ${r?"td-journey-step--current":""}`,children:[r&&s.jsx("span",{className:"td-journey-marker"}),i,n<e.length-1&&s.jsx("span",{className:"td-journey-arrow",children:""})]},n)})})}function Bm({title:e,icon:t,bullets:n,variant:r}){return!n||n.length===0?null:s.jsxs("div",{className:`td-section td-section--${r||"default"}`,children:[s.jsxs("h4",{className:"td-section-title",children:[s.jsx("span",{className:"td-section-icon",children:t}),e]}),s.jsx("ul",{className:"td-bullets",children:n.map((i,a)=>s.jsx("li",{className:"td-bullet",children:typeof i=="string"?i:JSON.stringify(i)},a))})]})}function IQ({links:e,whereToLook:t}){const n=[];return t&&t.length>0&&t.forEach(r=>{r!=null&&r.route&&(r!=null&&r.label)&&n.push({to:r.route,label:r.label})}),e&&[{key:"training",label:"Training Status"},{key:"signals",label:"Decision Explorer"},{key:"symbol_training",label:"View Symbol"},{key:"digest",label:"Daily Digest"}].forEach(({key:i,label:a})=>{e[i]&&!n.find(o=>o.to===e[i])&&n.push({to:e[i],label:a})}),n.length===0?null:s.jsx("div",{className:"td-links",children:n.map((r,i)=>s.jsxs(xe,{to:r.to,className:"td-link",children:[r.label," "]},i))})}function DQ({detectors:e}){if(!e||e.length===0)return null;const t=e.filter(n=>n.fired);return t.length===0?null:s.jsx("div",{className:"td-detectors",children:t.map((n,r)=>{const i=(n.severity||"low").toLowerCase();return s.jsx("span",{className:`td-detector-pill td-detector-pill--${i}`,title:JSON.stringify(n.detail,null,2),children:(n.detector||"").replace(/_/g," ")},r)})})}function KS({scope:e="global",symbol:t,marketType:n,patternId:r,compact:i=!1}){const[a,o]=m.useState(null),[l,u]=m.useState(!0),[c,d]=m.useState(null),[f,h]=m.useState(!1);if(m.useEffect(()=>{let y=!1;u(!0),d(null);let x;return e==="symbol"&&t&&n?(x=`${J}/training/digest/symbol/latest?symbol=${encodeURIComponent(t)}&market_type=${encodeURIComponent(n)}`,r!=null&&(x+=`&pattern_id=${encodeURIComponent(r)}`)):x=`${J}/training/digest/latest`,fetch(x).then(v=>{if(!v.ok)throw new Error(`HTTP ${v.status}`);return v.json()}).then(v=>{y||(o(v),u(!1))}).catch(v=>{y||(d(v.message),u(!1))}),()=>{y=!0}},[e,t,n,r]),l)return s.jsx("div",{className:`td-panel ${i?"td-panel--compact":""}`,children:s.jsx("div",{className:"td-loading",children:"Loading training digest..."})});if(c)return s.jsx("div",{className:`td-panel ${i?"td-panel--compact":""}`,children:s.jsx("div",{className:"td-error",children:"Training digest unavailable"})});if(!(a!=null&&a.found))return s.jsx("div",{className:`td-panel ${i?"td-panel--compact":""}`,children:s.jsx("div",{className:"td-empty",children:"No training digest yet. Run the pipeline to generate one."})});const p=a.narrative||{},g=a.snapshot||{};return s.jsxs("div",{className:`td-panel ${i?"td-panel--compact":""}`,children:[s.jsxs("div",{className:"td-header",children:[s.jsx("h3",{className:"td-headline",children:p.headline||"Training digest available"}),s.jsxs("div",{className:"td-meta",children:[s.jsxs("span",{className:"td-meta-item",children:["As of ",AQ(a.as_of_ts)]}),s.jsx(OQ,{isAi:a.is_ai_narrative,modelInfo:a.model_info})]}),s.jsx(DQ,{detectors:g.detectors})]}),s.jsx(CQ,{journey:p.journey}),s.jsx(Bm,{title:"What Changed",icon:"",bullets:p.what_changed,variant:"changed"}),s.jsx(Bm,{title:"What Matters",icon:"",bullets:p.what_matters,variant:"matters"}),s.jsx(Bm,{title:"Waiting For",icon:"",bullets:p.waiting_for,variant:"waiting"}),s.jsx(IQ,{links:a.links,whereToLook:p.where_to_look}),!i&&s.jsxs("details",{className:"td-facts-toggle",children:[s.jsx("summary",{children:"Show training snapshot facts"}),s.jsx("div",{className:"td-facts-content",children:JSON.stringify(g,null,2)})]})]})}const Sn="training_status",RQ=10;function LQ(e){if(!e)return"maturity_stage";const t=String(e).toUpperCase();return t==="INSUFFICIENT"?"stage_insufficient":t==="WARMING_UP"?"stage_warming_up":t==="LEARNING"?"stage_learning":t==="CONFIDENT"?"stage_confident":"maturity_stage"}function MQ(e){return e==null||Number.isNaN(e)?"":`${(Number(e)*100).toFixed(1)}%`}function $c(e){if(e==null||Number.isNaN(e))return"";const t=Number(e);return Number.isInteger(t)?String(t):t.toFixed(4)}function VS(e,t){return`${t(e,"market_type")}-${t(e,"symbol")}-${t(e,"pattern_id")}`}function $Q(){const[e]=mh(),t=m.useRef(!1),[n,r]=m.useState(null),[i,a]=m.useState(!0),[o,l]=m.useState(null),[u,c]=m.useState(""),[d,f]=m.useState(""),[h,p]=m.useState(""),[g,y]=m.useState(null),x=m.useRef({});m.useEffect(()=>{if(t.current)return;t.current=!0;const S=e.get("symbol"),P=e.get("market_type"),C=e.get("pattern_id");S!=null&&S!==""&&f(S),P!=null&&P!==""&&c(P),C!=null&&C!==""&&p(C)},[e]);const v=1440;m.useEffect(()=>{let S=!1;return a(!0),l(null),r(null),y(null),fetch(`${J}/training/status`).then(P=>P.ok?P.json():Promise.reject(new Error(P.statusText))).then(P=>{S||r(P)}).catch(P=>{S||l(P.message)}).finally(()=>{S||a(!1)}),()=>{S=!0}},[]);const b=(n==null?void 0:n.rows)??[],w=(n==null?void 0:n.horizon_definitions)??[],j=(S,P)=>S[P]??S[P.toUpperCase()],_=m.useMemo(()=>{const S=new Set(b.map(P=>j(P,"market_type")).filter(Boolean));return Array.from(S).sort()},[b]),k=m.useMemo(()=>b.filter(S=>!(u&&j(S,"market_type")!==u||d.trim()&&!(j(S,"symbol")??"").toLowerCase().includes(d.trim().toLowerCase())||h!==""&&String(j(S,"pattern_id"))!==String(h))),[b,u,d,h]);m.useEffect(()=>{g&&(k.some(P=>VS(P,j)===g)||y(null))},[k,g]),m.useEffect(()=>{const S=P=>{P.key==="Escape"&&g&&y(null)};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[g]);const E=m.useCallback(S=>{y(P=>P===S?null:S)},[]),A=m.useCallback((S,P)=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),E(P))},[E]),T=m.useCallback((S,P)=>{x.current[S]=P},[]);return i?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Training Status"}),s.jsx(Ot,{})]}):o?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Training Status"}),s.jsx(Zn,{message:o})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Training Status"}),s.jsx("p",{className:"training-status-intro",children:"Per-asset training maturity (daily bars): sample size, coverage, horizons, and avg outcomes. Use filters to narrow by market or symbol."}),s.jsx(KS,{scope:"global"}),s.jsxs("section",{className:"training-status-filters","aria-label":"Filters",children:[s.jsxs("div",{className:"training-filter-row",children:[s.jsxs("label",{htmlFor:"ts-market-type",children:["Market type",s.jsx(ee,{scope:Sn,variant:"short"},"filter_market_type")]}),s.jsxs("select",{id:"ts-market-type",value:u,onChange:S=>c(S.target.value),"aria-label":"Filter by market type",children:[s.jsx("option",{value:"",children:"All"}),_.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsxs("div",{className:"training-filter-row",children:[s.jsxs("label",{htmlFor:"ts-symbol",children:["Symbol",s.jsx(ee,{scope:Sn,variant:"short"},"filter_symbol")]}),s.jsx("input",{id:"ts-symbol",type:"search",placeholder:"Search symbol",value:d,onChange:S=>f(S.target.value),"aria-label":"Search by symbol"})]})]}),s.jsx("div",{className:"training-status-table-wrap",children:s.jsxs("table",{className:"training-status-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"training-expand-col","aria-label":"Expand"}),s.jsxs("th",{children:["Market type ",s.jsx(ee,{scope:Sn,variant:"short"},"market_type")]}),s.jsxs("th",{children:["Symbol ",s.jsx(ee,{scope:Sn,variant:"short"},"symbol")]}),s.jsxs("th",{children:["Pattern ",s.jsx(ee,{scope:Sn,variant:"short"},"pattern_id")]}),s.jsxs("th",{children:["Interval ",s.jsx(ee,{scope:Sn,variant:"short"},"interval_minutes")]}),s.jsxs("th",{children:["As of ",s.jsx(ee,{scope:Sn,variant:"short"},"as_of_ts")]}),s.jsxs("th",{children:["Maturity ",s.jsx(ee,{scope:Sn,variant:"short"},"maturity_score")]}),s.jsxs("th",{children:["Sample size ",s.jsx(ee,{scope:Sn,variant:"short"},"recs_total")]}),s.jsxs("th",{children:["Coverage ",s.jsx(ee,{scope:Sn,variant:"short"},"coverage_ratio")]}),s.jsxs("th",{children:["Horizons ",s.jsx(ee,{scope:Sn,variant:"short"},"horizons_covered")]}),w.map(S=>s.jsxs("th",{title:S.label,children:["Avg ",S.key]},S.key))]})}),s.jsx("tbody",{children:k.map(S=>{var $,R;const P=j(S,"maturity_stage"),C=j(S,"maturity_score")!=null?Number(j(S,"maturity_score")):0,B=LQ(P),M=(($=Re(Sn,B))==null?void 0:$.short)??P,D=VS(S,j),q=g===D,z=x.current[D];return s.jsxs(Yf.Fragment,{children:[s.jsxs("tr",{className:`training-row ${q?"training-row-expanded":""}`,onClick:()=>E(D),onKeyDown:N=>A(N,D),tabIndex:0,role:"button","aria-expanded":q,"aria-label":`${j(S,"symbol")} training details. Press Enter to ${q?"collapse":"expand"}.`,children:[s.jsx("td",{className:"training-expand-cell",children:s.jsx("span",{className:`training-expand-icon ${q?"training-expand-icon--open":""}`,children:""})}),s.jsx("td",{children:j(S,"market_type")??""}),s.jsx("td",{className:"training-symbol-cell",children:j(S,"symbol")??""}),s.jsx("td",{children:j(S,"pattern_id")??""}),s.jsx("td",{children:j(S,"interval_minutes")??""}),s.jsx("td",{children:j(S,"as_of_ts")??""}),s.jsxs("td",{className:"training-maturity-cell",children:[s.jsx("span",{className:`training-maturity-badge training-stage-${(j(S,"maturity_stage")||"").toLowerCase().replace("_","-")}`,title:M,children:j(S,"maturity_stage")??""}),s.jsx(ee,{scope:Sn,variant:"short"},B),s.jsx("div",{className:"training-progress-wrap",title:M,children:s.jsx("div",{className:"training-progress-bar",style:{width:`${Math.min(100,Math.max(0,C))}%`}})}),s.jsx("span",{className:"training-score-num",title:(R=Re(Sn,"maturity_score"))==null?void 0:R.short,children:$c(j(S,"maturity_score"))})]}),s.jsx("td",{children:$c(j(S,"recs_total"))}),s.jsx("td",{children:MQ(j(S,"coverage_ratio"))}),s.jsx("td",{children:$c(j(S,"horizons_covered"))}),w.map(N=>s.jsx("td",{children:$c(j(S,`avg_outcome_${N.key.toLowerCase()}`))},N.key))]}),q&&s.jsx("tr",{className:"training-detail-row",children:s.jsxs("td",{colSpan:RQ+w.length+1,className:"training-detail-cell",children:[s.jsx(KS,{scope:"symbol",symbol:j(S,"symbol"),marketType:j(S,"market_type"),patternId:j(S,"pattern_id"),compact:!0}),s.jsx(TQ,{symbol:j(S,"symbol"),marketType:j(S,"market_type"),patternId:j(S,"pattern_id"),horizonBars:5,intervalMinutes:v,cachedData:z,onDataLoaded:N=>T(D,N),onClose:()=>y(null)})]})})]},D)})})]})}),k.length===0&&s.jsx(ht,{title:b.length===0?"No evaluated recommendations found yet":"No rows match the current filters",action:b.length===0?"Run pipeline in Snowflake.":"Clear or adjust filters above.",explanation:b.length===0?"Training status comes from recommendation and outcome data. Run the pipeline to populate it.":"Try a different market type or symbol search.",reasons:b.length===0?["Pipeline has not run yet.","No recommendations or outcomes in MIP.APP."]:[]})]})}const Oe="suggestions",Mt="performance",Bn="training_status",Bf=10,ud=3,El=3,Os=[1,3,5,10,20];function zQ(e,t){return e*Math.min(1,(t??0)/Bf)}function zc(e){if(!e)return"maturity_stage";const t=String(e).toUpperCase();return t==="INSUFFICIENT"?"stage_insufficient":t==="WARMING_UP"?"stage_warming_up":t==="LEARNING"?"stage_learning":t==="CONFIDENT"?"stage_confident":"maturity_stage"}function Gr(e){return e==null||Number.isNaN(e)?"":`${Number(e).toFixed(1)}%`}function Xi(e){if(e==null||Number.isNaN(e))return"";const t=Number(e);return Number.isInteger(t)?String(t):t.toFixed(2)}function FQ(e,t,n){const r=Math.min(25,e/30*25),i=t/5*25,a=Math.min(50,n/40*50);return Math.min(100,Math.round(r+i+a))}function BQ(e){const t=e||[],n=t.find(o=>o.horizon_bars===5);if(n)return n;const r=[3,5,10],i=t.filter(o=>r.includes(o.horizon_bars??0));return i.length===0?null:[...i].sort((o,l)=>{const u=o.pct_positive!=null?Number(o.pct_positive):-1,c=l.pct_positive!=null?Number(l.pct_positive):-1;if(u!==c)return c-u;const d=(o.mean_realized_return??o.mean_outcome)!=null?Number(o.mean_realized_return??o.mean_outcome):-1/0;return((l.mean_realized_return??l.mean_outcome)!=null?Number(l.mean_realized_return??l.mean_outcome):-1/0)-d})[0]}function UQ(e,t){const n=BQ(t);if(!n)return e*.6;const r=(n.mean_realized_return??n.mean_outcome)!=null?Number(n.mean_realized_return??n.mean_outcome):0,i=n.pct_positive!=null?Number(n.pct_positive):0;return e*.6+r*1e3*.2+i*100*.2}function WQ(e){return e==null||e<25?"INSUFFICIENT":e<50?"WARMING_UP":e<75?"LEARNING":"CONFIDENT"}function Um(e){const t=new URLSearchParams;e!=null&&e.symbol&&t.set("symbol",e.symbol),e!=null&&e.market_type&&t.set("market_type",e.market_type),(e==null?void 0:e.pattern_id)!=null&&t.set("pattern_id",String(e.pattern_id));const n=t.toString();return n?`/training?${n}`:"/training"}function HQ(e,t,n){const r=[...n||[]].sort((c,d)=>((d==null?void 0:d.pct_positive)??0)-((c==null?void 0:c.pct_positive)??0))[0],i=(r==null?void 0:r.pct_positive)!=null?Number(r.pct_positive):null,a=i!=null?`${(i*100).toFixed(1)}%`:"",o=(r==null?void 0:r.mean_realized_return)??(r==null?void 0:r.mean_outcome),l=o!=null?`${(Number(o)*100).toFixed(2)}%`:"",u=(r==null?void 0:r.horizon_bars)??"?";return[`Based on ${e??0} recommendations and ${t??0} evaluated outcomes, positive at ${a} over the strongest horizon (${u} bars).`,`Mean return at that horizon: ${l}.`]}function KQ(e,t,n,r){const i=(r||[]).find(u=>u.horizon_bars===5),a=(i==null?void 0:i.mean_realized_return)??(i==null?void 0:i.mean_outcome),o=(i==null?void 0:i.pct_positive)!=null?(Number(i.pct_positive)*100).toFixed(1):"",l=a!=null?`${(Number(a)*100).toFixed(2)}%`:"";return`Meets minimums (recs  ${Bf} for strong, or  ${ud} for early; horizons  ${El}). Ranked by suggestion score: maturity ${t.toFixed(0)} (${n}), 5-bar mean return ${l}, 5-bar pct positive ${o}%.`}function VQ(e){const t=[...e||[]].sort((n,r)=>((r==null?void 0:r.pct_positive)??0)-((n==null?void 0:n.pct_positive)??0))[0];return(t==null?void 0:t.horizon_bars)??5}function GQ(e,t){const n=e.outcomes_total??0,r=(e.by_horizon||[]).find(u=>u.horizon_bars===t),i=((r==null?void 0:r.mean_realized_return)??(r==null?void 0:r.mean_outcome))!=null?Number(r.mean_realized_return??r.mean_outcome)*100:null,a=(r==null?void 0:r.pct_positive)!=null?Number(r.pct_positive)*100:null,o=i!=null?i.toFixed(2):"",l=a!=null?a.toFixed(1):"";return{n,horizon:t,mean:o,pct:l}}function qQ(e,t=20){if(!e.length)return[];const n=Math.min(...e),r=Math.max(...e),i=r-n||.01,a=Array.from({length:t},(o,l)=>{const u=n+l/t*i,c=n+(l+1)/t*i,d=(u+c)/2;return{bin:l,left:u,right:c,mid:d,count:0,label:`${(d*100).toFixed(1)}%`}});return e.forEach(o=>{if(o<n||o>r)return;const l=o===r?t-1:Math.floor((o-n)/i*t);l>=0&&l<t&&(a[l].count+=1)}),a}function YQ(){var Fe,W,ie,Z;const e=Ab(),[t,n]=m.useState(null),[r,i]=m.useState(null),[a,o]=m.useState(!0),[l,u]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(5),[p,g]=m.useState([]),[y,x]=m.useState(!1),[v,b]=m.useState(null),[w,j]=m.useState(null),[_,k]=m.useState(!1),[E,A]=mh(),T=Io(),S=E.get("from")==="brief",P=E.get("symbol"),C=E.get("pattern_id"),B=E.get("market_type"),M=S||P||C||B,D=m.useCallback(()=>{A({}),T("/suggestions",{replace:!0})},[A,T]);m.useEffect(()=>{c&&(h(5),g([]),b(null))},[c]),m.useEffect(()=>{if(!c)return;let I=!1;x(!0),b(null);const K=new URLSearchParams;return c.market_type&&K.set("market_type",c.market_type),c.symbol&&K.set("symbol",c.symbol),c.pattern_id!=null&&K.set("pattern_id",String(c.pattern_id)),K.set("horizon_bars",String(f)),K.set("limit","2000"),fetch(`${J}/performance/distribution?${K}`).then(te=>te.ok?te.json():Promise.reject(new Error(te.statusText))).then(te=>{I||g(te.realized_returns??[])}).catch(te=>{I||b(te.message)}).finally(()=>{I||x(!1)}),()=>{I=!0}},[c,f]),m.useEffect(()=>{if(!c)return;const I=K=>{K.key==="Escape"&&d(null)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[c]),m.useEffect(()=>{let I=!1;return o(!0),u(null),fetch(`${J}/performance/summary`).then(K=>K.ok?K.json():Promise.reject(new Error(K.statusText))).then(K=>{if(!I)return n(K),fetch(`${J}/training/status`).then(te=>te.ok?te.json():null).catch(()=>null)}).then(K=>{!I&&K!=null&&i(K)}).catch(K=>{I||u(K.message)}).finally(()=>{I||o(!1)}),()=>{I=!0}},[]),Pp(m.useCallback(()=>{fetch(`${J}/live/metrics?portfolio_id=${e}`).then(I=>I.ok?I.json():Promise.reject(new Error(I.statusText))).then(I=>j(I)).catch(()=>j(null))},[e]),6e4);const q=m.useCallback(()=>{k(!0),fetch(`${J}/performance/summary`).then(I=>I.ok?I.json():Promise.reject(new Error(I.statusText))).then(I=>n(I)).catch(()=>{}).finally(()=>k(!1))},[]),z=m.useMemo(()=>{const I=(r==null?void 0:r.rows)??[],K={};return I.forEach(te=>{const fe=`${te.market_type??te.MARKET_TYPE}|${te.symbol??te.SYMBOL}|${te.pattern_id??te.PATTERN_ID}`;K[fe]=te}),K},[r]),[$,R]=m.useState(!0),{strongCandidates:N,earlyCandidates:Y}=m.useMemo(()=>{const I=(t==null?void 0:t.items)??[],K=ue=>typeof ue.horizons_covered=="number"?ue.horizons_covered:Array.isArray(ue.horizons_covered)?ue.horizons_covered.length:0,te=[],fe=[];return I.forEach(ue=>{const je=ue.recs_total??0,nt=K(ue);if(nt<El)return;const Be=`${ue.market_type}|${ue.symbol}|${ue.pattern_id}`,Ye=z[Be],De=(Ye==null?void 0:Ye.maturity_score)!=null?Number(Ye.maturity_score):FQ(ue.recs_total,nt,ue.outcomes_total),be=UQ(De,ue.by_horizon||[]),[Ie,he]=HQ(ue.recs_total,ue.outcomes_total,ue.by_horizon),H=(Ye==null?void 0:Ye.maturity_stage)??WQ(De),L=KQ(ue,De,H,ue.by_horizon||[]),G={...ue,suggestion_score:Math.round(be*100)/100,maturity_score:De,maturity_stage:H,what_history_line1:Ie,what_history_line2:he,why_this_is_shown:L};je>=Bf?(G.tier="strong",G.isEarlySignal=!1,te.push(G)):je>=ud&&(G.tier="early",G.isEarlySignal=!0,G.effective_score=Math.round(zQ(G.suggestion_score,je)*100)/100,fe.push(G))}),te.sort((ue,je)=>(je.suggestion_score??0)-(ue.suggestion_score??0)),fe.sort((ue,je)=>(je.effective_score??0)-(ue.effective_score??0)),{strongCandidates:te,earlyCandidates:fe}},[t,z]),O=m.useMemo(()=>{let I=$?[...N,...Y]:N;return P&&(I=I.filter(K=>{var te;return((te=K.symbol)==null?void 0:te.toLowerCase())===P.toLowerCase()})),C&&(I=I.filter(K=>String(K.pattern_id)===C)),B&&(I=I.filter(K=>{var te;return((te=K.market_type)==null?void 0:te.toLowerCase())===B.toLowerCase()})),I},[N,Y,$,P,C,B]),ne=N.length>0,ge=Y.length>0,re=O.length===0,me=!ne&&ge;return a?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Suggestions"}),s.jsx(Ot,{})]}):l?s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Suggestions"}),s.jsx(Zn,{message:l})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Suggestions"}),M&&s.jsxs("div",{className:"suggestions-filter-banner",role:"status",children:[s.jsx("span",{className:"filter-icon",children:""}),s.jsxs("span",{className:"filter-text",children:[S&&"Filtered from Cockpit. ",P&&`Symbol: ${P}. `,C&&`Pattern: ${C}. `,B&&`Market: ${B}. `,O.length===0&&"No matching candidates found."]}),s.jsx("button",{type:"button",className:"filter-clear-btn",onClick:D,children:"Clear filters"})]}),s.jsxs("p",{className:"suggestions-intro",children:["Ranked symbol/pattern candidates from evaluated outcome history (deterministic score). Explain mode ontooltips on every metric.",s.jsx(ee,{scope:Oe,variant:"short"},"no_trades_notice")]}),s.jsxs("p",{className:"suggestions-requirements",children:["Strong candidates: recs_total  ",Bf,s.jsx(ee,{scope:Oe,variant:"short"},"strong_candidate"),", horizons  ",El,". Early signals: recs_total  ",ud,s.jsx(ee,{scope:Oe,variant:"short"},"early_signal"),", horizons  ",El,s.jsx(ee,{scope:Oe,variant:"short"},"min_horizons_required"),"."," "]}),s.jsxs("label",{className:"suggestions-toggle-early",children:[s.jsx("input",{type:"checkbox",checked:$,onChange:I=>R(I.target.checked),"aria-label":"Show early signals (low confidence)"}),s.jsx("span",{children:"Show early signals"})]}),w&&(re||me)&&s.jsxs("div",{className:"suggestions-live-callout",role:"status",children:[s.jsxs("strong",{children:[ne?"Live":"No strong candidates yet",((Fe=w==null?void 0:w.outcomes)==null?void 0:Fe.last_calculated_at)&&s.jsxs(s.Fragment,{children:["  last update ",ca(w.outcomes.last_calculated_at)," ago"]}),(((W=w==null?void 0:w.outcomes)==null?void 0:W.since_last_run)??0)>0&&s.jsxs(s.Fragment,{children:["; +",w.outcomes.since_last_run," new evaluations since last run"]})]}),(((ie=w==null?void 0:w.outcomes)==null?void 0:ie.since_last_run)??0)>0&&s.jsx("button",{type:"button",className:"suggestions-refresh-btn",onClick:q,disabled:_,"aria-label":"Refresh suggestions from server",children:_?"Refreshing":"Refresh suggestions"})]}),s.jsxs("p",{className:"suggestions-count",children:[me&&s.jsx("span",{className:"suggestions-count-subtext",children:"No strong candidates yet. Showing early signals with low confidence."}),"Showing ",O.length," candidate",O.length!==1?"s":"",O.length>0&&ne&&ge&&$&&s.jsxs("span",{children:[" (",N.length," strong, ",Y.length," early)"]}),"."]}),re?ge&&!$?s.jsx(ht,{title:"No strong candidates yet",action:"Turn on 'Show early signals' to see low-confidence items (recs  3, horizons  3).",explanation:"No symbol/pattern pairs yet meet the strong threshold (recs_total  10). Some early signals exist with fewer examplesenable the toggle to show them; treat as directional only.",reasons:["Strong requires recs_total  10 and horizons  3.","Early signals are ranked by effective score (score  min(1, recs/10))."]}):s.jsxs(s.Fragment,{children:[(w==null?void 0:w.outcomes)&&s.jsxs("div",{className:"suggestions-empty-live-copy",role:"status",children:[s.jsx("p",{children:"We're tracking new evaluations as they arrive."}),s.jsxs("p",{children:["Last evaluation update: ",ca(w.outcomes.last_calculated_at)," ago."]}),(w.outcomes.since_last_run??0)>0&&s.jsxs("p",{children:["Since the last pipeline run, we've added +",w.outcomes.since_last_run," new evaluated outcomes."]}),(((Z=w==null?void 0:w.outcomes)==null?void 0:Z.since_last_run)??0)>0&&s.jsx("button",{type:"button",className:"suggestions-refresh-btn",onClick:q,disabled:_,"aria-label":"Refresh suggestions from server",children:_?"Refreshing":"Refresh suggestions"})]}),s.jsx(ht,{title:"Not enough evaluated history",action:"Run more pipelines to generate recommendations and outcomes, then return here.",explanation:"No symbol/pattern pairs meet the minimum: recs_total  3 and at least 3 horizons (e.g. 1, 3, 5, 10, 20 bars) with outcome data. Suggestions are derived from /performance/summary (RECOMMENDATION_LOG + RECOMMENDATION_OUTCOMES, daily bars only).",reasons:[`Minimum: recs_total  ${ud}, horizons_covered  ${El}.`,"Pipeline has not run enough, or data is for other intervals (we use daily bars only).","Check Training Status to see which triples have sufficient data."]})]}):s.jsxs("div",{className:"suggestions-list",children:[me&&s.jsxs("div",{className:"suggestions-no-strong-banner",role:"status",children:[s.jsx("strong",{children:"No strong candidates yet."})," Showing early signals with low confidence."]}),ne&&s.jsxs("p",{className:"suggestions-tier-heading",children:["Strong candidates",s.jsx(ee,{scope:Oe,variant:"short"},"strong_candidate")]}),ne&&N.map((I,K)=>{var te,fe,ue,je,nt,Be,Ye;return s.jsxs("article",{className:"suggestion-card suggestion-card-strong","data-rank":K+1,onClick:()=>d(I),role:"button",tabIndex:0,onKeyDown:De=>(De.key==="Enter"||De.key===" ")&&d(I),"aria-label":`Open detail for ${I.symbol} pattern ${I.pattern_id}`,children:[s.jsxs("div",{className:"suggestion-header",children:[s.jsxs("span",{className:"suggestion-rank",children:["#",K+1]}),s.jsxs("span",{className:"suggestion-triple",children:[s.jsx("span",{className:"suggestion-symbol",children:I.symbol??""}),s.jsx("span",{className:"suggestion-sep",children:"/"}),s.jsx("span",{className:"suggestion-market",children:I.market_type??""}),s.jsx("span",{className:"suggestion-sep",children:"/"}),s.jsxs("span",{className:"suggestion-pattern",children:["pattern ",I.pattern_id??""]})]}),s.jsxs("span",{className:"suggestion-score-block",title:(te=Re(Oe,"suggestion_score_formula"))==null?void 0:te.short,children:[s.jsxs("span",{className:"suggestion-score-label",children:["Suggestion score",s.jsx(ee,{scope:Oe,variant:"short"},"suggestion_score")]}),s.jsx("span",{className:"suggestion-score",children:Xi(I.suggestion_score)})]})]}),s.jsxs("div",{className:"suggestion-sample",title:(fe=Re(Oe,"sample_size"))==null?void 0:fe.short,children:["Sample size",s.jsx(ee,{scope:Oe,variant:"short"},"sample_size"),": ",s.jsx("strong",{children:Xi(I.recs_total)})]}),s.jsxs("div",{className:"suggestion-maturity",title:(ue=Re(Bn,"maturity_score"))==null?void 0:ue.short,children:[s.jsxs("span",{className:`suggestion-stage suggestion-stage-${(I.maturity_stage||"").toLowerCase().replace("_","-")}`,title:(je=Re(Bn,zc(I.maturity_stage)))==null?void 0:je.short,children:[I.maturity_stage??"",s.jsx(ee,{scope:Bn,variant:"short"},zc(I.maturity_stage))]}),s.jsx("div",{className:"suggestion-maturity-bar-wrap",title:(nt=Re(Bn,"maturity_score"))==null?void 0:nt.long,children:s.jsx("div",{className:"suggestion-maturity-bar",style:{width:`${Math.min(100,Math.max(0,I.maturity_score??0))}%`},"aria-hidden":"true"})})]}),s.jsxs("div",{className:"suggestion-what-history",title:(Be=Re(Oe,"what_history_suggests"))==null?void 0:Be.short,children:[s.jsx("strong",{children:"What history suggests"}),s.jsx(ee,{scope:Oe,variant:"short"},"what_history_suggests"),s.jsx("p",{className:"suggestion-what-line1",children:I.what_history_line1}),s.jsx("p",{className:"suggestion-what-line2",children:I.what_history_line2})]}),s.jsxs("div",{className:"suggestion-horizon-strip",title:(Ye=Re(Oe,"horizon_strip"))==null?void 0:Ye.short,children:[s.jsxs("span",{className:"suggestion-horizon-strip-label",children:["Horizon strip (1 / 3 / 5 / 10 / 20) ",s.jsx(ee,{scope:Oe,variant:"short"},"horizon_strip")]}),s.jsx("div",{className:"suggestion-sparkline","aria-hidden":"true",children:Os.map(De=>{const be=(I.by_horizon||[]).find(ce=>ce.horizon_bars===De),Ie=((be==null?void 0:be.mean_realized_return)??(be==null?void 0:be.mean_outcome))!=null?Number(be.mean_realized_return??be.mean_outcome)*100:null,he=(be==null?void 0:be.pct_positive)!=null?Number(be.pct_positive)*100:null,H=Ie??he??0,L=H==null?0:Math.min(100,Math.max(0,50+H)),G=H==null?"suggestion-sparkline-bar":H>=0?"suggestion-sparkline-bar has-value positive":"suggestion-sparkline-bar has-value negative";return s.jsx("div",{className:G,style:{height:`${L}%`},title:`${De}d: mean ${Ie!=null?Gr(Ie):""}, pct ${he!=null?Gr(he):""}`},De)})}),s.jsx("div",{className:"suggestion-horizon-strip-cells",children:Os.map(De=>{const be=(I.by_horizon||[]).find(ce=>ce.horizon_bars===De),Ie=(be==null?void 0:be.pct_positive)!=null?Number(be.pct_positive):null,he=Ie!=null?Ie*100:null,H=((be==null?void 0:be.mean_realized_return)??(be==null?void 0:be.mean_outcome))!=null?Number(be.mean_realized_return??be.mean_outcome)*100:null,L=he??H,G=L==null?"strip-cell empty":L>=50?"strip-cell good":"strip-cell weak";return s.jsxs("div",{className:G,title:`${De} bars: pct ${he!=null?Gr(he):""}, mean ${H!=null?Gr(H):""}`,children:[s.jsx("span",{className:"strip-h",children:De}),s.jsx("span",{className:"strip-v",children:L!=null?Gr(L):""})]},De)})})]}),s.jsxs("div",{className:"suggestion-cross-links",onClick:De=>De.stopPropagation(),role:"navigation","aria-label":"Connect to other views",children:[s.jsx(xe,{to:Um(I),className:"suggestion-link",title:"Training Status filtered to this symbol/pattern",children:"View Training"}),s.jsx(xe,{to:"/portfolios",className:"suggestion-link",title:"Portfolio snapshot  see if you hold this symbol",children:"View Portfolio"}),s.jsx(xe,{to:"/cockpit",className:"suggestion-link",title:"Cockpit  AI narratives and portfolio status",children:"View Cockpit"})]})]},`strong-${I.symbol}-${I.pattern_id}-${I.market_type}`)}),$&&ge&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"suggestions-tier-heading",children:["Early signals (low confidence)",s.jsx(ee,{scope:Oe,variant:"short"},"early_signal")]}),Y.map((I,K)=>{var te,fe,ue,je,nt,Be,Ye,De,be;return s.jsxs("article",{className:"suggestion-card suggestion-card-early","data-rank":ne?N.length+K+1:K+1,onClick:()=>d(I),role:"button",tabIndex:0,onKeyDown:Ie=>(Ie.key==="Enter"||Ie.key===" ")&&d(I),"aria-label":`Open detail for ${I.symbol} pattern ${I.pattern_id} (early signal)`,children:[s.jsxs("div",{className:"suggestion-header",children:[s.jsxs("span",{className:"suggestion-rank",children:["#",ne?N.length+K+1:K+1]}),s.jsxs("span",{className:"suggestion-triple",children:[s.jsx("span",{className:"suggestion-symbol",children:I.symbol??""}),s.jsx("span",{className:"suggestion-sep",children:"/"}),s.jsx("span",{className:"suggestion-market",children:I.market_type??""}),s.jsx("span",{className:"suggestion-sep",children:"/"}),s.jsxs("span",{className:"suggestion-pattern",children:["pattern ",I.pattern_id??""]})]}),s.jsxs("span",{className:"suggestion-score-block",children:[s.jsxs("span",{className:"suggestion-score-label",children:["Score",s.jsx(ee,{scope:Oe,variant:"short"},"suggestion_score"),"/ Effective",s.jsx(ee,{scope:Oe,variant:"short"},"effective_score")]}),s.jsx("span",{className:"suggestion-score",title:(te=Re(Oe,"suggestion_score_formula"))==null?void 0:te.short,children:Xi(I.suggestion_score)}),s.jsx("span",{className:"suggestion-effective-score",title:(fe=Re(Oe,"effective_score"))==null?void 0:fe.short,children:Xi(I.effective_score)})]})]}),s.jsxs("div",{className:"suggestion-badge-early",title:(ue=Re(Oe,"why_confidence_low"))==null?void 0:ue.short,children:["Early / Low confidence",s.jsx(ee,{scope:Oe,variant:"short"},"why_confidence_low")]}),s.jsxs("p",{className:"suggestion-early-sentence",children:["Only ",Xi(I.recs_total)," evaluated examples so fartreat as directional only."]}),s.jsxs("div",{className:"suggestion-sample",title:(je=Re(Oe,"sample_size"))==null?void 0:je.short,children:["Sample size",s.jsx(ee,{scope:Oe,variant:"short"},"sample_size"),": ",s.jsx("strong",{children:Xi(I.recs_total)})]}),s.jsxs("div",{className:"suggestion-maturity",title:(nt=Re(Bn,"maturity_score"))==null?void 0:nt.short,children:[s.jsxs("span",{className:`suggestion-stage suggestion-stage-${(I.maturity_stage||"").toLowerCase().replace("_","-")}`,title:(Be=Re(Bn,zc(I.maturity_stage)))==null?void 0:Be.short,children:[I.maturity_stage??"",s.jsx(ee,{scope:Bn,variant:"short"},zc(I.maturity_stage))]}),s.jsx("div",{className:"suggestion-maturity-bar-wrap",title:(Ye=Re(Bn,"maturity_score"))==null?void 0:Ye.long,children:s.jsx("div",{className:"suggestion-maturity-bar",style:{width:`${Math.min(100,Math.max(0,I.maturity_score??0))}%`},"aria-hidden":"true"})})]}),s.jsxs("div",{className:"suggestion-what-history",title:(De=Re(Oe,"what_history_suggests"))==null?void 0:De.short,children:[s.jsx("strong",{children:"What history suggests"}),s.jsx(ee,{scope:Oe,variant:"short"},"what_history_suggests"),s.jsx("p",{className:"suggestion-what-line1",children:I.what_history_line1}),s.jsx("p",{className:"suggestion-what-line2",children:I.what_history_line2})]}),s.jsxs("div",{className:"suggestion-horizon-strip",title:(be=Re(Oe,"horizon_strip"))==null?void 0:be.short,children:[s.jsxs("span",{className:"suggestion-horizon-strip-label",children:["Horizon strip (1 / 3 / 5 / 10 / 20) ",s.jsx(ee,{scope:Oe,variant:"short"},"horizon_strip")]}),s.jsx("div",{className:"suggestion-sparkline","aria-hidden":"true",children:Os.map(Ie=>{const he=(I.by_horizon||[]).find(_e=>_e.horizon_bars===Ie),H=((he==null?void 0:he.mean_realized_return)??(he==null?void 0:he.mean_outcome))!=null?Number(he.mean_realized_return??he.mean_outcome)*100:null,L=(he==null?void 0:he.pct_positive)!=null?Number(he.pct_positive)*100:null,G=H??L??0,ce=G==null?0:Math.min(100,Math.max(0,50+G)),ye=G==null?"suggestion-sparkline-bar":G>=0?"suggestion-sparkline-bar has-value positive":"suggestion-sparkline-bar has-value negative";return s.jsx("div",{className:ye,style:{height:`${ce}%`},title:`${Ie}d: mean ${H!=null?Gr(H):""}, pct ${L!=null?Gr(L):""}`},Ie)})}),s.jsx("div",{className:"suggestion-horizon-strip-cells",children:Os.map(Ie=>{const he=(I.by_horizon||[]).find(_e=>_e.horizon_bars===Ie),H=(he==null?void 0:he.pct_positive)!=null?Number(he.pct_positive):null,L=H!=null?H*100:null,G=((he==null?void 0:he.mean_realized_return)??(he==null?void 0:he.mean_outcome))!=null?Number(he.mean_realized_return??he.mean_outcome)*100:null,ce=L??G,ye=ce==null?"strip-cell empty":ce>=50?"strip-cell good":"strip-cell weak";return s.jsxs("div",{className:ye,title:`${Ie} bars: pct ${L!=null?Gr(L):""}, mean ${G!=null?Gr(G):""}`,children:[s.jsx("span",{className:"strip-h",children:Ie}),s.jsx("span",{className:"strip-v",children:ce!=null?Gr(ce):""})]},Ie)})})]}),s.jsxs("div",{className:"suggestion-cross-links",onClick:Ie=>Ie.stopPropagation(),role:"navigation","aria-label":"Connect to other views",children:[s.jsx(xe,{to:Um(I),className:"suggestion-link",title:"Training Status filtered to this symbol/pattern",children:"View Training"}),s.jsx(xe,{to:"/portfolios",className:"suggestion-link",title:"Portfolio snapshot  see if you hold this symbol",children:"View Portfolio"}),s.jsx(xe,{to:"/cockpit",className:"suggestion-link",title:"Cockpit  AI narratives and portfolio status",children:"View Cockpit"})]})]},`early-${I.symbol}-${I.pattern_id}-${I.market_type}`)})]})]}),c&&(()=>{var be,Ie,he;const I=z[`${c.market_type}|${c.symbol}|${c.pattern_id}`],K=GQ(c,f),te=VQ(c.by_horizon||[]),fe=(c.by_horizon||[]).filter(H=>Os.includes(H.horizon_bars)).sort((H,L)=>(H.horizon_bars??0)-(L.horizon_bars??0)).map(H=>({days:H.horizon_bars,mean_pct:(H.mean_realized_return??H.mean_outcome)!=null?Number(H.mean_realized_return??H.mean_outcome)*100:null,pct_positive:H.pct_positive!=null?Number(H.pct_positive)*100:null,pct_hit:H.pct_hit!=null?Number(H.pct_hit)*100:null})),ue=qQ(p),je=p.length?p.reduce((H,L)=>H+L,0)/p.length:null,nt=[...p].sort((H,L)=>H-L),Be=nt.length?nt[Math.floor(nt.length/2)]:null,Ye=(I==null?void 0:I.coverage_ratio)!=null?Number(I.coverage_ratio):null,De=(I==null?void 0:I.reasons)??(Array.isArray(I==null?void 0:I.reasons)?I.reasons:[]);return s.jsx("div",{className:"suggestion-drawer-backdrop",onClick:()=>d(null),onKeyDown:H=>H.key==="Escape"&&d(null),role:"presentation",children:s.jsxs("div",{className:"suggestion-drawer suggestion-drawer-evidence",onClick:H=>H.stopPropagation(),role:"dialog","aria-label":"Evidence drawer",children:[s.jsxs("div",{className:"suggestion-drawer-header",children:[s.jsxs("h2",{children:[c.symbol,"  ",c.market_type,"  pattern ",c.pattern_id]}),s.jsx("button",{type:"button",className:"suggestion-drawer-close",onClick:()=>d(null),"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"suggestion-drawer-body",children:[s.jsxs("div",{className:"suggestion-drawer-connect",role:"navigation","aria-label":"Connect to other views",children:[s.jsx("span",{className:"suggestion-drawer-connect-label",children:"Connect:"}),s.jsx(xe,{to:Um(c),className:"suggestion-link",onClick:()=>d(null),children:"View Training"}),s.jsx("span",{className:"suggestion-drawer-connect-sep","aria-hidden":"true",children:""}),s.jsx(xe,{to:"/portfolios",className:"suggestion-link",onClick:()=>d(null),title:"Portfolio snapshot  see if you hold this symbol",children:"View Portfolio"}),s.jsx("span",{className:"suggestion-drawer-connect-sep","aria-hidden":"true",children:""}),s.jsx(xe,{to:"/cockpit",className:"suggestion-link",onClick:()=>d(null),title:"Cockpit  AI narratives and portfolio status",children:"View Cockpit"})]}),s.jsxs("section",{className:"evidence-section evidence-explanations","aria-label":"Explanations",children:[s.jsxs("div",{className:"evidence-what",children:[s.jsx("h3",{children:"What"}),s.jsx(ee,{scope:Oe,variant:"short"},"what_history_suggests"),s.jsxs("p",{children:["We evaluated this pattern ",s.jsx(ee,{scope:Bn,variant:"short"},"pattern_id")," ",s.jsx("strong",{children:K.n})," ",s.jsx(ee,{scope:Oe,variant:"short"},"sample_size")," ","times on daily data. At ",s.jsxs("strong",{children:[K.horizon," days"]})," ",s.jsx(ee,{scope:Mt,variant:"short"},"horizon_days"),", the average ",s.jsx("strong",{children:"realized return"})," ",s.jsx(ee,{scope:Mt,variant:"short"},"realized_return")," ","was ",s.jsxs("strong",{children:[K.mean,"%"]}),", and outcomes were positive ",s.jsxs("strong",{children:[K.pct,"%"]})," of the time"," ",s.jsx(ee,{scope:Mt,variant:"short"},"pct_positive"),"."]})]}),s.jsxs("div",{className:"evidence-why",children:[s.jsx("h3",{children:"Why"}),s.jsx(ee,{scope:Oe,variant:"short"},"why_this_is_shown"),s.jsxs("p",{children:["This appears because it has ",s.jsxs("strong",{children:[c.maturity_stage??""," training maturity"]})," ",s.jsx(ee,{scope:Bn,variant:"short"},"maturity_stage")," ","and shows its strongest results around ",s.jsxs("strong",{children:[te," days"]}),"."]})]}),s.jsxs("div",{className:"evidence-how",children:[s.jsx("h3",{children:"How"}),s.jsx(ee,{scope:Oe,variant:"short"},"how_to_interpret"),s.jsxs("p",{children:[s.jsx("strong",{children:"Realized return"})," ",s.jsx(ee,{scope:Mt,variant:"short"},"realized_return")," ","is computed from the ",s.jsx("strong",{children:"entry price"})," to the ",s.jsx("strong",{children:"exit price"})," at the chosen"," ",s.jsx("strong",{children:"horizon"})," ",s.jsx(ee,{scope:Mt,variant:"short"},"horizon_bars"),". ",s.jsx("strong",{children:"Hit rate"})," ",s.jsx(ee,{scope:Mt,variant:"short"},"hit_rate")," ","shows how often the move exceeded the minimum threshold."]})]})]}),s.jsxs("section",{className:"evidence-section evidence-charts","aria-label":"Charts",children:[s.jsx("h3",{children:"Horizon strip (1 / 3 / 5 / 10 / 20 days)"}),s.jsx(ee,{scope:Oe,variant:"short"},"horizon_strip"),s.jsxs("div",{className:"evidence-horizon-chart",children:[s.jsx("span",{className:"evidence-chart-label",children:"Average return over holding period"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(mn,{data:fe,margin:{top:8,right:8,bottom:24,left:8},children:[s.jsx($e,{dataKey:"days",tickFormatter:H=>`${H} days`}),s.jsx(Ce,{tickFormatter:H=>`${H}%`}),s.jsx(He,{formatter:H=>{var L;return[H!=null?`${Number(H).toFixed(2)}%`:"",((L=Re(Mt,"mean_realized_return"))==null?void 0:L.short)??"Mean return"]},labelFormatter:H=>{var L;return`${H} days  ${((L=Re(Mt,"horizon_bars"))==null?void 0:L.short)??"holding period"}`}}),s.jsx(mt,{dataKey:"mean_pct",name:"Mean return",fill:"#1976d2",radius:[4,4,0,0],children:fe.map((H,L)=>s.jsx(Ki,{fill:fe[L].mean_pct>=0?"#2e7d32":"#c62828"},L))})]})})]}),s.jsxs("div",{className:"evidence-pct-chart",children:[s.jsx("span",{className:"evidence-chart-label",children:"Share of outcomes that were positive"}),s.jsx(We,{width:"100%",height:120,children:s.jsxs(mn,{data:fe,margin:{top:4,right:8,bottom:24,left:8},children:[s.jsx($e,{dataKey:"days",tickFormatter:H=>`${H}d`}),s.jsx(Ce,{domain:[0,100],tickFormatter:H=>`${H}%`}),s.jsx(He,{formatter:H=>{var L;return[H!=null?`${Number(H).toFixed(1)}%`:"",((L=Re(Mt,"pct_positive"))==null?void 0:L.short)??"% positive"]},labelFormatter:H=>`${H} days`}),s.jsx(mt,{dataKey:"pct_positive",name:"% positive",fill:"#1565c0",radius:[4,4,0,0]})]})})]}),s.jsxs("div",{className:"evidence-pct-chart",children:[s.jsx("span",{className:"evidence-chart-label",children:"Hit rate  how often the move met the target"}),s.jsx(We,{width:"100%",height:120,children:s.jsxs(mn,{data:fe,margin:{top:4,right:8,bottom:24,left:8},children:[s.jsx($e,{dataKey:"days",tickFormatter:H=>`${H}d`}),s.jsx(Ce,{domain:[0,100],tickFormatter:H=>`${H}%`}),s.jsx(He,{formatter:H=>{var L;return[H!=null?`${Number(H).toFixed(1)}%`:"",((L=Re(Mt,"hit_rate"))==null?void 0:L.short)??"Hit rate"]},labelFormatter:H=>`${H} days`}),s.jsx(mt,{dataKey:"pct_hit",name:"Hit rate",fill:"#5e35b1",radius:[4,4,0,0]})]})})]}),s.jsxs("h3",{children:["Distribution of realized return (",f," days)"]}),s.jsx(ee,{scope:Mt,variant:"short"},"realized_return"),s.jsx("div",{className:"evidence-horizon-selector",children:Os.map(H=>s.jsxs("button",{type:"button",className:f===H?"evidence-horizon-btn active":"evidence-horizon-btn",onClick:()=>h(H),children:[H," days"]},H))}),y&&s.jsx(Ot,{}),v&&s.jsx(Zn,{message:v}),!y&&!v&&p.length===0&&s.jsx("p",{className:"evidence-empty",children:"No distribution data for this horizon."}),!y&&!v&&p.length>0&&s.jsxs("div",{className:"evidence-dist-chart",children:[s.jsx(We,{width:"100%",height:240,children:s.jsxs(mn,{data:ue,margin:{top:8,right:8,bottom:24,left:8},children:[s.jsx($e,{dataKey:"label",interval:Math.max(0,Math.floor(ue.length/10))}),s.jsx(Ce,{}),s.jsx(He,{formatter:H=>[H,"Count"],labelFormatter:H=>`Return: ${H}`}),s.jsx(mt,{dataKey:"count",name:"Count",fill:"#37474f",radius:[2,2,0,0]}),je!=null&&s.jsx(ReferenceLine,{x:((be=ue.find(H=>H.mid>=je))==null?void 0:be.bin)??0,stroke:"#c62828",strokeDasharray:"3 3"}),Be!=null&&Be!==je&&s.jsx(ReferenceLine,{x:((Ie=ue.find(H=>H.mid>=Be))==null?void 0:Ie.bin)??0,stroke:"#1976d2",strokeDasharray:"2 2"})]})}),(je!=null||Be!=null)&&s.jsxs("p",{className:"evidence-dist-legend",children:[je!=null&&s.jsxs("span",{children:["Mean: ",(je*100).toFixed(2),"%"]}),Be!=null&&s.jsxs("span",{children:[" Median: ",(Be*100).toFixed(2),"%"]})]})]}),s.jsxs("div",{className:"evidence-confidence",children:[s.jsx("h3",{children:"Confidence"}),s.jsx(ee,{scope:Bn,variant:"short"},"maturity_score"),s.jsx("div",{className:"evidence-maturity-bar-wrap",children:s.jsx("div",{className:"evidence-maturity-bar",style:{width:`${Math.min(100,Math.max(0,c.maturity_score??0))}%`},"aria-hidden":"true"})}),s.jsxs("span",{className:"evidence-maturity-label",children:["Maturity: ",Xi(c.maturity_score)]}),Ye!=null&&s.jsxs("p",{className:"evidence-coverage",title:(he=Re(Bn,"coverage_ratio"))==null?void 0:he.short,children:["Coverage ratio: ",(Ye*100).toFixed(0),"%",s.jsx(ee,{scope:Bn,variant:"short"},"coverage_ratio")]}),Array.isArray(De)&&De.length>0&&s.jsx("ul",{className:"evidence-reasons",children:De.map((H,L)=>s.jsx("li",{children:typeof H=="string"?H:(H&&(H.reason??H.message))??String(H)},L))})]})]}),s.jsxs("table",{className:"suggestion-drawer-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{children:["Horizon ",s.jsx(ee,{scope:Mt,variant:"short"},"horizon_bars")]}),s.jsxs("th",{children:["N ",s.jsx(ee,{scope:Mt,variant:"short"},"n")]}),s.jsxs("th",{children:["Mean realized ",s.jsx(ee,{scope:Mt,variant:"short"},"mean_realized_return")]}),s.jsxs("th",{children:["% positive ",s.jsx(ee,{scope:Mt,variant:"short"},"pct_positive")]}),s.jsxs("th",{children:["% hit ",s.jsx(ee,{scope:Mt,variant:"short"},"pct_hit")]}),s.jsxs("th",{children:["Min ",s.jsx(ee,{scope:Mt,variant:"short"},"min_outcome")]}),s.jsxs("th",{children:["Max ",s.jsx(ee,{scope:Mt,variant:"short"},"max_outcome")]})]})}),s.jsx("tbody",{children:(c.by_horizon||[]).sort((H,L)=>(H.horizon_bars??0)-(L.horizon_bars??0)).map((H,L)=>s.jsxs("tr",{children:[s.jsxs("td",{children:[H.horizon_bars," bars"]}),s.jsx("td",{children:Xi(H.n)}),s.jsx("td",{children:(H.mean_realized_return??H.mean_outcome)!=null?`${(Number(H.mean_realized_return??H.mean_outcome)*100).toFixed(2)}%`:""}),s.jsx("td",{children:H.pct_positive!=null?`${(Number(H.pct_positive)*100).toFixed(1)}%`:""}),s.jsx("td",{children:H.pct_hit!=null?`${(Number(H.pct_hit)*100).toFixed(1)}%`:""}),s.jsx("td",{children:(H.min_realized_return??H.min_outcome)!=null?`${(Number(H.min_realized_return??H.min_outcome)*100).toFixed(2)}%`:""}),s.jsx("td",{children:(H.max_realized_return??H.max_outcome)!=null?`${(Number(H.max_realized_return??H.max_outcome)*100).toFixed(2)}%`:""})]},L))})]})]})]})})})()]})}function XQ(e){if(e==null)return"null";if(typeof e=="string")try{return JSON.stringify(JSON.parse(e),null,2)}catch{return e}return JSON.stringify(e,null,2)}function QQ(e){if(e==null)return"";const t=e*100;return Math.abs(t)<.1?`${t.toFixed(2)}%`:`${t.toFixed(1)}%`}function pi(e,t=2){return e!=null?Number(e).toFixed(t):""}const ZQ={TRADED:{icon:"",label:"Traded",cls:"de-pill--traded"},REJECTED_BY_TRUST:{icon:"",label:"Rejected  Trust",cls:"de-pill--rejected"},REJECTED_BY_RISK:{icon:"",label:"Rejected  Risk",cls:"de-pill--rejected-risk"},REJECTED_BY_CAPACITY:{icon:"",label:"Rejected  Capacity",cls:"de-pill--rejected-risk"},ELIGIBLE_NOT_SELECTED:{icon:"",label:"Eligible  Not Selected",cls:"de-pill--eligible"}},JQ={TRUSTED:"de-trust--trusted",WATCH:"de-trust--watch",UNTRUSTED:"de-trust--untrusted"};function eZ({outcome:e}){const t=ZQ[e]||{icon:"?",label:e,cls:""};return s.jsxs("span",{className:`de-outcome-pill ${t.cls}`,children:[s.jsx("span",{className:"de-pill-icon",children:t.icon}),t.label]})}function tZ({label:e}){const t=JQ[(e||"").toUpperCase()]||"";return s.jsx("span",{className:`de-trust-pill ${t}`,children:e||""})}function $a({label:e,value:t,onClear:n}){return t?s.jsxs("span",{className:"de-filter-badge",children:[s.jsxs("span",{className:"de-filter-badge-label",children:[e,":"]}),s.jsx("span",{className:"de-filter-badge-value",children:t}),n&&s.jsx("button",{type:"button",className:"de-filter-badge-x",onClick:n,"aria-label":`Clear ${e}`,children:""})]}):null}function nZ({summary:e,scope:t}){if(!e)return null;const n=(e.rejected_by_trust||0)+(e.rejected_by_risk||0)+(e.rejected_by_capacity||0);return s.jsxs("div",{className:"de-summary",children:[t&&s.jsx("div",{className:"de-summary-scope",children:t}),s.jsxs("div",{className:"de-summary-cards",children:[s.jsxs("div",{className:"de-card de-card--total",children:[s.jsx("span",{className:"de-card-count",children:e.total}),s.jsx("span",{className:"de-card-label",children:"Total Signals"})]}),s.jsxs("div",{className:"de-card de-card--traded",children:[s.jsx("span",{className:"de-card-count",children:e.traded}),s.jsx("span",{className:"de-card-label",children:"Traded"})]}),s.jsxs("div",{className:"de-card de-card--rejected",children:[s.jsx("span",{className:"de-card-count",children:n}),s.jsx("span",{className:"de-card-label",children:"Rejected"})]}),s.jsxs("div",{className:"de-card de-card--eligible",children:[s.jsx("span",{className:"de-card-count",children:e.eligible_not_selected}),s.jsx("span",{className:"de-card-label",children:"Eligible  Not Selected"})]})]})]})}function rZ({filters:e,onChange:t,options:n}){return s.jsxs("div",{className:"de-filters",children:[s.jsxs("div",{className:"de-filter-group",children:[s.jsx("label",{className:"de-filter-label",children:"Symbol"}),s.jsx("input",{type:"text",className:"de-filter-input",placeholder:"e.g. AAPL",value:e.symbol||"",onChange:r=>t("symbol",r.target.value||null)})]}),s.jsxs("div",{className:"de-filter-group",children:[s.jsx("label",{className:"de-filter-label",children:"Market"}),s.jsxs("select",{className:"de-filter-select",value:e.marketType||"",onChange:r=>t("market_type",r.target.value||null),children:[s.jsx("option",{value:"",children:"All"}),(n.markets||[]).map(r=>s.jsx("option",{value:r,children:r},r))]})]}),s.jsxs("div",{className:"de-filter-group",children:[s.jsx("label",{className:"de-filter-label",children:"Pattern"}),s.jsxs("select",{className:"de-filter-select",value:e.patternId||"",onChange:r=>t("pattern_id",r.target.value||null),children:[s.jsx("option",{value:"",children:"All"}),(n.patterns||[]).map(r=>s.jsx("option",{value:r,children:r},r))]})]}),s.jsxs("div",{className:"de-filter-group",children:[s.jsx("label",{className:"de-filter-label",children:"Trust"}),s.jsxs("select",{className:"de-filter-select",value:e.trustLabel||"",onChange:r=>t("trust_label",r.target.value||null),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"TRUSTED",children:"Trusted"}),s.jsx("option",{value:"WATCH",children:"Watch"}),s.jsx("option",{value:"UNTRUSTED",children:"Untrusted"})]})]}),s.jsxs("div",{className:"de-filter-group",children:[s.jsx("label",{className:"de-filter-label",children:"Outcome"}),s.jsxs("select",{className:"de-filter-select",value:e.outcome||"",onChange:r=>t("outcome",r.target.value||null),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"TRADED",children:"Traded"}),s.jsx("option",{value:"REJECTED_BY_TRUST",children:"Rejected  Trust"}),s.jsx("option",{value:"ELIGIBLE_NOT_SELECTED",children:"Eligible  Not Selected"})]})]})]})}function iZ({decision:e}){const[t,n]=m.useState(!1),r=e.decision_trace||[],i=e.metrics||{},a=Object.keys(i).length>0;return s.jsxs("div",{className:"de-trace",children:[s.jsx("div",{className:"de-trace-flow",children:r.map((o,l)=>s.jsxs("div",{className:"de-flow-item-wrap",children:[s.jsxs("div",{className:`de-flow-item ${o.passed?"de-step--pass":"de-step--fail"}`,children:[s.jsx("span",{className:"de-step-circle",children:o.passed?"":""}),s.jsxs("div",{className:"de-step-body",children:[s.jsx("span",{className:"de-step-label",children:o.label}),o.detail&&s.jsx("span",{className:"de-step-detail",children:o.detail})]})]}),l<r.length-1&&s.jsx("span",{className:"de-flow-arrow","aria-hidden":"true",children:""})]},l))}),s.jsxs("div",{className:"de-trace-panels",children:[a&&s.jsxs("div",{className:"de-trace-metrics",children:[s.jsx("h4",{className:"de-metrics-title",children:"Supporting Metrics"}),s.jsx("div",{className:"de-metrics-grid",children:Object.entries(i).map(([o,l])=>s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:o}),s.jsx("span",{className:"de-metric-value",children:typeof l=="number"?o.includes("Rate")||o.includes("Return")||o.includes("Coverage")||o.includes("Corr")?QQ(l):pi(l,o.includes("Score")?2:0):String(l??"")})]},o))})]}),e.trade_info&&s.jsxs("div",{className:"de-trace-trade",children:[s.jsx("h4",{className:"de-metrics-title",children:"Trade Details"}),s.jsxs("div",{className:"de-metrics-grid",children:[s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Portfolios"}),s.jsx("span",{className:"de-metric-value",children:Array.isArray(e.trade_info.PORTFOLIO_IDS)&&e.trade_info.PORTFOLIO_IDS.length>0?e.trade_info.PORTFOLIO_IDS.join(", "):e.trade_info.PORTFOLIO_ID??""})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Portfolio Count"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.PORTFOLIO_COUNT,0)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Linked Trades"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.TRADE_COUNT,0)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Side"}),s.jsx("span",{className:"de-metric-value",children:e.trade_info.SIDE})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Price"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.PRICE,4)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Quantity"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.QUANTITY,4)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Notional"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.NOTIONAL,2)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Total Quantity"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.TOTAL_QUANTITY,4)})]}),s.jsxs("div",{className:"de-metric",children:[s.jsx("span",{className:"de-metric-label",children:"Total Notional"}),s.jsx("span",{className:"de-metric-value",children:pi(e.trade_info.TOTAL_NOTIONAL,2)})]})]})]})]}),s.jsxs("button",{type:"button",className:"de-json-toggle",onClick:()=>n(o=>!o),children:[t?" Hide":" Show"," raw policy JSON"]}),t&&s.jsx("pre",{className:"de-raw-json",children:XQ(e.GATING_REASON)})]})}function aZ({decision:e,expanded:t,onToggle:n}){const r=e;return s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:`de-row ${t?"de-row--expanded":""}`,onClick:n,children:[s.jsx("td",{className:"de-col-symbol",children:r.SYMBOL}),s.jsxs("td",{className:"de-col-pattern",children:[s.jsx("span",{className:"de-pattern-id",children:r.PATTERN_ID??""}),r.MARKET_TYPE&&s.jsx("span",{className:"de-market-tag",children:r.MARKET_TYPE})]}),s.jsx("td",{className:"de-col-outcome",children:s.jsx(eZ,{outcome:r.outcome})}),s.jsx("td",{className:"de-col-trust",children:s.jsx(tZ,{label:r.TRUST_LABEL})}),s.jsx("td",{className:"de-col-score",children:pi(r.SCORE)}),s.jsx("td",{className:"de-col-time",children:r.SIGNAL_TS?new Date(r.SIGNAL_TS).toLocaleString():""}),s.jsx("td",{className:"de-col-why",children:r.why_summary||""}),s.jsx("td",{className:"de-col-expand",children:s.jsx("span",{className:`de-chevron ${t?"de-chevron--open":""}`,children:""})})]}),t&&s.jsx("tr",{className:"de-trace-row",children:s.jsx("td",{colSpan:8,children:s.jsx(iZ,{decision:r})})})]})}function sZ({portfolioId:e,asOfTs:t,onClear:n}){return s.jsxs("div",{className:"de-brief-banner",role:"status",children:[s.jsx("span",{className:"de-brief-icon",children:""}),s.jsxs("span",{className:"de-brief-text",children:["Filtered from Cockpit",e&&` (Portfolio ${e})`,t&&`  As of ${new Date(t).toLocaleDateString()}`]}),s.jsx("button",{type:"button",className:"de-brief-clear",onClick:n,children:"Clear filters"})]})}function oZ(){var j,_;const[e,t]=mh(),[n,r]=m.useState(null),[i,a]=m.useState(!0),[o,l]=m.useState(null),[u,c]=m.useState(null),d={symbol:e.get("symbol"),marketType:e.get("market_type"),patternId:e.get("pattern_id"),trustLabel:e.get("trust_label"),outcome:e.get("outcome"),runId:e.get("pipelineRunId")||e.get("run_id"),asOfTs:e.get("asOf")||e.get("as_of_ts"),fromBrief:e.get("from")==="brief",portfolioId:e.get("portfolioId")},f=Object.entries(d).some(([k,E])=>E&&k!=="fromBrief"),h=m.useCallback(async()=>{a(!0),l(null);try{const k=new URLSearchParams;d.symbol&&k.set("symbol",d.symbol),d.marketType&&k.set("market_type",d.marketType),d.patternId&&k.set("pattern_id",d.patternId),d.trustLabel&&k.set("trust_label",d.trustLabel),d.outcome&&k.set("outcome",d.outcome),d.runId&&k.set("run_id",d.runId),d.asOfTs&&k.set("as_of_ts",d.asOfTs),d.portfolioId&&k.set("portfolio_id",d.portfolioId),k.set("include_fallback","true"),k.set("limit","200");const E=await fetch(`${J}/signals/decisions?${k}`);if(!E.ok)throw new Error(E.statusText);r(await E.json())}catch(k){l(k.message)}finally{a(!1)}},[d.symbol,d.marketType,d.patternId,d.trustLabel,d.outcome,d.runId,d.asOfTs,d.portfolioId]);m.useEffect(()=>{h()},[h]);const p=m.useCallback(()=>t({}),[t]),g=m.useCallback((k,E)=>{const A=new URLSearchParams(e);E?A.set(k,E):A.delete(k),A.delete("from"),t(A)},[e,t]),y=m.useCallback(k=>{const E=new URLSearchParams(e);E.delete(k),E.delete("from"),t(E)},[e,t]),x=[d.asOfTs&&`Date: ${new Date(d.asOfTs).toLocaleDateString()}`,d.runId&&`Run: ${d.runId.slice(0,8)}`,d.portfolioId&&`Portfolio ${d.portfolioId}`].filter(Boolean).join("  ")||"Today";if(i)return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Decision Explorer"}),s.jsx("p",{className:"de-subtitle",children:"Explain why trades happened (or didn't)."}),s.jsx(Ot,{})]});if(o)return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Decision Explorer"}),s.jsx("p",{className:"de-subtitle",children:"Explain why trades happened (or didn't)."}),s.jsx(Zn,{message:o})]});const v=(n==null?void 0:n.decisions)||[],b=n==null?void 0:n.summary,w=(n==null?void 0:n.filter_options)||{};return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Decision Explorer"}),s.jsx("p",{className:"de-subtitle",children:"Explain why trades happened (or didn't)."}),d.fromBrief&&s.jsx(sZ,{portfolioId:d.portfolioId,asOfTs:d.asOfTs,onClear:p}),s.jsx(nZ,{summary:b,scope:x}),s.jsx(rZ,{filters:d,onChange:g,options:w}),f&&s.jsxs("div",{className:"de-active-filters",children:[s.jsx("span",{className:"de-active-label",children:"Active:"}),s.jsx($a,{label:"Symbol",value:d.symbol,onClear:()=>y("symbol")}),s.jsx($a,{label:"Market",value:d.marketType,onClear:()=>y("market_type")}),s.jsx($a,{label:"Pattern",value:d.patternId,onClear:()=>y("pattern_id")}),s.jsx($a,{label:"Trust",value:d.trustLabel,onClear:()=>y("trust_label")}),s.jsx($a,{label:"Outcome",value:(j=d.outcome)==null?void 0:j.replace(/_/g," "),onClear:()=>y("outcome")}),s.jsx($a,{label:"Run",value:(_=d.runId)==null?void 0:_.slice(0,8),onClear:()=>y("pipelineRunId")}),s.jsx($a,{label:"Date",value:d.asOfTs?new Date(d.asOfTs).toLocaleDateString():null,onClear:()=>y("asOf")}),s.jsx("button",{type:"button",className:"de-clear-all",onClick:p,children:"Clear all"})]}),s.jsx("div",{className:"de-count",children:v.length>0?s.jsxs("span",{children:["Showing ",v.length," decision",v.length!==1?"s":"",(n==null?void 0:n.total)>v.length?` of ${n.total} total`:""]}):s.jsx("span",{children:"No decisions found"})}),v.length===0?s.jsx(ht,{title:"No decisions found",action:f?s.jsx("button",{type:"button",onClick:p,children:"Clear all filters"}):s.jsx(xe,{to:"/cockpit",children:"Go to Cockpit"}),explanation:f?"No decisions match your filters. Try clearing some or using a different date.":"No signals available. Run the pipeline to generate recommendations.",reasons:["The pipeline may not have run today.","Signals may have been filtered out by trust rules.","Try clearing the run ID or date filters."]}):s.jsx("div",{className:"de-table-wrap",children:s.jsxs("table",{className:"de-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Symbol"}),s.jsx("th",{children:"Pattern"}),s.jsx("th",{children:"Outcome"}),s.jsx("th",{children:"Trust"}),s.jsx("th",{children:"Signal Score"}),s.jsx("th",{children:"Signal Time"}),s.jsx("th",{children:"Why"}),s.jsx("th",{className:"de-th-expand","aria-label":"Expand"})]})}),s.jsx("tbody",{children:v.map((k,E)=>s.jsx(aZ,{decision:k,expanded:u===(k.RECOMMENDATION_ID||E),onToggle:()=>c(A=>A===(k.RECOMMENDATION_ID||E)?null:k.RECOMMENDATION_ID||E)},k.RECOMMENDATION_ID||E))})]})}),s.jsxs("div",{className:"de-nav",children:[s.jsx(xe,{to:"/cockpit",className:"de-nav-link",children:" Cockpit"}),s.jsx(xe,{to:"/suggestions",className:"de-nav-link",children:"Suggestions "})]})]})}function gl(e,t=!1){if(t)return typeof e=="string"?e:String(e);if(e==null)return"(null)";if(typeof e=="object"&&!Array.isArray(e)){const n=Object.keys(e),r={};return n.slice(0,3).forEach(i=>{r[i]=e[i]}),JSON.stringify(r)}if(Array.isArray(e)){const n=e.length,r=e[0];if(r==null)return`[] (${n} items)`;const i=typeof r=="object"&&r!==null?Object.keys(r):[],a={};return i.slice(0,3).forEach(o=>{a[o]=r[o]}),`[${n} items] first: ${JSON.stringify(a)}`}return String(e).slice(0,80)}function lZ(){const[e,t]=m.useState([]),[n,r]=m.useState(!0);m.useEffect(()=>{let a=!1;async function o(){const l=[],u=async d=>{const f=await d.text();if(!d.ok)return f;try{return JSON.parse(f)}catch{return f}};try{const d=await fetch(`${J}/status`),f=await u(d);l.push({url:`${J}/status`,status:d.status,ok:d.ok,preview:gl(f,!d.ok),raw:f})}catch(d){l.push({url:`${J}/status`,status:0,ok:!1,preview:String((d==null?void 0:d.message)??d),raw:String((d==null?void 0:d.message)??d)})}try{const d=await fetch(`${J}/runs`),f=await u(d);l.push({url:`${J}/runs`,status:d.status,ok:d.ok,preview:gl(f,!d.ok),raw:f})}catch(d){l.push({url:`${J}/runs`,status:0,ok:!1,preview:String((d==null?void 0:d.message)??d),raw:String((d==null?void 0:d.message)??d)})}let c=null;try{const d=await fetch(`${J}/portfolios`),f=await u(d);if(d.ok&&Array.isArray(f)&&f.length>0){const h=f[0];c=h.portfolio_id??h.PORTFOLIO_ID??h.id}l.push({url:`${J}/portfolios`,status:d.status,ok:d.ok,preview:gl(f,!d.ok),raw:f})}catch(d){l.push({url:`${J}/portfolios`,status:0,ok:!1,preview:String((d==null?void 0:d.message)??d),raw:String((d==null?void 0:d.message)??d)})}if(c!=null)try{const d=`${J}/briefs/latest?portfolio_id=${c}`,f=await fetch(d),h=await u(f);l.push({url:d,status:f.status,ok:f.ok,preview:gl(h,!f.ok),raw:h})}catch(d){l.push({url:`${J}/briefs/latest?portfolio_id=${c}`,status:0,ok:!1,preview:String((d==null?void 0:d.message)??d),raw:String((d==null?void 0:d.message)??d)})}else l.push({url:`${J}/briefs/latest?portfolio_id=...`,status:null,ok:null,preview:"skipped: no portfolio id",raw:null});try{const d=await fetch(`${J}/training/status`),f=await u(d);l.push({url:`${J}/training/status`,status:d.status,ok:d.ok,preview:gl(f,!d.ok),raw:f})}catch(d){l.push({url:`${J}/training/status`,status:0,ok:!1,preview:String((d==null?void 0:d.message)??d),raw:String((d==null?void 0:d.message)??d)})}a||(t(l),r(!1))}return o(),()=>{a=!0}},[]);const i=()=>{const a=e.map(o=>({url:o.url,status:o.status,ok:o.ok,preview:o.preview,raw:o.raw}));navigator.clipboard.writeText(JSON.stringify(a,null,2))};return s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Route smoke"}),s.jsx("p",{children:"Quick debug: which endpoints fail and why (404 vs 500 vs CORS vs proxy)."}),s.jsx("button",{type:"button",className:"debug-copy-btn",onClick:i,disabled:n,"aria-label":"Copy diagnostics to clipboard",children:"Copy diagnostics"}),n&&s.jsx(Ot,{message:"Running smoke checks"}),s.jsxs("table",{className:"debug-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"URL"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Preview"})]})}),s.jsx("tbody",{children:e.map((a,o)=>s.jsxs("tr",{className:a.ok===!0?"debug-ok":a.ok===!1?"debug-fail":"debug-skip",children:[s.jsx("td",{className:"debug-url",title:a.url,children:a.url}),s.jsxs("td",{className:"debug-status",children:[a.status!=null?a.status:"",a.status===0&&" (network)"]}),s.jsx("td",{className:"debug-preview",title:typeof a.preview=="string"?a.preview:JSON.stringify(a.preview),children:a.preview})]},o))})]})]})}function uZ({active:e,payload:t,label:n}){var i,a,o,l,u;if(!e||!t||!t.length)return null;const r=(i=t[0])==null?void 0:i.payload;return r?s.jsxs("div",{className:"mtd-tooltip",children:[s.jsx("div",{className:"mtd-tooltip-date",children:n}),r.open!=null&&s.jsxs("div",{className:"mtd-tooltip-row",children:[s.jsx("span",{children:"Open:"})," ",s.jsx("span",{children:(a=r.open)==null?void 0:a.toFixed(2)})]}),r.high!=null&&s.jsxs("div",{className:"mtd-tooltip-row",children:[s.jsx("span",{children:"High:"})," ",s.jsx("span",{children:(o=r.high)==null?void 0:o.toFixed(2)})]}),r.low!=null&&s.jsxs("div",{className:"mtd-tooltip-row",children:[s.jsx("span",{children:"Low:"})," ",s.jsx("span",{children:(l=r.low)==null?void 0:l.toFixed(2)})]}),r.close!=null&&s.jsxs("div",{className:"mtd-tooltip-row",children:[s.jsx("span",{children:"Close:"})," ",s.jsx("span",{children:(u=r.close)==null?void 0:u.toFixed(2)})]}),r.events&&r.events.length>0&&s.jsx("div",{className:"mtd-tooltip-events",children:r.events.map((c,d)=>{var f,h;return s.jsxs("div",{className:`mtd-tooltip-event event-${(f=c.type)==null?void 0:f.toLowerCase()}`,children:[c.type,": ",c.side||""," ",c.type==="TRADE"&&c.quantity?`${c.quantity} @ ${(h=c.price)==null?void 0:h.toFixed(2)}`:""]},d)})})]}):null}function cZ(){return s.jsxs("div",{className:"mtd-skeleton",children:[s.jsx("div",{className:"mtd-skeleton-header"}),s.jsx("div",{className:"mtd-skeleton-chart"}),s.jsxs("div",{className:"mtd-skeleton-narrative",children:[s.jsx("div",{className:"mtd-skeleton-line"}),s.jsx("div",{className:"mtd-skeleton-line"}),s.jsx("div",{className:"mtd-skeleton-line short"})]})]})}function dZ({chains:e}){if(!(e!=null&&e.length))return null;const t=e.filter(u=>u.status!=="SIGNAL_ONLY"),n=e.length-t.length,r=[...t].sort((u,c)=>{var d,f;return(((d=c.signal)==null?void 0:d.ts)||"").localeCompare(((f=u.signal)==null?void 0:f.ts)||"")}),i=u=>{if(!u)return"";const c=u.slice(0,10),d=u.slice(11,16);return d&&d!=="00:00"?`${c} ${d}`:c},a=u=>u!=null?"$"+Number(u).toFixed(2):"",o=u=>{if(u==null)return null;const c=Number(u);return`${c>=0?"+":""}${a(Math.abs(c))}`},l=u=>u.branches||[];return s.jsxs("div",{className:"mtd-tree",children:[s.jsxs("h5",{children:["Signal Chains (",t.length,")",n>0&&s.jsxs("span",{className:"mtd-tree-orphan-note",children:["  ",n," signal-only"]})]}),r.map((u,c)=>{var d,f,h;return s.jsxs("div",{className:"mtd-tree-chain",children:[s.jsxs("div",{className:"mtd-tree-node mtd-tree-l0",children:[s.jsx("span",{className:"mtd-tree-dot signal"}),s.jsx("span",{className:"mtd-tree-type",children:"Signal"}),s.jsx("span",{className:"mtd-tree-date",children:i((d=u.signal)==null?void 0:d.ts)}),s.jsxs("span",{className:"mtd-tree-detail",children:["Pattern ",(f=u.signal)==null?void 0:f.pattern_id]}),((h=u.signal)==null?void 0:h.score)!=null&&s.jsxs("span",{className:"mtd-tree-detail",children:["Score ",u.signal.score.toFixed(4)]})]}),l(u).map((p,g)=>{var y,x,v,b,w;return s.jsxs("div",{className:"mtd-tree-branch-group",children:[s.jsxs("div",{className:"mtd-tree-node mtd-tree-l1",children:[s.jsx("span",{className:"mtd-tree-branch"}),s.jsx("span",{className:"mtd-tree-dot proposal"}),s.jsxs("span",{className:"mtd-tree-type",children:[(y=p.proposal)==null?void 0:y.side," Proposal"]}),s.jsx("span",{className:"mtd-tree-date",children:i(((x=p.proposal)==null?void 0:x.proposed_at)||((v=p.proposal)==null?void 0:v.ts))}),((b=p.proposal)==null?void 0:b.portfolio_id)&&s.jsxs(xe,{to:`/portfolios/${p.proposal.portfolio_id}`,className:"mtd-portfolio-link",children:["Portfolio ",p.proposal.portfolio_id]}),((w=p.proposal)==null?void 0:w.target_weight)!=null&&s.jsxs("span",{className:"mtd-tree-detail",children:["Weight ",p.proposal.target_weight.toFixed(2)]}),p.status==="REJECTED"&&s.jsx("span",{className:"mtd-tree-badge rejected",children:"Rejected"}),p.status==="PROPOSED"&&s.jsx("span",{className:"mtd-tree-badge proposed",children:"Pending"})]}),p.buy&&s.jsxs("div",{className:"mtd-tree-node mtd-tree-l2",children:[s.jsx("span",{className:"mtd-tree-branch"}),s.jsx("span",{className:"mtd-tree-dot trade"}),s.jsx("span",{className:"mtd-tree-type",children:"BUY"}),s.jsx("span",{className:"mtd-tree-date",children:i(p.buy.ts)}),s.jsxs("span",{className:"mtd-tree-detail",children:[p.buy.quantity,"  ",a(p.buy.price)]}),p.buy.notional!=null&&s.jsxs("span",{className:"mtd-tree-detail",children:["($",Number(p.buy.notional).toFixed(0),")"]}),p.buy.portfolio_id&&s.jsxs(xe,{to:`/portfolios/${p.buy.portfolio_id}`,className:"mtd-portfolio-link",children:["Portfolio ",p.buy.portfolio_id]}),!p.sell&&p.status==="OPEN"&&s.jsx("span",{className:"mtd-tree-badge open",children:"Open"})]}),p.sell&&s.jsxs("div",{className:"mtd-tree-node mtd-tree-l3",children:[s.jsx("span",{className:"mtd-tree-branch"}),s.jsx("span",{className:"mtd-tree-dot sell"}),s.jsx("span",{className:"mtd-tree-type",children:"SELL"}),s.jsx("span",{className:"mtd-tree-date",children:i(p.sell.ts)}),s.jsxs("span",{className:"mtd-tree-detail",children:[p.sell.quantity,"  ",a(p.sell.price)]}),p.sell.realized_pnl!=null&&s.jsx("span",{className:`mtd-tree-pnl ${Number(p.sell.realized_pnl)>=0?"positive":"negative"}`,children:o(p.sell.realized_pnl)}),s.jsx("span",{className:"mtd-tree-badge closed",children:"Closed"})]})]},g)})]},c)})]})}function fZ({symbol:e,marketType:t,portfolioId:n,windowBars:r=60,cachedData:i,onDataLoaded:a,onClose:o}){var A,T,S;const[l,u]=m.useState(i||null),[c,d]=m.useState(!i),[f,h]=m.useState(null),[p,g]=m.useState("line");if(m.useEffect(()=>{if(i){u(i),d(!1);return}let P=!1;d(!0),h(null);const C=new URLSearchParams;return C.set("symbol",e),C.set("market_type",t),C.set("window_bars",String(r)),n&&C.set("portfolio_id",n),fetch(`${J}/market-timeline/detail?${C.toString()}`).then(B=>B.ok?B.json():Promise.reject(new Error(B.statusText))).then(B=>{P||(u(B),a&&a(B))}).catch(B=>{P||h(B.message)}).finally(()=>{P||d(!1)}),()=>{P=!0}},[e,t,n,r,i,a]),c)return s.jsx(cZ,{});if(f)return s.jsxs("div",{className:"mtd-error",children:[s.jsxs("p",{children:["Error loading details: ",f]}),s.jsx("button",{onClick:o,children:"Close"})]});if(!l)return null;const y=l.ohlc||[],x=l.events||[],v=l.chains||[],b=l.narrative||{},w=l.counts||{},j={};x.forEach(P=>{var B;const C=(B=P.ts)==null?void 0:B.slice(0,10);j[C]||(j[C]=[]),j[C].push(P)});const _=y.map(P=>{var $;const C=($=P.ts)==null?void 0:$.slice(0,10),B=j[C]||[],M=B.some(R=>R.type==="SIGNAL"),D=B.some(R=>R.type==="PROPOSAL"),q=B.some(R=>R.type==="TRADE"),z=P.close>=P.open;return{...P,date:C,events:B,signalMarker:M?P.low*(D?.982:.99):null,proposalMarker:D?P.low*.99:null,tradeMarker:q?P.high*1.005:null,wick:P.high!=null&&P.low!=null?[P.low,P.high]:null,bodyUp:z&&P.open!=null?[P.open,P.close]:null,bodyDown:!z&&P.open!=null?[P.close,P.open]:null}}),k=b.decision_status||"SKIPPED",E=k==="EXECUTED"?"status-executed":k==="PROPOSED"?"status-proposed":"status-skipped";return s.jsxs("div",{className:"mtd-container",children:[s.jsxs("div",{className:"mtd-header",children:[s.jsxs("div",{className:"mtd-header-left",children:[s.jsxs("h3",{children:[e," ",s.jsx("span",{className:"mtd-market-type",children:t})]}),s.jsx("span",{className:`mtd-decision-badge ${E}`,children:k})]}),s.jsx("button",{className:"mtd-close-btn",onClick:o,"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"mtd-counts-bar",children:[s.jsxs("span",{className:"mtd-count mtd-count-signal",children:[s.jsx("strong",{children:w.signals||0})," signals"]}),s.jsx("span",{className:"mtd-count-arrow",children:""}),s.jsxs("span",{className:"mtd-count mtd-count-proposal",children:[s.jsx("strong",{children:w.proposals||0})," proposals"]}),s.jsx("span",{className:"mtd-count-arrow",children:""}),s.jsxs("span",{className:"mtd-count mtd-count-trade",children:[s.jsx("strong",{children:w.trades||0})," trades"]})]}),s.jsxs("div",{className:"mtd-chart-toggle",children:[s.jsx("button",{className:`mtd-toggle-btn ${p==="line"?"active":""}`,onClick:()=>g("line"),children:"Line"}),s.jsx("button",{className:`mtd-toggle-btn ${p==="candle"?"active":""}`,onClick:()=>g("candle"),children:"Candlestick"})]}),s.jsx("div",{className:"mtd-chart-container",children:s.jsx(We,{width:"100%",height:300,children:s.jsxs(OX,{data:_,margin:{top:20,right:20,bottom:20,left:20},children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"date",tick:{fontSize:10},tickFormatter:P=>P==null?void 0:P.slice(5)}),s.jsx(Ce,{domain:["auto","auto"],tick:{fontSize:10},tickFormatter:P=>P==null?void 0:P.toFixed(2)}),s.jsx(He,{content:s.jsx(uZ,{})}),p==="line"?s.jsxs(s.Fragment,{children:[s.jsx(pt,{type:"monotone",dataKey:"high",stroke:"#bbb",strokeWidth:1,strokeDasharray:"2 2",dot:!1,name:"Daily High",legendType:"none"}),s.jsx(pt,{type:"monotone",dataKey:"low",stroke:"#bbb",strokeWidth:1,strokeDasharray:"2 2",dot:!1,name:"Daily Low",legendType:"none"}),s.jsx(pt,{type:"monotone",dataKey:"close",stroke:"#1976d2",strokeWidth:2,dot:!1,name:"Close Price"})]}):s.jsxs(s.Fragment,{children:[s.jsx(mt,{dataKey:"wick",fill:"none",stroke:"#888",strokeWidth:1,barSize:1,name:"Wick",legendType:"none"}),s.jsx(mt,{dataKey:"bodyUp",fill:"#26a69a",stroke:"#26a69a",barSize:6,name:"Up",legendType:"none"}),s.jsx(mt,{dataKey:"bodyDown",fill:"#ef5350",stroke:"#ef5350",barSize:6,name:"Down",legendType:"none"})]}),s.jsx(ld,{dataKey:"proposalMarker",fill:"#ff9800",name:"Proposal",children:_.map((P,C)=>P.proposalMarker!=null?s.jsx("circle",{r:7,fill:"#ff9800",stroke:"#e65100",strokeWidth:2},`proposal-${C}`):null)}),s.jsx(ld,{dataKey:"signalMarker",fill:"#2196f3",name:"Signal",children:_.map((P,C)=>P.signalMarker!=null?s.jsx("circle",{r:6,fill:"#2196f3",stroke:"#1565c0",strokeWidth:2},`signal-${C}`):null)}),s.jsx(ld,{dataKey:"tradeMarker",fill:"#4caf50",name:"Trade",children:_.map((P,C)=>P.tradeMarker!=null?s.jsx("circle",{r:8,fill:"#4caf50",stroke:"#2e7d32",strokeWidth:2},`trade-${C}`):null)})]})})}),s.jsxs("div",{className:"mtd-chart-legend",children:[s.jsxs("div",{className:"legend-section legend-price",children:[s.jsx("span",{className:"legend-title",children:"Price:"}),p==="line"?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-line blue"})," Close price"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-line grey dashed"})," High/Low range"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-candle up"})," Up day"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-candle down"})," Down day"]})]})]}),s.jsxs("div",{className:"legend-section legend-events",children:[s.jsx("span",{className:"legend-title",children:"Events:"}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-dot signal"})," Signal (pattern fired)"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-dot proposal"})," Proposal (order suggested)"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-dot trade"})," Trade (executed)"]})]})]}),s.jsxs("div",{className:"mtd-narrative",children:[s.jsx("h4",{children:"Decision Narrative"}),s.jsx("div",{className:"mtd-narrative-bullets",children:(A=b.bullets)==null?void 0:A.map((P,C)=>s.jsxs("p",{className:"mtd-bullet",children:[" ",P]},C))}),((T=b.reasons)==null?void 0:T.length)>0&&s.jsxs("div",{className:"mtd-reasons",children:[s.jsx("h5",{children:"Reason Details"}),b.reasons.map((P,C)=>s.jsxs("div",{className:"mtd-reason",children:[s.jsx("span",{className:"mtd-reason-code",children:P.code}),s.jsx("span",{className:"mtd-reason-title",children:P.title}),P.evidence&&Object.keys(P.evidence).length>0&&s.jsx("span",{className:"mtd-reason-evidence",children:JSON.stringify(P.evidence)})]},C))]})]}),((S=l.trust_summary)==null?void 0:S.length)>0&&s.jsxs("div",{className:"mtd-trust-summary",children:[s.jsx("h5",{children:"Trust Status by Pattern"}),s.jsx("div",{className:"mtd-trust-grid",children:l.trust_summary.map((P,C)=>{var B;return s.jsxs("div",{className:`mtd-trust-item trust-${(B=P.trust_label)==null?void 0:B.toLowerCase()}`,children:[s.jsxs("span",{className:"mtd-trust-pattern",children:["Pattern ",P.pattern_id]}),s.jsx("span",{className:"mtd-trust-label",children:P.trust_label}),P.n_success!=null&&s.jsxs("span",{className:"mtd-trust-detail",children:[P.n_success," outcomes  ",(P.coverage_rate*100).toFixed(0),"% coverage"]})]},C)})})]}),v.length>0&&s.jsx(dZ,{chains:v})]})}function hZ(){var E,A;const[e,t]=m.useState(null),[n,r]=m.useState(!0),[i,a]=m.useState(null),[o,l]=m.useState([]),[u,c]=m.useState(""),[d,f]=m.useState(""),[h,p]=m.useState(30),[g,y]=m.useState(null),x=m.useRef({});m.useEffect(()=>{fetch(`${J}/portfolios`).then(T=>T.ok?T.json():[]).then(T=>l(Array.isArray(T)?T:[])).catch(()=>l([]))},[]),m.useEffect(()=>{let T=!1;r(!0),a(null);const S=new URLSearchParams;return S.set("window_bars",String(h)),u&&S.set("portfolio_id",u),d&&S.set("market_type",d),fetch(`${J}/market-timeline/overview?${S.toString()}`).then(P=>P.ok?P.json():Promise.reject(new Error(P.statusText))).then(P=>{T||t(P)}).catch(P=>{T||a(P.message)}).finally(()=>{T||r(!1)}),()=>{T=!0}},[u,d,h]);const v=m.useMemo(()=>{if(!(e!=null&&e.symbols))return[];const T=new Set(e.symbols.map(S=>S.market_type).filter(Boolean));return Array.from(T).sort()},[e]),b=m.useCallback((T,S)=>{const P=`${S}-${T}`;g&&g.symbol===T&&g.market_type===S?y(null):y({symbol:T,market_type:S,key:P})},[g]),w=m.useCallback((T,S,P)=>{T.key==="Enter"||T.key===" "?(T.preventDefault(),b(S,P)):T.key==="Escape"&&g&&y(null)},[b,g]),j=m.useCallback((T,S)=>{x.current[T]=S},[]);if(n)return s.jsxs("div",{className:"market-timeline-page",children:[s.jsx("h1",{children:"Market Timeline"}),s.jsx(Ot,{})]});if(i)return s.jsxs("div",{className:"market-timeline-page",children:[s.jsx("h1",{children:"Market Timeline"}),s.jsx(Zn,{message:i})]});const _=(e==null?void 0:e.symbols)??[],k=(e==null?void 0:e.window)??{};return s.jsxs("div",{className:"market-timeline-page",children:[s.jsx("h1",{children:"Market Timeline"}),s.jsx("p",{className:"market-timeline-subtitle",children:"End-to-end observability: signals  proposals  trades per symbol. Click a symbol to see the OHLC chart with event overlays and decision narrative."}),s.jsxs("div",{className:"market-timeline-filters",children:[s.jsxs("label",{children:["Portfolio:",s.jsxs("select",{value:u,onChange:T=>c(T.target.value),children:[s.jsx("option",{value:"",children:"All"}),o.map(T=>s.jsx("option",{value:T.PORTFOLIO_ID,children:T.NAME||`Portfolio ${T.PORTFOLIO_ID}`},T.PORTFOLIO_ID))]})]}),s.jsxs("label",{children:["Market:",s.jsxs("select",{value:d,onChange:T=>f(T.target.value),children:[s.jsx("option",{value:"",children:"All"}),v.map(T=>s.jsx("option",{value:T,children:T},T))]})]}),s.jsxs("label",{children:["Window:",s.jsxs("select",{value:h,onChange:T=>p(Number(T.target.value)),children:[s.jsx("option",{value:30,children:"30 bars"}),s.jsx("option",{value:60,children:"60 bars"}),s.jsx("option",{value:90,children:"90 bars"}),s.jsx("option",{value:180,children:"180 bars"})]})]})]}),k.start_ts&&s.jsxs("p",{className:"market-timeline-window-info",children:["Showing ",k.bars," bars from ",(E=k.start_ts)==null?void 0:E.slice(0,10)," to ",(A=k.latest_ts)==null?void 0:A.slice(0,10)]}),s.jsxs("div",{className:"market-timeline-legend",children:[s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-signal",children:"S"})," Signals"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-proposal",children:"P"})," Proposals"]}),s.jsxs("span",{className:"legend-item",children:[s.jsx("span",{className:"legend-trade",children:"T"})," Trades"]})]}),_.length===0?s.jsx(ht,{title:"No symbols found",message:"No market data in the selected window."}):s.jsx("div",{className:"market-timeline-grid",children:_.map(T=>{var R;const S=`${T.market_type}-${T.symbol}`,P=(g==null?void 0:g.key)===S,C=T.signal_count>0,B=T.proposal_count>0,M=T.trade_count>0,D=T.today_proposal_count>0,q=x.current[S];let z="tile-inactive";M?z="tile-executed":B?z="tile-proposed":C&&(z="tile-signals-only");const $=D?"tile-today-actionable":"";return s.jsxs(Yf.Fragment,{children:[s.jsxs("div",{className:`market-timeline-tile ${z} ${$} ${P?"tile-expanded":""}`,onClick:()=>b(T.symbol,T.market_type),onKeyDown:N=>w(N,T.symbol,T.market_type),tabIndex:0,role:"button","aria-expanded":P,"aria-label":`${T.symbol} ${T.market_type}. Signals: ${T.signal_count}, Proposals: ${T.proposal_count}, Trades: ${T.trade_count}. Press Enter to ${P?"collapse":"expand"}.`,children:[s.jsxs("div",{className:"tile-header",children:[s.jsx("span",{className:"tile-symbol",children:T.symbol}),s.jsx("span",{className:"tile-market-type",children:T.market_type})]}),s.jsxs("div",{className:"tile-badges",children:[D&&s.jsx("span",{className:"tile-action-badge",children:"ACTION"}),T.trust_label&&s.jsx("span",{className:`tile-trust-badge trust-${(R=T.trust_label)==null?void 0:R.toLowerCase()}`,children:T.trust_label})]}),s.jsxs("div",{className:"tile-counts",children:[s.jsxs("span",{className:`count-badge count-signal ${C?"has-count":""}`,children:["S:",T.signal_count]}),s.jsxs("span",{className:`count-badge count-proposal ${B?"has-count":""}`,children:["P:",T.proposal_count]}),s.jsxs("span",{className:`count-badge count-trade ${M?"has-count":""}`,children:["T:",T.trade_count]})]}),s.jsx("div",{className:"tile-expand-icon",children:s.jsx("span",{className:P?"icon-open":"",children:""})})]}),P&&s.jsx("div",{className:"market-timeline-detail-row",children:s.jsx(fZ,{symbol:T.symbol,marketType:T.market_type,portfolioId:u||null,windowBars:h*2,cachedData:q,onDataLoaded:N=>j(S,N),onClose:()=>y(null)})})]},S)})}),_.length>0&&s.jsx("div",{className:"market-timeline-summary",children:s.jsxs("p",{children:[s.jsx("strong",{children:_.length})," symbols ",s.jsxs("strong",{children:[" ",_.reduce((T,S)=>T+S.signal_count,0)]})," signals ",s.jsxs("strong",{children:[" ",_.reduce((T,S)=>T+S.proposal_count,0)]})," proposals ",s.jsxs("strong",{children:[" ",_.reduce((T,S)=>T+S.trade_count,0)]})," trades"]})})]})}const pZ=[{id:"portfolios",label:"Portfolios"},{id:"profiles",label:"Profiles"},{id:"lifecycle",label:"Lifecycle Timeline"},{id:"story",label:"Portfolio Story"}],or=e=>e==null?"":"$"+Number(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),Pl=e=>e==null?"":(Number(e)*100).toFixed(2)+"%",Wm=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return e}},lD=e=>{if(!e)return"";try{return new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}};function mZ(){const[e,t]=m.useState("portfolios"),[n,r]=m.useState([]),[i,a]=m.useState([]),[o,l]=m.useState(!0),[u,c]=m.useState(null),[d,f]=m.useState(!1),[h,p]=m.useState(null),[g,y]=m.useState(null),[x,v]=m.useState(!1),[b,w]=m.useState(null),[j,_]=m.useState(!1),[k,E]=m.useState(!1),[A,T]=m.useState(null);Pp(m.useCallback(()=>{fetch(`${J}/status`).then(M=>M.ok?M.json():{}).then(M=>f(!!M.pipeline_running)).catch(()=>{})},[]),15e3);const S=m.useCallback(async()=>{l(!0);try{const[M,D]=await Promise.all([fetch(`${J}/portfolios`).then(z=>z.ok?z.json():[]),fetch(`${J}/manage/profiles`).then(z=>z.ok?z.json():{profiles:[]})]);r(Array.isArray(M)?M:[]),a(D.profiles||[]);const q=Array.isArray(M)?M:[];q.length>0&&!h&&p(q[0].PORTFOLIO_ID||q[0].portfolio_id)}catch(M){console.error("Failed to load management data",M)}finally{l(!1)}},[h]);m.useEffect(()=>{S()},[]),m.useEffect(()=>{!h||e!=="lifecycle"&&e!=="story"||(e==="lifecycle"&&(v(!0),fetch(`${J}/manage/portfolios/${h}/lifecycle`).then(M=>M.ok?M.json():null).then(M=>y(M)).catch(()=>y(null)).finally(()=>v(!1))),e==="story"&&(_(!0),fetch(`${J}/manage/portfolios/${h}/narrative`).then(M=>M.ok?M.json():null).then(M=>{M&&M.narrative?(w(M),_(!1)):(_(!1),E(!0),fetch(`${J}/manage/portfolios/${h}/narrative`,{method:"POST"}).then(()=>fetch(`${J}/manage/portfolios/${h}/narrative`)).then(D=>D.ok?D.json():null).then(D=>w(D)).catch(()=>w(null)).finally(()=>E(!1)))}).catch(()=>{w(null),_(!1)})))},[h,e]),m.useEffect(()=>{if(u){const M=setTimeout(()=>c(null),5e3);return()=>clearTimeout(M)}},[u]);const P=async(M,D,q)=>{try{const z={method:M,headers:{"Content-Type":"application/json"}};q&&(z.body=JSON.stringify(q));const $=await fetch(`${J}${D}`,z);let R;const N=await $.text();try{R=JSON.parse(N)}catch{R={detail:N}}return $.ok?(c({type:"success",message:R.action?`${R.action} successfully`:"Success"}),await S(),R):(c({type:"error",message:R.detail||`Request failed (${$.status})`}),null)}catch(z){return c({type:"error",message:z.message}),null}},C=async()=>{if(h){E(!0);try{const M=await fetch(`${J}/manage/portfolios/${h}/narrative`,{method:"POST"});let D;const q=await M.text();try{D=JSON.parse(q)}catch{D={detail:q}}if(M.ok){const z=await fetch(`${J}/manage/portfolios/${h}/narrative`);z.ok&&w(await z.json()),c({type:"success",message:"Portfolio story generated successfully"})}else c({type:"error",message:D.detail||`Failed to generate narrative (${M.status})`})}catch(M){c({type:"error",message:M.message})}finally{E(!1)}}},B=M=>M.PORTFOLIO_ID||M.portfolio_id;return o?s.jsx("div",{className:"mgmt-loading",children:"Loading management data..."}):s.jsxs("div",{children:[s.jsx("h1",{children:"Portfolio Management"}),d&&s.jsx("div",{className:"mgmt-pipeline-lock",children:"Pipeline is currently running  editing is disabled until the run completes."}),u&&s.jsx("div",{className:u.type==="error"?"mgmt-error":"mgmt-success",children:u.message}),s.jsx("div",{className:"mgmt-tabs",children:pZ.map(M=>s.jsx("button",{className:`mgmt-tab ${e===M.id?"mgmt-tab--active":""}`,onClick:()=>t(M.id),children:M.label},M.id))}),e==="portfolios"&&s.jsx(gZ,{portfolios:n,profiles:i,onEdit:M=>T({type:"portfolio",data:M}),onCreate:()=>T({type:"portfolio",data:null}),onCash:M=>T({type:"cash",data:M}),onAttachProfile:M=>T({type:"attach",data:M}),disabled:d}),e==="profiles"&&s.jsx(yZ,{profiles:i,onEdit:M=>T({type:"profile",data:M}),onCreate:()=>T({type:"profile",data:null}),disabled:d}),e==="lifecycle"&&s.jsx(vZ,{portfolios:n,selectedPortfolioId:h,onSelectPortfolio:p,lifecycle:g,loading:x}),e==="story"&&s.jsx(xZ,{portfolios:n,selectedPortfolioId:h,onSelectPortfolio:p,narrative:b,loading:j,generating:k,onGenerate:C}),(A==null?void 0:A.type)==="portfolio"&&s.jsx(bZ,{data:A.data,profiles:i,onClose:()=>T(null),onSave:M=>{const D=!A.data;P(D?"POST":"PUT",D?"/manage/portfolios":`/manage/portfolios/${B(A.data)}`,M).then(q=>{q&&T(null)})}}),(A==null?void 0:A.type)==="profile"&&s.jsx(jZ,{data:A.data,onClose:()=>T(null),onSave:M=>{const D=!A.data;P(D?"POST":"PUT",D?"/manage/profiles":`/manage/profiles/${A.data.PROFILE_ID}`,M).then(q=>{q&&T(null)})}}),(A==null?void 0:A.type)==="cash"&&s.jsx(wZ,{portfolio:A.data,onClose:()=>T(null),onSave:M=>{P("POST",`/manage/portfolios/${B(A.data)}/cash`,M).then(D=>{D&&T(null)})}}),(A==null?void 0:A.type)==="attach"&&s.jsx(kZ,{portfolio:A.data,profiles:i,onClose:()=>T(null),onSave:M=>{P("PUT",`/manage/portfolios/${B(A.data)}/profile`,{profile_id:M}).then(D=>{D&&T(null)})}})]})}function gZ({portfolios:e,profiles:t,onEdit:n,onCreate:r,onCash:i,onAttachProfile:a,disabled:o}){const l={};return t.forEach(u=>{l[u.PROFILE_ID]=u.NAME}),s.jsxs("div",{children:[s.jsxs("div",{className:"mgmt-section-header",children:[s.jsx("h2",{children:"Portfolios"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-primary",onClick:r,disabled:o,children:"+ Create Portfolio"})]}),s.jsxs("table",{className:"mgmt-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Profile"}),s.jsx("th",{children:"Starting Cash"}),s.jsx("th",{children:"Final Equity"}),s.jsx("th",{children:"Return"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsxs("tbody",{children:[e.map(u=>{const c=u.PORTFOLIO_ID||u.portfolio_id,d=u.PROFILE_ID||u.profile_id;return s.jsxs("tr",{children:[s.jsx("td",{children:c}),s.jsx("td",{children:s.jsx("strong",{children:u.NAME||u.name})}),s.jsx("td",{children:l[d]||d||""}),s.jsx("td",{children:or(u.STARTING_CASH||u.starting_cash)}),s.jsx("td",{children:or(u.FINAL_EQUITY||u.final_equity)}),s.jsx("td",{children:Pl(u.TOTAL_RETURN||u.total_return)}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${(u.STATUS||u.status)==="ACTIVE"?"":"status-badge--warn"}`,children:u.STATUS||u.status})}),s.jsx("td",{children:s.jsxs("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:[s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary mgmt-btn-sm",onClick:()=>n(u),disabled:o,children:"Edit"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-success mgmt-btn-sm",onClick:()=>i(u),disabled:o,children:"Cash"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-primary mgmt-btn-sm",onClick:()=>a(u),disabled:o,children:"Profile"})]})})]},c)}),e.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:8,style:{textAlign:"center",color:"#888",padding:"2rem"},children:"No portfolios yet. Create your first one."})})]})]})]})}function yZ({profiles:e,onEdit:t,onCreate:n,disabled:r}){return s.jsxs("div",{children:[s.jsxs("div",{className:"mgmt-section-header",children:[s.jsx("h2",{children:"Portfolio Profiles"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-primary",onClick:n,disabled:r,children:"+ Create Profile"})]}),s.jsxs("table",{className:"mgmt-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"ID"}),s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Max Pos"}),s.jsx("th",{children:"Max Pos %"}),s.jsx("th",{children:"Bust %"}),s.jsx("th",{children:"Bust Action"}),s.jsx("th",{children:"DD Stop %"}),s.jsx("th",{children:"Crystallize"}),s.jsx("th",{children:"Used By"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:e.map(i=>s.jsxs("tr",{children:[s.jsx("td",{children:i.PROFILE_ID}),s.jsx("td",{children:s.jsx("strong",{children:i.NAME})}),s.jsx("td",{children:i.MAX_POSITIONS??""}),s.jsx("td",{children:i.MAX_POSITION_PCT!=null?Pl(i.MAX_POSITION_PCT):""}),s.jsx("td",{children:i.BUST_EQUITY_PCT!=null?Pl(i.BUST_EQUITY_PCT):""}),s.jsx("td",{children:i.BUST_ACTION||""}),s.jsx("td",{children:i.DRAWDOWN_STOP_PCT!=null?Pl(i.DRAWDOWN_STOP_PCT):""}),s.jsx("td",{children:i.CRYSTALLIZE_ENABLED?s.jsxs("span",{style:{color:"#198754",fontWeight:600},children:[Pl(i.PROFIT_TARGET_PCT)," (",i.CRYSTALLIZE_MODE,")"]}):s.jsx("span",{style:{color:"#888"},children:"Off"})}),s.jsxs("td",{children:[i.PORTFOLIO_COUNT||0," portfolio",(i.PORTFOLIO_COUNT||0)!==1?"s":""]}),s.jsx("td",{children:s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary mgmt-btn-sm",onClick:()=>t(i),disabled:r,children:"Edit"})})]},i.PROFILE_ID))})]})]})}function vZ({portfolios:e,selectedPortfolioId:t,onSelectPortfolio:n,lifecycle:r,loading:i}){const a=(r==null?void 0:r.events)||[],o=(r==null?void 0:r.daily_series)||[],l=a.map(d=>({ts:Wm(d.EVENT_TS),type:d.EVENT_TYPE,equity:Number(d.EQUITY_AFTER)||0,cash:Number(d.CASH_AFTER)||0,pnl:Number(d.CUMULATIVE_PNL)||0,amount:Number(d.AMOUNT)||0,label:d.EVENT_LABEL})),u=o.map(d=>({ts:Wm(d.ts),equity:d.equity??0,cash:d.cash??0})),c=a.filter(d=>["CREATE","DEPOSIT","WITHDRAW","CRYSTALLIZE"].includes(d.EVENT_TYPE)).map(d=>({ts:Wm(d.EVENT_TS),type:d.EVENT_TYPE,amount:d.EVENT_TYPE==="WITHDRAW"||d.EVENT_TYPE==="CRYSTALLIZE"?-(Number(d.AMOUNT)||0):Number(d.AMOUNT)||0,netContributed:Number(d.NET_CONTRIBUTED)||0,label:d.EVENT_LABEL}));return s.jsxs("div",{children:[s.jsx(uD,{portfolios:e,selectedId:t,onChange:n}),i&&s.jsx("div",{className:"mgmt-loading",children:"Loading lifecycle events..."}),!i&&a.length===0&&s.jsx("div",{className:"mgmt-card",style:{textAlign:"center",color:"#888",padding:"3rem"},children:"No lifecycle events recorded yet. Create a portfolio or perform a cash event to begin tracking."}),!i&&a.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mgmt-charts-grid",children:[s.jsxs("div",{className:"mgmt-chart-card",children:[s.jsx("h4",{children:"Lifetime Equity"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(si,{data:l,children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:11}}),s.jsx(Ce,{tick:{fontSize:11},tickFormatter:d=>"$"+(d/1e3).toFixed(1)+"k"}),s.jsx(He,{formatter:d=>[or(d),"Equity"],labelFormatter:d=>d}),s.jsx(pt,{type:"monotone",dataKey:"equity",stroke:"#0066cc",strokeWidth:2,dot:{r:4}})]})})]}),s.jsxs("div",{className:"mgmt-chart-card",children:[s.jsx("h4",{children:"Cumulative Lifetime P&L"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(nD,{data:l,children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:11}}),s.jsx(Ce,{tick:{fontSize:11},tickFormatter:d=>"$"+d.toLocaleString()}),s.jsx(He,{formatter:d=>[or(d),"P&L"],labelFormatter:d=>d}),s.jsx(yn,{y:0,stroke:"#999",strokeDasharray:"3 3"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"pnlGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#198754",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#198754",stopOpacity:0})]})}),s.jsx(ib,{type:"monotone",dataKey:"pnl",stroke:"#198754",fill:"url(#pnlGrad)",strokeWidth:2,dot:{r:4}})]})})]}),s.jsxs("div",{className:"mgmt-chart-card",children:[s.jsx("h4",{children:"Cash Flow Events"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(mn,{data:c,children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:11}}),s.jsx(Ce,{tick:{fontSize:11},tickFormatter:d=>"$"+d.toLocaleString()}),s.jsx(He,{formatter:(d,f)=>[or(Math.abs(d)),f==="amount"?"Cash Flow":"Net Contributed"],labelFormatter:(d,f)=>{var h,p;return((p=(h=f==null?void 0:f[0])==null?void 0:h.payload)==null?void 0:p.label)||d}}),s.jsx(yn,{y:0,stroke:"#999"}),s.jsx(mt,{dataKey:"amount",name:"Cash Flow",children:c.map((d,f)=>s.jsx(Ki,{fill:d.amount>=0?"#198754":"#dc3545"},f))})]})})]}),s.jsxs("div",{className:"mgmt-chart-card",children:[s.jsx("h4",{children:"Cash vs Equity"}),s.jsx(We,{width:"100%",height:220,children:s.jsxs(si,{data:u.length>0?u:l,children:[s.jsx(st,{strokeDasharray:"3 3",stroke:"#eee"}),s.jsx($e,{dataKey:"ts",tick:{fontSize:11}}),s.jsx(Ce,{tick:{fontSize:11},tickFormatter:d=>"$"+(d/1e3).toFixed(1)+"k"}),s.jsx(He,{formatter:d=>[or(d)]}),s.jsx(ns,{}),s.jsx(pt,{type:"monotone",dataKey:"cash",stroke:"#ff9800",strokeWidth:2,dot:!1,name:"Cash"}),s.jsx(pt,{type:"monotone",dataKey:"equity",stroke:"#0066cc",strokeWidth:2,dot:!1,name:"Total Equity"})]})})]})]}),s.jsx("h3",{children:"Event Timeline"}),s.jsx("div",{className:"mgmt-timeline",children:a.map(d=>s.jsxs("div",{className:"mgmt-timeline-event",children:[s.jsx("div",{className:`mgmt-timeline-dot mgmt-timeline-dot--${(d.EVENT_TYPE||"").toLowerCase()}`}),s.jsxs("div",{className:"mgmt-timeline-header",children:[s.jsx("span",{className:"mgmt-timeline-type",children:d.EVENT_LABEL||d.EVENT_TYPE}),s.jsx("span",{className:"mgmt-timeline-ts",children:lD(d.EVENT_TS)})]}),d.AMOUNT!=null&&d.AMOUNT>0&&!["EPISODE_START"].includes(d.EVENT_TYPE)&&(()=>{const f=["DEPOSIT","CREATE","EPISODE_END"].includes(d.EVENT_TYPE);return s.jsxs("span",{className:`mgmt-timeline-amount ${f?"mgmt-timeline-amount--positive":"mgmt-timeline-amount--negative"}`,children:[f?"+":"-",or(d.AMOUNT)]})})(),s.jsxs("div",{className:"mgmt-timeline-snapshots",children:[s.jsxs("span",{children:["Cash: ",or(d.CASH_AFTER)]}),s.jsxs("span",{children:["Equity: ",or(d.EQUITY_AFTER)]}),s.jsxs("span",{children:["Lifetime P&L: ",or(d.CUMULATIVE_PNL)]})]}),d.NOTES&&s.jsx("div",{className:"mgmt-timeline-notes",children:d.NOTES})]},d.EVENT_ID))})]})]})}function xZ({portfolios:e,selectedPortfolioId:t,onSelectPortfolio:n,narrative:r,loading:i,generating:a,onGenerate:o}){var c;const l=r==null?void 0:r.narrative,u=(l==null?void 0:l.NARRATIVE_JSON)||(l==null?void 0:l.narrative_json);return s.jsxs("div",{children:[s.jsx(uD,{portfolios:e,selectedId:t,onChange:n}),s.jsxs("div",{className:"mgmt-section-header",children:[s.jsx("h2",{children:"Portfolio Story"}),l&&s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary mgmt-btn-sm",onClick:o,disabled:a,children:a?"Regenerating...":"Regenerate"})]}),i&&s.jsx("div",{className:"mgmt-loading",children:"Loading narrative..."}),a&&s.jsx("div",{className:"mgmt-loading",children:"Generating portfolio story with AI... This may take 10-20 seconds."}),!i&&!a&&!l&&s.jsx("div",{className:"mgmt-card",style:{textAlign:"center",color:"#888",padding:"3rem"},children:"No portfolio story available. The AI narrative will be generated automatically."}),!i&&!a&&l&&s.jsxs("div",{className:"mgmt-narrative-card",children:[(u==null?void 0:u.headline)&&s.jsx("div",{className:"mgmt-narrative-headline",children:u.headline}),s.jsx("div",{className:"mgmt-narrative-text",children:u!=null&&u.narrative?u.narrative.split(`

`).map((d,f)=>s.jsx("p",{children:d},f)):s.jsx("p",{children:l.NARRATIVE_TEXT||l.narrative_text||"No narrative text available."})}),((c=u==null?void 0:u.key_moments)==null?void 0:c.length)>0&&s.jsxs("div",{className:"mgmt-narrative-moments",children:[s.jsx("h4",{children:"Key Moments"}),s.jsx("ul",{children:u.key_moments.map((d,f)=>s.jsx("li",{children:d},f))})]}),(u==null?void 0:u.outlook)&&s.jsxs("div",{className:"mgmt-narrative-outlook",children:[s.jsx("strong",{children:"Outlook:"})," ",u.outlook]}),s.jsxs("div",{className:"mgmt-narrative-meta",children:[s.jsxs("span",{children:["Model: ",l.MODEL_INFO||l.model_info||""]}),s.jsxs("span",{children:["Generated: ",lD(l.CREATED_AT||l.created_at)]})]})]})]})}function uD({portfolios:e,selectedId:t,onChange:n}){return s.jsxs("div",{className:"mgmt-portfolio-selector",children:[s.jsx("label",{children:"Portfolio:"}),s.jsx("select",{value:t||"",onChange:r=>n(Number(r.target.value)),children:e.map(r=>{const i=r.PORTFOLIO_ID||r.portfolio_id;return s.jsxs("option",{value:i,children:[r.NAME||r.name," (#",i,")"]},i)})})]})}function bZ({data:e,profiles:t,onClose:n,onSave:r}){var u;const i=!e,[a,o]=m.useState({name:(e==null?void 0:e.NAME)||(e==null?void 0:e.name)||"",base_currency:(e==null?void 0:e.BASE_CURRENCY)||(e==null?void 0:e.base_currency)||"USD",starting_cash:(e==null?void 0:e.STARTING_CASH)||(e==null?void 0:e.starting_cash)||"",profile_id:(e==null?void 0:e.PROFILE_ID)||(e==null?void 0:e.profile_id)||((u=t[0])==null?void 0:u.PROFILE_ID)||"",notes:(e==null?void 0:e.NOTES)||(e==null?void 0:e.notes)||""}),l=()=>{const c=i?{...a,starting_cash:Number(a.starting_cash),profile_id:Number(a.profile_id)}:{name:a.name,base_currency:a.base_currency,notes:a.notes};r(c)};return s.jsx("div",{className:"mgmt-modal-backdrop",onClick:n,children:s.jsxs("div",{className:"mgmt-modal",onClick:c=>c.stopPropagation(),children:[s.jsx("h3",{children:i?"Create New Portfolio":`Edit Portfolio: ${(e==null?void 0:e.NAME)||(e==null?void 0:e.name)}`}),s.jsxs("div",{className:"mgmt-form",children:[s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Name"}),s.jsx("input",{value:a.name,onChange:c=>o({...a,name:c.target.value})})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Currency"}),s.jsxs("select",{value:a.base_currency,onChange:c=>o({...a,base_currency:c.target.value}),children:[s.jsx("option",{value:"USD",children:"USD"}),s.jsx("option",{value:"EUR",children:"EUR"}),s.jsx("option",{value:"GBP",children:"GBP"})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Starting Cash"}),s.jsx("input",{type:"number",min:"1",step:"100",value:a.starting_cash,onChange:c=>o({...a,starting_cash:c.target.value})})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Risk Profile"}),s.jsx("select",{value:a.profile_id,onChange:c=>o({...a,profile_id:c.target.value}),children:t.map(c=>s.jsx("option",{value:c.PROFILE_ID,children:c.NAME},c.PROFILE_ID))})]})]}),s.jsxs("div",{className:"mgmt-field mgmt-form-full",children:[s.jsx("label",{children:"Notes"}),s.jsx("textarea",{value:a.notes,onChange:c=>o({...a,notes:c.target.value}),rows:2})]})]}),s.jsxs("div",{className:"mgmt-btn-group",children:[s.jsx("button",{className:"mgmt-btn mgmt-btn-primary",onClick:l,children:i?"Create Portfolio":"Save Changes"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary",onClick:n,children:"Cancel"})]})]})})}function wZ({portfolio:e,onClose:t,onSave:n}){const[r,i]=m.useState("DEPOSIT"),[a,o]=m.useState(""),[l,u]=m.useState(""),c=(e==null?void 0:e.NAME)||(e==null?void 0:e.name);return s.jsx("div",{className:"mgmt-modal-backdrop",onClick:t,children:s.jsxs("div",{className:"mgmt-modal",onClick:d=>d.stopPropagation(),children:[s.jsxs("h3",{children:["Cash Event: ",c]}),s.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:"Register a deposit or withdrawal. Your lifetime P&L tracking will remain intact  the system adjusts the cost basis so gains/losses are always calculated correctly."}),s.jsxs("div",{className:"mgmt-form",children:[s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Type"}),s.jsxs("select",{value:r,onChange:d=>i(d.target.value),children:[s.jsx("option",{value:"DEPOSIT",children:"Deposit (add cash)"}),s.jsx("option",{value:"WITHDRAW",children:"Withdraw (remove cash)"})]})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Amount"}),s.jsx("input",{type:"number",min:"0.01",step:"100",value:a,onChange:d=>o(d.target.value),placeholder:"1000.00"})]}),s.jsxs("div",{className:"mgmt-field mgmt-form-full",children:[s.jsx("label",{children:"Notes (optional)"}),s.jsx("textarea",{value:l,onChange:d=>u(d.target.value),rows:2,placeholder:"e.g. Monthly savings contribution"})]})]}),s.jsxs("div",{className:"mgmt-btn-group",children:[s.jsx("button",{className:`mgmt-btn ${r==="DEPOSIT"?"mgmt-btn-success":"mgmt-btn-danger"}`,onClick:()=>n({event_type:r,amount:Number(a),notes:l||void 0}),disabled:!a||Number(a)<=0,children:r==="DEPOSIT"?`Deposit ${or(a)}`:`Withdraw ${or(a)}`}),s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary",onClick:t,children:"Cancel"})]})]})})}function kZ({portfolio:e,profiles:t,onClose:n,onSave:r}){var u;const i=(e==null?void 0:e.PROFILE_ID)||(e==null?void 0:e.profile_id),[a,o]=m.useState(i||((u=t[0])==null?void 0:u.PROFILE_ID)||""),l=(e==null?void 0:e.NAME)||(e==null?void 0:e.name);return s.jsx("div",{className:"mgmt-modal-backdrop",onClick:n,children:s.jsxs("div",{className:"mgmt-modal",onClick:c=>c.stopPropagation(),children:[s.jsxs("h3",{children:["Attach Profile: ",l]}),s.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:"Changing the profile will end the current episode and start a new one with the selected profile. Episode results will be preserved."}),s.jsxs("div",{className:"mgmt-field",style:{maxWidth:300},children:[s.jsx("label",{children:"Risk Profile"}),s.jsx("select",{value:a,onChange:c=>o(Number(c.target.value)),children:t.map(c=>s.jsxs("option",{value:c.PROFILE_ID,children:[c.NAME," ",c.PROFILE_ID===i?"(current)":""]},c.PROFILE_ID))})]}),s.jsxs("div",{className:"mgmt-btn-group",children:[s.jsx("button",{className:"mgmt-btn mgmt-btn-primary",onClick:()=>r(a),disabled:a===i,children:a===i?"Already attached":"Attach Profile"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary",onClick:n,children:"Cancel"})]})]})})}function jZ({data:e,onClose:t,onSave:n}){const r=!e,[i,a]=m.useState({name:(e==null?void 0:e.NAME)||"",max_positions:(e==null?void 0:e.MAX_POSITIONS)??"",max_position_pct:(e==null?void 0:e.MAX_POSITION_PCT)!=null?e.MAX_POSITION_PCT*100:"",bust_equity_pct:(e==null?void 0:e.BUST_EQUITY_PCT)!=null?e.BUST_EQUITY_PCT*100:"",bust_action:(e==null?void 0:e.BUST_ACTION)||"ALLOW_EXITS_ONLY",drawdown_stop_pct:(e==null?void 0:e.DRAWDOWN_STOP_PCT)!=null?e.DRAWDOWN_STOP_PCT*100:"",crystallize_enabled:(e==null?void 0:e.CRYSTALLIZE_ENABLED)||!1,profit_target_pct:(e==null?void 0:e.PROFIT_TARGET_PCT)!=null?e.PROFIT_TARGET_PCT*100:"",crystallize_mode:(e==null?void 0:e.CRYSTALLIZE_MODE)||"WITHDRAW_PROFITS",cooldown_days:(e==null?void 0:e.COOLDOWN_DAYS)??"",max_episode_days:(e==null?void 0:e.MAX_EPISODE_DAYS)??"",take_profit_on:(e==null?void 0:e.TAKE_PROFIT_ON)||"EOD",description:(e==null?void 0:e.DESCRIPTION)||""}),o=(u,c)=>a(d=>({...d,[u]:c})),l=()=>{const u={name:i.name||void 0,max_positions:i.max_positions!==""?Number(i.max_positions):void 0,max_position_pct:i.max_position_pct!==""?Number(i.max_position_pct)/100:void 0,bust_equity_pct:i.bust_equity_pct!==""?Number(i.bust_equity_pct)/100:void 0,bust_action:i.bust_action||void 0,drawdown_stop_pct:i.drawdown_stop_pct!==""?Number(i.drawdown_stop_pct)/100:void 0,crystallize_enabled:i.crystallize_enabled,profit_target_pct:i.profit_target_pct!==""?Number(i.profit_target_pct)/100:void 0,crystallize_mode:i.crystallize_mode||void 0,cooldown_days:i.cooldown_days!==""?Number(i.cooldown_days):void 0,max_episode_days:i.max_episode_days!==""?Number(i.max_episode_days):void 0,take_profit_on:i.take_profit_on||void 0,description:i.description||void 0};n(u)};return s.jsx("div",{className:"mgmt-modal-backdrop",onClick:t,children:s.jsxs("div",{className:"mgmt-modal",onClick:u=>u.stopPropagation(),children:[s.jsx("h3",{children:r?"Create New Profile":`Edit Profile: ${e==null?void 0:e.NAME}`}),s.jsxs("div",{className:"mgmt-form",children:[s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Name"}),s.jsx("input",{value:i.name,onChange:u=>o("name",u.target.value),placeholder:"e.g. MODERATE_RISK"})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Max Positions"}),s.jsx("input",{type:"number",min:"1",value:i.max_positions,onChange:u=>o("max_positions",u.target.value)})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Max Position %"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.5",value:i.max_position_pct,onChange:u=>o("max_position_pct",u.target.value),placeholder:"e.g. 8 for 8%"})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Bust Equity %"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:i.bust_equity_pct,onChange:u=>o("bust_equity_pct",u.target.value),placeholder:"e.g. 50 for 50%"})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Bust Action"}),s.jsxs("select",{value:i.bust_action,onChange:u=>o("bust_action",u.target.value),children:[s.jsx("option",{value:"ALLOW_EXITS_ONLY",children:"Allow Exits Only"}),s.jsx("option",{value:"LIQUIDATE_NEXT_BAR",children:"Liquidate Next Bar"}),s.jsx("option",{value:"LIQUIDATE_IMMEDIATE",children:"Liquidate Immediate"})]})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Drawdown Stop %"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:i.drawdown_stop_pct,onChange:u=>o("drawdown_stop_pct",u.target.value),placeholder:"e.g. 15 for 15%"})]}),s.jsxs("div",{className:"mgmt-field mgmt-form-full",children:[s.jsx("label",{children:"Description"}),s.jsx("textarea",{value:i.description,onChange:u=>o("description",u.target.value),rows:2})]})]}),s.jsxs("details",{className:"mgmt-crystallize-section",open:i.crystallize_enabled,children:[s.jsx("summary",{children:"Crystallization Settings"}),s.jsxs("div",{className:"mgmt-crystallize-fields",children:[s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Enabled"}),s.jsxs("div",{className:"mgmt-toggle",children:[s.jsx("input",{type:"checkbox",checked:i.crystallize_enabled,onChange:u=>o("crystallize_enabled",u.target.checked)}),s.jsx("span",{style:{fontSize:"0.85rem"},children:i.crystallize_enabled?"On":"Off"})]})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Profit Target %"}),s.jsx("input",{type:"number",min:"0",step:"0.5",value:i.profit_target_pct,onChange:u=>o("profit_target_pct",u.target.value),placeholder:"e.g. 10 for 10%"})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Mode"}),s.jsxs("select",{value:i.crystallize_mode,onChange:u=>o("crystallize_mode",u.target.value),children:[s.jsx("option",{value:"WITHDRAW_PROFITS",children:"Withdraw Profits"}),s.jsx("option",{value:"REBASE",children:"Rebase (compound)"})]})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Cooldown Days"}),s.jsx("input",{type:"number",min:"0",value:i.cooldown_days,onChange:u=>o("cooldown_days",u.target.value)})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Max Episode Days"}),s.jsx("input",{type:"number",min:"0",value:i.max_episode_days,onChange:u=>o("max_episode_days",u.target.value)})]}),s.jsxs("div",{className:"mgmt-field",children:[s.jsx("label",{children:"Take Profit On"}),s.jsxs("select",{value:i.take_profit_on,onChange:u=>o("take_profit_on",u.target.value),children:[s.jsx("option",{value:"EOD",children:"End of Day"}),s.jsx("option",{value:"INTRADAY",children:"Intraday"})]})]})]})]}),s.jsxs("div",{className:"mgmt-btn-group",children:[s.jsx("button",{className:"mgmt-btn mgmt-btn-primary",onClick:l,children:r?"Create Profile":"Save Changes"}),s.jsx("button",{className:"mgmt-btn mgmt-btn-secondary",onClick:t,children:"Cancel"})]})]})})}function _Z(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const SZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EZ={};function GS(e,t){return(EZ.jsx?NZ:SZ).test(e)}const PZ=/[ \t\n\f\r]/g;function TZ(e){return typeof e=="object"?e.type==="text"?qS(e.value):!1:qS(e)}function qS(e){return e.replace(PZ,"")===""}class Zu{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Zu.prototype.normal={};Zu.prototype.property={};Zu.prototype.space=void 0;function cD(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Zu(n,r,t)}function av(e){return e.toLowerCase()}class zn{constructor(t,n){this.attribute=n,this.property=t}}zn.prototype.attribute="";zn.prototype.booleanish=!1;zn.prototype.boolean=!1;zn.prototype.commaOrSpaceSeparated=!1;zn.prototype.commaSeparated=!1;zn.prototype.defined=!1;zn.prototype.mustUseProperty=!1;zn.prototype.number=!1;zn.prototype.overloadedBoolean=!1;zn.prototype.property="";zn.prototype.spaceSeparated=!1;zn.prototype.space=void 0;let AZ=0;const ve=_s(),Et=_s(),sv=_s(),Q=_s(),Qe=_s(),oo=_s(),Un=_s();function _s(){return 2**++AZ}const ov=Object.freeze(Object.defineProperty({__proto__:null,boolean:ve,booleanish:Et,commaOrSpaceSeparated:Un,commaSeparated:oo,number:Q,overloadedBoolean:sv,spaceSeparated:Qe},Symbol.toStringTag,{value:"Module"})),Hm=Object.keys(ov);class lb extends zn{constructor(t,n,r,i){let a=-1;if(super(t,n),YS(this,"space",i),typeof r=="number")for(;++a<Hm.length;){const o=Hm[a];YS(this,Hm[a],(r&ov[o])===ov[o])}}}lb.prototype.defined=!0;function YS(e,t,n){n&&(e[t]=n)}function Xo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new lb(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[av(r)]=r,n[av(a.attribute)]=r}return new Zu(t,n,e.space)}const dD=Xo({properties:{ariaActiveDescendant:null,ariaAtomic:Et,ariaAutoComplete:null,ariaBusy:Et,ariaChecked:Et,ariaColCount:Q,ariaColIndex:Q,ariaColSpan:Q,ariaControls:Qe,ariaCurrent:null,ariaDescribedBy:Qe,ariaDetails:null,ariaDisabled:Et,ariaDropEffect:Qe,ariaErrorMessage:null,ariaExpanded:Et,ariaFlowTo:Qe,ariaGrabbed:Et,ariaHasPopup:null,ariaHidden:Et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qe,ariaLevel:Q,ariaLive:null,ariaModal:Et,ariaMultiLine:Et,ariaMultiSelectable:Et,ariaOrientation:null,ariaOwns:Qe,ariaPlaceholder:null,ariaPosInSet:Q,ariaPressed:Et,ariaReadOnly:Et,ariaRelevant:null,ariaRequired:Et,ariaRoleDescription:Qe,ariaRowCount:Q,ariaRowIndex:Q,ariaRowSpan:Q,ariaSelected:Et,ariaSetSize:Q,ariaSort:null,ariaValueMax:Q,ariaValueMin:Q,ariaValueNow:Q,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function fD(e,t){return t in e?e[t]:t}function hD(e,t){return fD(e,t.toLowerCase())}const OZ=Xo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oo,acceptCharset:Qe,accessKey:Qe,action:null,allow:null,allowFullScreen:ve,allowPaymentRequest:ve,allowUserMedia:ve,alt:null,as:null,async:ve,autoCapitalize:null,autoComplete:Qe,autoFocus:ve,autoPlay:ve,blocking:Qe,capture:null,charSet:null,checked:ve,cite:null,className:Qe,cols:Q,colSpan:null,content:null,contentEditable:Et,controls:ve,controlsList:Qe,coords:Q|oo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ve,defer:ve,dir:null,dirName:null,disabled:ve,download:sv,draggable:Et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ve,formTarget:null,headers:Qe,height:Q,hidden:sv,high:Q,href:null,hrefLang:null,htmlFor:Qe,httpEquiv:Qe,id:null,imageSizes:null,imageSrcSet:null,inert:ve,inputMode:null,integrity:null,is:null,isMap:ve,itemId:null,itemProp:Qe,itemRef:Qe,itemScope:ve,itemType:Qe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ve,low:Q,manifest:null,max:null,maxLength:Q,media:null,method:null,min:null,minLength:Q,multiple:ve,muted:ve,name:null,nonce:null,noModule:ve,noValidate:ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ve,optimum:Q,pattern:null,ping:Qe,placeholder:null,playsInline:ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ve,referrerPolicy:null,rel:Qe,required:ve,reversed:ve,rows:Q,rowSpan:Q,sandbox:Qe,scope:null,scoped:ve,seamless:ve,selected:ve,shadowRootClonable:ve,shadowRootDelegatesFocus:ve,shadowRootMode:null,shape:null,size:Q,sizes:null,slot:null,span:Q,spellCheck:Et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Q,step:null,style:null,tabIndex:Q,target:null,title:null,translate:null,type:null,typeMustMatch:ve,useMap:null,value:Et,width:Q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qe,axis:null,background:null,bgColor:null,border:Q,borderColor:null,bottomMargin:Q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ve,declare:ve,event:null,face:null,frame:null,frameBorder:null,hSpace:Q,leftMargin:Q,link:null,longDesc:null,lowSrc:null,marginHeight:Q,marginWidth:Q,noResize:ve,noHref:ve,noShade:ve,noWrap:ve,object:null,profile:null,prompt:null,rev:null,rightMargin:Q,rules:null,scheme:null,scrolling:Et,standby:null,summary:null,text:null,topMargin:Q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ve,disableRemotePlayback:ve,prefix:null,property:null,results:Q,security:null,unselectable:null},space:"html",transform:hD}),CZ=Xo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Un,accentHeight:Q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Q,amplitude:Q,arabicForm:null,ascent:Q,attributeName:null,attributeType:null,azimuth:Q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Q,by:null,calcMode:null,capHeight:Q,className:Qe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Q,diffuseConstant:Q,direction:null,display:null,dur:null,divisor:Q,dominantBaseline:null,download:ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:Q,enableBackground:null,end:null,event:null,exponent:Q,externalResourcesRequired:null,fill:null,fillOpacity:Q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oo,g2:oo,glyphName:oo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Q,horizOriginX:Q,horizOriginY:Q,id:null,ideographic:Q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Q,k:Q,k1:Q,k2:Q,k3:Q,k4:Q,kernelMatrix:Un,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Q,overlineThickness:Q,paintOrder:null,panose1:null,path:null,pathLength:Q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Q,pointsAtY:Q,pointsAtZ:Q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Un,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Un,rev:Un,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Un,requiredFeatures:Un,requiredFonts:Un,requiredFormats:Un,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Q,specularExponent:Q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Q,strikethroughThickness:Q,string:null,stroke:null,strokeDashArray:Un,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Q,strokeOpacity:Q,strokeWidth:null,style:null,surfaceScale:Q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Un,tabIndex:Q,tableValues:null,target:null,targetX:Q,targetY:Q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Un,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Q,underlineThickness:Q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Q,values:null,vAlphabetic:Q,vMathematical:Q,vectorEffect:null,vHanging:Q,vIdeographic:Q,version:null,vertAdvY:Q,vertOriginX:Q,vertOriginY:Q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fD}),pD=Xo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),mD=Xo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hD}),gD=Xo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),IZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},DZ=/[A-Z]/g,XS=/-[a-z]/g,RZ=/^data[-\w.:]+$/i;function LZ(e,t){const n=av(t);let r=t,i=zn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&RZ.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(XS,$Z);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!XS.test(a)){let o=a.replace(DZ,MZ);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=lb}return new i(r,t)}function MZ(e){return"-"+e.toLowerCase()}function $Z(e){return e.charAt(1).toUpperCase()}const zZ=cD([dD,OZ,pD,mD,gD],"html"),ub=cD([dD,CZ,pD,mD,gD],"svg");function FZ(e){return e.join(" ").trim()}var cb={},QS=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,BZ=/\n/g,UZ=/^\s*/,WZ=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,HZ=/^:\s*/,KZ=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,VZ=/^[;\s]*/,GZ=/^\s+|\s+$/g,qZ=`
`,ZS="/",JS="*",Ka="",YZ="comment",XZ="declaration";function QZ(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(g){var y=g.match(BZ);y&&(n+=y.length);var x=g.lastIndexOf(qZ);r=~x?g.length-x:r+g.length}function a(){var g={line:n,column:r};return function(y){return y.position=new o(g),c(),y}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var y=new Error(t.source+":"+n+":"+r+": "+g);if(y.reason=g,y.filename=t.source,y.line=n,y.column=r,y.source=e,!t.silent)throw y}function u(g){var y=g.exec(e);if(y){var x=y[0];return i(x),e=e.slice(x.length),y}}function c(){u(UZ)}function d(g){var y;for(g=g||[];y=f();)y!==!1&&g.push(y);return g}function f(){var g=a();if(!(ZS!=e.charAt(0)||JS!=e.charAt(1))){for(var y=2;Ka!=e.charAt(y)&&(JS!=e.charAt(y)||ZS!=e.charAt(y+1));)++y;if(y+=2,Ka===e.charAt(y-1))return l("End of comment missing");var x=e.slice(2,y-2);return r+=2,i(x),e=e.slice(y),r+=2,g({type:YZ,comment:x})}}function h(){var g=a(),y=u(WZ);if(y){if(f(),!u(HZ))return l("property missing ':'");var x=u(KZ),v=g({type:XZ,property:e1(y[0].replace(QS,Ka)),value:x?e1(x[0].replace(QS,Ka)):Ka});return u(VZ),v}}function p(){var g=[];d(g);for(var y;y=h();)y!==!1&&(g.push(y),d(g));return g}return c(),p()}function e1(e){return e?e.replace(GZ,Ka):Ka}var ZZ=QZ,JZ=pd&&pd.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cb,"__esModule",{value:!0});cb.default=tJ;const eJ=JZ(ZZ);function tJ(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,eJ.default)(e),i=typeof t=="function";return r.forEach(a=>{if(a.type!=="declaration")return;const{property:o,value:l}=a;i?t(o,l,a):l&&(n=n||{},n[o]=l)}),n}var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.camelCase=void 0;var nJ=/^--[a-zA-Z0-9_-]+$/,rJ=/-([a-z])/g,iJ=/^[^-]+$/,aJ=/^-(webkit|moz|ms|o|khtml)-/,sJ=/^-(ms)-/,oJ=function(e){return!e||iJ.test(e)||nJ.test(e)},lJ=function(e,t){return t.toUpperCase()},t1=function(e,t){return"".concat(t,"-")},uJ=function(e,t){return t===void 0&&(t={}),oJ(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(sJ,t1):e=e.replace(aJ,t1),e.replace(rJ,lJ))};Tp.camelCase=uJ;var cJ=pd&&pd.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},dJ=cJ(cb),fJ=Tp;function lv(e,t){var n={};return!e||typeof e!="string"||(0,dJ.default)(e,function(r,i){r&&i&&(n[(0,fJ.camelCase)(r,t)]=i)}),n}lv.default=lv;var hJ=lv;const pJ=zr(hJ),yD=vD("end"),db=vD("start");function vD(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function mJ(e){const t=db(e),n=yD(e);if(t&&n)return{start:t,end:n}}function Fl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?n1(e.position):"start"in e||"end"in e?n1(e):"line"in e||"column"in e?uv(e):""}function uv(e){return r1(e&&e.line)+":"+r1(e&&e.column)}function n1(e){return uv(e&&e.start)+"-"+uv(e&&e.end)}function r1(e){return e&&typeof e=="number"?e:1}class cn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?a.ruleId=r:(a.source=r.slice(0,u),a.ruleId=r.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Fl(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}cn.prototype.file="";cn.prototype.name="";cn.prototype.reason="";cn.prototype.message="";cn.prototype.stack="";cn.prototype.column=void 0;cn.prototype.line=void 0;cn.prototype.ancestors=void 0;cn.prototype.cause=void 0;cn.prototype.fatal=void 0;cn.prototype.place=void 0;cn.prototype.ruleId=void 0;cn.prototype.source=void 0;const fb={}.hasOwnProperty,gJ=new Map,yJ=/[A-Z]/g,vJ=new Set(["table","tbody","thead","tfoot","tr"]),xJ=new Set(["td","th"]),xD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function bJ(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=PJ(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=EJ(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?ub:zZ,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=bD(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function bD(e,t,n){if(t.type==="element")return wJ(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return kJ(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return _J(e,t,n);if(t.type==="mdxjsEsm")return jJ(e,t);if(t.type==="root")return SJ(e,t,n);if(t.type==="text")return NJ(e,t)}function wJ(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ub,e.schema=i),e.ancestors.push(t);const a=kD(e,t.tagName,!1),o=TJ(e,t);let l=pb(e,t);return vJ.has(t.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!TZ(u):!0})),wD(e,o,a,t),hb(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function kJ(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}_u(e,t.position)}function jJ(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);_u(e,t.position)}function _J(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=ub,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:kD(e,t.name,!0),o=AJ(e,t),l=pb(e,t);return wD(e,o,a,t),hb(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function SJ(e,t,n){const r={};return hb(r,pb(e,t)),e.create(t,e.Fragment,r,n)}function NJ(e,t){return t.value}function wD(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function hb(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function EJ(e,t,n){return r;function r(i,a,o,l){const c=Array.isArray(o.children)?n:t;return l?c(a,o,l):c(a,o)}}function PJ(e,t){return n;function n(r,i,a,o){const l=Array.isArray(a.children),u=db(r);return t(i,a,o,l,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function TJ(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&fb.call(t.properties,i)){const a=OJ(e,i,t.properties[i]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&xJ.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function AJ(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else _u(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else _u(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function pb(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:gJ;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const c=i.get(u)||0;o=u+"-"+c,i.set(u,c+1)}}const l=bD(e,a,o);l!==void 0&&n.push(l)}return n}function OJ(e,t,n){const r=LZ(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?_Z(n):FZ(n)),r.property==="style"){let i=typeof n=="object"?n:CJ(e,String(n));return e.stylePropertyNameCase==="css"&&(i=IJ(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?IZ[r.property]||r.property:r.attribute,n]}}function CJ(e,t){try{return pJ(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new cn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=xD+"#cannot-parse-style-attribute",i}}function kD(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const l=GS(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=GS(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return fb.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);_u(e)}function _u(e,t){const n=new cn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=xD+"#cannot-handle-mdx-estrees-without-createevaluater",n}function IJ(e){const t={};let n;for(n in e)fb.call(e,n)&&(t[DJ(n)]=e[n]);return t}function DJ(e){let t=e.replace(yJ,RJ);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function RJ(e){return"-"+e.toLowerCase()}const Km={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},LJ={};function mb(e,t){const n=LJ,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jD(e,r,i)}function jD(e,t,n){if(MJ(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return i1(e.children,t,n)}return Array.isArray(e)?i1(e,t,n):""}function i1(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=jD(e[i],t,n);return r.join("")}function MJ(e){return!!(e&&typeof e=="object")}const a1=document.createElement("i");function gb(e){const t="&"+e+";";a1.innerHTML=t;const n=a1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Yn(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function cr(e,t){return e.length>0?(Yn(e,e.length,0,t),e):t}const s1={}.hasOwnProperty;function _D(e){const t={};let n=-1;for(;++n<e.length;)$J(t,e[n]);return t}function $J(e,t){let n;for(n in t){const i=(s1.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){s1.call(i,o)||(i[o]=[]);const l=a[o];zJ(i[o],Array.isArray(l)?l:l?[l]:[])}}}function zJ(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Yn(e,0,0,r)}function SD(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Dr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const hn=Ra(/[A-Za-z]/),on=Ra(/[\dA-Za-z]/),FJ=Ra(/[#-'*+\--9=?A-Z^-~]/);function Uf(e){return e!==null&&(e<32||e===127)}const cv=Ra(/\d/),BJ=Ra(/[\dA-Fa-f]/),UJ=Ra(/[!-/:-@[-`{-~]/);function de(e){return e!==null&&e<-2}function Ge(e){return e!==null&&(e<0||e===32)}function we(e){return e===-2||e===-1||e===32}const Ap=Ra(new RegExp("\\p{P}|\\p{S}","u")),xs=Ra(/\s/);function Ra(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Qo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&on(e.charCodeAt(n+1))&&on(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Se(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(u){return we(u)?(e.enter(n),l(u)):t(u)}function l(u){return we(u)&&a++<i?(e.consume(u),l):(e.exit(n),t(u))}}const WJ={tokenize:HJ};function HJ(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Se(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return de(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const KJ={tokenize:VJ},o1={tokenize:GJ};function VJ(e){const t=this,n=[];let r=0,i,a,o;return l;function l(w){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,u,c)(w)}return c(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const j=t.events.length;let _=j,k;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){k=t.events[_][1].end;break}v(r);let E=j;for(;E<t.events.length;)t.events[E][1].end={...k},E++;return Yn(t.events,_+1,0,t.events.slice(j)),t.events.length=E,c(w)}return l(w)}function c(w){if(r===n.length){if(!i)return h(w);if(i.currentConstruct&&i.currentConstruct.concrete)return g(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(o1,d,f)(w)}function d(w){return i&&b(),v(r),h(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(w)}function h(w){return t.containerState={},e.attempt(o1,p,g)(w)}function p(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function g(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),y(w)}function y(w){if(w===null){x(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return de(w)?(e.consume(w),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),y)}function x(w,j){const _=t.sliceStream(w);if(j&&_.push(null),w.previous=a,a&&(a.next=w),a=w,i.defineSkip(w.start),i.write(_),t.parser.lazy[w.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const E=t.events.length;let A=E,T,S;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(T){S=t.events[A][1].end;break}T=!0}for(v(r),k=E;k<t.events.length;)t.events[k][1].end={...S},k++;Yn(t.events,A+1,0,t.events.slice(E)),t.events.length=k}}function v(w){let j=n.length;for(;j-- >w;){const _=n[j];t.containerState=_[1],_[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function GJ(e,t,n){return Se(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Eo(e){if(e===null||Ge(e)||xs(e))return 1;if(Ap(e))return 2}function Op(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const dv={name:"attention",resolveAll:qJ,tokenize:YJ};function qJ(e,t){let n=-1,r,i,a,o,l,u,c,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};l1(f,-u),l1(h,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},a={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=cr(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=cr(c,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),c=cr(c,Op(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=cr(c,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,c=cr(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Yn(e,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YJ(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Eo(r);let a;return o;function o(u){return a=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===a)return e.consume(u),l;const c=e.exit("attentionSequence"),d=Eo(u),f=!d||d===2&&i||n.includes(u),h=!i||i===2&&d||n.includes(r);return c._open=!!(a===42?f:f&&(i||!h)),c._close=!!(a===42?h:h&&(d||!f)),t(u)}}function l1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XJ={name:"autolink",tokenize:QJ};function QJ(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(p){return hn(p)?(e.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||on(p)?(r=1,l(p)):c(p)}function l(p){return p===58?(e.consume(p),r=0,u):(p===43||p===45||p===46||on(p))&&r++<32?(e.consume(p),l):(r=0,c(p))}function u(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||Uf(p)?n(p):(e.consume(p),u)}function c(p){return p===64?(e.consume(p),d):FJ(p)?(e.consume(p),c):n(p)}function d(p){return on(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,d):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):h(p)}function h(p){if((p===45||on(p))&&r++<63){const g=p===45?h:f;return e.consume(p),g}return n(p)}}const Ju={partial:!0,tokenize:ZJ};function ZJ(e,t,n){return r;function r(a){return we(a)?Se(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||de(a)?t(a):n(a)}}const ND={continuation:{tokenize:eee},exit:tee,name:"blockQuote",tokenize:JJ};function JJ(e,t,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return we(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function eee(e,t,n){const r=this;return i;function i(o){return we(o)?Se(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(ND,t,n)(o)}}function tee(e){e.exit("blockQuote")}const ED={name:"characterEscape",tokenize:nee};function nee(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return UJ(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const PD={name:"characterReference",tokenize:ree};function ree(e,t,n){const r=this;let i=0,a,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),a=31,o=on,d(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=BJ,d):(e.enter("characterReferenceValue"),a=7,o=cv,d(f))}function d(f){if(f===59&&i){const h=e.exit("characterReferenceValue");return o===on&&!gb(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<a?(e.consume(f),d):n(f)}}const u1={partial:!0,tokenize:aee},c1={concrete:!0,name:"codeFenced",tokenize:iee};function iee(e,t,n){const r=this,i={partial:!0,tokenize:_};let a=0,o=0,l;return u;function u(k){return c(k)}function c(k){const E=r.events[r.events.length-1];return a=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(k)}function d(k){return k===l?(o++,e.consume(k),d):o<3?n(k):(e.exit("codeFencedFenceSequence"),we(k)?Se(e,f,"whitespace")(k):f(k))}function f(k){return k===null||de(k)?(e.exit("codeFencedFence"),r.interrupt?t(k):e.check(u1,y,j)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===null||de(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(k)):we(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Se(e,p,"whitespace")(k)):k===96&&k===l?n(k):(e.consume(k),h)}function p(k){return k===null||de(k)?f(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||de(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(k)):k===96&&k===l?n(k):(e.consume(k),g)}function y(k){return e.attempt(i,j,x)(k)}function x(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),v}function v(k){return a>0&&we(k)?Se(e,b,"linePrefix",a+1)(k):b(k)}function b(k){return k===null||de(k)?e.check(u1,y,j)(k):(e.enter("codeFlowValue"),w(k))}function w(k){return k===null||de(k)?(e.exit("codeFlowValue"),b(k)):(e.consume(k),w)}function j(k){return e.exit("codeFenced"),t(k)}function _(k,E,A){let T=0;return S;function S(D){return k.enter("lineEnding"),k.consume(D),k.exit("lineEnding"),P}function P(D){return k.enter("codeFencedFence"),we(D)?Se(k,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):C(D)}function C(D){return D===l?(k.enter("codeFencedFenceSequence"),B(D)):A(D)}function B(D){return D===l?(T++,k.consume(D),B):T>=o?(k.exit("codeFencedFenceSequence"),we(D)?Se(k,M,"whitespace")(D):M(D)):A(D)}function M(D){return D===null||de(D)?(k.exit("codeFencedFence"),E(D)):A(D)}}}function aee(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Vm={name:"codeIndented",tokenize:oee},see={partial:!0,tokenize:lee};function oee(e,t,n){const r=this;return i;function i(c){return e.enter("codeIndented"),Se(e,a,"linePrefix",5)(c)}function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?u(c):de(c)?e.attempt(see,o,u)(c):(e.enter("codeFlowValue"),l(c))}function l(c){return c===null||de(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),l)}function u(c){return e.exit("codeIndented"),t(c)}}function lee(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Se(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):de(o)?i(o):n(o)}}const uee={name:"codeText",previous:dee,resolve:cee,tokenize:fee};function cee(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function dee(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fee(e,t,n){let r=0,i,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(a=e.enter("codeTextSequence"),i=0,d(f)):de(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||de(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),c)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",c(f))}}class hee{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&yl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),yl(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),yl(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);yl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);yl(this.left,n.reverse())}}}function yl(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function TD(e){const t={};let n=-1,r,i,a,o,l,u,c;const d=new hee(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,pee(d,n)),n=t[n],c=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,n),l.unshift(r),d.splice(i,n-i+1,l))}}return Yn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function pee(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,u=[],c={};let d,f,h=-1,p=n,g=0,y=0;const x=[y];for(;p;){for(;e.get(++i)[1]!==p;);a.push(i),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),f&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(y=h+1,x.push(y),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):x.pop(),h=x.length;h--;){const v=l.slice(x[h],x[h+1]),b=a.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),h=-1;++h<u.length;)c[g+u[h][0]]=g+u[h][1],g+=u[h][1]-u[h][0]-1;return c}const mee={resolve:yee,tokenize:vee},gee={partial:!0,tokenize:xee};function yee(e){return TD(e),e}function vee(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):de(l)?e.check(gee,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function xee(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Se(e,a,"linePrefix")}function a(o){if(o===null||de(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function AD(e,t,n,r,i,a,o,l,u){const c=u||Number.POSITIVE_INFINITY;let d=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(v),e.exit(a),h):v===null||v===32||v===41||Uf(v)?n(v):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),y(v))}function h(v){return v===62?(e.enter(a),e.consume(v),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(l),h(v)):v===null||v===60||de(v)?n(v):(e.consume(v),v===92?g:p)}function g(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function y(v){return!d&&(v===null||v===41||Ge(v))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(v)):d<c&&v===40?(e.consume(v),d++,y):v===41?(e.consume(v),d--,y):v===null||v===32||v===40||Uf(v)?n(v):(e.consume(v),v===92?x:y)}function x(v){return v===40||v===41||v===92?(e.consume(v),y):y(v)}}function OD(e,t,n,r,i,a){const o=this;let l=0,u;return c;function c(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(a),d}function d(p){return l>999||p===null||p===91||p===93&&!u||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(e.exit(a),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):de(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||de(p)||l++>999?(e.exit("chunkString"),d(p)):(e.consume(p),u||(u=!we(p)),p===92?h:f)}function h(p){return p===91||p===92||p===93?(e.consume(p),l++,f):f(p)}}function CD(e,t,n,r,i,a){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),o=h===40?41:h,u):n(h)}function u(h){return h===o?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(a),c(h))}function c(h){return h===o?(e.exit(a),u(o)):h===null?n(h):de(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Se(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||de(h)?(e.exit("chunkString"),c(h)):(e.consume(h),h===92?f:d)}function f(h){return h===o||h===92?(e.consume(h),d):d(h)}}function Bl(e,t){let n;return r;function r(i){return de(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):we(i)?Se(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const bee={name:"definition",tokenize:kee},wee={partial:!0,tokenize:jee};function kee(e,t,n){const r=this;let i;return a;function a(p){return e.enter("definition"),o(p)}function o(p){return OD.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=Dr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),u):n(p)}function u(p){return Ge(p)?Bl(e,c)(p):c(p)}function c(p){return AD(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return e.attempt(wee,f,f)(p)}function f(p){return we(p)?Se(e,h,"whitespace")(p):h(p)}function h(p){return p===null||de(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function jee(e,t,n){return r;function r(l){return Ge(l)?Bl(e,i)(l):n(l)}function i(l){return CD(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return we(l)?Se(e,o,"whitespace")(l):o(l)}function o(l){return l===null||de(l)?t(l):n(l)}}const _ee={name:"hardBreakEscape",tokenize:See};function See(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return de(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const Nee={name:"headingAtx",resolve:Eee,tokenize:Pee};function Eee(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Yn(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function Pee(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||Ge(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),u(d)):d===null||de(d)?(e.exit("atxHeading"),t(d)):we(d)?Se(e,l,"whitespace")(d):(e.enter("atxHeadingText"),c(d))}function u(d){return d===35?(e.consume(d),u):(e.exit("atxHeadingSequence"),l(d))}function c(d){return d===null||d===35||Ge(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),c)}}const Tee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],d1=["pre","script","style","textarea"],Aee={concrete:!0,name:"htmlFlow",resolveTo:Iee,tokenize:Dee},Oee={partial:!0,tokenize:Lee},Cee={partial:!0,tokenize:Ree};function Iee(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Dee(e,t,n){const r=this;let i,a,o,l,u;return c;function c(O){return d(O)}function d(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),f}function f(O){return O===33?(e.consume(O),h):O===47?(e.consume(O),a=!0,y):O===63?(e.consume(O),i=3,r.interrupt?t:N):hn(O)?(e.consume(O),o=String.fromCharCode(O),x):n(O)}function h(O){return O===45?(e.consume(O),i=2,p):O===91?(e.consume(O),i=5,l=0,g):hn(O)?(e.consume(O),i=4,r.interrupt?t:N):n(O)}function p(O){return O===45?(e.consume(O),r.interrupt?t:N):n(O)}function g(O){const ne="CDATA[";return O===ne.charCodeAt(l++)?(e.consume(O),l===ne.length?r.interrupt?t:C:g):n(O)}function y(O){return hn(O)?(e.consume(O),o=String.fromCharCode(O),x):n(O)}function x(O){if(O===null||O===47||O===62||Ge(O)){const ne=O===47,ge=o.toLowerCase();return!ne&&!a&&d1.includes(ge)?(i=1,r.interrupt?t(O):C(O)):Tee.includes(o.toLowerCase())?(i=6,ne?(e.consume(O),v):r.interrupt?t(O):C(O)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):a?b(O):w(O))}return O===45||on(O)?(e.consume(O),o+=String.fromCharCode(O),x):n(O)}function v(O){return O===62?(e.consume(O),r.interrupt?t:C):n(O)}function b(O){return we(O)?(e.consume(O),b):S(O)}function w(O){return O===47?(e.consume(O),S):O===58||O===95||hn(O)?(e.consume(O),j):we(O)?(e.consume(O),w):S(O)}function j(O){return O===45||O===46||O===58||O===95||on(O)?(e.consume(O),j):_(O)}function _(O){return O===61?(e.consume(O),k):we(O)?(e.consume(O),_):w(O)}function k(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),u=O,E):we(O)?(e.consume(O),k):A(O)}function E(O){return O===u?(e.consume(O),u=null,T):O===null||de(O)?n(O):(e.consume(O),E)}function A(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Ge(O)?_(O):(e.consume(O),A)}function T(O){return O===47||O===62||we(O)?w(O):n(O)}function S(O){return O===62?(e.consume(O),P):n(O)}function P(O){return O===null||de(O)?C(O):we(O)?(e.consume(O),P):n(O)}function C(O){return O===45&&i===2?(e.consume(O),q):O===60&&i===1?(e.consume(O),z):O===62&&i===4?(e.consume(O),Y):O===63&&i===3?(e.consume(O),N):O===93&&i===5?(e.consume(O),R):de(O)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Oee,U,B)(O)):O===null||de(O)?(e.exit("htmlFlowData"),B(O)):(e.consume(O),C)}function B(O){return e.check(Cee,M,U)(O)}function M(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),D}function D(O){return O===null||de(O)?B(O):(e.enter("htmlFlowData"),C(O))}function q(O){return O===45?(e.consume(O),N):C(O)}function z(O){return O===47?(e.consume(O),o="",$):C(O)}function $(O){if(O===62){const ne=o.toLowerCase();return d1.includes(ne)?(e.consume(O),Y):C(O)}return hn(O)&&o.length<8?(e.consume(O),o+=String.fromCharCode(O),$):C(O)}function R(O){return O===93?(e.consume(O),N):C(O)}function N(O){return O===62?(e.consume(O),Y):O===45&&i===2?(e.consume(O),N):C(O)}function Y(O){return O===null||de(O)?(e.exit("htmlFlowData"),U(O)):(e.consume(O),Y)}function U(O){return e.exit("htmlFlow"),t(O)}}function Ree(e,t,n){const r=this;return i;function i(o){return de(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Lee(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ju,t,n)}}const Mee={name:"htmlText",tokenize:$ee};function $ee(e,t,n){const r=this;let i,a,o;return l;function l(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),u}function u(N){return N===33?(e.consume(N),c):N===47?(e.consume(N),_):N===63?(e.consume(N),w):hn(N)?(e.consume(N),A):n(N)}function c(N){return N===45?(e.consume(N),d):N===91?(e.consume(N),a=0,g):hn(N)?(e.consume(N),b):n(N)}function d(N){return N===45?(e.consume(N),p):n(N)}function f(N){return N===null?n(N):N===45?(e.consume(N),h):de(N)?(o=f,z(N)):(e.consume(N),f)}function h(N){return N===45?(e.consume(N),p):f(N)}function p(N){return N===62?q(N):N===45?h(N):f(N)}function g(N){const Y="CDATA[";return N===Y.charCodeAt(a++)?(e.consume(N),a===Y.length?y:g):n(N)}function y(N){return N===null?n(N):N===93?(e.consume(N),x):de(N)?(o=y,z(N)):(e.consume(N),y)}function x(N){return N===93?(e.consume(N),v):y(N)}function v(N){return N===62?q(N):N===93?(e.consume(N),v):y(N)}function b(N){return N===null||N===62?q(N):de(N)?(o=b,z(N)):(e.consume(N),b)}function w(N){return N===null?n(N):N===63?(e.consume(N),j):de(N)?(o=w,z(N)):(e.consume(N),w)}function j(N){return N===62?q(N):w(N)}function _(N){return hn(N)?(e.consume(N),k):n(N)}function k(N){return N===45||on(N)?(e.consume(N),k):E(N)}function E(N){return de(N)?(o=E,z(N)):we(N)?(e.consume(N),E):q(N)}function A(N){return N===45||on(N)?(e.consume(N),A):N===47||N===62||Ge(N)?T(N):n(N)}function T(N){return N===47?(e.consume(N),q):N===58||N===95||hn(N)?(e.consume(N),S):de(N)?(o=T,z(N)):we(N)?(e.consume(N),T):q(N)}function S(N){return N===45||N===46||N===58||N===95||on(N)?(e.consume(N),S):P(N)}function P(N){return N===61?(e.consume(N),C):de(N)?(o=P,z(N)):we(N)?(e.consume(N),P):T(N)}function C(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),i=N,B):de(N)?(o=C,z(N)):we(N)?(e.consume(N),C):(e.consume(N),M)}function B(N){return N===i?(e.consume(N),i=void 0,D):N===null?n(N):de(N)?(o=B,z(N)):(e.consume(N),B)}function M(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Ge(N)?T(N):(e.consume(N),M)}function D(N){return N===47||N===62||Ge(N)?T(N):n(N)}function q(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function z(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),$}function $(N){return we(N)?Se(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):R(N)}function R(N){return e.enter("htmlTextData"),o(N)}}const yb={name:"labelEnd",resolveAll:Uee,resolveTo:Wee,tokenize:Hee},zee={tokenize:Kee},Fee={tokenize:Vee},Bee={tokenize:Gee};function Uee(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Yn(e,0,e.length,n),e}function Wee(e,t){let n=e.length,r=0,i,a,o,l;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",u,t],["enter",c,t]],l=cr(l,e.slice(a+1,a+r+3)),l=cr(l,[["enter",d,t]]),l=cr(l,Op(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=cr(l,[["exit",d,t],e[o-2],e[o-1],["exit",c,t]]),l=cr(l,e.slice(o+1)),l=cr(l,[["exit",u,t]]),Yn(e,a,e.length,l),e}function Hee(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(h){return a?a._inactive?f(h):(o=r.parser.defined.includes(Dr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),u):n(h)}function u(h){return h===40?e.attempt(zee,d,o?d:f)(h):h===91?e.attempt(Fee,d,o?c:f)(h):o?d(h):f(h)}function c(h){return e.attempt(Bee,d,f)(h)}function d(h){return t(h)}function f(h){return a._balanced=!0,n(h)}}function Kee(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Ge(f)?Bl(e,a)(f):a(f)}function a(f){return f===41?d(f):AD(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Ge(f)?Bl(e,u)(f):d(f)}function l(f){return n(f)}function u(f){return f===34||f===39||f===40?CD(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function c(f){return Ge(f)?Bl(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Vee(e,t,n){const r=this;return i;function i(l){return OD.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Dr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Gee(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const qee={name:"labelStartImage",resolveAll:yb.resolveAll,tokenize:Yee};function Yee(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Xee={name:"labelStartLink",resolveAll:yb.resolveAll,tokenize:Qee};function Qee(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Gm={name:"lineEnding",tokenize:Zee};function Zee(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Se(e,t,"linePrefix")}}const cd={name:"thematicBreak",tokenize:Jee};function Jee(e,t,n){let r=0,i;return a;function a(c){return e.enter("thematicBreak"),o(c)}function o(c){return i=c,l(c)}function l(c){return c===i?(e.enter("thematicBreakSequence"),u(c)):r>=3&&(c===null||de(c))?(e.exit("thematicBreak"),t(c)):n(c)}function u(c){return c===i?(e.consume(c),r++,u):(e.exit("thematicBreakSequence"),we(c)?Se(e,l,"whitespace")(c):l(c))}}const Nn={continuation:{tokenize:rte},exit:ate,name:"list",tokenize:nte},ete={partial:!0,tokenize:ste},tte={partial:!0,tokenize:ite};function nte(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:cv(p)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(cd,n,c)(p):c(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(p)}return n(p)}function u(p){return cv(p)&&++o<10?(e.consume(p),u):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),c(p)):n(p)}function c(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(Ju,r.interrupt?n:d,e.attempt(ete,h,f))}function d(p){return r.containerState.initialBlankLine=!0,a++,h(p)}function f(p){return we(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function rte(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ju,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Se(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!we(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(tte,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Se(e,e.attempt(Nn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function ite(e,t,n){const r=this;return Se(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function ate(e){e.exit(this.containerState.type)}function ste(e,t,n){const r=this;return Se(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!we(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const f1={name:"setextUnderline",resolveTo:ote,tokenize:lte};function ote(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function lte(e,t,n){const r=this;let i;return a;function a(c){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return e.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===i?(e.consume(c),l):(e.exit("setextHeadingLineSequence"),we(c)?Se(e,u,"lineSuffix")(c):u(c))}function u(c){return c===null||de(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const ute={tokenize:cte};function cte(e){const t=this,n=e.attempt(Ju,r,e.attempt(this.parser.constructs.flowInitial,i,Se(e,e.attempt(this.parser.constructs.flow,i,e.attempt(mee,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const dte={resolveAll:DD()},fte=ID("string"),hte=ID("text");function ID(e){return{resolveAll:DD(e==="text"?pte:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,l);return o;function o(d){return c(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return c(d)?(n.exit("data"),a(d)):(n.consume(d),u)}function c(d){if(d===null)return!0;const f=i[d];let h=-1;if(f)for(;++h<f.length;){const p=f[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function DD(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function pte(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,l=0,u;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)u=!0,l++;else if(c!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const c={type:n===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const mte={42:Nn,43:Nn,45:Nn,48:Nn,49:Nn,50:Nn,51:Nn,52:Nn,53:Nn,54:Nn,55:Nn,56:Nn,57:Nn,62:ND},gte={91:bee},yte={[-2]:Vm,[-1]:Vm,32:Vm},vte={35:Nee,42:cd,45:[f1,cd],60:Aee,61:f1,95:cd,96:c1,126:c1},xte={38:PD,92:ED},bte={[-5]:Gm,[-4]:Gm,[-3]:Gm,33:qee,38:PD,42:dv,60:[XJ,Mee],91:Xee,92:[_ee,ED],93:yb,95:dv,96:uee},wte={null:[dv,dte]},kte={null:[42,95]},jte={null:[]},_te=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kte,contentInitial:gte,disable:jte,document:mte,flow:vte,flowInitial:yte,insideSpan:wte,string:xte,text:bte},Symbol.toStringTag,{value:"Module"}));function Ste(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],l=[];const u={attempt:E(_),check:E(k),consume:b,enter:w,exit:j,interrupt:E(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:p,write:f};let d=t.tokenize.call(c,u);return t.resolveAll&&a.push(t),c;function f(P){return o=cr(o,P),x(),o[o.length-1]!==null?[]:(A(t,0),c.events=Op(a,c.events,c),c.events)}function h(P,C){return Ete(p(P),C)}function p(P){return Nte(o,P)}function g(){const{_bufferIndex:P,_index:C,line:B,column:M,offset:D}=r;return{_bufferIndex:P,_index:C,line:B,column:M,offset:D}}function y(P){i[P.line]=P.column,S()}function x(){let P;for(;r._index<o.length;){const C=o[r._index];if(typeof C=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<C.length;)v(C.charCodeAt(r._bufferIndex));else v(C)}}function v(P){d=d(P)}function b(P){de(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,S()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=P}function w(P,C){const B=C||{};return B.type=P,B.start=g(),c.events.push(["enter",B,c]),l.push(B),B}function j(P){const C=l.pop();return C.end=g(),c.events.push(["exit",C,c]),C}function _(P,C){A(P,C.from)}function k(P,C){C.restore()}function E(P,C){return B;function B(M,D,q){let z,$,R,N;return Array.isArray(M)?U(M):"tokenize"in M?U([M]):Y(M);function Y(re){return me;function me(Fe){const W=Fe!==null&&re[Fe],ie=Fe!==null&&re.null,Z=[...Array.isArray(W)?W:W?[W]:[],...Array.isArray(ie)?ie:ie?[ie]:[]];return U(Z)(Fe)}}function U(re){return z=re,$=0,re.length===0?q:O(re[$])}function O(re){return me;function me(Fe){return N=T(),R=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?ge():re.tokenize.call(C?Object.assign(Object.create(c),C):c,u,ne,ge)(Fe)}}function ne(re){return P(R,N),D}function ge(re){return N.restore(),++$<z.length?O(z[$]):q}}}function A(P,C){P.resolveAll&&!a.includes(P)&&a.push(P),P.resolve&&Yn(c.events,C,c.events.length-C,P.resolve(c.events.slice(C),c)),P.resolveTo&&(c.events=P.resolveTo(c.events,c))}function T(){const P=g(),C=c.previous,B=c.currentConstruct,M=c.events.length,D=Array.from(l);return{from:M,restore:q};function q(){r=P,c.previous=C,c.currentConstruct=B,c.events.length=M,l=D,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Nte(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function Ete(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function Pte(e){const r={constructs:_D([_te,...(e||{}).extensions||[]]),content:i(WJ),defined:[],document:i(KJ),flow:i(ute),lazy:{},string:i(fte),text:i(hte)};return r;function i(a){return o;function o(l){return Ste(r,a,l)}}}function Tte(e){for(;!TD(e););return e}const h1=/[\0\t\n\r]/g;function Ate(){let e=1,t="",n=!0,r;return i;function i(a,o,l){const u=[];let c,d,f,h,p;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(h1.lastIndex=f,c=h1.exec(a),h=c&&c.index!==void 0?c.index:a.length,p=a.charCodeAt(h),!c){t=a.slice(f);break}if(p===10&&f===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<h&&(u.push(a.slice(f,h)),e+=h-f),p){case 0:{u.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,u.push(-2);e++<d;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Ote=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Cte(e){return e.replace(Ote,Ite)}function Ite(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return SD(n.slice(a?2:1),a?16:10)}return gb(n)||e}const RD={}.hasOwnProperty;function Dte(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Rte(n)(Tte(Pte(n).document().write(Ate()(e,t,!0))))}function Rte(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Be),autolinkProtocol:T,autolinkEmail:T,atxHeading:a(fe),blockQuote:a(ie),characterEscape:T,characterReference:T,codeFenced:a(Z),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Z,o),codeText:a(I,o),codeTextData:T,data:T,codeFlowValue:T,definition:a(K),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(te),hardBreakEscape:a(ue),hardBreakTrailing:a(ue),htmlFlow:a(je,o),htmlFlowData:T,htmlText:a(je,o),htmlTextData:T,image:a(nt),label:o,link:a(Be),listItem:a(De),listItemValue:h,listOrdered:a(Ye,f),listUnordered:a(Ye),paragraph:a(be),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(fe),strong:a(Ie),thematicBreak:a(H)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:W,autolinkProtocol:Fe,blockQuote:u(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:re,characterReference:me,codeFenced:u(x),codeFencedFence:y,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:S,codeIndented:u(v),codeText:u(D),codeTextData:S,data:S,definition:u(),definitionDestinationString:j,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(C),hardBreakTrailing:u(C),htmlFlow:u(B),htmlFlowData:S,htmlText:u(M),htmlTextData:S,image:u(z),label:R,labelText:$,lineEnding:P,link:u(q),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ne,resourceDestinationString:N,resourceTitleString:Y,resource:U,setextHeading:u(A),setextHeadingLineSequence:E,setextHeadingText:k,strong:u(),thematicBreak:u()}};LD(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(L){let G={type:"root",children:[]};const ce={stack:[G],tokenStack:[],config:t,enter:l,exit:c,buffer:o,resume:d,data:n},ye=[];let _e=-1;for(;++_e<L.length;)if(L[_e][1].type==="listOrdered"||L[_e][1].type==="listUnordered")if(L[_e][0]==="enter")ye.push(_e);else{const jn=ye.pop();_e=i(L,jn,_e)}for(_e=-1;++_e<L.length;){const jn=t[L[_e][0]];RD.call(jn,L[_e][1].type)&&jn[L[_e][1].type].call(Object.assign({sliceSerialize:L[_e][2].sliceSerialize},ce),L[_e][1])}if(ce.tokenStack.length>0){const jn=ce.tokenStack[ce.tokenStack.length-1];(jn[1]||p1).call(ce,void 0,jn[0])}for(G.position={start:Qi(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:Qi(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},_e=-1;++_e<t.transforms.length;)G=t.transforms[_e](G)||G;return G}function i(L,G,ce){let ye=G-1,_e=-1,jn=!1,Ur,tr,Gi,qi;for(;++ye<=ce;){const en=L[ye];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?_e++:_e--,qi=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Ur&&!qi&&!_e&&!Gi&&(Gi=ye),qi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:qi=void 0}if(!_e&&en[0]==="enter"&&en[1].type==="listItemPrefix"||_e===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Ur){let hi=ye;for(tr=void 0;hi--;){const nr=L[hi];if(nr[1].type==="lineEnding"||nr[1].type==="lineEndingBlank"){if(nr[0]==="exit")continue;tr&&(L[tr][1].type="lineEndingBlank",jn=!0),nr[1].type="lineEnding",tr=hi}else if(!(nr[1].type==="linePrefix"||nr[1].type==="blockQuotePrefix"||nr[1].type==="blockQuotePrefixWhitespace"||nr[1].type==="blockQuoteMarker"||nr[1].type==="listItemIndent"))break}Gi&&(!tr||Gi<tr)&&(Ur._spread=!0),Ur.end=Object.assign({},tr?L[tr][1].start:en[1].end),L.splice(tr||ye,0,["exit",Ur,en[2]]),ye++,ce++}if(en[1].type==="listItemPrefix"){const hi={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Ur=hi,L.splice(ye,0,["enter",hi,en[2]]),ye++,ce++,Gi=void 0,qi=!0}}}return L[G][1]._spread=jn,ce}function a(L,G){return ce;function ce(ye){l.call(this,L(ye),ye),G&&G.call(this,ye)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(L,G,ce){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([G,ce||void 0]),L.position={start:Qi(G.start),end:void 0}}function u(L){return G;function G(ce){L&&L.call(this,ce),c.call(this,ce)}}function c(L,G){const ce=this.stack.pop(),ye=this.tokenStack.pop();if(ye)ye[0].type!==L.type&&(G?G.call(this,L,ye[0]):(ye[1]||p1).call(this,L,ye[0]));else throw new Error("Cannot close `"+L.type+"` ("+Fl({start:L.start,end:L.end})+"): its not open");ce.position.end=Qi(L.end)}function d(){return mb(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(L){if(this.data.expectingFirstListItemValue){const G=this.stack[this.stack.length-2];G.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function p(){const L=this.resume(),G=this.stack[this.stack.length-1];G.lang=L}function g(){const L=this.resume(),G=this.stack[this.stack.length-1];G.meta=L}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const L=this.resume(),G=this.stack[this.stack.length-1];G.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const L=this.resume(),G=this.stack[this.stack.length-1];G.value=L.replace(/(\r?\n|\r)$/g,"")}function b(L){const G=this.resume(),ce=this.stack[this.stack.length-1];ce.label=G,ce.identifier=Dr(this.sliceSerialize(L)).toLowerCase()}function w(){const L=this.resume(),G=this.stack[this.stack.length-1];G.title=L}function j(){const L=this.resume(),G=this.stack[this.stack.length-1];G.url=L}function _(L){const G=this.stack[this.stack.length-1];if(!G.depth){const ce=this.sliceSerialize(L).length;G.depth=ce}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function E(L){const G=this.stack[this.stack.length-1];G.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function T(L){const ce=this.stack[this.stack.length-1].children;let ye=ce[ce.length-1];(!ye||ye.type!=="text")&&(ye=he(),ye.position={start:Qi(L.start),end:void 0},ce.push(ye)),this.stack.push(ye)}function S(L){const G=this.stack.pop();G.value+=this.sliceSerialize(L),G.position.end=Qi(L.end)}function P(L){const G=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=G.children[G.children.length-1];ce.position.end=Qi(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(G.type)&&(T.call(this,L),S.call(this,L))}function C(){this.data.atHardBreak=!0}function B(){const L=this.resume(),G=this.stack[this.stack.length-1];G.value=L}function M(){const L=this.resume(),G=this.stack[this.stack.length-1];G.value=L}function D(){const L=this.resume(),G=this.stack[this.stack.length-1];G.value=L}function q(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=G,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function z(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=G,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function $(L){const G=this.sliceSerialize(L),ce=this.stack[this.stack.length-2];ce.label=Cte(G),ce.identifier=Dr(G).toLowerCase()}function R(){const L=this.stack[this.stack.length-1],G=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const ye=L.children;ce.children=ye}else ce.alt=G}function N(){const L=this.resume(),G=this.stack[this.stack.length-1];G.url=L}function Y(){const L=this.resume(),G=this.stack[this.stack.length-1];G.title=L}function U(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function ne(L){const G=this.resume(),ce=this.stack[this.stack.length-1];ce.label=G,ce.identifier=Dr(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function ge(L){this.data.characterReferenceType=L.type}function re(L){const G=this.sliceSerialize(L),ce=this.data.characterReferenceType;let ye;ce?(ye=SD(G,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ye=gb(G);const _e=this.stack[this.stack.length-1];_e.value+=ye}function me(L){const G=this.stack.pop();G.position.end=Qi(L.end)}function Fe(L){S.call(this,L);const G=this.stack[this.stack.length-1];G.url=this.sliceSerialize(L)}function W(L){S.call(this,L);const G=this.stack[this.stack.length-1];G.url="mailto:"+this.sliceSerialize(L)}function ie(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function I(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function te(){return{type:"emphasis",children:[]}}function fe(){return{type:"heading",depth:0,children:[]}}function ue(){return{type:"break"}}function je(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function Be(){return{type:"link",title:null,url:"",children:[]}}function Ye(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function De(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function be(){return{type:"paragraph",children:[]}}function Ie(){return{type:"strong",children:[]}}function he(){return{type:"text",value:""}}function H(){return{type:"thematicBreak"}}}function Qi(e){return{line:e.line,column:e.column,offset:e.offset}}function LD(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?LD(e,r):Lte(e,r)}}function Lte(e,t){let n;for(n in t)if(RD.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function p1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Fl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Fl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Fl({start:t.start,end:t.end})+") is still open")}function Mte(e){const t=this;t.parser=n;function n(r){return Dte(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function $te(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function zte(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Fte(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function Bte(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ute(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wte(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Qo(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const c={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,c),e.applyData(t,c)}function Hte(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Kte(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function MD(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Vte(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return MD(e,t);const i={src:Qo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function Gte(e,t){const n={src:Qo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function qte(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Yte(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return MD(e,t);const i={href:Qo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function Xte(e,t){const n={href:Qo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Qte(e,t,n){const r=e.all(t),i=n?Zte(n):$D(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(i||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,c),e.applyData(t,c)}function Zte(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=$D(n[r])}return t}function $D(e){const t=e.spread;return t??e.children.length>1}function Jte(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function ene(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tne(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function nne(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rne(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=db(t.children[1]),u=yD(t.children[t.children.length-1]);l&&u&&(o.position={start:l,end:u}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function ine(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let u=-1;const c=[];for(;++u<l;){const f=t.children[u],h={},p=o?o[u]:void 0;p&&(h.align=p);let g={type:"element",tagName:a,properties:h,children:[]};f&&(g.children=e.all(f),e.patch(f,g),g=e.applyData(f,g)),c.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,d),e.applyData(t,d)}function ane(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const m1=9,g1=32;function sne(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(y1(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(y1(t.slice(i),i>0,!1)),a.join("")}function y1(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===m1||a===g1;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===m1||a===g1;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function one(e,t){const n={type:"text",value:sne(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function lne(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const une={blockquote:$te,break:zte,code:Fte,delete:Bte,emphasis:Ute,footnoteReference:Wte,heading:Hte,html:Kte,imageReference:Vte,image:Gte,inlineCode:qte,linkReference:Yte,link:Xte,listItem:Qte,list:Jte,paragraph:ene,root:tne,strong:nne,table:rne,tableCell:ane,tableRow:ine,text:one,thematicBreak:lne,toml:Fc,yaml:Fc,definition:Fc,footnoteDefinition:Fc};function Fc(){}const zD=-1,Cp=0,Ul=1,Wf=2,vb=3,xb=4,bb=5,wb=6,FD=7,BD=8,v1=typeof self=="object"?self:globalThis,cne=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case Cp:case zD:return n(o,i);case Ul:{const l=n([],i);for(const u of o)l.push(r(u));return l}case Wf:{const l=n({},i);for(const[u,c]of o)l[r(u)]=r(c);return l}case vb:return n(new Date(o),i);case xb:{const{source:l,flags:u}=o;return n(new RegExp(l,u),i)}case bb:{const l=n(new Map,i);for(const[u,c]of o)l.set(r(u),r(c));return l}case wb:{const l=n(new Set,i);for(const u of o)l.add(r(u));return l}case FD:{const{name:l,message:u}=o;return n(new v1[l](u),i)}case BD:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new v1[a](o),i)};return r},x1=e=>cne(new Map,e)(0),Cs="",{toString:dne}={},{keys:fne}=Object,vl=e=>{const t=typeof e;if(t!=="object"||!e)return[Cp,t];const n=dne.call(e).slice(8,-1);switch(n){case"Array":return[Ul,Cs];case"Object":return[Wf,Cs];case"Date":return[vb,Cs];case"RegExp":return[xb,Cs];case"Map":return[bb,Cs];case"Set":return[wb,Cs];case"DataView":return[Ul,n]}return n.includes("Array")?[Ul,n]:n.includes("Error")?[FD,n]:[Wf,n]},Bc=([e,t])=>e===Cp&&(t==="function"||t==="symbol"),hne=(e,t,n,r)=>{const i=(o,l)=>{const u=r.push(o)-1;return n.set(l,u),u},a=o=>{if(n.has(o))return n.get(o);let[l,u]=vl(o);switch(l){case Cp:{let d=o;switch(u){case"bigint":l=BD,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return i([zD],o)}return i([l,d],o)}case Ul:{if(u){let h=o;return u==="DataView"?h=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(h=new Uint8Array(o)),i([u,[...h]],o)}const d=[],f=i([l,d],o);for(const h of o)d.push(a(h));return f}case Wf:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],f=i([l,d],o);for(const h of fne(o))(e||!Bc(vl(o[h])))&&d.push([a(h),a(o[h])]);return f}case vb:return i([l,o.toISOString()],o);case xb:{const{source:d,flags:f}=o;return i([l,{source:d,flags:f}],o)}case bb:{const d=[],f=i([l,d],o);for(const[h,p]of o)(e||!(Bc(vl(h))||Bc(vl(p))))&&d.push([a(h),a(p)]);return f}case wb:{const d=[],f=i([l,d],o);for(const h of o)(e||!Bc(vl(h)))&&d.push(a(h));return f}}const{message:c}=o;return i([l,{name:u,message:c}],o)};return a},b1=(e,{json:t,lossy:n}={})=>{const r=[];return hne(!(t||n),!!t,new Map,r)(e),r},Hf=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?x1(b1(e,t)):structuredClone(e):(e,t)=>x1(b1(e,t));function pne(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function mne(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function gne(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||pne,r=e.options.footnoteBackLabel||mne,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[u]);if(!c)continue;const d=e.all(c),f=String(c.identifier).toUpperCase(),h=Qo(f.toLowerCase());let p=0;const g=[],y=e.footnoteCounts.get(f);for(;y!==void 0&&++p<=y;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,p);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else d.push(...g);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(c,v),l.push(v)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Hf(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Ip=function(e){if(e==null)return bne;if(typeof e=="function")return Dp(e);if(typeof e=="object")return Array.isArray(e)?yne(e):vne(e);if(typeof e=="string")return xne(e);throw new Error("Expected function, string, or object as test")};function yne(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ip(e[n]);return Dp(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function vne(e){const t=e;return Dp(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function xne(e){return Dp(t);function t(n){return n&&n.type===e}}function Dp(e){return t;function t(n,r,i){return!!(wne(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function bne(){return!0}function wne(e){return e!==null&&typeof e=="object"&&"type"in e}const UD=[],kne=!0,fv=!1,jne="skip";function WD(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=Ip(i),o=r?-1:1;l(e,void 0,[])();function l(u,c,d){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(u.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=UD,g,y,x;if((!t||a(u,c,d[d.length-1]||void 0))&&(p=_ne(n(u,d)),p[0]===fv))return p;if("children"in u&&u.children){const v=u;if(v.children&&p[0]!==jne)for(y=(r?v.children.length:-1)+o,x=d.concat(v);y>-1&&y<v.children.length;){const b=v.children[y];if(g=l(b,y,x)(),g[0]===fv)return g;y=typeof g[1]=="number"?g[1]:y+o}}return p}}}function _ne(e){return Array.isArray(e)?e:typeof e=="number"?[kne,e]:e==null?UD:[e]}function kb(e,t,n,r){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=r),WD(e,a,l,i);function l(u,c){const d=c[c.length-1],f=d?d.children.indexOf(u):void 0;return o(u,f,d)}}const hv={}.hasOwnProperty,Sne={};function Nne(e,t){const n=t||Sne,r=new Map,i=new Map,a=new Map,o={...une,...n.handlers},l={all:c,applyData:Pne,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:u,options:n,patch:Ene,wrap:Ane};return kb(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),l;function u(d,f){const h=d.type,p=l.handlers[h];if(hv.call(l.handlers,h)&&p)return p(l,d,f);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in d){const{children:y,...x}=d,v=Hf(x);return v.children=l.all(d),v}return Hf(d)}return(l.options.unknownHandler||Tne)(l,d,f)}function c(d){const f=[];if("children"in d){const h=d.children;let p=-1;for(;++p<h.length;){const g=l.one(h[p],d);if(g){if(p&&h[p-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=w1(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=w1(y.value))}Array.isArray(g)?f.push(...g):f.push(g)}}}return f}}function Ene(e,t){e.position&&(t.position=mJ(e))}function Pne(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Hf(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Tne(e,t){const n=t.data||{},r="value"in t&&!(hv.call(n,"hProperties")||hv.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ane(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function w1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function k1(e,t){const n=Nne(e,t),r=n.one(e,void 0),i=gne(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function One(e,t){return e&&"run"in e?async function(n,r){const i=k1(n,{file:r,...t});await e.run(i,r)}:function(n,r){return k1(n,{file:r,...e||t})}}function j1(e){if(e)throw e}var dd=Object.prototype.hasOwnProperty,HD=Object.prototype.toString,_1=Object.defineProperty,S1=Object.getOwnPropertyDescriptor,N1=function(t){return typeof Array.isArray=="function"?Array.isArray(t):HD.call(t)==="[object Array]"},E1=function(t){if(!t||HD.call(t)!=="[object Object]")return!1;var n=dd.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&dd.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||dd.call(t,i)},P1=function(t,n){_1&&n.name==="__proto__"?_1(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},T1=function(t,n){if(n==="__proto__")if(dd.call(t,n)){if(S1)return S1(t,n).value}else return;return t[n]},Cne=function e(){var t,n,r,i,a,o,l=arguments[0],u=1,c=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<c;++u)if(t=arguments[u],t!=null)for(n in t)r=T1(l,n),i=T1(t,n),l!==i&&(d&&i&&(E1(i)||(a=N1(i)))?(a?(a=!1,o=r&&N1(r)?r:[]):o=r&&E1(r)?r:{},P1(l,{name:n,newValue:e(d,o,i)})):typeof i<"u"&&P1(l,{name:n,newValue:i}));return l};const qm=zr(Cne);function pv(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ine(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(u,...c){const d=e[++a];let f=-1;if(u){o(u);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,d?Dne(d,l)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Dne(e,t){let n;return r;function r(...o){const l=e.length>o.length;let u;l&&o.push(i);try{u=e.apply(this,o)}catch(c){const d=c;if(l&&n)throw d;return i(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(o,...l){n||(n=!0,t(o,...l))}function a(o){i(null,o)}}const Yr={basename:Rne,dirname:Lne,extname:Mne,join:$ne,sep:"/"};function Rne(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ec(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Lne(e){if(ec(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Mne(e){ec(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function $ne(...e){let t=-1,n;for(;++t<e.length;)ec(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":zne(n)}function zne(e){ec(e);const t=e.codePointAt(0)===47;let n=Fne(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Fne(e,t){let n="",r=0,i=-1,a=0,o=-1,l,u;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function ec(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Bne={cwd:Une};function Une(){return"/"}function mv(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Wne(e){if(typeof e=="string")e=new URL(e);else if(!mv(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Hne(e)}function Hne(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Ym=["history","path","basename","stem","extname","dirname"];class KD{constructor(t){let n;t?mv(t)?n={path:t}:typeof t=="string"||Kne(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Bne.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ym.length;){const a=Ym[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)Ym.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Yr.basename(this.path):void 0}set basename(t){Qm(t,"basename"),Xm(t,"basename"),this.path=Yr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Yr.dirname(this.path):void 0}set dirname(t){A1(this.basename,"dirname"),this.path=Yr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Yr.extname(this.path):void 0}set extname(t){if(Xm(t,"extname"),A1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Yr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){mv(t)&&(t=Wne(t)),Qm(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Yr.basename(this.path,this.extname):void 0}set stem(t){Qm(t,"stem"),Xm(t,"stem"),this.path=Yr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new cn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Xm(e,t){if(e&&e.includes(Yr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Yr.sep+"`")}function Qm(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function A1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Kne(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Vne=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},Gne={}.hasOwnProperty;class jb extends Vne{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ine()}copy(){const t=new jb;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(qm(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(eg("data",this.frozen),this.namespace[t]=n,this):Gne.call(this.namespace,t)&&this.namespace[t]||void 0:t?(eg("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Uc(t),r=this.parser||this.Parser;return Zm("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Zm("process",this.parser||this.Parser),Jm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const l=Uc(t),u=r.parse(l);r.run(u,l,function(d,f,h){if(d||!f||!h)return c(d);const p=f,g=r.stringify(p,h);Xne(g)?h.value=g:h.result=g,c(d,h)});function c(d,f){d||!f?o(d):a?a(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Zm("processSync",this.parser||this.Parser),Jm("processSync",this.compiler||this.Compiler),this.process(t,i),C1("processSync","process",n),r;function i(a,o){n=!0,j1(a),r=o}}run(t,n,r){O1(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const u=Uc(n);i.run(t,u,c);function c(d,f,h){const p=f||t;d?l(d):o?o(p):r(void 0,p,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),C1("runSync","run",r),i;function a(o,l){j1(o),i=l,r=!0}}stringify(t,n){this.freeze();const r=Uc(n),i=this.compiler||this.Compiler;return Jm("stringify",i),O1(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(eg("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(c){if(typeof c=="function")u(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...f]=c;u(d,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(i.settings=qm(!0,i.settings,c.settings))}function l(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const f=c[d];a(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function u(c,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===c){h=f;break}if(h===-1)r.push([c,...d]);else if(d.length>0){let[p,...g]=d;const y=r[h][1];pv(y)&&pv(p)&&(p=qm(!0,y,p)),r[h]=[c,p,...g]}}}}const qne=new jb().freeze();function Zm(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Jm(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function eg(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function O1(e){if(!pv(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function C1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Uc(e){return Yne(e)?e:new KD(e)}function Yne(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Xne(e){return typeof e=="string"||Qne(e)}function Qne(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Zne="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",I1=[],D1={allowDangerousHtml:!0},Jne=/^(https?|ircs?|mailto|xmpp)$/i,ere=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gv(e){const t=tre(e),n=nre(e);return rre(t.runSync(t.parse(n),n),e)}function tre(e){const t=e.rehypePlugins||I1,n=e.remarkPlugins||I1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...D1}:D1;return qne().use(Mte).use(n).use(One,r).use(t)}function nre(e){const t=e.children||"",n=new KD;return typeof t=="string"&&(n.value=t),n}function rre(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,u=t.urlTransform||ire;for(const d of ere)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+Zne+d.id,void 0);return kb(e,c),bJ(e,{Fragment:s.Fragment,components:i,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function c(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return o?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let p;for(p in Km)if(Object.hasOwn(Km,p)&&Object.hasOwn(d.properties,p)){const g=d.properties[p],y=Km[p];(y===null||y.includes(d.tagName))&&(d.properties[p]=u(String(g||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!p&&r&&typeof f=="number"&&(p=!r(d,f,h)),p&&h&&typeof f=="number")return l&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function ire(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Jne.test(e.slice(0,t))?e:""}function R1(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function are(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function sre(e,t,n){const i=Ip((n||{}).ignore||[]),a=ore(t);let o=-1;for(;++o<a.length;)WD(e,"text",l);function l(c,d){let f=-1,h;for(;++f<d.length;){const p=d[f],g=h?h.children:void 0;if(i(p,g?g.indexOf(p):void 0,h))return;h=p}if(h)return u(c,d)}function u(c,d){const f=d[d.length-1],h=a[o][0],p=a[o][1];let g=0;const x=f.children.indexOf(c);let v=!1,b=[];h.lastIndex=0;let w=h.exec(c.value);for(;w;){const j=w.index,_={index:w.index,input:w.input,stack:[...d,c]};let k=p(...w,_);if(typeof k=="string"&&(k=k.length>0?{type:"text",value:k}:void 0),k===!1?h.lastIndex=j+1:(g!==j&&b.push({type:"text",value:c.value.slice(g,j)}),Array.isArray(k)?b.push(...k):k&&b.push(k),g=j+w[0].length,v=!0),!h.global)break;w=h.exec(c.value)}return v?(g<c.value.length&&b.push({type:"text",value:c.value.slice(g)}),f.children.splice(x,1,...b)):b=[c],x+b.length}}function ore(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([lre(i[0]),ure(i[1])])}return t}function lre(e){return typeof e=="string"?new RegExp(are(e),"g"):e}function ure(e){return typeof e=="function"?e:function(){return e}}const tg="phrasing",ng=["autolink","link","image","label"];function cre(){return{transforms:[yre],enter:{literalAutolink:fre,literalAutolinkEmail:rg,literalAutolinkHttp:rg,literalAutolinkWww:rg},exit:{literalAutolink:gre,literalAutolinkEmail:mre,literalAutolinkHttp:hre,literalAutolinkWww:pre}}}function dre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:tg,notInConstruct:ng},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:tg,notInConstruct:ng},{character:":",before:"[ps]",after:"\\/",inConstruct:tg,notInConstruct:ng}]}}function fre(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function rg(e){this.config.enter.autolinkProtocol.call(this,e)}function hre(e){this.config.exit.autolinkProtocol.call(this,e)}function pre(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mre(e){this.config.exit.autolinkEmail.call(this,e)}function gre(e){this.exit(e)}function yre(e){sre(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,vre],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),xre]],{ignore:["link","linkReference"]})}function vre(e,t,n,r,i){let a="";if(!VD(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!bre(n)))return!1;const o=wre(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function xre(e,t,n,r){return!VD(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function bre(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function wre(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=R1(e,"(");let a=R1(e,")");for(;r!==-1&&i>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function VD(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||xs(n)||Ap(n))&&(!t||n!==47)}GD.peek=Are;function kre(){this.buffer()}function jre(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function _re(){this.buffer()}function Sre(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Nre(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Dr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Ere(e){this.exit(e)}function Pre(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Dr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Tre(e){this.exit(e)}function Are(){return"["}function GD(e,t,n,r){const i=n.createTracker(r);let a=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{after:"]",before:a})),l(),o(),a+=i.move("]"),a}function Ore(){return{enter:{gfmFootnoteCallString:kre,gfmFootnoteCall:jre,gfmFootnoteDefinitionLabelString:_re,gfmFootnoteDefinition:Sre},exit:{gfmFootnoteCallString:Nre,gfmFootnoteCall:Ere,gfmFootnoteDefinitionLabelString:Pre,gfmFootnoteDefinition:Tre}}}function Cre(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:GD},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,o){const l=a.createTracker(o);let u=l.move("[^");const c=a.enter("footnoteDefinition"),d=a.enter("label");return u+=l.move(a.safe(a.associationId(r),{before:u,after:"]"})),d(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,l.current()),t?qD:Ire))),c(),u}}function Ire(e,t,n){return t===0?e:qD(e,t,n)}function qD(e,t,n){return(n?"":"    ")+e}const Dre=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];YD.peek=zre;function Rre(){return{canContainEols:["delete"],enter:{strikethrough:Mre},exit:{strikethrough:$re}}}function Lre(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Dre}],handlers:{delete:YD}}}function Mre(e){this.enter({type:"delete",children:[]},e)}function $re(e){this.exit(e)}function YD(e,t,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function zre(){return"~"}function Fre(e){return e.length}function Bre(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Fre,a=[],o=[],l=[],u=[];let c=0,d=-1;for(;++d<e.length;){const y=[],x=[];let v=-1;for(e[d].length>c&&(c=e[d].length);++v<e[d].length;){const b=Ure(e[d][v]);if(n.alignDelimiters!==!1){const w=i(b);x[v]=w,(u[v]===void 0||w>u[v])&&(u[v]=w)}y.push(b)}o[d]=y,l[d]=x}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)a[f]=L1(r[f]);else{const y=L1(r);for(;++f<c;)a[f]=y}f=-1;const h=[],p=[];for(;++f<c;){const y=a[f];let x="",v="";y===99?(x=":",v=":"):y===108?x=":":y===114&&(v=":");let b=n.alignDelimiters===!1?1:Math.max(1,u[f]-x.length-v.length);const w=x+"-".repeat(b)+v;n.alignDelimiters!==!1&&(b=x.length+b+v.length,b>u[f]&&(u[f]=b),p[f]=b),h[f]=w}o.splice(1,0,h),l.splice(1,0,p),d=-1;const g=[];for(;++d<o.length;){const y=o[d],x=l[d];f=-1;const v=[];for(;++f<c;){const b=y[f]||"";let w="",j="";if(n.alignDelimiters!==!1){const _=u[f]-(x[f]||0),k=a[f];k===114?w=" ".repeat(_):k===99?_%2?(w=" ".repeat(_/2+.5),j=" ".repeat(_/2-.5)):(w=" ".repeat(_/2),j=w):j=" ".repeat(_)}n.delimiterStart!==!1&&!f&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||f)&&v.push(" "),n.alignDelimiters!==!1&&v.push(w),v.push(b),n.alignDelimiters!==!1&&v.push(j),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&v.push("|")}g.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return g.join(`
`)}function Ure(e){return e==null?"":String(e)}function L1(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Wre(e,t,n,r){const i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(e,a.current()),Hre);return i(),o}function Hre(e,t,n){return">"+(n?"":" ")+e}function Kre(e,t){return M1(e,t.inConstruct,!0)&&!M1(e,t.notInConstruct,!1)}function M1(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function $1(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Kre(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Vre(e,t){const n=String(e);let r=n.indexOf(t),i=r,a=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}function Gre(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function qre(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Yre(e,t,n,r){const i=qre(n),a=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Gre(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(a,Xre);return f(),h}const l=n.createTracker(r),u=i.repeat(Math.max(Vre(a,i)+1,3)),c=n.enter("codeFenced");let d=l.move(u);if(e.lang){const f=n.enter(`codeFencedLang${o}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${o}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),f()}return d+=l.move(`
`),a&&(d+=l.move(a+`
`)),d+=l.move(u),c(),d}function Xre(e,t,n){return(n?"":"    ")+e}function _b(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Qre(e,t,n,r){const i=_b(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),{before:c,after:"]",...u.current()})),c+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=n.enter(`title${a}`),c+=u.move(" "+i),c+=u.move(n.safe(e.title,{before:c,after:i,...u.current()})),c+=u.move(i),l()),o(),c}function Zre(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Su(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Kf(e,t,n){const r=Eo(e),i=Eo(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}XD.peek=Jre;function XD(e,t,n,r){const i=Zre(n),a=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let u=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const c=u.charCodeAt(0),d=Kf(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(u=Su(c)+u.slice(1));const f=u.charCodeAt(u.length-1),h=Kf(r.after.charCodeAt(0),f,i);h.inside&&(u=u.slice(0,-1)+Su(f));const p=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+u+p}function Jre(e,t,n){return n.options.emphasis||"*"}function eie(e,t){let n=!1;return kb(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fv}),!!((!e.depth||e.depth<3)&&mb(e)&&(t.options.setext||n))}function tie(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(eie(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),u=n.enter("phrasing");a.move(o+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=Su(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),u(),l(),c}QD.peek=nie;function QD(e){return e.value||""}function nie(){return"<"}ZD.peek=rie;function ZD(e,t,n,r){const i=_b(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");return c+=u.move(n.safe(e.alt,{before:c,after:"]",...u.current()})),c+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=n.enter(`title${a}`),c+=u.move(" "+i),c+=u.move(n.safe(e.title,{before:c,after:i,...u.current()})),c+=u.move(i),l()),c+=u.move(")"),o(),c}function rie(){return"!"}JD.peek=iie;function JD(e,t,n,r){const i=e.referenceType,a=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");const c=n.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return o(),n.stack=d,a(),i==="full"||!c||c!==f?u+=l.move(f+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function iie(){return"!"}eR.peek=aie;function eR(e,t,n){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const o=n.unsafe[a],l=n.compilePattern(o);let u;if(o.atBreak)for(;u=l.exec(r);){let c=u.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(u.index+1)}}return i+r+i}function aie(){return"`"}function tR(e,t){const n=mb(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}nR.peek=sie;function nR(e,t,n,r){const i=_b(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,u;if(tR(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),l(),n.stack=d,f}l=n.enter("link"),u=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(u=n.enter("destinationRaw"),c+=o.move(n.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),u(),e.title&&(u=n.enter(`title${a}`),c+=o.move(" "+i),c+=o.move(n.safe(e.title,{before:c,after:i,...o.current()})),c+=o.move(i),u()),c+=o.move(")"),l(),c}function sie(e,t,n){return tR(e,n)?"<":"["}rR.peek=oie;function rR(e,t,n,r){const i=e.referenceType,a=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");const c=n.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:u,after:"]",...l.current()});return o(),n.stack=d,a(),i==="full"||!c||c!==f?u+=l.move(f+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function oie(){return"["}function Sb(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function lie(e){const t=Sb(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function uie(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function iR(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function cie(e,t,n,r){const i=n.enter("list"),a=n.bulletCurrent;let o=e.ordered?uie(n):Sb(n);const l=e.ordered?o==="."?")":".":lie(n);let u=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),iR(n)===o&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(o=l),n.bulletCurrent=o;const c=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),c}function die(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function fie(e,t,n,r){const i=die(n);let a=n.bulletCurrent||Sb(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(a+" ".repeat(o-a.length)),l.shift(o);const u=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,l.current()),d);return u(),c;function d(f,h,p){return h?(p?"":" ".repeat(o))+f:(p?a:a+" ".repeat(o-a.length))+f}}function hie(e,t,n,r){const i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(e,r);return a(),i(),o}const pie=Ip(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function mie(e,t,n,r){return(e.children.some(function(o){return pie(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function gie(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}aR.peek=yie;function aR(e,t,n,r){const i=gie(n),a=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let u=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const c=u.charCodeAt(0),d=Kf(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(u=Su(c)+u.slice(1));const f=u.charCodeAt(u.length-1),h=Kf(r.after.charCodeAt(0),f,i);h.inside&&(u=u.slice(0,-1)+Su(f));const p=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+u+p}function yie(e,t,n){return n.options.strong||"*"}function vie(e,t,n,r){return n.safe(e.value,r)}function xie(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function bie(e,t,n){const r=(iR(n)+(n.options.ruleSpaces?" ":"")).repeat(xie(n));return n.options.ruleSpaces?r.slice(0,-1):r}const sR={blockquote:Wre,break:$1,code:Yre,definition:Qre,emphasis:XD,hardBreak:$1,heading:tie,html:QD,image:ZD,imageReference:JD,inlineCode:eR,link:nR,linkReference:rR,list:cie,listItem:fie,paragraph:hie,root:mie,strong:aR,text:vie,thematicBreak:bie};function wie(){return{enter:{table:kie,tableData:z1,tableHeader:z1,tableRow:_ie},exit:{codeText:Sie,table:jie,tableData:ig,tableHeader:ig,tableRow:ig}}}function kie(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function jie(e){this.exit(e),this.data.inTable=void 0}function _ie(e){this.enter({type:"tableRow",children:[]},e)}function ig(e){this.exit(e)}function z1(e){this.enter({type:"tableCell",children:[]},e)}function Sie(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Nie));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Nie(e,t){return t==="|"?t:e}function Eie(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:u,tableRow:l}};function o(p,g,y,x){return c(d(p,y,x),p.align)}function l(p,g,y,x){const v=f(p,y,x),b=c([v]);return b.slice(0,b.indexOf(`
`))}function u(p,g,y,x){const v=y.enter("tableCell"),b=y.enter("phrasing"),w=y.containerPhrasing(p,{...x,before:a,after:a});return b(),v(),w}function c(p,g){return Bre(p,{align:g,alignDelimiters:r,padding:n,stringLength:i})}function d(p,g,y){const x=p.children;let v=-1;const b=[],w=g.enter("table");for(;++v<x.length;)b[v]=f(x[v],g,y);return w(),b}function f(p,g,y){const x=p.children;let v=-1;const b=[],w=g.enter("tableRow");for(;++v<x.length;)b[v]=u(x[v],p,g,y);return w(),b}function h(p,g,y){let x=sR.inlineCode(p,g,y);return y.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function Pie(){return{exit:{taskListCheckValueChecked:F1,taskListCheckValueUnchecked:F1,paragraph:Aie}}}function Tie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Oie}}}function F1(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Aie(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Oie(e,t,n,r){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);a&&l.move(o);let u=sR.listItem(e,t,n,{...r,...l.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),u;function c(d){return d+o}}function Cie(){return[cre(),Ore(),Rre(),wie(),Pie()]}function Iie(e){return{extensions:[dre(),Cre(e),Lre(),Eie(e),Tie()]}}const Die={tokenize:Fie,partial:!0},oR={tokenize:Bie,partial:!0},lR={tokenize:Uie,partial:!0},uR={tokenize:Wie,partial:!0},Rie={tokenize:Hie,partial:!0},cR={name:"wwwAutolink",tokenize:$ie,previous:fR},dR={name:"protocolAutolink",tokenize:zie,previous:hR},Vi={name:"emailAutolink",tokenize:Mie,previous:pR},fi={};function Lie(){return{text:fi}}let za=48;for(;za<123;)fi[za]=Vi,za++,za===58?za=65:za===91&&(za=97);fi[43]=Vi;fi[45]=Vi;fi[46]=Vi;fi[95]=Vi;fi[72]=[Vi,dR];fi[104]=[Vi,dR];fi[87]=[Vi,cR];fi[119]=[Vi,cR];function Mie(e,t,n){const r=this;let i,a;return o;function o(f){return!yv(f)||!pR.call(r,r.previous)||Nb(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return yv(f)?(e.consume(f),l):f===64?(e.consume(f),u):n(f)}function u(f){return f===46?e.check(Rie,d,c)(f):f===45||f===95||on(f)?(a=!0,e.consume(f),u):d(f)}function c(f){return e.consume(f),i=!0,u}function d(f){return a&&i&&hn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function $ie(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!fR.call(r,r.previous)||Nb(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Die,e.attempt(oR,e.attempt(lR,a),n),n)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function zie(e,t,n){const r=this;let i="",a=!1;return o;function o(f){return(f===72||f===104)&&hR.call(r,r.previous)&&!Nb(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),l):n(f)}function l(f){if(hn(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(f),u}return n(f)}function u(f){return f===47?(e.consume(f),a?c:(a=!0,u)):n(f)}function c(f){return f===null||Uf(f)||Ge(f)||xs(f)||Ap(f)?n(f):e.attempt(oR,e.attempt(lR,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Fie(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),a):n(o)}function a(o){return o===null?n(o):t(o)}}function Bie(e,t,n){let r,i,a;return o;function o(c){return c===46||c===95?e.check(uR,u,l)(c):c===null||Ge(c)||xs(c)||c!==45&&Ap(c)?u(c):(a=!0,e.consume(c),o)}function l(c){return c===95?r=!0:(i=r,r=void 0),e.consume(c),o}function u(c){return i||r||!a?n(c):t(c)}}function Uie(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(uR,t,a)(o):o===null||Ge(o)||xs(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&r++,e.consume(o),i}}function Wie(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),a):l===93?(e.consume(l),i):l===60||l===null||Ge(l)||xs(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||Ge(l)||xs(l)?t(l):r(l)}function a(l){return hn(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):hn(l)?(e.consume(l),o):n(l)}}function Hie(e,t,n){return r;function r(a){return e.consume(a),i}function i(a){return on(a)?n(a):t(a)}}function fR(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ge(e)}function hR(e){return!hn(e)}function pR(e){return!(e===47||yv(e))}function yv(e){return e===43||e===45||e===46||e===95||on(e)}function Nb(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Kie={tokenize:Jie,partial:!0};function Vie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Xie,continuation:{tokenize:Qie},exit:Zie}},text:{91:{name:"gfmFootnoteCall",tokenize:Yie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Gie,resolveTo:qie}}}}function Gie(e,t,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){o=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!o||!o._balanced)return n(u);const c=Dr(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function qie(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function Yie(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),u}function u(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(a>999||f===93&&!o||f===null||f===91||Ge(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(Dr(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Ge(f)||(o=!0),a++,e.consume(f),f===92?d:c}function d(f){return f===91||f===92||f===93?(e.consume(f),a++,c):c(f)}}function Xie(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,l;return u;function u(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(o>999||g===93&&!l||g===null||g===91||Ge(g))return n(g);if(g===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return a=Dr(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Ge(g)||(l=!0),o++,e.consume(g),g===92?f:d}function f(g){return g===91||g===92||g===93?(e.consume(g),o++,d):d(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),i.includes(a)||i.push(a),Se(e,p,"gfmFootnoteDefinitionWhitespace")):n(g)}function p(g){return t(g)}}function Qie(e,t,n){return e.check(Ju,t,e.attempt(Kie,t,n))}function Zie(e){e.exit("gfmFootnoteDefinition")}function Jie(e,t,n){const r=this;return Se(e,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):n(a)}}function eae(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let u=-1;for(;++u<o.length;)if(o[u][0]==="enter"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._close){let c=u;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[u][1].end.offset-o[u][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[u][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[u][1].end)},f={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[u][1].start)},h=[["enter",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["enter",f,l]],p=l.parser.constructs.insideSpan.null;p&&Yn(h,h.length,0,Op(p,o.slice(c+1,u),l)),Yn(h,h.length,0,[["exit",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["exit",d,l]]),Yn(o,c-1,u-c+3,h),u=c+h.length-2;break}}for(u=-1;++u<o.length;)o[u][1].type==="strikethroughSequenceTemporary"&&(o[u][1].type="data");return o}function a(o,l,u){const c=this.previous,d=this.events;let f=0;return h;function h(g){return c===126&&d[d.length-1][1].type!=="characterEscape"?u(g):(o.enter("strikethroughSequenceTemporary"),p(g))}function p(g){const y=Eo(c);if(g===126)return f>1?u(g):(o.consume(g),f++,p);if(f<2&&!n)return u(g);const x=o.exit("strikethroughSequenceTemporary"),v=Eo(g);return x._open=!v||v===2&&!!y,x._close=!y||y===2&&!!v,l(g)}}}class tae{constructor(){this.map=[]}add(t,n,r){nae(this,t,n,r)}consume(t){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const a of i)t.push(a);i=r.pop()}this.map.length=0}}function nae(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function rae(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function iae(){return{flow:{null:{name:"table",tokenize:aae,resolveAll:sae}}}}function aae(e,t,n){const r=this;let i=0,a=0,o;return l;function l(S){let P=r.events.length-1;for(;P>-1;){const M=r.events[P][1].type;if(M==="lineEnding"||M==="linePrefix")P--;else break}const C=P>-1?r.events[P][1].type:null,B=C==="tableHead"||C==="tableRow"?k:u;return B===k&&r.parser.lazy[r.now().line]?n(S):B(S)}function u(S){return e.enter("tableHead"),e.enter("tableRow"),c(S)}function c(S){return S===124||(o=!0,a+=1),d(S)}function d(S){return S===null?n(S):de(S)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),p):n(S):we(S)?Se(e,d,"whitespace")(S):(a+=1,o&&(o=!1,i+=1),S===124?(e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),f(S)))}function f(S){return S===null||S===124||Ge(S)?(e.exit("data"),d(S)):(e.consume(S),S===92?h:f)}function h(S){return S===92||S===124?(e.consume(S),f):f(S)}function p(S){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(S):(e.enter("tableDelimiterRow"),o=!1,we(S)?Se(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):g(S))}function g(S){return S===45||S===58?x(S):S===124?(o=!0,e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),y):_(S)}function y(S){return we(S)?Se(e,x,"whitespace")(S):x(S)}function x(S){return S===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(S),e.exit("tableDelimiterMarker"),v):S===45?(a+=1,v(S)):S===null||de(S)?j(S):_(S)}function v(S){return S===45?(e.enter("tableDelimiterFiller"),b(S)):_(S)}function b(S){return S===45?(e.consume(S),b):S===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(S),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(S))}function w(S){return we(S)?Se(e,j,"whitespace")(S):j(S)}function j(S){return S===124?g(S):S===null||de(S)?!o||i!==a?_(S):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(S)):_(S)}function _(S){return n(S)}function k(S){return e.enter("tableRow"),E(S)}function E(S){return S===124?(e.enter("tableCellDivider"),e.consume(S),e.exit("tableCellDivider"),E):S===null||de(S)?(e.exit("tableRow"),t(S)):we(S)?Se(e,E,"whitespace")(S):(e.enter("data"),A(S))}function A(S){return S===null||S===124||Ge(S)?(e.exit("data"),E(S)):(e.consume(S),S===92?T:A)}function T(S){return S===92||S===124?(e.consume(S),A):A(S)}}function sae(e,t){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],l=!1,u=0,c,d,f;const h=new tae;for(;++n<e.length;){const p=e[n],g=p[1];p[0]==="enter"?g.type==="tableHead"?(l=!1,u!==0&&(B1(h,t,u,c,d),d=void 0,u=0),c={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",c,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",d,t]])),i=g.type==="tableDelimiterRow"?2:d?3:1):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],f=Wc(h,t,a,i,void 0,f),a=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],f=Wc(h,t,a,i,void 0,f)),a=o,o=[a[1],n,0,0])):g.type==="tableHead"?(l=!0,u=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(u=n,a[1]!==0?(o[0]=o[1],f=Wc(h,t,a,i,n,f)):o[1]!==0&&(f=Wc(h,t,o,i,n,f)),i=0):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(u!==0&&B1(h,t,u,c,d),h.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=rae(t.events,n))}return e}function Wc(e,t,n,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(a.end=Object.assign({},Rs(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const u=Rs(t.events,n[1]);if(a={type:o,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const c=Rs(t.events,n[2]),d=Rs(t.events,n[3]),f={type:l,start:Object.assign({},c),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],p=t.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,y=n[3]-n[2]-1;e.add(g,y,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(a.end=Object.assign({},Rs(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function B1(e,t,n,r,i){const a=[],o=Rs(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function Rs(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const oae={name:"tasklistCheck",tokenize:uae};function lae(){return{text:{91:oae}}}function uae(e,t,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),a)}function a(u){return Ge(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),o):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),o):n(u)}function o(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(u)}function l(u){return de(u)?t(u):we(u)?e.check({tokenize:cae},t,n)(u):n(u)}}function cae(e,t,n){return Se(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function dae(e){return _D([Lie(),Vie(),eae(e),iae(),lae()])}const fae={};function vv(e){const t=this,n=e||fae,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(dae(n)),a.push(Cie()),o.push(Iie(n))}const hae=`# 1. The Big Picture\r
\r
MIP is an automated market intelligence platform. It watches markets every day, detects interesting price movements, evaluates whether those patterns historically lead to profitable outcomes, and  only when confident  proposes trades.\r
\r
**MIP does not predict tomorrow's price.** Instead, it asks: "When this type of price action happened in the past, what usually followed?" It builds evidence over time and only acts when the evidence is strong enough.\r
\r
## The MIP Pipeline at a Glance\r
\r
\`\`\`\r
Market Data  Signal Detection  Training  Trust Decision  Trade Proposals\r
\`\`\`\r
\r
1. **Market Data**  Fresh price bars arrive daily (and every 15 minutes for intraday)\r
2. **Signal Detection**  Patterns scan for notable moves\r
3. **Training**  Evaluate past signals, build evidence\r
4. **Trust Decision**  Enough evidence? Earn trust status\r
5. **Trade Proposals**  Only trusted patterns can trade\r
\r
MIP runs **two independent pipelines**: a **Daily Pipeline** for multi-day patterns and an **Intraday Pipeline** for patterns that resolve within hours. Both follow the same learn-before-you-trade philosophy but operate on different time scales. See section 23 for details on the intraday subsystem.\r
\r
## Real-World Analogy\r
\r
Imagine you're hiring a weather forecaster. You wouldn't trust someone on day one. You'd watch them make predictions over weeks. After 40+ predictions, if they were right 75% of the time, you'd start to trust them. That's exactly how MIP works  it watches its own pattern detections, checks what actually happened, and only trusts patterns with a proven track record.\r
`,pae=`# 2. The Daily Pipeline\r
\r
Every day, MIP runs an automated pipeline. Think of it as a checklist the system goes through:\r
\r
1. **Fetch new market bars**  Get the latest price data (open, high, low, close) for all tracked symbols  stocks, FX pairs, etc.\r
2. **Generate signals**  Run each pattern definition to detect interesting price action in today's bars.\r
3. **Evaluate old outcomes**  Look back at signals from previous days and check: did the price actually go up afterwards?\r
4. **Update training metrics**  Recalculate hit rate, average return, and maturity score for every symbol/pattern combination.\r
5. **Update trust labels**  Re-evaluate which patterns have earned TRUSTED status based on the latest metrics.\r
6. **Generate trade proposals**  For trusted signals, propose buy or sell orders to the portfolio.\r
7. **Execute trades**  Fill approved orders through the portfolio engine (if risk gate allows).\r
8. **Generate AI digest**  Create a narrative summary of everything that happened  what changed, what matters, what to watch.\r
\r
> **Weekends & Holidays:** If no new market data arrives (weekends, holidays), the pipeline still runs but skips signal generation. Training evaluation and digest generation still happen, so you'll always see a fresh AI narrative.\r
`,mae=`# 3. How Signals Are Generated\r
\r
A **signal** is not a prediction  it's a detection. Each "pattern" is a set of rules that looks for specific price behavior. When the rules match, a signal is logged.\r
\r
## Example: FX Pattern (Moving-Average Crossover)\r
\r
The **FX_MOMENTUM_DAILY** pattern for AUD/USD checks: "Did today's return exceed 0.1% AND is the price above both the 10-bar and 20-bar moving averages?"\r
\r
- If **yes**  a signal is logged with the observed return as its score.\r
- If **no**  nothing happens. No signal, no record.\r
\r
Today AUD/USD closed at 0.6520, up from yesterday's 0.6502.\r
Daily return = (0.6520  0.6502) / 0.6502 = **+0.277%**.\r
The 0.277% exceeds the pattern's 0.1% minimum  signal fires with score 0.00277.\r
\r
## Example: STOCK Pattern (Breakout + Momentum)\r
\r
The **STOCK_MOMENTUM_FAST** pattern for AAPL checks three conditions simultaneously:\r
\r
1. **Minimum return:** Did today's return exceed 0.2%?\r
2. **Momentum confirmation (slow_window=1):** Was yesterday also a green (positive) day?\r
3. **Breakout (fast_window=5):** Is today's close at a new 5-day high?\r
4. **Z-score  1.0:** Is today's move at least 1 standard deviation above the recent average (using 5-day volatility)?\r
\r
All four must be true simultaneously. This means the stock must be on consecutive green days, breaking out to new short-term highs, with an unusually large move.\r
\r
AAPL closed at $195.00 today, up from $193.50 yesterday (return = +0.78%).\r
Yesterday was also green (up from $192.00  +0.78%).  momentum check passed.\r
The highest close in the last 5 days was $194.20. Today's $195.00 exceeds it.  breakout passed.\r
5-day return std dev = 0.5%. Z-score = 0.78% / 0.5% = 1.56.  z-score  1.0.\r
 Signal fires with score 0.0078.\r
\r
## Key Parameters in Each Pattern\r
\r
- **min_return**  Minimum observed return to fire a signal (e.g., 0.001 = 0.1%). Filters out tiny, insignificant moves. If a stock moved 0.01%, that's noise  not a signal. Example: If min_return = 0.002 (0.2%), then AAPL going up 0.15% today would NOT fire a signal. AAPL going up 0.35% WOULD fire one.\r
\r
- **min_zscore**  Minimum z-score  how unusual the move is compared to the symbol's recent volatility. A 0.5% move might be huge for a stable stock but normal for a volatile one. Z-score adjusts for this. Z-score = today's return  standard deviation of returns over the fast_window period. Example: If AAPL's return std dev over the last 5 bars is 0.4% and today's return is 0.78%, then z-score = 0.78 / 0.4 = **1.95**. With min_zscore = 1.0, this signal fires. A move of only 0.3% (z-score = 0.75) would not.\r
\r
- **fast_window and slow_window**  **Warning: These names are misleading.** They originate from a moving-average crossover concept, but in the STOCK/ETF patterns they are repurposed for different filters:\r
\r
  | Parameter | FX Patterns | STOCK / ETF Patterns |\r
  |-----------|-------------|----------------------|\r
  | **slow_window** | Slow moving average  the longer lookback (e.g., 20 bars). Price must be above this average. | Momentum confirmation  the shorter lookback (e.g., STOCK=1, ETF=3). The system checks the last N bars before today and requires all N to have positive returns (green days). |\r
  | **fast_window** | Fast moving average  the shorter lookback (e.g., 10 bars). Price must be above this average. | Breakout + volatility window  the longer lookback (e.g., STOCK=5, ETF=20). Two uses: 1) Breakout: Today's close must exceed the highest close in the prior N bars. 2) Z-score: The standard deviation of returns over the last N bars is used to calculate how unusual today's move is. |\r
\r
  **Why the naming is counterintuitive:** For STOCK/ETF, "slow" is actually the shorter window and "fast" is the longer one. This is an artifact of the codebase reusing the same parameter names for a different algorithm.\r
\r
- **lookback_days**  How many days of history to use for computing z-scores and statistics (e.g., 90 days). Determines "normal" for this symbol.\r
\r
> **Important:** Signals that fire are not automatically traded. They enter the training pipeline first. Only signals from TRUSTED patterns can become trade proposals.\r
`,gae=`# 4. Outcome Evaluation (How Training Works)\r
\r
Training is **not** teaching an AI model. It's building a track record. Every day, the system looks back at old signals and checks what actually happened in the market afterward.\r
\r
## Timeline Example\r
\r
- **Day 1  Signal Fires:** Pattern detects momentum in AAPL. AAPL returned +1.2% today, above the pattern's 0.2% threshold. A signal is logged with score = 0.012. No trade happens yet  just a record. AAPL price at signal: $190.00.\r
\r
- **Day 2  1-bar evaluation:** System checks: what happened 1 bar later? AAPL closed at $190.95 the next day  up +0.5% from $190.00. realized_return = +0.005, hit_flag = true (exceeded minimum).\r
\r
- **Day 4  3-bar evaluation:** System checks: what happened 3 bars later? AAPL closed at $192.30  up +1.2% from $190.00 over 3 days. realized_return = +0.012, hit_flag = true.\r
\r
- **Day 6  5-bar evaluation:** System checks: what happened 5 bars later? AAPL closed at $193.99  up +2.1% from $190.00 over 5 trading days. realized_return = +0.021, hit_flag = true.\r
\r
- **Day 11  10-bar evaluation:** System checks: what happened 10 bars later? AAPL closed at $191.71  up +0.9% from $190.00 over 10 days. realized_return = +0.009, hit_flag = true.\r
\r
- **Day 21  20-bar evaluation:** Over 20 days, AAPL dropped to $189.43  down -0.3% from entry at $190.00. realized_return = -0.003, hit_flag = false (below threshold).\r
\r
- **Ongoing  Metrics accumulate:** Each evaluation feeds into training metrics. After many signals and evaluations, the system has a track record: "Out of 40 signals, 31 were hits (77% hit rate) with an average return of +0.81%."\r
\r
## Horizons  Daily vs Intraday\r
\r
Every signal is evaluated at multiple time windows called **horizons**. The horizons differ depending on whether the signal comes from the daily or intraday pipeline.\r
\r
### Daily Horizons (5 windows)\r
\r
| Horizon | Meaning | What it tells you |\r
|---------|---------|-------------------|\r
| **1 day** | Next trading day | Very short-term reaction  did the momentum continue tomorrow? |\r
| **3 days** | 3 trading days later | Short-term follow-through  did the move extend over a few days? |\r
| **5 days** | 1 trading week later | The "standard" holding horizon  the main metric used for scoring. |\r
| **10 days** | 2 trading weeks later | Medium-term  does the pattern have staying power? |\r
| **20 days** | 1 trading month later | Longer-term  was this a meaningful trend or just a blip? |\r
\r
### Intraday Horizons (4 windows)\r
\r
Intraday patterns resolve faster, so their horizons are measured in **bars** (15-minute intervals) and **session events**:\r
\r
| Horizon | Label | Meaning |\r
|---------|-------|---------|\r
| **+1 bar** | H1 | Immediate validation  did the next 15-min bar confirm? |\r
| **+4 bars** | H4 | ~1 hour continuation  did the move extend? |\r
| **+8 bars** | H8 | ~2 hour persistence  does the pattern have staying power? |\r
| **EOD close** | EOD | End-of-day  did it matter by market close? |\r
\r
### Unified Horizon Metadata\r
\r
Both daily and intraday horizons are stored in the **HORIZON_DEFINITION** table with metadata describing the horizon type (BAR, DAY, SESSION), length, and resolution. This allows the system to interpret horizons consistently across timeframes while keeping evaluation logic appropriate to each.\r
\r
> **This is backtesting in production.** The system generates signals every day (and intraday), then evaluates them at multiple time horizons. Over weeks and months, this builds a statistically meaningful track record for each symbol/pattern combination.\r
`,yae=`# 5. Training Stages\r
\r
Every symbol/pattern is assigned a **maturity score** (0100) based on three factors: sample size, outcome coverage, and horizon completeness. The score determines the training stage:\r
\r
| Stage | Score Range | Description |\r
|-------|-------------|-------------|\r
| **INSUFFICIENT** | 024 | Not enough data yet. Maybe only 5 signals have been generated. The system needs at least 3040 before it can judge quality. No trading possible. |\r
| **WARMING UP** | 2549 | Some data exists  maybe 10-20 signals with partial outcome evaluations. The system is collecting evidence but it's early days. |\r
| **LEARNING** | 5074 | Enough data to start judging quality  maybe 25+ signals with outcomes across most horizons. Metrics are becoming statistically meaningful. |\r
| **CONFIDENT** | 75100 | Strong evidence  40+ signals, outcomes across all 5 horizons. If it also passes trust rules, it becomes trade-eligible. |\r
\r
## What Makes Up the Maturity Score?\r
\r
The maturity score (0-100) is calculated from three components:\r
\r
- **30%  Sample Size:** How many signals have been generated. Needs at least 40 for full marks (30 pts). Example: 25 signals  25/40  30 = **18.75 points**\r
\r
- **40%  Coverage:** What fraction of signals have been evaluated across horizons. 100% means every signal has outcomes for all time windows. Example: 80% coverage  0.80  40 = **32.0 points**\r
\r
- **30%  Horizons:** How many evaluation windows (1, 3, 5, 10, 20 bars) have data. All 5 = full horizon coverage. Example: 4 of 5 horizons  4/5  30 = **24.0 points**\r
\r
### Full Calculation Example\r
\r
AUD/USD with FX_MOMENTUM_DAILY: 25 signals, 80% coverage, 4 of 5 horizons.\r
\r
Score = 18.75 + 32.0 + 24.0 = **74.75  LEARNING stage**\r
\r
To reach CONFIDENT (75+), it needs either more signals (pushing past 30 of 40) or the 5th horizon to start populating (which happens after 20 bars pass from the earliest signals).\r
`,vae=`# 6. Trust & Eligibility\r
\r
Being CONFIDENT (good data quality) is necessary but not sufficient. To actually trade, a pattern must also be **TRUSTED**  meaning its track record passes three performance gates:\r
\r
## The Three Trust Gates\r
\r
1. **Sample Size  40 signals**  Enough evaluated signals to be statistically meaningful. Below 40, the numbers could be luck  like flipping a coin 5 times and getting all heads.\r
\r
2. **Hit Rate  55%**  More than half of evaluated outcomes must be "hits"  the price moved favorably beyond the minimum threshold. 55% means a meaningful edge over random chance (50%).\r
\r
3. **Avg Return  0.05%**  The average realized return across all outcomes must be positive and above 0.0005 (0.05%). This ensures actual profitability, not just accuracy.\r
\r
## Trust Labels\r
\r
- **TRUSTED**  All three gates passed. The pattern CAN generate trade proposals. This is the definitive answer  once trusted, signals from this pattern are eligible for trading.\r
\r
- **WATCH**  Close but not there yet. One or two gates are nearly met. The system is monitoring progress. No trading allowed  but it could flip to TRUSTED with a few more good outcomes.\r
\r
- **UNTRUSTED**  Fails trust criteria significantly. Not enough evidence or poor performance. No trading. The pattern needs more time or may simply not be reliable for this symbol.\r
\r
> **CONFIDENT  TRUSTED.** A symbol can be CONFIDENT (score 85, lots of data) but NOT TRUSTED (e.g., hit rate is 50%, below the 55% threshold  plenty of data but poor accuracy). Conversely, a symbol can be TRUSTED before reaching CONFIDENT if its returns are strong on existing data. **The trust label is the definitive gate for trading.**\r
`,xae=`# 7. What Is Hit Rate?\r
\r
Hit rate answers: **"When this pattern said 'go,' how often did the price actually move favorably?"**\r
\r
## How It's Calculated\r
\r
\`\`\`\r
Hit Rate = HIT_COUNT  SUCCESS_COUNT\r
\`\`\`\r
\r
- **SUCCESS_COUNT**  The number of outcomes that were successfully evaluated  the system was able to check what happened after the signal fired. For example, if 40 signals have been generated and all 40 have a known outcome at the 5-bar horizon, SUCCESS_COUNT = 40.\r
\r
- **HIT_COUNT**  Of those, how many had the price move above the minimum threshold in the right direction. If 30 out of 40 outcomes showed a positive return exceeding the pattern's minimum, HIT_COUNT = 30.\r
\r
## Detailed Example\r
\r
AUD/USD has been tracked for 3 months. In that time, the FX_MOMENTUM_DAILY pattern fired 40 times. The system evaluated what happened 5 bars (1 week) after each signal:\r
\r
- Signal #1: AUD went up +0.5%  **HIT** (above threshold)\r
- Signal #2: AUD went down -0.2%  **MISS**\r
- Signal #3: AUD went up +1.1%  **HIT**\r
- ... and so on for all 40 signals ...\r
\r
Final count: 30 hits out of 40 total evaluations.\r
**Hit Rate = 30 / 40 = 0.75 (75%)**\r
\r
The system requires at least 55%. At 75%, AUD/USD passes this gate comfortably  meaning 3 out of 4 times the pattern fired, the price moved favorably.\r
`,bae=`# 8. What Is Avg Return?\r
\r
Avg return answers: **"On average, how much money did this pattern make (or lose) per signal?"**\r
\r
While hit rate measures *accuracy* (how often), avg return measures *profitability* (how much). Both are needed  a pattern could be right 60% of the time but still lose money if the losses are bigger than the wins.\r
\r
## How It's Calculated\r
\r
\`\`\`\r
Avg Return = sum of all realized_return values  number of evaluated outcomes\r
\`\`\`\r
\r
## Detailed Example\r
\r
AUD/USD generated 40 signals. Here are the 5-bar returns for 8 of them:\r
\r
| Signal | 5-bar return | Hit? |\r
|--------|-------------|------|\r
| #1 | +1.20% | Yes |\r
| #2 | +0.50% | Yes |\r
| #3 | -0.30% | No |\r
| #4 | +0.80% | Yes |\r
| #5 | +2.10% | Yes |\r
| #6 | -0.50% | No |\r
| #7 | +0.30% | Yes |\r
| #8 | +1.50% | Yes |\r
\r
Average across all 40 outcomes: **+0.81%** per signal.\r
\r
A value of 0.0081 (0.81%) is well above the 0.0005 (0.05%) threshold. Even though some signals lost money (-0.30%, -0.50%), the average is solidly positive.\r
`,wae=`# 9. From Trust to Trading\r
\r
Even after a pattern earns TRUSTED status, several more gates must be passed before an actual trade happens:\r
\r
\`\`\`\r
TRUSTED Signal  Risk Gate  Capacity Check  Proposal  Trade Executed\r
\`\`\`\r
\r
1. **TRUSTED Signal**  Pattern passed all trust gates\r
2. **Risk Gate**  Is the portfolio safe? Is entry allowed?\r
3. **Capacity Check**  Does the portfolio have open slots?\r
4. **Proposal**  Order proposed & validated\r
5. **Trade Executed**  Position opened in portfolio\r
\r
The **proposal funnel** shows this narrowing effect. If you see many signals but few trades, it's usually because:\r
\r
- **Most patterns are still in WATCH status**  they haven't earned trust yet, so their signals can't become proposals.\r
- **The portfolio is fully saturated**  all position slots are in use. New trades can't open until existing ones close.\r
- **The risk gate is in CAUTION or STOPPED mode**  the portfolio's drawdown exceeded a safety threshold, blocking new entries.\r
- **Duplicate position**  the portfolio already holds this symbol, so a new entry is rejected.\r
\r
## Example: A Typical Day's Funnel\r
\r
Today's pipeline generated **15 signals** across all symbols. Of those, **3** came from TRUSTED patterns (the rest are still training). Of those 3, **2** passed the risk gate (the portfolio's gate is SAFE). Of those 2, **1** passed the capacity check (1 slot was available). Result: **1 trade executed** out of 15 signals. That's normal.\r
`,kae=`# 10. What Are Patterns?\r
\r
A **pattern** is a named signal strategy with specific parameters. Each pattern defines what the system looks for in market data. MIP can run multiple patterns simultaneously, each targeting different market types and time scales.\r
\r
## Pattern Examples\r
\r
| Pattern | Market | fast_window | slow_window | What It Actually Requires | Min Return | Min Z-Score |\r
|---------|--------|-------------|-------------|---------------------------|------------|-------------|\r
| **FX_MOMENTUM_DAILY** | FX | 10 | 20 | Price above 10-bar MA *and* 20-bar MA (traditional crossover) | 0.1% | 0 (any) |\r
| **STOCK_MOMENTUM_FAST** | STOCK | 5 | 1 | 1 prior green day + 5-day high breakout + z-score  1.0 | 0.2% | 1.0 |\r
| **ETF_MOMENTUM_DAILY** | ETF | 20 | 3 | 3 consecutive green days + 20-day high breakout + z-score  1.0 | 0.2% | 1.0 |\r
\r
**FX_MOMENTUM_DAILY** uses the traditional moving-average approach (less selective: z-score = 0, any positive move above 0.1% fires).\r
\r
**STOCK_MOMENTUM_FAST** requires a 5-day high breakout with at least 1 prior green day  achievable and fires regularly.\r
\r
**ETF_MOMENTUM_DAILY** is paradoxically the *most demanding* pattern: it requires 3 consecutive green days AND a 20-day high breakout AND z-score  1.0. This is extremely selective, which is why ETF signals fire less frequently despite targeting less volatile instruments.\r
\r
Each symbol is evaluated *per pattern*. So AAPL might be CONFIDENT under STOCK_MOMENTUM_FAST but INSUFFICIENT under a different pattern. Trust is also earned per pattern  the system judges each strategy independently.\r
\r
> **Patterns don't change automatically.** The AI narratives in the Cockpit describe pattern behavior but never change pattern parameters. Only the system operator can modify pattern definitions. The AI is strictly observational  it reports, it doesn't act.\r
`,jae=`# 11. Home\r
\r
Your landing page. A quick overview of system health and shortcuts to the most-used pages.\r
\r
## What You See on This Page\r
\r
### Hero Banner\r
\r
The title "Market Intelligence Platform" with the tagline "Daily-bar research  outcomes-based learning  explainable suggestions." This is decorative  it reminds you of MIP's purpose.\r
\r
### Quick Actions\r
\r
Five shortcut cards that take you directly to key pages:\r
\r
| Card | Where it goes | What it shows |\r
|------|---------------|---------------|\r
| **View Portfolios** | /portfolios | All portfolios  positions, trades, episodes |\r
| **Default Portfolio** | /portfolios/1 | Quick link to your primary portfolio |\r
| **Open Cockpit** | /cockpit | AI narratives, portfolio status, training |\r
| **Open Training Status** | /training | Maturity by symbol and pattern |\r
| **Open Suggestions** | /suggestions | Ranked candidates from outcome history |\r
\r
### System at a Glance  Three Metric Cards\r
\r
- **Last pipeline run**  Shows how long ago the daily pipeline finished, plus its status (SUCCESS / FAILED / RUNNING). Example: "2 hours ago" with a green "SUCCESS" badge means the pipeline ran 2 hours ago and completed normally.\r
\r
- **New evaluations since last run**  How many new outcome evaluations have been calculated since the last pipeline run. Example: "+12" means 12 new outcomes were computed. This number grows as time passes and more horizons become evaluable. If it says "0", no new outcomes are ready yet.\r
\r
- **Latest digest (as-of)**  When the most recent AI digest was generated. Example: "3 hours ago" means the digest covers data up to 3 hours ago. "No digest yet" means no digest exists (run the pipeline first).\r
`,_ae=`# 12. Cockpit (Daily Dashboard)\r
\r
Your daily command center. The Cockpit uses a **two-column news layout** to display everything you need in one view: portfolio performance, market conditions, AI-generated narratives, signal candidates, and training progress.\r
\r
This is the page you should check first every morning.\r
\r
## Layout Overview\r
\r
The Cockpit is divided into two columns:\r
\r
- **Left Column  Portfolios:** One expandable StoryCard per portfolio, showing performance, risk status, and lazy-loaded AI digest details.\r
- **Right Column  Market & System:** Market Pulse, System Overview (global digest), Signal Candidates, and Training Progress.\r
\r
Each card uses a **StoryCard** design  a collapsible card with:\r
- A colored **attention dot** on the left border indicating urgency\r
- A **headline** (one-line summary)\r
- A **summary** (brief description visible when collapsed)\r
- **Badges** showing key status indicators\r
- **Expandable detail**  click to reveal the full content\r
\r
### Attention Dot Colors\r
\r
| Color | Meaning |\r
|-------|---------|\r
| Red (critical) | Something is broken or stopped  gate STOPPED, health BROKEN |\r
| Orange (warning) | Something needs watching  gate CAUTION, health STALE |\r
| Green (positive) | Good news  positive returns, healthy state |\r
| Blue (info) | Informational  signals available, near-miss symbols |\r
| Gray (neutral) | No notable activity |\r
\r
---\r
\r
## Left Column: Portfolios\r
\r
Each portfolio appears as its own expandable StoryCard. Active portfolios appear first, followed by inactive/ended portfolios under a separate "Inactive / Ended" label.\r
\r
### Portfolio StoryCard (collapsed view)\r
\r
- **Headline:** Portfolio name with total return percentage. Example: "Main FX Portfolio  +2.4%"\r
- **Summary:** Key stats at a glance. Example: "Equity: $102,450  Gate: SAFE  Max DD: -4.2%"\r
- **Gate Badge:** Color-coded risk gate status (SAFE green, CAUTION yellow, STOPPED red)\r
- **Health Badge:** Data freshness indicator (OK green, STALE yellow, BROKEN red)\r
\r
### Portfolio StoryCard (expanded view)\r
\r
When you click to expand a portfolio card, you see:\r
\r
- **KPI Strip:** Four metric boxes showing Equity, Return, Max Drawdown, and Paid Out (if any)\r
- **Gate Explanation:** If the risk gate is not SAFE, a text explanation appears. Example: "Episode drawdown at 4.2% (threshold: 5.0%). Approaching risk limit."\r
- **AI Digest:** Lazy-loaded from the API when you first expand the card. Includes:\r
  - **Headline**  AI-generated one-line summary of this portfolio's current state\r
  - **AI / Deterministic badge**  "Cortex AI" means LLM-generated narrative; "Deterministic" means template fallback\r
  - **Detector Pills**  Colored pills for interest detectors that fired (green = low severity, orange = medium, red = high)\r
  - **What Changed**  Bullets describing differences from yesterday\r
  - **What Matters**  Bullets explaining important observations and implications\r
  - **Waiting For**  Bullets describing upcoming triggers or thresholds\r
  - **Drill Links**  Links to related pages (Signals, Training, Portfolio detail)\r
- **Navigation Links:** "Full Portfolio " and "Suggestions " links at the bottom\r
\r
---\r
\r
## Right Column: Market & System\r
\r
### Market Pulse Card\r
\r
An overview of today's market conditions across all tracked symbols.\r
\r
**Headline:** Shows how many symbols gained today. Example: "Market Pulse  8 of 12 symbols gained today"\r
\r
**Badges:**\r
- **Nasdaq badge**  indicates the data source\r
- **Direction badge**  UP (green), DOWN (red), or MIXED (gray)\r
\r
**Expanded content:**\r
- **KPI Strip:** Five metrics  Up count, Down count, Flat count, Avg Return, and Breadth (% of symbols that are up)\r
- **Top Movers:** The 3 biggest gainers and 3 biggest losers with their daily return percentages\r
- **Equal-Weight Universe Index Chart:** An area chart showing the equal-weight index return over the lookback period. A green line above zero means the universe is up overall; red means down.\r
- **Daily Returns by Symbol:** A horizontal bar chart showing every tracked symbol's daily return, sorted from highest to lowest. Green bars = positive return, red bars = negative.\r
\r
### System Overview Card (Global Digest)\r
\r
An AI-generated narrative covering the **entire system**  all portfolios, all symbols, all patterns.\r
\r
**Badges:**\r
- **"Global"** scope badge\r
- **Cortex AI / Deterministic**  whether the narrative was generated by the LLM or a template fallback\r
- **Fresh / Stale**  "Fresh (45m ago)" means recent; "Stale (3h ago)" means older than 2 hours\r
\r
**Expanded content:**\r
- **Detector Pills**  Colored pills showing which "interest detectors" fired today. These are deterministic rules like "Gate status changed" or "New trusted pattern." Colors: green = low severity (informational), orange = medium (noteworthy), red = high (urgent).\r
- **What Changed**  Bullets describing what's different from yesterday. Example: "AUD/USD moved from LEARNING to CONFIDENT stage."\r
- **What Matters**  Bullets explaining the most important observations and their implications. Example: "Only 2 of 12 momentum signals passed the z-score gate (observed < 1.0), suggesting the market is quiet  expect fewer proposals."\r
- **Waiting For**  Bullets describing upcoming triggers or thresholds. Example: "EUR/USD needs 5 more evaluated outcomes to reach CONFIDENT (35 of 40 threshold)."\r
- **Drill Links**  Contextual links to relevant pages based on the narrative content\r
\r
### Signal Candidates Card\r
\r
The top signal candidates today, ranked by maturity and outcome history.\r
\r
**Headline:** Shows the count. Example: "3 Signal Candidates Today" or "Signal Candidates  None Today"\r
\r
**Expanded content:**\r
- Up to 8 signal candidates, each showing:\r
  - **Rank (#1#8)**  Position in the ranking\r
  - **Symbol**  The asset being tracked (e.g., AAPL, EUR/USD)\r
  - **Maturity Stage pill**  Color-coded badge showing INSUFFICIENT / WARMING_UP / LEARNING / CONFIDENT\r
  - **Score**  Maturity score out of 100\r
  - **Progress bar**  Visual bar from 0100 showing the maturity score\r
  - **"Why" text**  A deterministic explanation of why this symbol appears here. Example: "Meets minimum recs  10, horizon coverage 100%, strong 5-bar return."\r
\r
### Training Progress Card\r
\r
An AI narrative focused on the training pipeline across all symbols.\r
\r
**Headline:** AI-generated summary of training state. Example: "2 symbols approaching CONFIDENT stage"\r
\r
**Expanded content:**\r
- **What Changed**  Training-related changes (stage promotions, new outcomes)\r
- **What Matters**  Key observations for upcoming trust decisions\r
- **Waiting For**  What the system needs before more symbols can advance\r
- **Upcoming Symbols Detail:**\r
  - **Near-Miss Symbols**  Up to 6 symbols almost at the next stage threshold. Each shows symbol name, market type, current stage, score, progress bar, and gap to next stage. Example: "Score: 72/100, Gap to CONFIDENT: 3 pts"\r
  - **Trade-Ready (CONFIDENT)**  Up to 4 symbols already at CONFIDENT stage. These are the strongest candidates that may already be generating proposals if trusted.\r
`,Sae=`# 13. Portfolio\r
\r
Deep dive into a single portfolio  its money, positions, trades, risk status, and historical performance. If the Cockpit is your morning summary, the Portfolio page is where you go for the full picture.\r
\r
## Portfolio List View (Control Tower)\r
\r
When you navigate to /portfolios without selecting one, you see the **Control Tower**  a table showing all portfolios at a glance.\r
\r
| Column | What it means | Example |\r
|--------|---------------|---------|\r
| **Name** | Portfolio name (clickable link) | Main FX Portfolio |\r
| **ID** | Unique identifier | 1 |\r
| **Gate** | Risk regime: SAFE (green) = entries allowed, CAUTION (yellow) = approaching threshold, STOPPED (red) = entries blocked | SAFE |\r
| **Health** | Data freshness: OK (green) = recent run, STALE (yellow) = older than 24h, BROKEN (red) = very old or failed | OK |\r
| **Equity** | Latest total equity (cash + position value) | $102,450 |\r
| **Paid Out** | Cumulative profits withdrawn across all episodes | $5,200 |\r
| **Active Episode** | Current episode ID and start date | #3 since 2026-01-15 |\r
| **Status** | ACTIVE or CLOSED | ACTIVE |\r
\r
## Portfolio Detail View\r
\r
Click a portfolio to see the full detail page. Here's every section:\r
\r
### Freshness Header\r
\r
**CURRENT / PENDING UPDATE**  CURRENT = portfolio is simulated up to the latest market date. PENDING UPDATE = new market data exists but the pipeline hasn't run yet. The header also shows: "Simulated through 2026-02-07  Pipeline ran at 14:30".\r
\r
### Active Period Dashboard (Mini Charts)\r
\r
Four small charts showing the current episode's performance at a glance:\r
\r
- **Equity Chart**  Shows total portfolio value over time during this episode. The line goes up when positions gain value or profitable trades close, and down when positions lose value. Example: Starting at $100,000, the line might rise to $102,450 over 3 weeks.\r
\r
- **Drawdown Chart**  Shows the percentage drop from the episode's peak equity. A drawdown of -3% means the portfolio has fallen 3% from its highest point. If drawdown exceeds the threshold (e.g., -5%), the risk gate switches to CAUTION or STOPPED.\r
\r
- **Trades per Day**  Bar chart showing how many trades were executed each day. Most days will show 0-3 trades. A spike might indicate many positions closing at once.\r
\r
- **Regime per Day**  Shows the risk regime (NORMAL / CAUTION / DEFENSIVE) for each day. Helps you see when the portfolio was in a restricted state.\r
\r
### KPI Cards (Header)\r
\r
Eight key numbers about the portfolio's lifetime performance:\r
\r
| KPI | What it means | How it's calculated | Example |\r
|-----|---------------|---------------------|---------|\r
| **Starting Cash** | Initial capital when portfolio was created | Set when creating the portfolio | $100,000 |\r
| **Current Cash** | Cash available right now (not invested) | Starting cash + profits  invested amount | $87,234.50 |\r
| **Final Equity** | Total value: cash + all position values | Cash + sum(quantity  current_price) for each position | $102,450 |\r
| **Total Return** | Overall profit/loss as a percentage | (Final Equity  Starting Cash) / Starting Cash  100 | +2.45% |\r
| **Max Drawdown** | Worst peak-to-trough decline ever | Largest % drop from any high to subsequent low | -4.20% |\r
| **Win Days** | Days where equity increased | Count of days where end-of-day equity > previous day | 42 |\r
| **Loss Days** | Days where equity decreased | Count of days where end-of-day equity < previous day | 18 |\r
| **Status** | ACTIVE or CLOSED | Set by the system | ACTIVE |\r
\r
### Cash & Exposure Card\r
\r
- **Cash**  Money not currently invested. Available for new positions. Example: $87,234.50\r
- **Exposure**  Total value of all open positions (quantity  current price). Example: $15,215.50\r
- **Total Equity**  Cash + Exposure = your total portfolio value. Example: $87,234.50 + $15,215.50 = $102,450.00\r
\r
### Open Positions Table\r
\r
Current holdings the portfolio has right now:\r
\r
| Column | Meaning | Example |\r
|--------|---------|---------|\r
| **Symbol** | Which asset (stock, FX pair) | AAPL |\r
| **Side** | BUY (long) or SELL (short) | BUY |\r
| **Quantity** | How many shares/units held | 50 |\r
| **Cost Basis** | Average price paid when entering | $190.00 |\r
| **Hold Until (bar)** | Bar index when this position is scheduled to close | 1245 |\r
| **Hold Until (date)** | Calendar date when the position should close | 2026-02-15 |\r
\r
> **Positions are sorted by "Hold Until" (soonest first).** This lets you see at a glance which positions are about to close.\r
\r
### Recent Trades Table\r
\r
Execution history  every buy and sell the portfolio has made:\r
\r
| Column | Meaning | Example |\r
|--------|---------|---------|\r
| **Symbol** | Which asset was traded | AUD/USD |\r
| **Side** | BUY (opening long) or SELL (closing) | BUY |\r
| **Quantity** | How many units traded | 10,000 |\r
| **Price** | Execution price | 0.6520 |\r
| **Notional** | Total value of the trade (Price  Quantity) | $6,520.00 |\r
\r
Use the **Lookback** dropdown (1 day, 7 days, 30 days, All) to control how far back the trade history goes. The "total" count shows how many trades exist in the selected window.\r
\r
### Risk Gate Panel\r
\r
The risk gate protects the portfolio from taking too much risk. It has three states:\r
\r
| State | What it means | What happens |\r
|-------|---------------|--------------|\r
| **NORMAL** | Portfolio is within safe limits | New entries AND exits allowed |\r
| **CAUTION** | Drawdown is approaching the threshold | Entries may still be allowed but the system is watching closely |\r
| **DEFENSIVE** | Drawdown has breached the safety threshold | New entries BLOCKED. Only exits (closing positions) allowed. |\r
\r
- **Reason Text**  Explains why the gate is in its current state. Example: "Episode drawdown at 4.2% (threshold: 5.0%). Approaching risk limit."\r
- **What to do now**  Actionable guidance. Example: "Wait for existing positions to close and drawdown to recover before new entries are opened."\r
- **Risk Strategy Rules**  The specific rules being enforced, e.g., "Episode drawdown stop: -5%", "Max concurrent positions: 10".\r
\r
### Proposer Diagnostics\r
\r
Why proposals may be zero or low  technical details about the proposal engine:\r
\r
- **Raw Signals (latest bar)**  Total signals detected today across all patterns. Example: 15. This is before any filtering.\r
- **Trusted Signals**  Of those raw signals, how many came from TRUSTED patterns. Example: 3 (only these can become proposals).\r
- **Trusted Patterns**  How many distinct patterns currently have TRUSTED status. Example: 2.\r
- **Rec TS = Bar TS?**  Whether the recommendation timestamp matches today's bar date. "Yes" = everything is current. "No" = data may be stale.\r
- **Proposals Inserted**  How many proposals the engine actually created. Example: 1 (after capacity and duplicate checks).\r
- **Reason for Zero**  If zero proposals: the specific reason, e.g., "NO_TRUSTED_CANDIDATES" or "ENTRIES_BLOCKED".\r
\r
### Cumulative Performance Section\r
\r
Your investment journey across all episodes:\r
\r
- **Total Paid Out**  Profits withdrawn at episode ends. When an episode closes profitably, the gains are "paid out." Example: $5,200 means the portfolio has withdrawn $5,200 in profits over its lifetime.\r
- **Total Realized P&L**  Cumulative profit/loss across all episodes. Green = overall profit, Red = overall loss. Example: $3,850 means the portfolio has earned $3,850 net across all closed trades.\r
- **Episodes**  How many "generations" the portfolio has been through. Each episode starts with fresh capital and a clean slate. Example: 3 episodes means the portfolio has been reset/restarted twice.\r
- **Cumulative Growth Chart (line chart)**  Two lines over time: Green line (Paid Out) = cumulative profits withdrawn. Blue line (Realized P&L) = cumulative profit/loss. The X-axis is time (dates), Y-axis is amount.\r
- **P&L by Episode (bar chart)**  One bar per episode showing its profit or loss. Green bars = profitable episodes. Red bars = losing episodes. Blue bar = the currently active episode. Click a bar to scroll down to that episode's detail card.\r
\r
### Episodes Section\r
\r
Expandable cards for each episode (generation) of the portfolio. Each card shows equity curves, drawdown charts, trade counts, and risk regime for that specific episode period. The active episode is highlighted.\r
`,Nae=`# 14. Portfolio Management\r
\r
Create and configure portfolios, manage risk profiles, deposit/withdraw cash, view lifecycle history, and generate AI-powered portfolio stories. This is the operational hub where you set up and maintain your portfolios.\r
\r
> **Pipeline Lock:** When the daily pipeline is actively running, **all editing is disabled** on this page. A yellow warning banner appears at the top: "Pipeline is currently running  editing is disabled until the run completes." This prevents changes from interfering with an active simulation. Buttons automatically re-enable once the pipeline finishes (the page polls every 15 seconds). You can still browse data and read-only tabs while waiting.\r
\r
## Tabs\r
\r
The page is organized into four tabs:\r
\r
| Tab | Purpose |\r
|-----|---------|\r
| **Portfolios** | Create/edit portfolios, deposit/withdraw cash, attach risk profiles |\r
| **Profiles** | Create/edit risk profiles with position limits, drawdown stops, and crystallization settings |\r
| **Lifecycle Timeline** | Visual history of every lifecycle event (charts + timeline) for a selected portfolio |\r
| **Portfolio Story** | AI-generated narrative summarizing the portfolio's complete journey |\r
\r
## Tab 1: Portfolios\r
\r
Shows a table of all portfolios with key metrics. Each row displays the portfolio's ID, name, assigned risk profile, starting cash, final equity, total return, and status.\r
\r
### Actions on Each Portfolio Row\r
\r
- **Edit**  Update the portfolio name, currency, or notes. **Starting cash cannot be changed after creation**  use the Cash button for deposits/withdrawals instead.\r
\r
- **Cash**  Opens the **Cash Event** dialog where you register a deposit or withdrawal.\r
  - **Deposit:** Adds money to the portfolio. Increases cash and equity by the deposited amount.\r
  - **Withdraw:** Removes money from the portfolio. You can only withdraw up to the current cash balance.\r
  - **Important:** Your lifetime P&L tracking stays intact. The system adjusts the cost basis so gains/losses are always calculated correctly  a deposit doesn't count as "profit" and a withdrawal doesn't count as a "loss."\r
\r
- **Profile**  Attach a different risk profile to the portfolio. **Warning:** Changing the profile ends the current episode and starts a new one. Episode results are preserved in the lifecycle history.\r
\r
### "+ Create Portfolio" Button\r
\r
Opens a dialog to create a new portfolio. You'll set:\r
\r
| Field | What it means | Example |\r
|-------|---------------|---------|\r
| **Name** | A descriptive name for the portfolio | Main FX Portfolio |\r
| **Currency** | Base currency (USD, EUR, or GBP) | USD |\r
| **Starting Cash** | Initial capital  cannot be changed later | $100,000 |\r
| **Risk Profile** | Which profile's rules to apply (position limits, drawdown stops, crystallization) | MODERATE_RISK |\r
| **Notes** | Optional description | "FX-focused momentum strategy" |\r
\r
### Example: Depositing Cash\r
\r
Your portfolio "Main FX" has $87,000 in cash and $15,000 in open positions (equity = $102,000). You click **Cash  Deposit  $10,000**. After the deposit:\r
- Cash: $87,000 + $10,000 = **$97,000**\r
- Equity: $102,000 + $10,000 = **$112,000**\r
- P&L stays the same  the deposit is a cost basis adjustment, not a profit\r
- A **DEPOSIT** event is recorded in the lifecycle timeline\r
\r
## Tab 2: Profiles\r
\r
Risk profiles are reusable templates that define how a portfolio should behave. You can create as many profiles as you need and attach them to any portfolio. The table shows each profile's settings and how many portfolios are currently using it.\r
\r
### Profile Settings Explained\r
\r
| Setting | What it controls | Example |\r
|---------|------------------|---------|\r
| **Max Positions** | Maximum number of holdings at once | 10 |\r
| **Max Position %** | Maximum size of any single position as a % of cash | 8% |\r
| **Bust Equity %** | If equity drops below this % of starting cash, the portfolio is "bust" | 50% |\r
| **Bust Action** | What happens at bust: Allow Exits Only, Liquidate Next Bar, or Liquidate Immediate | Allow Exits Only |\r
| **Drawdown Stop %** | Maximum peak-to-trough decline before entries are blocked | 15% |\r
\r
### Crystallization Settings\r
\r
Crystallization is the process of **locking in gains** when a profit target is reached. When triggered, the current episode ends, profits are recorded, and a new episode begins.\r
\r
| Setting | What it does | Example |\r
|---------|-------------|---------|\r
| **Enabled** | Turn crystallization on or off | On |\r
| **Profit Target %** | The return that triggers crystallization | 10% |\r
| **Mode** | **Withdraw Profits:** Gains are withdrawn from the portfolio. New episode starts with original capital. **Rebase (compound):** Gains stay in the portfolio. New episode starts with the higher equity as the new cost basis. | Withdraw Profits |\r
| **Cooldown Days** | Minimum days between crystallization events | 30 |\r
| **Max Episode Days** | Force a new episode after this many days even without hitting the profit target | 90 |\r
| **Take Profit On** | Check the target at End of Day or Intraday | End of Day |\r
\r
### Example: Crystallization in Action\r
\r
Your profile has a **10% profit target** in **Withdraw Profits** mode. The portfolio started with $100,000. After 6 weeks, equity reaches $110,500 (+10.5%).\r
\r
1. The pipeline detects the profit target is hit (+10.5% > 10%)\r
2. $10,500 in profits is withdrawn and recorded as a payout\r
3. The current episode (Episode 1) ends with status "CRYSTALLIZED"\r
4. A new episode (Episode 2) starts with $100,000 as the cost basis\r
5. The lifecycle timeline records both the CRYSTALLIZE and EPISODE_START events\r
\r
If **Rebase** mode were used instead, the $10,500 would stay in the portfolio and Episode 2 would start with $110,500 as the new cost basis. This is compounding  subsequent profit targets are measured against the higher base.\r
\r
## Tab 3: Lifecycle Timeline\r
\r
A visual history of every meaningful event in a portfolio's life. Select a portfolio from the dropdown to view its history.\r
\r
### Charts (4 panels)\r
\r
- **Lifetime Equity**  A line chart showing equity over time across all lifecycle events. Each dot marks a recorded event (deposit, withdrawal, crystallization, etc.).\r
- **Cumulative Lifetime P&L**  An area chart showing the running total of profit/loss over time. Green = above zero (profitable), red area appears if it dips below zero.\r
- **Cash Flow Events**  A bar chart showing money in (green bars for CREATE and DEPOSIT) and money out (red bars for WITHDRAW and CRYSTALLIZE). Helps you see the pattern of cash flows over time.\r
- **Cash vs Equity**  Two lines: orange for cash on hand, blue for total equity. The gap between them represents the value tied up in open positions.\r
\r
### Event Timeline (below the charts)\r
\r
A vertical timeline listing every lifecycle event in chronological order. Each entry shows:\r
\r
| Element | What it shows | Example |\r
|---------|---------------|---------|\r
| **Event Type** | What happened (color-coded dot) | DEPOSIT, CRYSTALLIZE, EPISODE_START |\r
| **Timestamp** | When it happened | Feb 7, 2026, 14:30 |\r
| **Amount** | Money involved (if applicable) | +$10,000 or -$5,200 |\r
| **Snapshots** | Cash, Equity, and Lifetime P&L at that moment | Cash: $97,000 / Equity: $112,000 / P&L: $2,000 |\r
| **Notes** | Optional notes recorded with the event | "Quarterly deposit" |\r
\r
### Lifecycle Event Types\r
\r
| Event Type | When it happens | What it records |\r
|------------|-----------------|-----------------|\r
| **CREATE** | Portfolio is first created | Initial cash, starting equity |\r
| **DEPOSIT** | You add cash to the portfolio | Deposit amount, new cash/equity balances |\r
| **WITHDRAW** | You remove cash from the portfolio | Withdrawal amount, new balances |\r
| **CRYSTALLIZE** | Profit target hit, gains locked in | Payout amount, mode (withdraw or rebase) |\r
| **PROFILE_CHANGE** | Risk profile is changed | Old and new profile references |\r
| **EPISODE_START** | A new episode begins | New episode ID, starting equity |\r
| **EPISODE_END** | An episode ends | Final equity, end reason |\r
| **BUST** | Portfolio hits bust threshold | Equity at bust |\r
\r
## Tab 4: Portfolio Story\r
\r
An AI-generated narrative that tells the complete story of a portfolio  from creation through every deposit, withdrawal, crystallization event, and market performance period. Think of it as a "biography" for your portfolio.\r
\r
- **Headline**  A one-line summary of the portfolio's journey. Example: "Main FX Portfolio: 3 episodes, $5,200 in payouts, currently active with +2.4% return."\r
- **Narrative**  Multiple paragraphs explaining the full story  how the portfolio started, what happened in each episode, how it responded to market conditions, and where it stands now.\r
- **Key Moments**  A bulleted list of the most significant events. Example: "Episode 1 crystallized at +12.3% after 45 days" or "Deposit of $10,000 on Feb 7 increased the capital base."\r
- **Outlook**  Forward-looking commentary based on current state. Example: "With the risk gate in SAFE mode and 4 of 10 position slots available, the portfolio is well-positioned for new opportunities."\r
\r
> **Auto-generation:** The story is generated automatically the first time you visit the tab for a portfolio. You can manually regenerate it by clicking the **Regenerate** button. Generation uses Snowflake Cortex AI and typically takes 1020 seconds.\r
`,Eae=`# 15. Training Status\r
\r
Monitor the learning process for every symbol/pattern combination. See which symbols are gathering evidence, which are close to earning trust, and which are already trade-eligible.\r
\r
## Daily / Intraday Toggle\r
\r
The Training page has a **Daily (1440m)** / **Intraday (15m)** toggle at the top. This switches the entire table between daily and intraday training data. The columns, horizons, and expanded row charts all adapt to the selected interval.\r
\r
## Global Training Digest (top of page  daily mode)\r
\r
An AI-generated narrative covering training progress system-wide. Same format as the Cockpit (headline, what changed, what matters, waiting for) but focused entirely on training. This digest is shown in daily mode only.\r
\r
## Intraday Mode  Cockpit Layout\r
\r
When viewing intraday training, the page switches to a **decision-first cockpit** with three layers. See section 23 (The Intraday Subsystem) for full details. The key sections are:\r
\r
- **Executive Summary**  status banner, pattern readiness tiles, compressed pipeline health\r
- **Pattern Trust Scoreboard**  compact view with one row per pattern, expandable for per-horizon detail\r
- **Signal Activity Chart**  collapsible price chart with signal overlays\r
- **Advanced Diagnostics**  pattern stability and excursion analysis (hidden by default)\r
\r
## Filters (daily mode)\r
\r
Use the **Market Type** dropdown (FX, STOCK, etc.) and the **Symbol Search** input to narrow the table to specific assets.\r
\r
## Training Table  Column Reference\r
\r
### Daily Mode (1440m)\r
\r
| Column | What it means | Example |\r
|--------|---------------|---------|\r
| **Market Type** | Asset class (FX, STOCK, etc.) | FX |\r
| **Symbol** | Specific asset being tracked | AUD/USD |\r
| **Pattern** | Which signal pattern is being evaluated | 2 |\r
| **Interval** | Bar interval in minutes (1440 = daily) | 1440 |\r
| **As Of** | Date this training data was last updated | 2026-02-07 |\r
| **Maturity** | Stage badge + score (0100). See section 5 for stage definitions. | CONFIDENT (82) |\r
| **Sample Size** | Total signals generated for this symbol/pattern | 45 |\r
| **Coverage** | % of signals fully evaluated across all horizons | 92% |\r
| **Horizons** | How many evaluation windows have data | 5 |\r
| **Avg H1** | Average return at the 1-day horizon | +0.0032 |\r
| **Avg H3** | Average return at the 3-day horizon | +0.0058 |\r
| **Avg H5** | Average return at the 5-day horizon | +0.0081 |\r
| **Avg H10** | Average return at the 10-day horizon | +0.0045 |\r
| **Avg H20** | Average return at the 20-day horizon | -0.0012 |\r
\r
### Intraday Mode (15m)  Dynamic Horizons\r
\r
Intraday horizon columns are different from daily. They come from the **HORIZON_DEFINITION** table and adapt automatically:\r
\r
| Column | What it means | Example |\r
|--------|---------------|---------|\r
| **Avg H1** | Average return at +1 bar (15 minutes) | +0.0008 |\r
| **Avg H4** | Average return at +4 bars (~1 hour) | +0.0015 |\r
| **Avg H8** | Average return at +8 bars (~2 hours) | +0.0022 |\r
| **Avg EOD** | Average return at end-of-day close | +0.0031 |\r
\r
### Reading Avg H Columns\r
\r
For daily: "Avg H5" = +0.0081 means 5 trading days after the pattern fired, price moved +0.81% in the right direction on average. Positive = historically profitable.\r
\r
For intraday: "Avg H4" = +0.0015 means ~1 hour after the intraday pattern fired, price moved +0.15% in the right direction on average.\r
\r
## Expanded Row (click any row  daily mode)\r
\r
Clicking a row expands it to show two additional components:\r
\r
- **Per-Symbol Training Digest**  An AI-generated narrative specific to this symbol/pattern. Describes what changed in training, whether it's close to trust, and what outcomes the system is waiting for.\r
\r
- **Training Timeline Chart**  A chart showing training metrics over time for this symbol. Helps you see if the hit rate and average return are trending up (good) or down (concerning). In daily mode, defaults to the 5-day horizon. In intraday mode, defaults to the +4 bar (~1hr) horizon.\r
`,Pae=`# 16. Suggestions\r
\r
Ranked list of trading candidates based on historical performance. These are NOT predictions  they're ranked by which symbol/pattern pairs have the best track record.\r
\r
## Two Tiers of Candidates\r
\r
| Tier | Requirement | Meaning |\r
|------|-------------|---------|\r
| **Strong Candidates** | Sample size  10, Horizons  3 | Enough data for reasonable confidence. These are the primary candidates. |\r
| **Early Signals** | Sample size  3, Horizons  3 | Very early data  treat with caution. Shown with a "Low confidence" badge. |\r
\r
## What Each Suggestion Card Shows\r
\r
- **Rank (#1, #2, ...)**  Position in the ranking, ordered by Suggestion Score (highest first).\r
\r
- **Symbol / Market / Pattern triple**  The specific combination being ranked, e.g., "AAPL / STOCK / pattern 2".\r
\r
- **Suggestion Score**  A transparent, deterministic score combining three factors:\r
  \`\`\`\r
  Score = 0.6  maturity_score + 0.2  (mean_return  1000) + 0.2  (pct_positive  100)\r
  \`\`\`\r
  Example: Maturity 80, mean_return 0.008 (0.8%), pct_positive 0.75 (75%): Score = 0.6  80 + 0.2  (0.008  1000) + 0.2  (0.75  100) = 48 + 1.6 + 15 = **64.60**\r
\r
- **Sample Size**  Number of signals evaluated. Higher = more evidence. Example: 45.\r
\r
- **Maturity Stage + Bar**  Stage badge (CONFIDENT, LEARNING, etc.) with a progress bar showing the score (0100).\r
\r
- **What History Suggests**  Two plain-language lines summarizing the historical evidence.\r
  - Line 1: "Based on 45 recommendations and 40 evaluated outcomes, positive at 75.0% over the strongest horizon (5 bars)."\r
  - Line 2: "Mean return at that horizon: 0.81%."\r
\r
- **Horizon Strip**  Five mini-bars (sparkline) representing the five horizons (1, 3, 5, 10, 20 bars). Below each bar is the percentage  either pct_positive or mean_return. Example: 1d: 62.5% | 3d: 68.0% | 5d: 75.0% | 10d: 55.0% | 20d: 42.0%. This tells you the pattern works best at the 5-day horizon (75% positive).\r
\r
- **Effective Score (early signals only)**  For early signals, the score is penalized for small sample size:\r
  \`\`\`\r
  Effective Score = Score  min(1, recs_total / 10)\r
  \`\`\`\r
  Example: Score 50 with only 5 samples: Effective = 50  (5/10) = **25.0**\r
\r
## Evidence Drawer (click a card)\r
\r
Click any card to open a detailed evidence panel with charts and data:\r
\r
- **Horizon Strip Charts (bar charts)**  Three bar charts showing performance across all 5 horizons:\r
  - **Average Return:** Mean return at each horizon. Bars above 0% are profitable.\r
  - **% Positive:** What fraction of outcomes were positive. Above 50% means more winners than losers.\r
  - **Hit Rate:** What fraction exceeded the minimum threshold. Similar to % positive but against the threshold.\r
\r
- **Distribution Histogram**  A histogram of all realized returns for the selected horizon. Shows the shape of the return distribution. The red dashed line is the mean, and the blue dashed line is the median. Use the horizon selector buttons (1, 3, 5, 10, 20 days) to switch between horizons. A healthy pattern has most returns on the positive side, with the mean clearly above zero.\r
\r
- **Confidence Panel**  Shows maturity score (progress bar), coverage ratio (%), and reason strings explaining the maturity assessment.\r
\r
- **Data Table**  Raw numbers for each horizon: N (sample size), Mean realized return, % positive, % hit, Min return, Max return. All returns are in percentage format.\r
`,Tae=`# 17. Decision Explorer\r
\r
Understand **why trades happened  or didn't**. The Decision Explorer connects signals to portfolio actions and presents clear, readable explanations instead of raw data.\r
\r
## Executive Summary\r
\r
At the top of the page, a summary banner shows:\r
\r
- **Total Signals** in scope for the selected date/run\r
- **Traded**  signals that became actual trades\r
- **Rejected**  signals that failed trust gating\r
- **Eligible  Not Selected**  signals that passed all gates but were not chosen\r
\r
## Filters\r
\r
Filter by symbol, market type, pattern, trust level, outcome category, pipeline run ID, or date. Filters can be set via URL parameters (often linked from Cockpit) or adjusted directly on the page.\r
\r
## Decision Table  Every Column Explained\r
\r
| Column | What it means | Example |\r
|--------|---------------|---------|\r
| **Symbol** | Which asset generated this signal | EUR/USD |\r
| **Pattern** | Which pattern definition detected this signal, plus market tag | 2  FX |\r
| **Outcome** | What happened to this signal  color-coded pill |  Traded,  Rejected  Trust,  Eligible  Not Selected |\r
| **Trust** | Current trust label for this symbol/pattern combination | TRUSTED (green), WATCH (amber), UNTRUSTED (red) |\r
| **Score** | Signal strength  higher = stronger detection | 0.85 |\r
| **Signal Time** | When the signal was generated | 2026-02-07 14:30 |\r
| **Why** | One-line human-readable explanation of the outcome | "Trusted pattern  selected and executed" |\r
\r
## Outcome Categories\r
\r
Each signal is classified into exactly one outcome:\r
\r
- **TRADED**  Passed trust gate, eligible, and selected for trading\r
- **REJECTED  TRUST**  Trust level is WATCH or UNTRUSTED; not eligible\r
- **ELIGIBLE  NOT SELECTED**  Passed all gates but was not chosen (e.g., ranked below alternatives or portfolio at capacity)\r
\r
## Decision Trace (Expand a Row)\r
\r
Click any row to expand a step-by-step decision trace:\r
\r
1. **Signal Detected**   (always true if row exists) with score\r
2. **Trust Gate**   or  with threshold comparison (score vs min, hit rate)\r
3. **Eligibility**   or  derived from trust + recommended action\r
4. **Selection**   or  (only shown for eligible signals)\r
5. **Final Decision**  Trade executed or not\r
\r
The expanded view also shows **Supporting Metrics** (hit rate, avg return, coverage, horizon) and **Trade Details** (price, quantity, notional) when applicable.\r
\r
## Advanced View\r
\r
For power users: click **"Show raw policy JSON"** at the bottom of any expanded row to see the full gating reason object, including all policy thresholds and scoring details.\r
\r
## Fallback Logic\r
\r
If no signals match your filters for the current run, the system automatically tries a broader search. Results will include signals from a wider time window.\r
`,Aae=`# 18. Market Timeline\r
\r
End-to-end symbol observability. See every symbol as a tile showing signal, proposal, and trade counts. Click a tile to see the price chart with event overlays and a signal chain tree.\r
\r
## Overview Grid\r
\r
Each tile represents one symbol (e.g., AAPL, EUR/USD) and shows:\r
\r
- **S: (number)**  Signals count  how many signals were detected for this symbol in the selected window (e.g., last 30 bars). Example: S:12 means 12 detections.\r
- **P: (number)**  Proposals count  how many of those became trade proposals. Example: P:3.\r
- **T: (number)**  Trades count  how many were actually executed. Example: T:1.\r
- **ACTION badge**  Highlighted in yellow if there are proposals TODAY that may require attention.\r
- **Trust badge**  TRUSTED / WATCH / UNTRUSTED label for this symbol.\r
\r
## Tile Colors\r
\r
| Color | Meaning |\r
|-------|---------|\r
| Green border | **Executed**  trades happened for this symbol |\r
| Orange border | **Proposed**  proposals exist but not yet executed |\r
| Blue border | **Signals only**  signals detected but no proposals |\r
| Grey | **Inactive**  no signals in this window |\r
\r
## Filters\r
\r
- **Portfolio:** Filter to a specific portfolio. When selected, only symbols where that portfolio has proposals or trades are shown  not all symbols, just the ones relevant to that portfolio. Portfolios are loaded dynamically from the system.\r
- **Market:** Filter by market type (FX, STOCK, etc.).\r
- **Window:** How many bars of history to show (30, 60, 90, or 180 bars). This also determines how far back signal chains look.\r
\r
## Expanded Detail (click a tile)\r
\r
Clicking a symbol tile expands it to show a detailed view:\r
\r
### Chart Mode Toggle\r
\r
A **Line / Candlestick** toggle lets you switch between two chart styles:\r
\r
- **Line mode** (default)  Close price as a blue line with high/low range shown as grey dashed lines. Clean and calm.\r
- **Candlestick mode**  Traditional OHLC candles. Green bodies for up days, red bodies for down days, with wicks showing the full high-low range.\r
\r
Both modes show the same event markers overlaid on the chart:\r
- **Blue circles** = Signal fired (pattern detected something)\r
- **Orange circles** = Proposal generated (trade suggested)\r
- **Green circles** = Trade executed (position opened)\r
\r
The chart always extends to today's date, even if market data hasn't arrived yet, so you can see today's activity (signals, proposals, trades) on the chart.\r
\r
### Counts Bar\r
\r
Shows the signal  proposal  trade funnel: "12 signals  3 proposals  1 trade"\r
\r
### Decision Narrative\r
\r
Bullet points explaining what happened and why. Example: "Pattern 2 detected momentum, but risk gate was in CAUTION mode, blocking new entries."\r
\r
### Trust Status by Pattern\r
\r
Shows trust label and coverage for each pattern tracking this symbol.\r
\r
### Signal Chains (Tree View)\r
\r
The signal chain tree shows the full lifecycle of each signal as an indented tree structure. Each signal branches into its proposals across portfolios, then into trades:\r
\r
\`\`\`\r
Signal  2026-02-18  Pattern 2  Score 0.0068\r
   BUY Proposal  2026-02-19  Portfolio 1  Weight 0.05\r
        BUY  2026-02-19  20.46  $245.04 ($5014)  Portfolio 1  Open\r
   BUY Proposal  2026-02-19  Portfolio 2  Weight 0.05\r
         BUY  2026-02-19  0.33  $244.60 ($80)  Portfolio 2\r
               SELL  2026-02-17  0.33  $243.28  +$0.44  Closed\r
\`\`\`\r
\r
- **Signal** (level 0): The root  pattern ID, score, and date when the signal fired.\r
- **Proposal** (level 1): Each portfolio that received a proposal, with the portfolio link (clickable), side (BUY), weight, and status. A single signal can branch into multiple proposals for different portfolios.\r
- **BUY Trade** (level 2): Executed buy with quantity, price, notional value, and portfolio link.\r
- **SELL Trade** (level 3): Executed sell with quantity, price, realized PnL (green for profit, red for loss), and a "Closed" badge.\r
\r
Status badges on the tree:\r
- **Open** (blue, pulsing)  Position is currently held.\r
- **Closed** (green)  Round-trip complete (bought and sold).\r
- **Pending** (orange)  Proposal exists but not yet executed.\r
- **Rejected** (red)  Proposal was rejected.\r
\r
Signals that never led to a proposal ("signal-only") are not shown individually but are counted in the header as " N signal-only."\r
`,Oae=`# 19. Runs (Audit Viewer)\r
\r
Monitor every pipeline run  when it happened, whether it succeeded, how long each step took, and what errors occurred. This is your pipeline health dashboard.\r
\r
## Daily / Intraday Toggle\r
\r
The page has a **Daily Pipeline / Intraday Pipeline** toggle at the top. Switch to "Intraday Pipeline" to see intraday-specific pipeline runs with their own metrics (bars ingested, signals generated, outcomes evaluated, compute time). The run list, filters, and detail panel all adapt to the selected pipeline type.\r
\r
## Left Panel: Run List\r
\r
A list of recent pipeline runs, showing status, time, and run ID. Click a run to see its details.\r
\r
- **Status Badge**  Green (SUCCESS) = pipeline completed normally. Yellow (SUCCESS WITH SKIPS) = completed but some steps were skipped (e.g., no new data). Red (FAILED) = one or more steps had errors. Blue (RUNNING) = pipeline is currently in progress.\r
- **Started Time**  When the run started, formatted as "Feb 07, 14:30".\r
- **Run ID**  Unique identifier (first 8 characters shown). Useful for debugging.\r
\r
## Filters\r
\r
Filter runs by **Status** (All, Failed, Success, Success with Skips, Running), **From date**, and **To date**.\r
\r
## Right Panel: Run Detail\r
\r
When you click a run, the detail panel shows:\r
\r
- **Summary Cards**  Status, Duration (total time in seconds), As-of (market data date), Portfolios (how many portfolios were processed), Errors (error count if any).\r
\r
- **Run Summary Narrative**  An AI-generated or deterministic summary: headline, what happened, why, impact, and next check time.\r
\r
- **Error Panel (if errors exist)**  Lists each error with event name, timestamp, error message, SQLSTATE code, and query ID. Useful for Snowflake debugging.\r
\r
- **Step Timeline**  A chronological list of every step the pipeline executed. Each shows: step name, status (pass/fail/skip), duration in seconds, and portfolio ID. Example: "SP_GENERATE_SIGNALS  2.3s  Portfolio 1" means signal generation took 2.3 seconds and succeeded.\r
\r
- **Step Detail Panel**  Click a step to see: duration (seconds + ms), rows affected, portfolio ID, timestamps, and error details if it failed.\r
`,Cae=`# 20. Debug\r
\r
A technical health check page. Calls the backend API endpoints one by one and shows whether each responds correctly. Primarily for developers and system administrators.\r
\r
## What It Does\r
\r
Automatically fires requests to 5 key API endpoints and reports the results:\r
\r
| Endpoint | What it checks |\r
|----------|----------------|\r
| \`/api/status\` | Is the API server running? |\r
| \`/api/runs\` | Can we fetch pipeline runs? |\r
| \`/api/portfolios\` | Can we fetch the portfolio list? |\r
| \`/api/digest/latest\` | Is the latest digest available? |\r
| \`/api/training/status\` | Is training data accessible? |\r
\r
## How to Read Results\r
\r
| Status | Meaning | Action |\r
|--------|---------|--------|\r
| **200** | Success  endpoint is working | No action needed |\r
| **404** | Not found  endpoint doesn't exist | Check if the API server is running the correct version |\r
| **500** | Server error  backend crashed | Check Snowflake credentials and database connectivity |\r
| **0 (network)** | Cannot reach server at all | Check if the API server is running, check proxy/CORS settings |\r
\r
The **Copy diagnostics** button copies all results as JSON to your clipboard  useful for sharing with support.\r
`,Iae=`# 21. Parallel Worlds\r
\r
A "what-if" laboratory for your trading rules. Parallel Worlds replays each day's real market data through alternative rule sets and shows you what *would* have happened  without risking a single dollar. It's like having a time machine that lets you test different decisions after the fact.\r
\r
## Real-World Analogy\r
\r
Imagine you're a chess player reviewing a game you just finished. You wonder: "What if I'd moved the bishop instead of the knight on move 12?" You replay from that point and discover you would have won 3 moves sooner. That's Parallel Worlds  except instead of chess moves, you're replaying market days with different trading rules and seeing whether those rules would have made you more or less money.\r
\r
## What Is Parallel Worlds?\r
\r
Every day, MIP runs your portfolio using your current rules: signal thresholds, position sizes, entry timing, and risk gates. Parallel Worlds takes that *same* day's data and asks:\r
\r
- **What if we'd used a looser signal filter?**  Would more trades have passed, and would they have been profitable?\r
- **What if we'd used a tighter filter?**  Would being pickier have avoided losses?\r
- **What if we'd used bigger (or smaller) positions?**  Would the extra (or reduced) exposure have helped?\r
- **What if we'd waited a day before entering?**  Would patience have gotten a better price?\r
- **What if we'd done nothing at all?**  Would staying in cash have been the best move?\r
\r
Each of these alternatives is called a **scenario**. MIP runs all of them every day, records the results, and builds up a history so you can see which alternative rules  if any  *consistently* outperform your current approach.\r
\r
> **Key point:** Parallel Worlds never changes your real portfolio. It's a read-only, retrospective analysis. Think of it as a flight simulator  you learn from the replay without any risk to the real plane.\r
\r
## Policy Health Card (top of page)\r
\r
This card gives you an instant, at-a-glance answer to the question: **"Are my current trading rules the best they can be?"** It combines signal confidence, regret, and stability into a single health assessment.\r
\r
- **Health Badge**  A colored badge in the top-right corner:\r
  - **Healthy** (green)  No alternative rules reliably beat yours. Your approach is solid.\r
  - **Watch** (blue)  Some early signals, but nothing definitive yet. Keep an eye on it.\r
  - **Monitor** (orange)  A couple of scenarios are showing emerging patterns. Worth tracking.\r
  - **Review Suggested** (orange)  One scenario consistently outperforms. Consider studying it.\r
  - **Needs Attention** (red)  Multiple scenarios beat your rules. Time to investigate.\r
\r
- **Stability Gauge (0100)**  A progress bar showing how "settled" your rules are. 100 means every alternative scenario is noise  your rules are rock-solid. Example: "Stability 95/100, Very Stable" means 95% of alternative scenarios can't beat you.\r
\r
- **Signal Breakdown**  Small colored badges showing how many scenarios fall into each confidence tier: Strong (green), Emerging (blue), Weak (orange), Noise (gray). Most of the time, you'll see mostly Noise badges  that's a good thing.\r
\r
- **Biggest Regret Area**  Which category of rule changes accounts for the most regret (missed opportunity). Categories: Signal Filter, Position Size, Entry Timing, and Baseline (doing nothing). Example: "Baseline  $378 cumulative regret" means that over all the days measured, doing absolutely nothing (staying in cash) would have avoided $378 in losses.\r
\r
- **Top Candidate**  If any scenario shows a non-noise signal, the strongest one appears here by name.\r
\r
### Example: Reading the Policy Health Card\r
\r
You open Parallel Worlds and see: **Healthy**, Stability **95/100**, Signal Breakdown: Noise: 7, Weak: 1. This tells you: your trading rules are performing well relative to alternatives. The one "Weak" scenario is not consistent enough to worry about. No action needed.\r
\r
## Parallel Worlds Analysis (AI Narrative)\r
\r
An AI-written summary that reads all the numbers and tells you what matters in plain English. The AI looks at today's scenario results, the decision traces, the regret trend, and writes a brief story about what happened and whether anything is worth paying attention to.\r
\r
- **AI / Fallback Badge**  "AI" (purple gradient) means the narrative was generated by Snowflake Cortex AI, grounded in today's actual snapshot data. "Fallback" (gray) means the AI was unavailable and a simpler template-based summary was used instead.\r
- **Headline**  A one-sentence summary. Example: "All 8 scenarios matched actual performance  current rules are well-calibrated."\r
- **Gate Analysis**  Explains what happened at each decision gate (trust, risk, capacity, signal filters).\r
- **What-If Insights**  Bullet points for the most noteworthy scenario comparisons.\r
- **Regret Trend**  Whether regret is growing, shrinking, or flat over time.\r
- **Consideration**  A green-boxed suggestion  *not* a recommendation, but a thought to consider.\r
\r
## Scenario Comparison Table\r
\r
The main data table. Each row is one alternative universe  a different set of rules applied to the same day.\r
\r
| Column | What It Means |\r
|--------|---------------|\r
| **What If We Had...** | The scenario's display name. Examples: "Looser Signal Filter (z-score -0.25)", "Bigger Positions (125%)", "Wait 1 Day Before Entering". |\r
| **Category** | Which type of rule was changed. Color-coded pill: Signal Filter (blue), Position Size (orange), Entry Timing (purple), Baseline (gray). |\r
| **Scenario PnL** | The profit or loss this scenario would have produced on that day. |\r
| **vs Actual** | Scenario PnL minus your real PnL. Green positive = scenario was better. Red negative = your real approach was better. $0 = identical. |\r
| **Equity Impact** | Same idea applied to total portfolio equity. Shows the dollar difference in end-of-day portfolio value. |\r
| **# Trades** | How many trades the scenario would have taken. Compare to your actual trade count. |\r
| **Signal** | The confidence badge for this scenario (see Signal Confidence section below). |\r
\r
### Example: Reading a Row\r
\r
You see: "Looser Signal Filter (z-score -0.25)", Category: Signal Filter, Scenario PnL: $142, vs Actual: +$42, # Trades: 5, Signal: Noise.\r
\r
This means: if you had lowered your signal filter's z-score threshold by 0.25, you would have made $142 instead of your actual $100  a $42 improvement. But the "Noise" badge tells you this is probably a one-day fluke, not a reliable pattern.\r
\r
### Row Highlighting\r
\r
Rows with a light green background are scenarios that **outperformed** your actual result on that day. This is purely visual  look at the Signal badge for the confidence assessment.\r
\r
### Expandable Detail Row (Decision Trace)\r
\r
Click the arrow on any row to expand it and see the **Decision Trace**  a human-readable explanation of what happened at each decision gate in that scenario.\r
\r
- **Gate Cards**  Each card represents one decision gate (Threshold, Trust, Sizing, Timing, Baseline). The left border is color-coded: green = passed, red = blocked, orange = modified or delayed.\r
- **Status Label**  PASSED, BLOCKED, MODIFIED, DELAYED, or INFO.\r
- **Explanation Text**  Plain English. Example: "Delayed entry by 1 bar. No trades were affected." or "No signals changed eligibility."\r
\r
## Signal Confidence Panel\r
\r
Answers: **"Can I trust this scenario's results, or is it just random noise?"**\r
\r
| Tier | Color | What It Means | Example |\r
|------|-------|---------------|---------|\r
| **Strong** | Green | Reliably outperforms  high win rate, many days of data, positive trend. Worth investigating seriously. | "Wins 75% over 15 days, avg +$12/day" |\r
| **Emerging** | Blue | A pattern is forming but too early to be sure. Keep watching. | "Wins 60% over 8 days  emerging pattern" |\r
| **Weak** | Orange | Some signal but not consistent. Could be meaningful, could be coincidence. | "Wins 45% but not yet consistent" |\r
| **Noise** | Gray | No meaningful difference. Either too few days of data, negligible dollar impact, or low win rate. Ignore it. | "Cumulative impact is negligible ($0.50)" |\r
\r
> **Why Noise is good news:** If most scenarios show "Noise," that means the system couldn't find any rule changes that would reliably beat your current approach. Your rules are well-calibrated.\r
\r
## Equity Curves Chart\r
\r
A line chart showing how your portfolio equity evolved over time  and how each scenario *would have* evolved if you'd used different rules from the start.\r
\r
- **Solid Blue Line**  Your actual portfolio equity over time. This is the ground truth.\r
- **Dashed Colored Lines**  Each represents one scenario. Above the solid line = that scenario would have produced more wealth. Below = your approach was better.\r
- **Hovering**  Hover over any point to see the exact equity value for each line on that date.\r
- **Convergence**  If all lines are bunched tightly, the scenarios didn't make much difference. If lines diverge widely, small rule changes had a big impact.\r
\r
## Regret Attribution\r
\r
A report card for your rule categories. Groups scenarios by type  Signal Filter, Position Size, Entry Timing, Baseline  and tells you which category accounts for the most missed opportunity.\r
\r
- **Dominant Regret Driver**  A highlighted bar showing which rule category has the most cumulative regret. Example: "Baseline  $378 cumulative regret."\r
- **Category Cards**  One card per rule category, ranked by regret. Each shows: avg win rate, cumulative regret, best delta, best scenario name, and its confidence badge.\r
- **Blue left border**  The card with the blue left border is the dominant driver.\r
\r
## Regret Heatmap\r
\r
A color-coded grid showing how each scenario performed on each day.\r
\r
- **Rows**  Each row is one scenario (by name).\r
- **Columns**  Each column is one date (most recent on the right).\r
- **Cell Color**  Green = scenario beat your actual result (positive delta). Red = your actual result was better (negative delta). Gray = no difference. The intensity shows how large the difference was.\r
- **Cell Value**  The dollar amount inside each cell. Hover for the full detail tooltip.\r
\r
### Example: Reading the Heatmap\r
\r
You look at the "Stay in Cash" row and see: Feb 3: -$45, Feb 4: +$20, Feb 5: +$60, Feb 6: -$12, Feb 7: +$15. This means: on Feb 3, your actual trading made $45 more than doing nothing  good day. On Feb 5, doing nothing would have saved you $60  bad day for your trades. The mix of green and red tells you the cash scenario is not consistently better.\r
\r
## Signal Tuning Tab\r
\r
Think of this tab as a **radio dial** for your signal detection rules. It answers the question: **"What if I turned the sensitivity dial up or down  would I hear better signals or just more static?"**\r
\r
When you click the **Signal Tuning** tab, MIP runs a full "parameter sweep"  it replays your trading history with dozens of slightly different signal filter settings and charts the results. Instead of testing just two or three alternatives (like the Overview tab does), it tests a whole range of settings in fine increments.\r
\r
### Tuning Surface Charts\r
\r
Each chart shows a parameter across its full range on the X-axis, with the cumulative PnL impact on the Y-axis. For example, the Z-Score Threshold surface shows what would have happened if you'd adjusted your signal filter by small amounts, from -0.50 (much looser) to +0.50 (much stricter).\r
\r
- **Blue bars**  Your current setting. This is the zero-change baseline.\r
- **Green bars**  Settings that would have improved your results. The taller the bar, the more money you would have made with that setting.\r
- **Red bars**  Settings that would have hurt your results.\r
- **Optimal marker** (green dot, thick border)  The single best setting across the entire range.\r
- **Minimal Safe Tweak marker** (orange dot)  The smallest change from your current setting that still improves things. Think of it as "the least risky improvement."\r
\r
> **Real-world analogy:** Imagine adjusting the thermostat in your house. The Tuning Surface shows you: "At 68 you're comfortable. At 70 you'd be slightly better. At 85 you'd be miserable." It finds the sweet spot.\r
\r
### Recommendations Cards\r
\r
Above the charts, you'll see recommendation cards ranked by confidence:\r
\r
- **Conservative** (blue border)  The smallest change that would improve results. Low risk, modest reward.\r
- **Aggressive** (orange border)  The optimal change for maximum improvement. Higher potential reward, but a bigger change from current settings.\r
\r
Each card shows:\r
- **Parameter**  Which setting and the change (e.g., "min_zscore_delta: 0  -0.125")\r
- **Expected Impact**  Dollar amount of cumulative improvement\r
- **Win Rate**  Percentage of days the new setting would have outperformed\r
- **Confidence Badge**  Strong / Emerging / Weak / Noise (same as the Overview tab)\r
- **Safety Status**  "Ready for Review" (green) means it passed all safety checks. "Not Ready" (red) means it failed one or more.\r
\r
Click any card to expand it and see:\r
- **Evidence details**  Daily delta, domain, observation count, and confidence reasoning\r
- **Safety Checklist**  Green checks and red crosses showing which safety tests passed or failed\r
- **Governance Buttons**  Approve / Reject / Dismiss buttons (currently disabled  governance workflow coming soon)\r
\r
### Safety Checks Explained\r
\r
Every recommendation must pass three safety checks before it's marked "Ready for Review":\r
\r
| Check | What It Means | Why It Matters |\r
|-------|---------------|----------------|\r
| **Minimum Observation Days** | At least 5 days of sweep data | Prevents acting on too little information  like flipping a coin twice and concluding it's biased |\r
| **Trade Count Stability** | Changing this setting won't wildly increase/decrease trade count | A setting that makes you take 10x more trades might have a different risk profile entirely |\r
| **Regime Robustness** | Works in multiple market conditions (quiet, normal, volatile) | A setting that only helps in calm markets but hurts in volatile ones is risky |\r
\r
### Regime Sensitivity Chart\r
\r
A horizontal bar chart showing how each setting performs across different market conditions:\r
\r
- **Quiet** (gray bars)  Low-volatility market days\r
- **Normal** (blue bars)  Average volatility days\r
- **Volatile** (orange bars)  High-volatility days\r
\r
If a setting's bars are roughly even across all three regimes, it's **robust**. If it only shows high win rates in one regime, it's **fragile** and will be flagged.\r
\r
## Portfolio Tuning Tab\r
\r
This tab works exactly like Signal Tuning but for the **execution** side of your rules: how much to buy and when to enter.\r
\r
### Position Sizing Surface\r
\r
Tests what would happen if you had used different position sizes  from 50% of your current size to 150%. Answers: "Am I putting enough money into each trade, or too much?"\r
\r
- Size 50% = half your current position size (more conservative)\r
- Size 100% = current setting (the blue bar)\r
- Size 150% = 50% larger positions (more aggressive)\r
\r
### Entry Timing Surface\r
\r
Tests what would happen if you had delayed entry by 0 to 3 bars (days). Answers: "Should I have waited a day before buying?"\r
\r
- Delay 0 bars = enter immediately (current behavior)\r
- Delay 1 bar = wait one day after the signal\r
- Delay 23 bars = even more patience\r
\r
> **Example:** You see the Delay 1 bar column at +$85 cumulative. This means: if you had waited one extra day before entering every trade, you would have saved $85 over the measured period  presumably by getting better entry prices.\r
\r
### Portfolio Recommendations\r
\r
Same card format as Signal Tuning, but covering sizing and timing parameters. Conservative recommendations suggest the smallest sizing or timing adjustment that helps; Aggressive recommendations suggest the optimal setting from the full sweep.\r
\r
### Important: What These Tabs Are NOT\r
\r
These tabs are **analysis tools**, not auto-pilots. They show you what *would have worked* in the past. The disclaimer at the top of each tab reads: *"Analysis only  these are suggestions based on historical replay, not instructions. All changes require human review and approval."*\r
\r
The Approve/Reject buttons are intentionally disabled  they exist to show the future governance workflow, but no recommendations are automatically applied. You are always in control.\r
\r
## What Parallel Worlds Is NOT\r
\r
- **Not a crystal ball.** It looks backward, not forward. Past patterns may not repeat.\r
- **Not a recommendation to change your rules.** Even a "Strong" confidence signal is informational, not prescriptive.\r
- **Not live trading.** No money is at risk. It never places trades or modifies positions.\r
- **Not random.** Every simulation is **deterministic**  run it twice with the same data and you get the same result.\r
`,Dae=`# Key Terms Glossary\r
\r
| Term | Definition |\r
|------|------------|\r
| **Signal** | A detection by a pattern that interesting price action occurred. Not a trade  just a record. |\r
| **Pattern** | A named strategy with specific parameters (min_return, min_zscore, etc.) that scans market data for signals. |\r
| **Horizon** | A time window (1, 3, 5, 10, or 20 bars) at which the system evaluates what happened after a signal. |\r
| **Hit Rate** | Percentage of evaluated outcomes that were favorable. Threshold:  55%. |\r
| **Avg Return** | Average realized return across all outcomes. Threshold:  0.05% (0.0005). |\r
| **Maturity Score** | A 0100 score measuring data quality: 30% sample size + 40% coverage + 30% horizons. |\r
| **Trust Label** | TRUSTED / WATCH / UNTRUSTED. Determined by passing 3 gates: sample  40, hit rate  55%, avg return  0.05%. |\r
| **Proposal** | A suggested trade order generated when a TRUSTED signal passes risk/capacity checks. |\r
| **Risk Gate** | Safety mechanism that blocks new entries when portfolio drawdown exceeds a threshold. |\r
| **Episode** | A "generation" of the portfolio. Starts at creation or after crystallization/profile change. All KPIs and performance numbers are scoped to the active episode. |\r
| **Crystallization** | The process of locking in gains when a profit target is hit. Ends the current episode and starts a new one. Two modes: Withdraw Profits (pay out gains) or Rebase (compound gains into new cost basis). |\r
| **Lifecycle Event** | An immutable record of a portfolio state change  CREATE, DEPOSIT, WITHDRAW, CRYSTALLIZE, PROFILE_CHANGE, EPISODE_START, EPISODE_END, or BUST. Stored permanently for audit and timeline views. |\r
| **Risk Profile** | A reusable template defining portfolio behavior: position limits, drawdown stops, bust threshold, and crystallization rules. Attached to portfolios and can be changed at any time (which starts a new episode). |\r
| **Pipeline Lock** | A safety mechanism that disables all portfolio editing while the daily pipeline is running. Prevents data conflicts. Buttons re-enable automatically once the pipeline completes. |\r
| **Deposit / Withdraw** | Cash events that add or remove money from a portfolio without affecting P&L tracking. The system adjusts the cost basis so deposits aren't counted as profit and withdrawals aren't counted as losses. |\r
| **Drawdown** | The percentage decline from a portfolio's peak equity. -5% drawdown = 5% below the high water mark. |\r
| **Cortex AI** | Snowflake's built-in LLM service used to generate narrative digests and portfolio stories from snapshot data. |\r
| **Pipeline** | The daily automated process: fetch data  detect signals  evaluate outcomes  update trust  trade  check crystallization  generate digest. |\r
| **Z-Score** | How many standard deviations a value is from the mean. Z-score of 2 means the move is unusually large (2 above average). |\r
| **Coverage Ratio** | What fraction of signals have been fully evaluated across all horizons. 100% = complete evaluation. |\r
| **Notional** | The total monetary value of a trade: Price  Quantity. A buy of 100 shares at $150 = $15,000 notional. |\r
| **Cost Basis** | The average price at which a position was entered, adjusted for deposits and withdrawals. Used to calculate unrealized profit/loss. |\r
| **Portfolio Story** | An AI-generated narrative biography of a portfolio  covering its creation, cash events, episodes, crystallizations, and current outlook. Found in Portfolio Management  Portfolio Story tab. |\r
| **Parallel Worlds** | A read-only "what-if" analysis system. Replays each day's market data through alternative rule sets (scenarios) and compares their outcomes to your actual results. Never affects your real portfolio. |\r
| **Scenario** | An alternative set of trading rules used in Parallel Worlds. Examples: "Looser Signal Filter," "Bigger Positions (125%)," "Wait 1 Day Before Entering," "Stay in Cash." Each scenario produces a counterfactual PnL. |\r
| **Counterfactual** | The hypothetical outcome that would have occurred under different rules. "Counterfactual PnL of $142" means the scenario would have made $142 that day, compared to your actual result. |\r
| **Regret** | The dollar amount by which a scenario outperformed your actual result, summed over time. Only positive differences count  days you beat the scenario don't reduce regret. |\r
| **Confidence Class** | A reliability tier assigned to each scenario: Strong (reliable outperformance), Emerging (pattern forming), Weak (inconsistent), or Noise (no meaningful signal). Based on win-rate, cumulative impact, and rolling consistency. |\r
| **Decision Trace** | A human-readable record of what happened at each decision gate (Trust, Risk, Threshold, Sizing, Timing) during a scenario's simulation. Shows which gates passed, blocked, or modified trades, and explains why in plain English. |\r
| **Policy Health** | An at-a-glance assessment of whether your current trading rules are optimal. Combines confidence signals, regret attribution, and stability into a single health rating: Healthy, Watch, Monitor, Review Suggested, or Needs Attention. |\r
| **Stability Score** | A 0100 score measuring how "settled" your trading rules are. 100 = every alternative is noise (very stable). Lower scores mean more scenarios are showing signal. |\r
| **Parameter Sweep** | A systematic test that replays trading history with dozens of slightly different settings (e.g., z-score thresholds from -0.50 to +0.50 in small steps). Used in the Signal Tuning and Portfolio Tuning tabs to build tuning surfaces. |\r
| **Tuning Surface** | A chart showing cumulative PnL impact across a range of parameter values. The "surface" lets you see which setting would have produced the best results  like a topographic map of profitability. |\r
| **Optimal Point** | The single parameter setting that would have produced the highest cumulative PnL improvement across all observed days. Shown as a green marker on tuning surface charts. |\r
| **Minimal Safe Tweak** | The smallest parameter change from your current setting that still improves performance. A conservative recommendation  the least disruptive improvement. |\r
| **Regime Sensitivity** | An analysis of how a parameter setting performs across different market volatility environments: Quiet (low-vol), Normal, and Volatile (high-vol). Settings that only work in one regime are flagged as "fragile." |\r
| **Regime Fragile** | A scenario or parameter setting that only outperforms in one market volatility regime (e.g., only in calm markets). Flagged as a safety concern because it may fail when conditions change. |\r
| **Safety Check** | An automated verification that a recommendation passes minimum reliability thresholds: enough observation days, stable trade counts, and multi-regime robustness. All three must pass for a recommendation to be marked "Ready for Review." |\r
| **Recommendation** | A tuning suggestion generated from sweep results. Comes in two flavors: Conservative (smallest helpful change) and Aggressive (optimal setting). Always requires human approval  never auto-applied. |\r
| **Intraday Pipeline** | A separate, independent pipeline that ingests 15-minute bars, detects intraday patterns (ORB, Pullback, Mean-Reversion), evaluates outcomes on bar-based horizons, and builds trust. Runs alongside the daily pipeline without affecting it. |\r
| **Intraday Horizon** | A time window for evaluating intraday signals: +1 bar (15m), +4 bars (~1hr), +8 bars (~2hr), or end-of-day close (EOD). Stored in HORIZON_DEFINITION alongside daily horizons. |\r
| **Opening Range Breakout (ORB)** | An intraday pattern that detects when price breaks above or below the early-session trading range with sufficient momentum. |\r
| **Pullback Continuation** | An intraday pattern that identifies an impulse move, followed by consolidation, and then a breakout in the original direction. |\r
| **Mean-Reversion Overshoot** | An intraday pattern that detects extreme deviation from a short-term rolling average, signaling a likely reversion. |\r
| **System Stage** | An intraday readiness classification: INSUFFICIENT (too little data), EMERGING (signals appearing), LEARNING (outcomes accumulating), or CONFIDENT (patterns earning trust). |\r
| **HORIZON_DEFINITION** | A metadata table that defines all evaluation horizons for both daily and intraday intervals. Stores horizon type (BAR, DAY, SESSION), length, resolution, and display labels. |\r
| **Pattern Readiness Tile** | A summary card on the intraday cockpit showing a pattern family's event count, trust state, confidence, best edge, and trend arrow at a glance. |\r
| **Early Exit** | An execution optimization that can close daily positions before their planned horizon when intraday price action indicates the payoff has been achieved and giveback risk is high. Uses a two-stage policy: payoff detection (Stage A) followed by reversal confirmation (Stage B). |\r
| **Giveback Risk** | The risk that a position which has already reached its target return will reverse and lose those gains before the planned exit. The early-exit system monitors for this by tracking peak return and subsequent price decay. |\r
| **Payoff Multiplier** | A configurable buffer on the target return for Stage A of early exit. 1.0 = exact target, 1.2 = target must be exceeded by 20%. Controls how confident the system needs to be that the payoff has truly arrived. |\r
| **Giveback Percentage** | The fraction of peak return that has been lost since the high point. A 40% giveback means the position has retraced 40% of its best unrealized gain. The Stage B threshold defaults to 40% (or 25% for quick payoffs). |\r
| **Quick Payoff** | When a position hits its target within 60 minutes of entry. Quick payoffs trigger a stricter giveback threshold (25% instead of 40%) because very fast moves are statistically more likely to reverse. |\r
| **Max Favorable Excursion (MFE)** | The highest unrealized return a position achieves before it is closed. MFE measures how much profit was "on the table" at the best point  useful for evaluating whether exits are well-timed. |\r
| **Shadow Mode** | An early-exit execution mode where the system evaluates positions and logs hypothetical exit decisions, but does not actually close any positions. Used for proof-of-concept during the first 24 weeks. |\r
| **Decision Console** | A live UI page that shows open daily positions, their real-time decision lifecycle (entry, monitoring, candidate detection, exit triggers), and a rolling event feed with full gate trace audit for each decision. |\r
| **Decision Event** | A structured record emitted whenever the early-exit system evaluates or transitions a position through a gate. Contains timestamps, metrics, gate results, reason codes, and links to advanced JSON detail. |\r
| **Gate Trace** | A timeline of every decision gate evaluated for a position over time. Each node shows the gate name, pass/fail result, key metrics, and timestamps. Accessible in the Decision Console's Position Inspector. |\r
| **Decision Diff** | A comparison view showing what happens if a position is exited now versus held to its planned horizon. Displays current return, expected return, P&L delta, and bars remaining  helping you assess whether an early exit adds or destroys value. |\r
| **Server-Sent Events (SSE)** | A web protocol where the server pushes updates to the browser over a persistent connection. The Decision Console uses SSE to deliver new decision events without manual page refresh. |\r
`,Rae=`# 23. The Intraday Subsystem\r
\r
MIP has two independent pipelines: the **Daily Pipeline** (the original system) and the **Intraday Pipeline** (a newer, additive subsystem). They share the same database and UI but run on separate schedules, separate cadences, and separate evaluation logic.\r
\r
## Why Intraday?\r
\r
Daily signals evaluate whether a pattern leads to profitable moves over days or weeks. But many patterns resolve within hours. The intraday subsystem captures these shorter-lived opportunities by:\r
\r
- Ingesting **15-minute bars** for a focused symbol universe\r
- Detecting **intraday-specific patterns** (Opening Range Breakout, Pullback Continuation, Mean-Reversion Overshoot)\r
- Evaluating outcomes on **bar-based horizons** (+1 bar, +4 bars, +8 bars, end-of-day)\r
- Building trust independently of the daily system\r
\r
## Key Differences from Daily\r
\r
| Aspect | Daily | Intraday |\r
|--------|-------|----------|\r
| Bar interval | 1440 minutes (1 day) | 15 minutes |\r
| Horizons | 1, 3, 5, 10, 20 days | +1 bar (15m), +4 bars (~1hr), +8 bars (~2hr), EOD close |\r
| Patterns | Momentum, Reversal | ORB, Pullback Continuation, Mean-Reversion |\r
| Symbol universe | Full (23+ symbols) | Focused (1416 high-liquidity symbols) |\r
| Trading | Active (proposals + execution) | Learning only (no live trading yet) |\r
| Pipeline schedule | Daily at 07:00 Berlin | Configurable (initially hourly during market hours) |\r
\r
## Intraday Learning Loop\r
\r
The intraday pipeline follows the same philosophy as daily  **learn before you trade**:\r
\r
1. **Ingest** 15-minute bars from Alpha Vantage (delayed data)\r
2. **Detect patterns** using deterministic intraday detectors\r
3. **Log signals** as hypotheses (not trades)\r
4. **Evaluate outcomes** at intraday-relevant horizons\r
5. **Score reliability**  patterns must pass trust gates before they become tradable\r
6. **Repeat**  each pipeline run adds more evidence\r
\r
## The Three Intraday Patterns\r
\r
### Opening Range Breakout (ORB)\r
Detects when price breaks above or below the early-session trading range. The "opening range" is defined by the first few bars of the session. A breakout with sufficient distance from the range boundary generates a signal.\r
\r
### Pullback Continuation\r
Identifies an impulse move (strong directional bar), followed by a consolidation (contracted range), and then a breakout from that consolidation in the original direction. Captures mid-trend continuation opportunities.\r
\r
### Mean-Reversion Overshoot\r
Detects extreme deviation from a short-term anchor (rolling average). When price overshoots by a configurable threshold, a reversion signal fires. Provides diversification against trend-following patterns.\r
\r
## Intraday Horizons\r
\r
Unlike daily horizons (measured in days), intraday horizons are measured in **bars** or **session events**:\r
\r
| Horizon | Label | Meaning |\r
|---------|-------|---------|\r
| +1 bar | H1 | Immediate signal validation  did the next 15-min bar confirm? |\r
| +4 bars | H4 | ~1 hour continuation  did the move extend? |\r
| +8 bars | H8 | ~2 hour persistence  does the pattern have staying power? |\r
| EOD close | EOD | End-of-day session impact  did it matter by market close? |\r
\r
The **HORIZON_DEFINITION** table stores metadata for both daily and intraday horizons, allowing the system to interpret them consistently while scaling by timeframe.\r
\r
## Intraday Training Status (Cockpit View)\r
\r
The Intraday Training page is a decision-first cockpit with three layers:\r
\r
### Layer 1: Executive Summary (top of page, no scroll needed)\r
- **Status Banner**  Shows the system stage (INSUFFICIENT / EMERGING / LEARNING / CONFIDENT), total signal count, evaluated outcomes, symbol count, and how many patterns are tradable\r
- **Pattern Readiness Tiles**  One card per pattern family showing event count, trust level, confidence, best fee-adjusted edge, and a trend arrow\r
- **Pipeline Health Strip**  Compact single-line summary: enabled/disabled, last run, bars ingested, signals generated, runs/7d, compute cost\r
\r
### Layer 2: Pattern Insights (visible by default)\r
- **Trust Scoreboard**  Compact table with one row per pattern showing its best horizon. Click to expand and see all horizons. Sorted by Sharpe-like metric (best first)\r
- **Signal Activity Chart**  Collapsible price chart with signal overlays per symbol\r
\r
### Layer 3: Deep Diagnostics (collapsed by default)\r
- **Pattern Stability**  Compares all-time vs recent performance to detect drift\r
- **Excursion Analysis**  Max favorable/adverse excursion data for stop-loss/take-profit design\r
- Toggle "Show advanced diagnostics" to reveal these sections (persisted in browser)\r
\r
## Intraday in the Audit Viewer\r
\r
The Runs (Audit) page has a **Daily Pipeline / Intraday Pipeline** toggle at the top. When set to "Intraday Pipeline", it shows intraday pipeline runs with their own metrics: bars ingested, signals generated, outcomes evaluated, and compute time.\r
\r
## Intraday in the Live Header\r
\r
The top-of-screen live header shows both **Daily** and **Intraday** last pipeline run status, so you can see at a glance whether both pipelines are healthy.\r
\r
## Data Isolation\r
\r
The intraday subsystem is fully isolated from daily:\r
\r
- It does **not** modify daily signals, training, or execution\r
- It does **not** write into daily outcome tables\r
- It **may** read daily signals as directional context (read-only)\r
- It has its own Snowflake task, its own pattern definitions, and its own trust scoring\r
- Disabling intraday has zero impact on the daily pipeline\r
\r
## Current Stage\r
\r
The intraday subsystem is in **learning mode**  it detects patterns, evaluates outcomes, and builds trust. It does not yet propose or execute trades. Once patterns earn sufficient trust, a future phase will enable intraday paper trading.\r
`,Lae=`# 24. Intraday Early Exit\r
\r
## The Problem: Winning Trades That Give Back Their Gains\r
\r
Imagine you buy a stock in the morning because MIP detected a strong momentum signal. By lunchtime, the stock has already hit your target return  mission accomplished. But MIP's plan says "hold for 5 bars," so it holds. By the end of the day, the stock reverses and the gains evaporate. You had the win in hand and gave it back.\r
\r
This is **giveback risk**  one of the most frustrating (and common) phenomena in systematic trading. The early-exit layer is MIP's answer.\r
\r
## How It Works: A Two-Stage Safety Net\r
\r
The early-exit system doesn't just grab profits the moment they appear. That would be like leaving a party the instant you're having fun  you'd miss the best parts. Instead, it uses a **two-stage decision**:\r
\r
### Stage A: "Has the payoff arrived?"\r
\r
Every time new 15-minute bars come in, MIP checks each open daily position:\r
\r
- What's the **current return** since entry?\r
- What's the **target return** for this position's pattern?\r
- Has the return reached or exceeded the target?\r
\r
If yes, the position becomes an **early-exit candidate**. Think of it like a traffic light turning yellow  attention required, but no action yet.\r
\r
### Stage B: "Is the move reversing?"\r
\r
Being a candidate doesn't trigger an exit. MIP now watches for **evidence of reversal**:\r
\r
- **Giveback percentage**  Has the position given back 40% or more of its peak return? (Like reaching 100 meters up a hill, then sliding 40 meters back down.)\r
- **No new highs**  Have the last 3 consecutive bars all failed to make a new high? (The climb has stalled.)\r
- **Quick payoff bonus**  If the target was hit within 60 minutes, MIP gets more cautious (uses a 25% giveback threshold instead of 40%), because very fast moves are more likely to reverse.\r
\r
Only when **both stages** pass does MIP signal an early exit.\r
\r
## The Three Modes\r
\r
The early-exit system has a safety ladder:\r
\r
| Mode | What Happens | When to Use |\r
|------|-------------|-------------|\r
| **SHADOW** | Evaluates positions and logs what *would* happen, but changes nothing | First 2-4 weeks (prove it works) |\r
| **PAPER** | Actually closes positions in the simulation | After SHADOW shows net benefit |\r
| **ACTIVE** | Live execution (future) | Only after Paper mode proves stable |\r
\r
Right now, the system runs in **SHADOW mode** by default. You get full visibility into what the system *would* do, without any risk to your portfolio.\r
\r
## What Gets Logged\r
\r
Every evaluation is recorded with full audit trail:\r
\r
- **bar_close_ts**  which 15-minute bar the decision was based on\r
- **decision_ts**  when MIP made the decision (prevents "time travel")\r
- **Payoff metrics**  target return, current return, MFE (max favorable excursion)\r
- **Giveback metrics**  peak return, current return, giveback percentage\r
- **Gate results**  which checks passed and failed\r
- **Fee-adjusted P&L**  what the early exit would actually produce after slippage and fees\r
- **Hold-to-end comparison**  the delta between exiting early and holding to horizon\r
\r
## Configuration\r
\r
All thresholds are tunable via \`APP_CONFIG\`:\r
\r
| Parameter | Default | What It Controls |\r
|-----------|---------|-----------------|\r
| \`EARLY_EXIT_PAYOFF_MULTIPLIER\` | 1.0 | How much buffer above target (1.0 = exact, 1.2 = 20% buffer) |\r
| \`EARLY_EXIT_GIVEBACK_PCT\` | 0.40 | What fraction of peak must be given back to trigger |\r
| \`EARLY_EXIT_NO_NEW_HIGH_BARS\` | 3 | How many bars with no new high confirms the stall |\r
| \`EARLY_EXIT_QUICK_PAYOFF_MINS\` | 60 | Threshold for "quick payoff" (stricter giveback) |\r
| \`EARLY_EXIT_QUICK_GIVEBACK_PCT\` | 0.25 | Giveback threshold for quick payoffs |\r
\r
## Pipeline Integration\r
\r
The early-exit evaluation runs as **Step 4** of the intraday pipeline, right after outcome evaluation:\r
\r
\`\`\`\r
Ingest 15m bars  Generate signals  Evaluate outcomes  Evaluate early exits  Log run\r
\`\`\`\r
\r
It only runs when \`EARLY_EXIT_ENABLED\` is \`true\`. If intraday bars are missing for a position, that position is silently skipped  no harm done.\r
\r
## Why Not Just "Exit When Target Hit"?\r
\r
The naive approach  exit the moment your target is reached  sounds appealing but systematically cuts winners short. Many of MIP's best trades are continuation moves where the initial target is just the start. Exiting immediately would lock in the minimum gain while missing the full move.\r
\r
The two-stage approach captures the **best of both worlds**: it lets winners run when momentum continues, but protects gains when the move is clearly fading.\r
`,Mae=`# 25. Decision Console\r
\r
The Decision Console is MIP's real-time command center for monitoring open positions and the decisions being made about them. Think of it as a flight control tower  you can see every aircraft (position), its status, and every decision the system is making moment by moment.\r
\r
## Three Modes\r
\r
### Open Positions\r
\r
The default view. Shows every open daily position with:\r
\r
- **Symbol and portfolio**  which stock, in which portfolio\r
- **Stage badge**  the position's current state:\r
  -  **On Track**  position is open, target not yet reached\r
  -  **Candidate**  target return achieved, watching for reversal\r
  -  **Watching**  significant giveback detected, monitoring closely\r
  -  **Exit Triggered**  both stages passed, exit signal fired\r
  -  **Exited**  position was closed via early exit\r
- **Metrics**  current return vs target, distance to target, time in trade, max favorable excursion (MFE)\r
- **Pin**  star a symbol to keep it at the top of the list\r
\r
Positions are sorted by severity  exit-triggered positions float to the top, on-track positions sit at the bottom.\r
\r
### Live Decisions\r
\r
A rolling event feed that updates via **Server-Sent Events (SSE)**  no manual refresh needed. Each event appears as a "story card":\r
\r
- **Green cards**  routine monitoring, position on track\r
- **Yellow cards**  payoff reached, position is a candidate for early exit\r
- **Red cards**  exit triggered or executed\r
\r
Each card shows a concise summary ("XOM hit target +0.60% in 11 min  EARLY EXIT CANDIDATE"), key metrics, and a "View trace" button to inspect the full decision chain.\r
\r
Auto-scroll keeps the newest events at the top. Toggle it off if you want to read through the history.\r
\r
### History\r
\r
Same card format as Live Decisions, but for past events. Use the date picker to replay what happened on any previous trading day. Useful for reviewing decisions after market close.\r
\r
## Position Inspector\r
\r
Click any position or event to open the inspector panel on the right. It shows:\r
\r
### Decision Diff\r
\r
The "smart assistant" view  compares what happens if you exit now versus holding to horizon:\r
\r
- **Exit Now**  current return and P&L if the position were closed right now\r
- **Hold (Expected)**  the target return and expected P&L based on the pattern's historical average\r
- **Delta**  the difference, highlighted green (exit is better) or red (holding is better)\r
- **Bars remaining**  how many daily bars are left until the planned exit\r
\r
### Gate Trace Timeline\r
\r
A vertical timeline showing every evaluation the system has performed on this position:\r
\r
- Each node shows the **timestamp**, **stage**, and **decision type**\r
- **Gate pills** show pass/fail for each check (Payoff reached? Giveback triggered? No new highs?)\r
- Click **Advanced** on any node to see the raw JSON with all metrics and reason codes\r
\r
This is full traceability  you can reconstruct exactly why any decision was made, what data was used, and when.\r
\r
## KPI Strip\r
\r
The top of the page shows three headline numbers:\r
\r
- **Open**  total open daily positions being monitored\r
- **Candidates**  positions that have reached their payoff target\r
- **Exited**  positions closed via early exit\r
\r
These update with each data refresh.\r
\r
## Filtering\r
\r
Use the dropdown filters to focus on:\r
\r
- **Portfolio**  show only one portfolio's positions\r
- **Symbol**  show only one symbol across all portfolios\r
\r
Filters apply to all three modes.\r
\r
## Connection Status\r
\r
The green dot next to the page title indicates whether the live stream is connected. If it goes grey, the system will attempt to reconnect automatically. The page remains fully functional in all modes even when the stream is disconnected  it falls back to periodic polling.\r
\r
## Cost Control\r
\r
The Decision Console polls Snowflake every **30 minutes** (not continuously) to keep warehouse costs minimal. Since the intraday pipeline itself runs hourly, this gives you fresh data within one polling cycle of any new evaluations.\r
`,Qs=[{id:"big-picture",number:1,title:"The Big Picture",part:1,markdown:hae,route:null},{id:"daily-pipeline",number:2,title:"The Daily Pipeline",part:1,markdown:pae,route:null},{id:"signals-concept",number:3,title:"How Signals Are Generated",part:1,markdown:mae,route:null},{id:"outcomes",number:4,title:"Outcome Evaluation",part:1,markdown:gae,route:null},{id:"training-stages",number:5,title:"Training Stages",part:1,markdown:yae,route:null},{id:"trust",number:6,title:"Trust & Eligibility",part:1,markdown:vae,route:null},{id:"hit-rate",number:7,title:"What Is Hit Rate?",part:1,markdown:xae,route:null},{id:"avg-return",number:8,title:"What Is Avg Return?",part:1,markdown:bae,route:null},{id:"trading",number:9,title:"From Trust to Trading",part:1,markdown:wae,route:null},{id:"patterns",number:10,title:"What Are Patterns?",part:1,markdown:kae,route:null},{id:"page-home",number:11,title:"Home",part:2,markdown:jae,route:"/"},{id:"page-cockpit",number:12,title:"Cockpit (Daily Dashboard)",part:2,markdown:_ae,route:"/cockpit"},{id:"page-portfolio",number:13,title:"Portfolio",part:2,markdown:Sae,route:"/portfolios"},{id:"page-manage",number:14,title:"Portfolio Management",part:2,markdown:Nae,route:"/manage"},{id:"page-training",number:15,title:"Training Status",part:2,markdown:Eae,route:"/training"},{id:"page-suggestions",number:16,title:"Suggestions",part:2,markdown:Pae,route:"/suggestions"},{id:"page-signals",number:17,title:"Decision Explorer",part:2,markdown:Tae,route:"/signals"},{id:"page-timeline",number:18,title:"Market Timeline",part:2,markdown:Aae,route:"/market-timeline"},{id:"page-runs",number:19,title:"Runs (Audit Viewer)",part:2,markdown:Oae,route:"/runs"},{id:"page-debug",number:20,title:"Debug",part:2,markdown:Cae,route:"/debug"},{id:"page-parallel",number:21,title:"Parallel Worlds",part:2,markdown:Iae,route:"/parallel-worlds"},{id:"glossary",number:22,title:"Key Terms Glossary",part:3,markdown:Dae,route:null},{id:"intraday",number:23,title:"The Intraday Subsystem",part:1,markdown:Rae,route:null},{id:"early-exit",number:24,title:"Intraday Early Exit",part:1,markdown:Lae,route:null},{id:"page-decisions",number:25,title:"Decision Console",part:2,markdown:Mae,route:"/decision-console"}];function $ae(e){if(!e)return null;const t=Qs.find(r=>r.route===e);return t||Qs.filter(r=>r.route&&e.startsWith(r.route)).sort((r,i)=>i.route.length-r.route.length)[0]||null}const xl={1:"Part 1  How MIP Works",2:"Part 2  Page-by-Page Guide",3:"Quick Reference"};function zae(){const[e,t]=m.useState(null),n=m.useMemo(()=>Qs.filter(a=>a.part===1),[]),r=m.useMemo(()=>Qs.filter(a=>a.part===2),[]),i=m.useMemo(()=>Qs.filter(a=>a.part===3),[]);return e&&Qs.find(a=>a.id===e),s.jsxs("div",{className:"user-guide",children:[s.jsx("h1",{children:"MIP User Guide"}),s.jsx("p",{className:"guide-subtitle",children:"Everything you need to know about the Market Intelligence Platform  explained for humans, with examples and illustrations."}),s.jsxs("div",{className:"guide-toc",children:[s.jsx("h3",{children:"Contents"}),s.jsxs("div",{className:"guide-toc-columns",children:[s.jsxs("div",{className:"guide-toc-col",children:[s.jsx("h4",{children:xl[1]}),s.jsx("ol",{children:n.map(a=>s.jsx("li",{children:s.jsx("a",{href:`#${a.id}`,onClick:()=>t(null),children:a.title})},a.id))})]}),s.jsxs("div",{className:"guide-toc-col",children:[s.jsx("h4",{children:xl[2]}),s.jsx("ol",{start:11,children:r.map(a=>s.jsx("li",{children:s.jsx("a",{href:`#${a.id}`,onClick:()=>t(null),children:a.title})},a.id))})]})]})]}),[{label:xl[1],items:n},{label:xl[2],items:r},{label:xl[3],items:i}].map(a=>s.jsxs("div",{children:[s.jsx("div",{className:"guide-part-header",children:a.label}),a.items.map(o=>s.jsx("section",{className:"guide-section",id:o.id,children:s.jsx("div",{className:"guide-markdown-content",children:s.jsx(gv,{remarkPlugins:[vv],children:o.markdown})})},o.id))]},a.label))]})}function Tt(e){return e==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}function xv(e){if(!e)return"";try{return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"})}catch{return String(e)}}function Vf(e){return e==null||e===0?"pw-delta--neutral":e>0?"pw-delta--positive":"pw-delta--negative"}const U1=["#6366f1","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];function Fae({narrative:e,isAi:t}){if(!e||!e.found)return null;const n=e.narrative||{};return s.jsxs("section",{className:"pw-card pw-narrative",children:[s.jsxs("div",{className:"pw-card-header",children:[s.jsx("h3",{children:"Parallel Worlds Analysis"}),s.jsx("span",{className:`pw-badge ${t?"pw-badge--ai":"pw-badge--fallback"}`,children:t?"AI":"Fallback"})]}),n.headline&&s.jsx("p",{className:"pw-narrative-headline",children:n.headline}),n.gate_analysis&&s.jsxs("div",{className:"pw-narrative-section",children:[s.jsx("h4",{children:"Gate Analysis"}),s.jsx("p",{children:n.gate_analysis})]}),n.what_if_summary&&n.what_if_summary.length>0&&s.jsxs("div",{className:"pw-narrative-section",children:[s.jsx("h4",{children:"What-If Insights"}),s.jsx("ul",{children:n.what_if_summary.map((r,i)=>s.jsx("li",{children:r},i))})]}),n.regret_trend&&s.jsxs("div",{className:"pw-narrative-section",children:[s.jsx("h4",{children:"Regret Trend"}),s.jsx("p",{children:n.regret_trend})]}),n.recommendation&&s.jsxs("div",{className:"pw-narrative-section pw-narrative-recommendation",children:[s.jsx("h4",{children:"Consideration"}),s.jsx("p",{children:n.recommendation})]})]})}const mR={THRESHOLD:"Signal Filter",SIZING:"Position Size",TIMING:"Entry Timing",BASELINE:"Baseline"};function Bae(e){var r;const t=((r=e.gate)==null?void 0:r.toUpperCase())||"",n=(e.status||"").toUpperCase();if(t==="BASELINE_SKIP"||t==="BASELINE")return e.reason||"This scenario skips all trade entries (stay in cash).";if(t==="TIMING"){const i=e.delay_bars||1,a=e.trades_affected??"?",o=e.pnl_impact;let l=`Delayed entry by ${i} bar${i>1?"s":""}.`;return a!=="?"&&a>0?l+=` ${a} trade${a>1?"s":""} affected.`:a===0&&(l+=" No trades were affected."),o!=null&&o!==0&&(l+=` PnL impact: ${Tt(o)}.`),l}if(t==="SIZING"){const i=e.original_max_position_pct,a=e.adjusted_max_position_pct,o=e.multiplier,l=e.pnl_delta;let u="";return o!=null&&(u+=`Position size multiplier: ${o}x.`),i!=null&&a!=null&&(u+=` Max position moved from ${(i*100).toFixed(1)}% to ${(a*100).toFixed(1)}%.`),l!=null&&l!==0?u+=` PnL delta: ${Tt(l)}.`:l===0&&(u+=" No PnL change."),u.trim()||"Position sizing was adjusted."}if(t==="THRESHOLD"){const i=e.newly_eligible??0,a=e.newly_excluded??0,o=e.estimated_new_pnl,l=e.zscore_delta,u=e.return_delta;let c="";return l!=null&&l!==0&&(c+=`Z-score threshold shifted by ${l>0?"+":""}${l}. `),u!=null&&u!==0&&(c+=`Return threshold shifted by ${u>0?"+":""}${(u*100).toFixed(2)}%. `),i>0&&(c+=`${i} new signal${i>1?"s":""} became eligible. `),a>0&&(c+=`${a} signal${a>1?"s":""} excluded. `),i===0&&a===0&&(c+="No signals changed eligibility. "),o!=null&&o!==0&&(c+=`Estimated PnL: ${Tt(o)}.`),c.trim()||"Signal filter thresholds were adjusted."}return t==="TRUST"||t==="RISK"||t==="CAPACITY"?e.note?e.note:n==="PASSED"?`${t} gate passed  no restrictions.`:n==="BLOCKED"?`${t} gate blocked this trade.`:n==="INFO"?`${t} gate: informational only (applied normally).`:`${t} gate: ${n.toLowerCase()}.`:e.reason?e.reason:`${t} gate: ${n.toLowerCase()}.`}function Uae({results:e,expandedRow:t,setExpandedRow:n,confidenceMap:r}){var i,a;return!e||!e.scenarios?null:s.jsxs("section",{className:"pw-card",children:[s.jsxs("div",{className:"pw-card-header",children:[s.jsx("h3",{children:"Scenario Comparison"}),s.jsxs("span",{className:"pw-subtitle",children:["Actual PnL: ",s.jsx("strong",{children:Tt((i=e.actual)==null?void 0:i.pnl)})," | Equity: ",s.jsx("strong",{children:Tt((a=e.actual)==null?void 0:a.equity)})]})]}),s.jsxs("p",{className:"pw-help-text",children:["Each row is an alternative universe: ",s.jsx("em",{children:'"What if we had used different rules?"'}),"Green numbers mean that scenario would have done better than what actually happened. Red means your actual approach was better. Click the arrow to see why each scenario differed."]}),s.jsx("div",{className:"pw-table-wrap",children:s.jsxs("table",{className:"pw-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"What If We Had..."}),s.jsx("th",{children:"Category"}),s.jsx("th",{className:"pw-num",title:"Counterfactual PnL  what the daily profit/loss would have been under this scenario",children:"Scenario PnL"}),s.jsx("th",{className:"pw-num",title:"Scenario PnL minus Actual PnL. Positive = scenario was better.",children:"vs Actual"}),s.jsx("th",{className:"pw-num",title:"Difference in total portfolio equity",children:"Equity Impact"}),s.jsx("th",{className:"pw-num",title:"Number of trades the scenario would have taken",children:"# Trades"}),s.jsx("th",{title:"Signal confidence based on win-rate and consistency",children:"Signal"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:e.scenarios.map((o,l)=>s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:o.outperformed?"pw-row--outperformed":"",children:[s.jsx("td",{className:"pw-scenario-name",children:o.display_name||o.scenario_name}),s.jsx("td",{children:s.jsx("span",{className:`pw-type pw-type--${(o.scenario_type||"").toLowerCase()}`,children:mR[o.scenario_type]||o.scenario_type})}),s.jsx("td",{className:"pw-num",children:Tt(o.cf_pnl)}),s.jsx("td",{className:`pw-num ${Vf(o.pnl_delta)}`,children:Tt(o.pnl_delta)}),s.jsx("td",{className:`pw-num ${Vf(o.equity_delta)}`,children:Tt(o.equity_delta)}),s.jsx("td",{className:"pw-num",children:o.cf_trades}),s.jsx("td",{children:(()=>{var d;const u=r==null?void 0:r[o.scenario_name];if(!u)return null;const c=`pw-conf-badge pw-conf--${((d=u.confidence_class)==null?void 0:d.toLowerCase())||"noise"}`;return s.jsx("span",{className:c,title:u.confidence_reason,children:gR[u.confidence_class]||u.confidence_class})})()}),s.jsx("td",{children:s.jsx("button",{className:"pw-expand-btn",onClick:()=>n(t===l?null:l),"aria-label":"Toggle details",children:t===l?"":""})})]},o.scenario_id),t===l&&s.jsx("tr",{className:"pw-detail-row",children:s.jsx("td",{colSpan:8,children:s.jsxs("div",{className:"pw-detail",children:[s.jsx("h4",{children:"Decision Trace"}),s.jsx("p",{className:"pw-muted pw-detail-help",children:"This shows which decision gates passed, blocked, or modified trades in this scenario."}),o.decision_trace&&o.decision_trace.length>0?s.jsx("div",{className:"pw-trace-grid",children:o.decision_trace.map((u,c)=>s.jsxs("div",{className:`pw-gate pw-gate--${(u.status||"").toLowerCase()}`,children:[s.jsx("span",{className:"pw-gate-name",children:u.gate}),s.jsx("span",{className:"pw-gate-status",children:u.status}),s.jsx("p",{className:"pw-gate-explanation",children:Bae(u)})]},c))}):s.jsx("p",{className:"pw-muted",children:"No decision trace available."})]})})},`${o.scenario_id}-detail`)]}))})]})})]})}function Wae({curves:e}){if(!e||e.length===0)return null;const t={};e.forEach((r,i)=>{(r.points||[]).forEach(a=>{var l;const o=((l=a.as_of_ts)==null?void 0:l.split("T")[0])||a.as_of_ts;t[o]||(t[o]={date:o}),t[o][r.scenario_name]=a.equity})});const n=Object.values(t).sort((r,i)=>r.date.localeCompare(i.date));return n.length===0?null:s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Equity Curves"})}),s.jsx("p",{className:"pw-help-text",children:"The solid line is your actual portfolio equity over time. Dashed lines show how each scenario would have tracked. If a dashed line stays above the solid line, that approach would have compounded better."}),s.jsx("div",{className:"pw-chart-wrap",children:s.jsx(We,{width:"100%",height:340,children:s.jsxs(si,{data:n,margin:{top:10,right:20,left:10,bottom:0},children:[s.jsx(st,{strokeDasharray:"3 3",opacity:.15}),s.jsx($e,{dataKey:"date",tickFormatter:xv,fontSize:11}),s.jsx(Ce,{tickFormatter:r=>`$${(r/1e3).toFixed(0)}k`,fontSize:11,domain:["dataMin - 100","dataMax + 100"]}),s.jsx(He,{formatter:(r,i)=>[Tt(r),i],labelFormatter:xv}),s.jsx(ns,{}),e.map((r,i)=>s.jsx(pt,{type:"monotone",dataKey:r.scenario_name,stroke:r.scenario_name==="ACTUAL"?"#3b82f6":U1[i%U1.length],strokeWidth:r.scenario_name==="ACTUAL"?2.5:1.5,dot:!1,strokeDasharray:r.scenario_name==="ACTUAL"?void 0:"5 3"},r.scenario_name))]})})})]})}const W1={HEALTHY:{label:"Healthy",cls:"pw-health--healthy",icon:""},WATCH:{label:"Watch",cls:"pw-health--watch",icon:""},MONITOR:{label:"Monitor",cls:"pw-health--monitor",icon:""},REVIEW_SUGGESTED:{label:"Review Suggested",cls:"pw-health--review",icon:""},NEEDS_ATTENTION:{label:"Needs Attention",cls:"pw-health--attention",icon:""}};function Hae({diagnostics:e}){if(!e||!e.found)return null;const t=W1[e.policy_health]||W1.HEALTHY;return s.jsxs("section",{className:"pw-card pw-policy-card",children:[s.jsxs("div",{className:"pw-card-header",children:[s.jsx("h3",{children:"Policy Health"}),s.jsxs("span",{className:`pw-health-badge ${t.cls}`,children:[t.icon," ",t.label]})]}),s.jsx("p",{className:"pw-help-text",children:"An at-a-glance view of whether your current trading rules are optimal. Based on how many alternative scenarios consistently outperform your approach."}),s.jsxs("div",{className:"pw-policy-grid",children:[s.jsxs("div",{className:"pw-policy-block",children:[s.jsx("div",{className:"pw-policy-block-label",children:"Stability"}),s.jsx("div",{className:"pw-policy-gauge",children:s.jsx("div",{className:"pw-policy-gauge-bar",style:{width:`${e.stability_score||0}%`}})}),s.jsxs("div",{className:"pw-policy-gauge-meta",children:[s.jsx("span",{children:e.stability_label}),s.jsxs("span",{children:[e.stability_score,"/100"]})]})]}),s.jsxs("div",{className:"pw-policy-block",children:[s.jsx("div",{className:"pw-policy-block-label",children:"Signal Breakdown"}),s.jsxs("div",{className:"pw-policy-signals",children:[e.strong_signals>0&&s.jsxs("span",{className:"pw-conf-badge pw-conf--strong",children:["Strong: ",e.strong_signals]}),e.emerging_signals>0&&s.jsxs("span",{className:"pw-conf-badge pw-conf--emerging",children:["Emerging: ",e.emerging_signals]}),e.weak_signals>0&&s.jsxs("span",{className:"pw-conf-badge pw-conf--weak",children:["Weak: ",e.weak_signals]}),s.jsxs("span",{className:"pw-conf-badge pw-conf--noise",children:["Noise: ",e.noise_signals]})]})]}),e.dominant_driver_label&&s.jsxs("div",{className:"pw-policy-block",children:[s.jsx("div",{className:"pw-policy-block-label",children:"Biggest Regret Area"}),s.jsxs("div",{className:"pw-policy-driver",children:[s.jsx("span",{className:`pw-type pw-type--${(e.dominant_driver_type||"").toLowerCase()}`,children:e.dominant_driver_label}),e.dominant_driver_regret>0&&s.jsxs("span",{className:"pw-policy-driver-regret",children:[Tt(e.dominant_driver_regret)," cumulative regret"]})]})]}),e.top_recommendation&&s.jsxs("div",{className:"pw-policy-block",children:[s.jsx("div",{className:"pw-policy-block-label",children:"Top Candidate"}),s.jsxs("div",{className:"pw-policy-rec",children:[s.jsx("strong",{children:e.top_recommendation}),e.top_recommendation_type&&s.jsx("span",{className:`pw-type pw-type--${(e.top_recommendation_type||"").toLowerCase()}`,children:mR[e.top_recommendation_type]||e.top_recommendation_type})]})]})]}),s.jsx("p",{className:"pw-policy-reason",children:e.policy_health_reason})]})}const gR={STRONG:"Strong",EMERGING:"Emerging",WEAK:"Weak",NOISE:"Noise"};function Kae({confidenceData:e}){if(!e||e.length===0)return null;const t=e.filter(a=>a.confidence_class==="STRONG"),n=e.filter(a=>a.confidence_class==="EMERGING"),r=e.filter(a=>a.confidence_class==="WEAK"),i=e.filter(a=>a.confidence_class==="NOISE");return s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Signal Confidence"})}),s.jsxs("p",{className:"pw-help-text",children:["How reliable is each scenario's signal? Based on win-rate, cumulative impact, and consistency.",s.jsx("em",{children:" Strong "})," = consistent outperformance over many days. ",s.jsx("em",{children:" Noise "})," = no meaningful pattern."]}),s.jsx("div",{className:"pw-confidence-grid",children:[{label:"Strong",items:t,cls:"pw-conf--strong"},{label:"Emerging",items:n,cls:"pw-conf--emerging"},{label:"Weak",items:r,cls:"pw-conf--weak"},{label:"Noise",items:i,cls:"pw-conf--noise"}].filter(a=>a.items.length>0).map(a=>s.jsxs("div",{className:`pw-conf-group ${a.cls}`,children:[s.jsxs("div",{className:"pw-conf-group-header",children:[s.jsx("span",{className:`pw-conf-badge ${a.cls}`,children:a.label}),s.jsxs("span",{className:"pw-conf-count",children:[a.items.length," scenario",a.items.length!==1?"s":""]})]}),a.items.map(o=>s.jsxs("div",{className:"pw-conf-item",children:[s.jsx("span",{className:"pw-conf-name",children:o.scenario_display_name||o.scenario_name}),s.jsx("span",{className:"pw-conf-reason",children:o.confidence_reason}),s.jsxs("div",{className:"pw-conf-metrics",children:[s.jsxs("span",{children:["Win rate: ",s.jsxs("strong",{children:[o.outperform_pct,"%"]})]}),s.jsxs("span",{children:["Cumulative: ",s.jsx("strong",{className:Vf(o.cumulative_delta),children:Tt(o.cumulative_delta)})]}),s.jsxs("span",{children:[o.total_days," days"]})]})]},o.scenario_id))]},a.label))})]})}function Vae({attribution:e}){if(!e||!e.data||e.data.length===0)return null;const t=e.dominant_driver;return s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Regret Attribution"})}),s.jsxs("p",{className:"pw-help-text",children:["Where is the biggest gap between actual results and what ",s.jsx("em",{children:"could"})," have been? The dominant driver is the category of rule changes that would have made the most difference."]}),t&&s.jsxs("div",{className:"pw-attribution-dominant",children:[s.jsx("span",{className:"pw-attribution-dominant-label",children:"Dominant regret driver:"}),s.jsx("span",{className:`pw-type pw-type--${(t.scenario_type||"").toLowerCase()}`,children:t.type_label}),t.best_scenario_display_name&&s.jsxs("span",{className:"pw-attribution-best",children:["Best: ",t.best_scenario_display_name]})]}),s.jsx("div",{className:"pw-attribution-grid",children:e.data.map(n=>s.jsxs("div",{className:`pw-attribution-card ${n.is_dominant_driver?"pw-attribution-card--dominant":""}`,children:[s.jsxs("div",{className:"pw-attribution-card-header",children:[s.jsx("span",{className:`pw-type pw-type--${(n.scenario_type||"").toLowerCase()}`,children:n.type_label}),s.jsxs("span",{className:"pw-attribution-rank",children:["#",n.regret_rank]})]}),s.jsxs("div",{className:"pw-attribution-stats",children:[s.jsxs("div",{className:"pw-attribution-stat",children:[s.jsx("span",{className:"pw-attribution-stat-label",children:"Avg win rate"}),s.jsxs("span",{className:"pw-attribution-stat-value",children:[n.avg_outperform_pct,"%"]})]}),s.jsxs("div",{className:"pw-attribution-stat",children:[s.jsx("span",{className:"pw-attribution-stat-label",children:"Cumulative regret"}),s.jsx("span",{className:"pw-attribution-stat-value",children:Tt(n.total_cumulative_regret)})]}),s.jsxs("div",{className:"pw-attribution-stat",children:[s.jsx("span",{className:"pw-attribution-stat-label",children:"Best delta"}),s.jsx("span",{className:`pw-attribution-stat-value ${Vf(n.max_cumulative_delta)}`,children:Tt(n.max_cumulative_delta)})]})]}),s.jsxs("div",{className:"pw-attribution-best-scenario",children:["Best: ",s.jsx("strong",{children:n.best_scenario_display_name||n.best_scenario_name}),s.jsx("span",{className:`pw-conf-badge pw-conf--${(n.best_confidence_class||"noise").toLowerCase()}`,children:gR[n.best_confidence_class]||n.best_confidence_class})]})]},n.scenario_type))})]})}function Gae({regretData:e}){if(!e||e.length===0)return null;const t={},n=new Set;e.forEach(u=>{const c=u.scenario_display_name||u.SCENARIO_DISPLAY_NAME||u.scenario_name||u.SCENARIO_NAME,d=(u.as_of_ts||u.AS_OF_TS||"").split("T")[0],f=u.pnl_delta??u.PNL_DELTA??0;n.add(d),t[c]||(t[c]={}),t[c][d]=f});const r=[...n].sort(),i=Object.keys(t).sort();if(i.length===0||r.length===0)return null;const a=e.map(u=>Math.abs(u.pnl_delta??u.PNL_DELTA??0)),o=Math.max(...a,1);function l(u){if(u==null||u===0)return"#f8f9fa";const c=Math.min(Math.abs(u)/o,1);return u>0?`rgba(16, 185, 129, ${.15+c*.7})`:`rgba(239, 68, 68, ${.15+c*.7})`}return s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Regret Heatmap"})}),s.jsx("p",{className:"pw-help-text",children:"Each cell shows how much better (green) or worse (red) a scenario would have been on that day. $0 means no difference. A row that is consistently green suggests that rule change might genuinely improve results."}),s.jsx("div",{className:"pw-heatmap-wrap",children:s.jsxs("table",{className:"pw-heatmap",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Scenario"}),r.map(u=>s.jsx("th",{children:xv(u)},u))]})}),s.jsx("tbody",{children:i.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:"pw-heatmap-label",children:u}),r.map(c=>{var f;const d=(f=t[u])==null?void 0:f[c];return s.jsx("td",{className:"pw-heatmap-cell",style:{backgroundColor:l(d)},title:`${u} on ${c}: ${Tt(d)}`,children:d!=null?Tt(d):""},c)})]},u))})]})})]})}const qae={ZSCORE_SWEEP:"Z-Score Threshold",RETURN_SWEEP:"Return Threshold",SIZING_SWEEP:"Position Sizing",TIMING_SWEEP:"Entry Timing"};function Gf({familyData:e}){if(!e||!e.points||e.points.length===0)return null;const t=e.family,n=e.points.map(o=>({...o,param:t==="RETURN_SWEEP"?o.param_value*100:o.param_value,pnl_delta:o.total_pnl_delta||0,display:o.display_name})),r=n.find(o=>o.is_optimal),i=n.find(o=>o.is_minimal_safe_tweak),a=n.find(o=>o.is_current_setting);return s.jsxs("section",{className:"pw-card pw-surface-card",children:[s.jsxs("div",{className:"pw-card-header",children:[s.jsxs("h3",{children:[qae[t]||t," Surface"]}),s.jsxs("div",{className:"pw-surface-legend",children:[r&&s.jsx("span",{className:"pw-surface-legend-item pw-surface-legend--optimal",children:"Optimal"}),i&&s.jsx("span",{className:"pw-surface-legend-item pw-surface-legend--safe",children:"Safe Tweak"}),s.jsx("span",{className:"pw-surface-legend-item pw-surface-legend--current",children:"Current"})]})]}),s.jsxs("p",{className:"pw-help-text",children:["Each point shows the cumulative PnL impact of a different parameter setting.",s.jsx("em",{children:" Green"})," = better than current, ",s.jsx("em",{children:"Red"})," = worse. The higher the bar, the more that setting would have helped."]}),s.jsx("div",{className:"pw-chart-wrap",children:s.jsx(We,{width:"100%",height:280,children:s.jsxs(mn,{data:n,margin:{top:20,right:20,left:10,bottom:5},children:[s.jsx(st,{strokeDasharray:"3 3",opacity:.15}),s.jsx($e,{dataKey:"display",fontSize:10,angle:-30,textAnchor:"end",height:60,interval:0}),s.jsx(Ce,{tickFormatter:o=>`$${o}`,fontSize:11,label:{value:"Cumulative PnL Delta ($)",angle:-90,position:"insideLeft",fontSize:10,fill:"#6c757d"}}),s.jsx(yn,{y:0,stroke:"#adb5bd",strokeDasharray:"3 3"}),s.jsx(He,{formatter:(o,l)=>[Tt(o),"PnL Delta"],labelFormatter:o=>o,contentStyle:{fontSize:"0.82rem"}}),s.jsx(mt,{dataKey:"pnl_delta",radius:[4,4,0,0],children:n.map((o,l)=>{let u="#e9ecef";return o.pnl_delta>0?u="#198754":o.pnl_delta<0&&(u="#dc3545"),o.is_current_setting&&(u="#0d6efd"),o.is_optimal&&(u="#198754"),s.jsx(Ki,{fill:u,stroke:o.is_optimal?"#0f5132":o.is_minimal_safe_tweak?"#fd7e14":"none",strokeWidth:o.is_optimal||o.is_minimal_safe_tweak?2:0},l)})})]})})}),s.jsxs("div",{className:"pw-surface-markers",children:[r&&s.jsxs("div",{className:"pw-surface-marker",children:[s.jsx("span",{className:"pw-surface-dot pw-surface-dot--optimal"}),s.jsxs("span",{children:["Optimal: ",s.jsx("strong",{children:r.display})," (",Tt(r.pnl_delta),", ",r.win_rate_pct,"% win rate, ",r.observation_days," days)"]})]}),i&&s.jsxs("div",{className:"pw-surface-marker",children:[s.jsx("span",{className:"pw-surface-dot pw-surface-dot--safe"}),s.jsxs("span",{children:["Minimal safe tweak: ",s.jsx("strong",{children:i.display})," (",Tt(i.pnl_delta),")"]})]}),a&&s.jsxs("div",{className:"pw-surface-marker",children:[s.jsx("span",{className:"pw-surface-dot pw-surface-dot--current"}),s.jsxs("span",{children:["Current setting: ",s.jsx("strong",{children:a.display})]})]})]})]})}function yR({regimeData:e,family:t}){if(!e||e.length===0)return null;const n=e.filter(a=>!t||a.sweep_family===t);if(n.length===0)return null;const r={};n.forEach(a=>{const o=a.display_name||a.scenario_id;r[o]||(r[o]={name:o,is_fragile:a.is_regime_fragile}),r[o][a.regime]=a.regime_win_rate_pct||0});const i=Object.values(r);return i.length===0?null:s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Regime Sensitivity"})}),s.jsxs("p",{className:"pw-help-text",children:["How each parameter setting performs across different market conditions.",s.jsx("em",{children:" Fragile"})," scenarios only work in one regime  use with caution."]}),s.jsx("div",{className:"pw-chart-wrap",children:s.jsx(We,{width:"100%",height:Math.max(200,i.length*32+60),children:s.jsxs(mn,{data:i,layout:"vertical",margin:{top:10,right:20,left:100,bottom:5},children:[s.jsx(st,{strokeDasharray:"3 3",opacity:.15}),s.jsx($e,{type:"number",domain:[0,100],tickFormatter:a=>`${a}%`,fontSize:11}),s.jsx(Ce,{type:"category",dataKey:"name",fontSize:10,width:90}),s.jsx(He,{formatter:a=>[`${a}%`,""],contentStyle:{fontSize:"0.82rem"}}),s.jsx(ns,{}),s.jsx(mt,{dataKey:"QUIET",fill:"#6c757d",name:"Quiet",barSize:8}),s.jsx(mt,{dataKey:"NORMAL",fill:"#0d6efd",name:"Normal",barSize:8}),s.jsx(mt,{dataKey:"VOLATILE",fill:"#fd7e14",name:"Volatile",barSize:8})]})})})]})}function Yae({checks:e}){return!e||e.length===0?s.jsx("p",{className:"pw-muted",children:"No safety data."}):s.jsx("ul",{className:"pw-safety-checklist",children:e.map((t,n)=>s.jsxs("li",{className:`pw-safety-item ${t.passed?"pw-safety--pass":"pw-safety--fail"}`,children:[s.jsx("span",{className:"pw-safety-icon",children:t.passed?"":""}),s.jsx("span",{className:"pw-safety-label",children:t.explanation||t.check_name}),s.jsxs("span",{className:"pw-safety-value",children:[t.actual_value,t.threshold?` (need: ${t.threshold})`:""]})]},n))})}const H1={STRONG:{cls:"pw-conf--strong",label:"Strong"},EMERGING:{cls:"pw-conf--emerging",label:"Emerging"},WEAK:{cls:"pw-conf--weak",label:"Weak"},NOISE:{cls:"pw-conf--noise",label:"Noise"}};function vR({recommendations:e,onLoadSafety:t,safetyCache:n,domainFilter:r}){const[i,a]=m.useState(null),o=(e||[]).filter(u=>!r||u.domain===r);if(o.length===0)return s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Recommendations"})}),s.jsx("p",{className:"pw-muted",style:{padding:"1rem"},children:"No recommendations available yet. More sweep data is needed to generate reliable suggestions."})]});const l=u=>{i===u?a(null):(a(u),t&&!(n!=null&&n[u])&&t(u))};return s.jsxs("section",{className:"pw-card",children:[s.jsx("div",{className:"pw-card-header",children:s.jsx("h3",{children:"Top Recommendations"})}),s.jsx("div",{className:"pw-rec-list",children:o.map(u=>{const c=i===u.rec_id,d=H1[u.confidence_class]||H1.NOISE,f=u.recommendation_type==="AGGRESSIVE";return s.jsxs("div",{className:`pw-rec-card ${f?"pw-rec-card--aggressive":"pw-rec-card--conservative"}`,children:[s.jsxs("div",{className:"pw-rec-header",onClick:()=>l(u.rec_id),children:[s.jsxs("div",{className:"pw-rec-header-left",children:[s.jsx("span",{className:`pw-rec-type-pill ${f?"pw-rec-type--aggressive":"pw-rec-type--conservative"}`,children:u.type_label||u.recommendation_type}),s.jsx("span",{className:"pw-rec-family",children:u.family_label||u.sweep_family}),s.jsx("span",{className:`pw-conf-badge ${d.cls}`,children:d.label})]}),s.jsxs("div",{className:"pw-rec-header-right",children:[s.jsxs("div",{className:"pw-rec-delta",children:[s.jsx("span",{className:"pw-rec-delta-value",children:Tt(u.expected_cumulative_delta)}),s.jsx("span",{className:"pw-rec-delta-label",children:"cumulative"})]}),s.jsx("span",{className:`pw-rec-safety-badge ${u.safety_status==="READY_FOR_REVIEW"?"pw-rec-safety--ready":"pw-rec-safety--notready"}`,children:u.safety_status==="READY_FOR_REVIEW"?"Ready for Review":"Not Ready"}),s.jsx("span",{className:"pw-rec-expand",children:c?"":""})]})]}),s.jsxs("div",{className:"pw-rec-summary",children:[s.jsxs("span",{children:[u.parameter_name,": ",s.jsx("strong",{children:u.current_value}),"  ",s.jsx("strong",{children:u.recommended_value})]}),s.jsxs("span",{children:[u.win_rate_pct,"% win rate"]}),s.jsxs("span",{children:[u.observation_days," days observed"]}),u.regime_fragile&&s.jsx("span",{className:"pw-rec-fragile-badge",children:"Regime Fragile"})]}),c&&s.jsxs("div",{className:"pw-rec-details",children:[s.jsxs("div",{className:"pw-rec-detail-grid",children:[s.jsxs("div",{className:"pw-rec-detail-item",children:[s.jsx("span",{className:"pw-rec-detail-label",children:"Expected daily delta"}),s.jsx("span",{className:"pw-rec-detail-value",children:Tt(u.expected_daily_delta)})]}),s.jsxs("div",{className:"pw-rec-detail-item",children:[s.jsx("span",{className:"pw-rec-detail-label",children:"Domain"}),s.jsx("span",{className:"pw-rec-detail-value",children:u.domain_label||u.domain})]}),s.jsxs("div",{className:"pw-rec-detail-item",children:[s.jsx("span",{className:"pw-rec-detail-label",children:"Confidence"}),s.jsx("span",{className:"pw-rec-detail-value",children:u.confidence_reason})]}),u.regime_detail&&s.jsxs("div",{className:"pw-rec-detail-item",children:[s.jsx("span",{className:"pw-rec-detail-label",children:"Regime Note"}),s.jsx("span",{className:"pw-rec-detail-value",children:u.regime_detail})]}),u.rollback_note&&s.jsxs("div",{className:"pw-rec-detail-item",children:[s.jsx("span",{className:"pw-rec-detail-label",children:"Rollback Plan"}),s.jsx("span",{className:"pw-rec-detail-value",children:u.rollback_note})]})]}),s.jsx("h4",{className:"pw-rec-section-title",children:"Safety Checks"}),s.jsx(Yae,{checks:n==null?void 0:n[u.rec_id]}),s.jsxs("div",{className:"pw-approval-row",children:[s.jsx("button",{className:"pw-approval-btn pw-approval--approve",disabled:!0,title:"Governance workflow coming soon",children:"Approve"}),s.jsx("button",{className:"pw-approval-btn pw-approval--reject",disabled:!0,title:"Governance workflow coming soon",children:"Reject"}),s.jsx("button",{className:"pw-approval-btn pw-approval--dismiss",disabled:!0,title:"Governance workflow coming soon",children:"Dismiss"})]})]})]},u.rec_id)})})]})}function Xae({pid:e,surfaceData:t,regimeData:n,recommendations:r,onLoadSafety:i,safetyCache:a}){var u,c;const o=(u=t==null?void 0:t.families)==null?void 0:u.find(d=>d.family==="ZSCORE_SWEEP"),l=(c=t==null?void 0:t.families)==null?void 0:c.find(d=>d.family==="RETURN_SWEEP");return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pw-disclaimer",children:"Analysis only  these are suggestions based on historical replay, not instructions. All changes require human review and approval."}),s.jsx(vR,{recommendations:r,domainFilter:"SIGNAL",onLoadSafety:i,safetyCache:a}),!o&&!l&&s.jsx(ht,{title:"No signal tuning data yet",explanation:"Run a parameter sweep to see signal tuning surfaces.",reasons:["The sweep may not have run yet.","PW_SWEEP_ENABLED may be false in APP_CONFIG."]}),o&&s.jsx(Gf,{familyData:o}),l&&s.jsx(Gf,{familyData:l}),n&&n.length>0&&s.jsx(yR,{regimeData:n.filter(d=>{var f,h;return((f=d.sweep_family)==null?void 0:f.includes("ZSCORE"))||((h=d.sweep_family)==null?void 0:h.includes("RETURN"))})})]})}function Qae({pid:e,surfaceData:t,regimeData:n,recommendations:r,onLoadSafety:i,safetyCache:a}){var u,c;const o=(u=t==null?void 0:t.families)==null?void 0:u.find(d=>d.family==="SIZING_SWEEP"),l=(c=t==null?void 0:t.families)==null?void 0:c.find(d=>d.family==="TIMING_SWEEP");return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pw-disclaimer",children:"Analysis only  these are suggestions based on historical replay, not instructions. All changes require human review and approval."}),s.jsx(vR,{recommendations:r,domainFilter:"PORTFOLIO",onLoadSafety:i,safetyCache:a}),!o&&!l&&s.jsx(ht,{title:"No portfolio tuning data yet",explanation:"Run a parameter sweep to see portfolio tuning surfaces.",reasons:["The sweep may not have run yet.","PW_SWEEP_ENABLED may be false in APP_CONFIG."]}),o&&s.jsx(Gf,{familyData:o}),l&&s.jsx(Gf,{familyData:l}),n&&n.length>0&&s.jsx(yR,{regimeData:n.filter(d=>{var f,h;return((f=d.sweep_family)==null?void 0:f.includes("SIZING"))||((h=d.sweep_family)==null?void 0:h.includes("TIMING"))})})]})}function Zae(){const{portfolios:e}=Tb(),[t,n]=m.useState(null),[r,i]=m.useState(null),[a,o]=m.useState(null),[l,u]=m.useState(null),[c,d]=m.useState(null),[f,h]=m.useState(null),[p,g]=m.useState(null),[y,x]=m.useState(null),[v,b]=m.useState(null),[w,j]=m.useState(null),[_,k]=m.useState(null),[E,A]=m.useState({}),[T,S]=m.useState("overview"),[P,C]=m.useState(!1),[B,M]=m.useState(null),[D,q]=m.useState(null);m.useEffect(()=>{if(e&&e.length>0&&!t){const R=e[0];n(R.portfolio_id||R.PORTFOLIO_ID)}},[e,t]);const z=m.useCallback(async R=>{if(R){C(!0),M(null);try{const[N,Y,U,O,ne,ge,re,me,Fe,W]=await Promise.all([fetch(`${J}/parallel-worlds/results?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/narrative?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/equity-curves?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/regret?portfolio_id=${R}&days=20`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/confidence?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/regret-attribution?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/policy-diagnostics?portfolio_id=${R}`).then(ie=>ie.json()),fetch(`${J}/parallel-worlds/tuning-surface?portfolio_id=${R}`).then(ie=>ie.json()).catch(()=>null),fetch(`${J}/parallel-worlds/regime-sensitivity?portfolio_id=${R}`).then(ie=>ie.json()).catch(()=>null),fetch(`${J}/parallel-worlds/recommendations?portfolio_id=${R}`).then(ie=>ie.json()).catch(()=>null)]);i(N),o(Y),u(U),d(O),h(ne),g(ge),x(re),b(me),j(Fe),k(W),A({})}catch(N){M(N.message)}finally{C(!1)}}},[]);m.useEffect(()=>{t&&z(t)},[t,z]);const $=m.useCallback(async R=>{try{const N=await fetch(`${J}/parallel-worlds/safety-checks?rec_id=${R}`).then(Y=>Y.json());A(Y=>({...Y,[R]:(N==null?void 0:N.checks)||[]}))}catch{}},[]);return s.jsxs("div",{className:"pw-page",children:[s.jsxs("header",{className:"pw-header",children:[s.jsxs("div",{className:"pw-header-left",children:[s.jsx("h2",{className:"pw-title",children:"Parallel Worlds"}),s.jsx("p",{className:"pw-subtitle",children:"Counterfactual analysis & policy tuning lab"})]}),s.jsx("div",{className:"pw-header-right",children:s.jsxs("select",{className:"pw-select",value:t||"",onChange:R=>n(Number(R.target.value)),children:[s.jsx("option",{value:"",children:"Select portfolio..."}),(e||[]).map(R=>{const N=R.portfolio_id||R.PORTFOLIO_ID,Y=R.name||R.NAME;return s.jsxs("option",{value:N,children:[Y," (#",N,")"]},N)})]})})]}),s.jsx("nav",{className:"pw-tab-bar",children:[{id:"overview",label:"Overview"},{id:"signal-tuning",label:"Signal Tuning"},{id:"portfolio-tuning",label:"Portfolio Tuning"}].map(R=>s.jsx("button",{className:`pw-tab ${T===R.id?"pw-tab--active":""}`,onClick:()=>S(R.id),children:R.label},R.id))}),P&&s.jsx(Ot,{message:"Loading parallel worlds..."}),B&&s.jsxs("div",{className:"pw-error",children:["Error: ",B]}),!P&&!B&&T==="overview"&&s.jsxs(s.Fragment,{children:[r&&!r.found&&s.jsx(ht,{title:"No parallel-worlds data yet",explanation:"Run the parallel worlds simulation to see counterfactual comparisons.",reasons:["The daily pipeline may not have run yet.","Parallel Worlds may not be enabled in APP_CONFIG."]}),r&&r.found&&s.jsxs(s.Fragment,{children:[s.jsx(Hae,{diagnostics:y}),s.jsx(Fae,{narrative:a,isAi:a==null?void 0:a.is_ai_narrative}),s.jsx(Uae,{results:r,expandedRow:D,setExpandedRow:q,confidenceMap:f!=null&&f.data?Object.fromEntries(f.data.map(R=>[R.scenario_name,R])):{}}),s.jsx(Kae,{confidenceData:f==null?void 0:f.data}),s.jsx(Wae,{curves:l==null?void 0:l.curves}),s.jsx(Vae,{attribution:p}),s.jsx(Gae,{regretData:c==null?void 0:c.data})]})]}),!P&&!B&&T==="signal-tuning"&&s.jsx(Xae,{pid:t,surfaceData:v,regimeData:w==null?void 0:w.data,recommendations:_==null?void 0:_.data,onLoadSafety:$,safetyCache:E}),!P&&!B&&T==="portfolio-tuning"&&s.jsx(Qae,{pid:t,surfaceData:v,regimeData:w==null?void 0:w.data,recommendations:_==null?void 0:_.data,onLoadSafety:$,safetyCache:E})]})}function Jae({portfolioId:e=null,enabled:t=!0}={}){const[n,r]=m.useState([]),[i,a]=m.useState(null),[o,l]=m.useState(!1),[u,c]=m.useState(null),d=m.useRef(null),f=m.useRef(null),h=m.useRef(0),p=m.useCallback(g=>{r(y=>{const x=[...g,...y],v=new Set;return x.filter(b=>v.has(b.event_id)?!1:(v.add(b.event_id),!0)).slice(0,500)})},[]);return m.useEffect(()=>{if(!t)return;let g=!1;const y=new URLSearchParams;e!=null&&y.set("portfolio_id",e);const x=`${J}/decisions/stream?${y}`;function v(){if(g)return;const w=new EventSource(x);d.current=w,w.addEventListener("connected",()=>{g||(l(!0),c(null))}),w.addEventListener("events",j=>{var _;if(!g)try{const k=JSON.parse(j.data);(_=k.events)!=null&&_.length&&(p(k.events),h.current=k.last_id||h.current)}catch{}}),w.addEventListener("heartbeat",j=>{if(!g)try{a(JSON.parse(j.data))}catch{}}),w.addEventListener("error",j=>{if(!g)try{const _=JSON.parse(j.data);c(_.message)}catch{}}),w.onerror=()=>{g||(l(!1),w.close(),setTimeout(()=>{g||v()},5e3))}}try{v()}catch{b()}function b(){f.current=setInterval(async()=>{var w;if(!(g||document.hidden))try{const j=new URLSearchParams({limit:"50"});h.current&&j.set("after_id",h.current),e!=null&&j.set("portfolio_id",e);const _=await fetch(`${J}/decisions/events?${j}`);if(_.ok){const k=await _.json();if((w=k.events)!=null&&w.length){p(k.events);const E=Math.max(...k.events.map(A=>A.event_id||0));E>h.current&&(h.current=E)}l(!0),c(null)}}catch(j){c(j.message)}},9e5)}return()=>{g=!0,d.current&&(d.current.close(),d.current=null),f.current&&(clearInterval(f.current),f.current=null),l(!1)}},[e,t,p]),{events:n,heartbeat:i,connected:o,error:u}}function Tn(e){return e!=null?`${(e*100).toFixed(2)}%`:""}function K1(e){return e==null?"":`${e>0?"+":""}${(e*100).toFixed(2)}%`}function fd(e){return e!=null?`$${Number(e).toFixed(2)}`:""}function ese(e){if(e==null)return"";if(e<60)return`${e}m`;const t=Math.floor(e/60),n=e%60;return n?`${t}h ${n}m`:`${t}h`}function hd(e){if(!e)return"";try{return new Date(e).toLocaleString([],{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return e}}function tse(e,t=74,n=20,r=2){if(!Array.isArray(e)||e.length<2)return null;const i=Math.min(...e),a=Math.max(...e),o=Math.max(a-i,1e-9),l=(t-r*2)/(e.length-1),u=c=>{const d=(c-i)/o;return n-r-d*(n-r*2)};return e.map((c,d)=>`${d===0?"M":"L"}${(r+d*l).toFixed(2)} ${u(c).toFixed(2)}`).join(" ")}const nse={green:"",yellow:"",red:""},rse={"on-track":{label:"On Track",cls:"dc-badge--green"},"exit-triggered":{label:"Exit Triggered",cls:"dc-badge--red"},exited:{label:"Exited",cls:"dc-badge--red"}},xR={ENTRY_EVALUATION:"Entry Evaluation",POSITION_MONITOR:"Monitor",EARLY_EXIT_TRIGGER:"Threshold Exit",EXIT_EXECUTED:"Exit Executed",EXIT_SKIPPED:"Exit Skipped"},ise=[{id:"positions",label:"Open Positions"},{id:"live",label:"Live Decisions"},{id:"history",label:"History"}];function ase(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch{t=null}return Array.isArray(t)?t.map(n=>{const r=(n==null?void 0:n.v)??(n==null?void 0:n.V);if(r==null)return null;const i=Number(r);return Number.isFinite(i)?i:null}).filter(n=>n!=null):[]}function Eb({stage:e}){const t=rse[e]||{label:e||"",cls:""};return s.jsx("span",{className:`dc-badge ${t.cls}`,children:t.label})}function sse({connected:e}){return s.jsx("span",{className:`dc-conn-dot ${e?"dc-conn-dot--on":"dc-conn-dot--off"}`,title:e?"Live stream connected":"Disconnected"})}function ose({heartbeat:e,positions:t}){const n=(e==null?void 0:e.open)??(t==null?void 0:t.length)??0,r=(e==null?void 0:e.exited)??0;return s.jsxs("div",{className:"dc-kpi-strip",children:[s.jsxs("div",{className:"dc-kpi",children:[s.jsx("span",{className:"dc-kpi-val",children:n}),s.jsx("span",{className:"dc-kpi-label",children:"Open"})]}),s.jsxs("div",{className:"dc-kpi dc-kpi--red",children:[s.jsx("span",{className:"dc-kpi-val",children:r}),s.jsx("span",{className:"dc-kpi-label",children:"Exited"})]})]})}function lse({event:e,onSelect:t}){const n=e.severity||"green",r=nse[n]||"",i=xR[e.decision_type]||e.decision_type;return s.jsxs("div",{className:`dc-event-card dc-event-card--${n}`,onClick:()=>t==null?void 0:t(e),children:[s.jsxs("div",{className:"dc-event-card-header",children:[s.jsx("span",{className:`dc-event-icon dc-event-icon--${n}`,children:r}),s.jsx("span",{className:"dc-event-symbol",children:e.symbol}),s.jsx(Eb,{stage:e.stage}),s.jsx("span",{className:"dc-event-type",children:i}),s.jsx("span",{className:"dc-event-ts",children:hd(e.decision_ts)})]}),s.jsxs("div",{className:"dc-event-card-body",children:[s.jsx("p",{className:"dc-event-summary",children:e.summary}),e.metrics&&s.jsxs("div",{className:"dc-event-metrics",children:[s.jsxs("span",{children:["Return: ",s.jsx("b",{children:Tn(e.metrics.unrealized_return)})]}),s.jsxs("span",{children:["Target: ",s.jsx("b",{children:Tn(e.metrics.target_return)})]}),e.metrics.mfe_return!=null&&s.jsxs("span",{children:["MFE: ",s.jsx("b",{children:Tn(e.metrics.mfe_return)})]}),e.metrics.pnl_delta!=null&&s.jsxs("span",{children:["Delta: ",s.jsx("b",{children:fd(e.metrics.pnl_delta)})]})]})]}),s.jsxs("div",{className:"dc-event-card-footer",children:[s.jsx("span",{className:"dc-event-mode",children:e.mode}),s.jsx("button",{className:"dc-event-trace-btn",onClick:a=>{a.stopPropagation(),t==null||t(e)},children:"View trace"})]})]})}function use({pos:e,onSelect:t,change:n,sparkline:r}){const i=e.CURRENT_RETURN,a=e.TARGET_RETURN,o=i!=null&&a!=null?i-a:null,l=(e.STAGE||"on-track").toLowerCase(),u=["dc-pos-row",`dc-pos-row--${l==="on-track"?"green":"red"}`,n!=null&&n.changed?"dc-pos-row--changed":""].filter(Boolean).join(" "),c=n!=null&&n.isNew?{cls:"dc-pos-change--new",text:"NEW"}:n!=null&&n.stageChanged?{cls:"dc-pos-change--stage",text:"Stage changed"}:(n==null?void 0:n.deltaReturn)!=null?{cls:n.deltaReturn>0?"dc-pos-change--up":n.deltaReturn<0?"dc-pos-change--down":"dc-pos-change--stage",text:`${n.deltaReturn>0?"":n.deltaReturn<0?"":"="} ${K1(n.deltaReturn)}`}:null,d=ase(r),f=tse(d),h=d.length?d[0]:null,p=e.MFE_RETURN,g=e.INTRADAY_MFE_RETURN;return s.jsxs("div",{className:u,onClick:()=>t==null?void 0:t(e),children:[s.jsxs("div",{className:"dc-pos-main",children:[s.jsx("span",{className:"dc-pos-symbol",children:e.SYMBOL}),s.jsx(Eb,{stage:l}),s.jsx("span",{className:"dc-pos-portfolio",children:e.PORTFOLIO_NAME}),c&&s.jsx("span",{className:`dc-pos-change ${c.cls}`,title:"Change vs previous 15-minute bar",children:c.text}),f&&s.jsxs("span",{className:"dc-pos-spark-wrap",title:"Intraday return trend (today)",children:[s.jsx("span",{className:`dc-pos-spark-start ${h>0?"dc-val--pos":h<0?"dc-val--neg":""}`,children:Tn(h)}),s.jsx("svg",{className:"dc-pos-spark",viewBox:"0 0 74 20","aria-hidden":"true",children:s.jsx("path",{d:f})})]})]}),s.jsxs("div",{className:"dc-pos-metrics",children:[s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"Current"}),s.jsx("span",{className:`dc-pos-metric-val ${i>0?"dc-val--pos":i<0?"dc-val--neg":""}`,children:Tn(i)})]}),s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"Target"}),s.jsx("span",{className:"dc-pos-metric-val",children:Tn(a)})]}),s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"Distance"}),s.jsx("span",{className:`dc-pos-metric-val ${o>0?"dc-val--pos":o<0?"dc-val--neg":""}`,children:o!=null?K1(o):""})]}),s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"Time in Trade"}),s.jsx("span",{className:"dc-pos-metric-val",children:ese(e.MINUTES_IN_TRADE)})]}),s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"MFE"}),s.jsx("span",{className:"dc-pos-metric-val",children:p!=null?Tn(p):""})]}),s.jsxs("div",{className:"dc-pos-metric",children:[s.jsx("span",{className:"dc-pos-metric-label",children:"Today's MFE"}),s.jsx("span",{className:"dc-pos-metric-val",children:g!=null?Tn(g):""})]})]})]})}function cse({position:e,onClose:t}){const[n,r]=m.useState(null),[i,a]=m.useState(null),[o,l]=m.useState(!0),[u,c]=m.useState(null),d=(e==null?void 0:e.portfolio_id)??(e==null?void 0:e.PORTFOLIO_ID),f=(e==null?void 0:e.symbol)??(e==null?void 0:e.SYMBOL),h=(e==null?void 0:e.entry_ts)??(e==null?void 0:e.ENTRY_TS);if(m.useEffect(()=>{if(!d||!f||!h)return;l(!0);const y=new URLSearchParams({portfolio_id:d,symbol:f,entry_ts:h});Promise.all([fetch(`${J}/decisions/position-trace?${y}`).then(x=>x.json()),fetch(`${J}/decisions/decision-diff?${y}`).then(x=>x.json()).catch(()=>null)]).then(([x,v])=>{r(x),a((v==null?void 0:v.diff)||null),l(!1)}).catch(()=>l(!1))},[d,f,h]),o)return s.jsx("div",{className:"dc-inspector",children:s.jsx(Ot,{message:"Loading trace..."})});const p=(n==null?void 0:n.timeline)||[],g=n==null?void 0:n.state;return s.jsxs("div",{className:"dc-inspector",children:[s.jsxs("div",{className:"dc-inspector-header",children:[s.jsxs("h3",{children:[f,"  Gate Trace"]}),s.jsx("button",{className:"dc-inspector-close",onClick:t,children:""})]}),i&&s.jsxs("div",{className:"dc-diff-panel",children:[s.jsx("h4",{children:"Decision Diff: Exit Now vs Hold"}),s.jsxs("div",{className:"dc-diff-grid",children:[s.jsxs("div",{className:"dc-diff-col dc-diff-col--exit",children:[s.jsx("span",{className:"dc-diff-label",children:"Exit Now"}),s.jsx("span",{className:"dc-diff-val",children:Tn(i.exit_now_return)}),s.jsx("span",{className:"dc-diff-pnl",children:fd(i.exit_now_pnl)})]}),s.jsxs("div",{className:"dc-diff-col dc-diff-col--vs",children:[s.jsx("span",{className:"dc-diff-label",children:"Delta"}),s.jsx("span",{className:`dc-diff-val ${i.pnl_delta>0?"dc-val--pos":i.pnl_delta<0?"dc-val--neg":""}`,children:fd(i.pnl_delta)})]}),s.jsxs("div",{className:"dc-diff-col dc-diff-col--hold",children:[s.jsx("span",{className:"dc-diff-label",children:"Hold (Expected)"}),s.jsx("span",{className:"dc-diff-val",children:Tn(i.target_return)}),s.jsx("span",{className:"dc-diff-pnl",children:fd(i.hold_expected_pnl)})]})]}),i.bars_remaining!=null&&s.jsxs("div",{className:"dc-diff-footer",children:[i.bars_remaining," bar(s) remaining to horizon"]})]}),g&&s.jsxs("div",{className:"dc-state-summary",children:[s.jsxs("span",{children:["First Hit: ",hd(g.FIRST_HIT_TS)||""]}),s.jsxs("span",{children:["MFE: ",g.MFE_RETURN!=null?Tn(g.MFE_RETURN):""]}),s.jsxs("span",{children:["Last Evaluated: ",hd(g.LAST_EVALUATED_TS)||""]}),s.jsxs("span",{children:["Exit Fired: ",g.EARLY_EXIT_FIRED?"Yes":"No"]})]}),s.jsxs("div",{className:"dc-timeline",children:[p.length===0&&s.jsx(ht,{message:"No evaluations yet for this position"}),p.map((y,x)=>{var v,b,w,j,_;return s.jsxs("div",{className:`dc-timeline-node dc-timeline-node--${y.severity||"green"}`,children:[s.jsx("div",{className:"dc-timeline-dot"}),s.jsxs("div",{className:"dc-timeline-content",children:[s.jsxs("div",{className:"dc-timeline-header",children:[s.jsx("span",{className:"dc-timeline-ts",children:hd(y.bar_close_ts)}),s.jsx(Eb,{stage:y.stage}),s.jsx("span",{className:"dc-timeline-type",children:xR[y.decision_type]||y.decision_type})]}),s.jsx("p",{className:"dc-timeline-summary",children:y.summary}),s.jsxs("div",{className:"dc-timeline-gates",children:[s.jsx(V1,{label:"Threshold",pass:(v=y.gates)==null?void 0:v.threshold_reached,val:((b=y.metrics)==null?void 0:b.effective_target)!=null?`${y.metrics.multiplier??"?"} (${Tn(y.metrics.effective_target)})`:Tn((w=y.metrics)==null?void 0:w.target_return)}),s.jsx(V1,{label:"MFE",pass:((j=y.metrics)==null?void 0:j.mfe_return)>0,val:Tn((_=y.metrics)==null?void 0:_.mfe_return)})]}),s.jsx("button",{className:"dc-json-toggle",onClick:()=>c(u===y.event_id?null:y.event_id),children:u===y.event_id?"Hide JSON":"Advanced"}),u===y.event_id&&s.jsx("pre",{className:"dc-json-block",children:JSON.stringify(y.reason_codes||y,null,2)})]})]},y.event_id||x)})]})]})}function V1({label:e,pass:t,val:n}){return s.jsxs("span",{className:`dc-gate-pill ${t?"dc-gate-pill--pass":"dc-gate-pill--fail"}`,children:[s.jsx("span",{className:"dc-gate-icon",children:t?"":""}),s.jsx("span",{className:"dc-gate-label",children:e}),n&&s.jsx("span",{className:"dc-gate-val",children:n})]})}function dse({filters:e,onChange:t,symbols:n,portfolios:r}){return s.jsxs("div",{className:"dc-filter-bar",children:[s.jsxs("select",{value:e.portfolioId||"",onChange:i=>t({...e,portfolioId:i.target.value||null}),children:[s.jsx("option",{value:"",children:"All Portfolios"}),r.map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))]}),s.jsxs("select",{value:e.symbol||"",onChange:i=>t({...e,symbol:i.target.value||null}),children:[s.jsx("option",{value:"",children:"All Symbols"}),n.map(i=>s.jsx("option",{value:i,children:i},i))]}),e.date&&s.jsxs("span",{className:"dc-filter-active",children:["Date: ",e.date,s.jsx("button",{onClick:()=>t({...e,date:null}),children:""})]})]})}function fse(){const[e,t]=m.useState("positions"),[n,r]=m.useState([]),[i,a]=m.useState(!0),[o,l]=m.useState(null),[u,c]=m.useState(null),[d,f]=m.useState(!0),[h,p]=m.useState({portfolioId:null,symbol:null,date:null}),[g,y]=m.useState([]),[x,v]=m.useState(!1),[b,w]=m.useState(new Set),[j,_]=m.useState({}),k=m.useRef(!1),E=m.useRef(null),{events:A,heartbeat:T,connected:S}=Jae({portfolioId:h.portfolioId?Number(h.portfolioId):null,enabled:e==="live"}),P=m.useCallback(async()=>{if(!k.current){k.current=!0;try{const U=await fetch(`${J}/decisions/open-positions`);if(!U.ok)throw new Error(`HTTP ${U.status}`);const ne=(await U.json()).positions||[],ge={};ne.forEach(re=>{const me=`${re.PORTFOLIO_ID}|${re.SYMBOL}|${re.ENTRY_TS}`,Fe=re.RETURN_DELTA_15M;ge[me]={changed:Fe!=null&&Math.abs(Fe)>1e-5,isNew:!1,stageChanged:!1,deltaReturn:Fe}}),_(ge),r(ne),l(null)}catch(U){l(U.message)}finally{k.current=!1,a(!1)}}},[]);Pp(P,e==="positions"?9e5:null),m.useEffect(()=>{P()},[P]),m.useEffect(()=>{if(e!=="history")return;v(!0);const U=new URLSearchParams({limit:"200"});h.portfolioId&&U.set("portfolio_id",h.portfolioId),h.symbol&&U.set("symbol",h.symbol),h.date&&U.set("date",h.date),fetch(`${J}/decisions/events?${U}`).then(O=>O.json()).then(O=>{y(O.events||[]),v(!1)}).catch(()=>v(!1))},[e,h]),m.useEffect(()=>{d&&E.current&&e==="live"&&(E.current.scrollTop=0)},[A,d,e]);const C=[...new Set(n.map(U=>U.SYMBOL))].sort(),B=[...new Map(n.map(U=>[U.PORTFOLIO_ID,{id:U.PORTFOLIO_ID,name:U.PORTFOLIO_NAME}])).values()],D=(e==="live"?A:g).filter(U=>!(h.symbol&&U.symbol!==h.symbol||h.portfolioId&&String(U.portfolio_id)!==String(h.portfolioId))),q=n.filter(U=>!(h.symbol&&U.SYMBOL!==h.symbol||h.portfolioId&&String(U.PORTFOLIO_ID)!==String(h.portfolioId))),z={exited:0,"exit-triggered":1,"on-track":2},$=[...q].sort((U,O)=>{var re,me;const ne=b.has(U.SYMBOL)?0:1,ge=b.has(O.SYMBOL)?0:1;return ne!==ge?ne-ge:(z[(re=U.STAGE)==null?void 0:re.toLowerCase()]??9)-(z[(me=O.STAGE)==null?void 0:me.toLowerCase()]??9)}),R=U=>{var O;c({portfolio_id:U.portfolio_id,symbol:U.symbol,entry_ts:U.entry_ts||((O=n.find(ne=>ne.SYMBOL===U.symbol&&ne.PORTFOLIO_ID===U.portfolio_id))==null?void 0:O.ENTRY_TS)})},N=U=>{c({portfolio_id:U.PORTFOLIO_ID??U.portfolio_id,symbol:U.SYMBOL??U.symbol,entry_ts:U.ENTRY_TS??U.entry_ts,PORTFOLIO_ID:U.PORTFOLIO_ID,SYMBOL:U.SYMBOL,ENTRY_TS:U.ENTRY_TS})},Y=U=>{w(O=>{const ne=new Set(O);return ne.has(U)?ne.delete(U):ne.add(U),ne})};return i&&e==="positions"?s.jsx("div",{className:"page",children:s.jsx(Ot,{message:"Loading positions..."})}):s.jsxs("div",{className:"page dc-page",children:[s.jsxs("div",{className:"dc-header",children:[s.jsxs("div",{className:"dc-header-left",children:[s.jsx("h2",{children:"Decision Console"}),s.jsx(sse,{connected:S||e!=="live"})]}),s.jsx("div",{className:"dc-header-right",children:s.jsx(ose,{heartbeat:T,positions:n})})]}),s.jsxs("div",{className:"dc-tabs",children:[ise.map(U=>s.jsxs("button",{className:`dc-tab ${e===U.id?"dc-tab--active":""}`,onClick:()=>t(U.id),children:[U.label,U.id==="live"&&S&&s.jsx("span",{className:"dc-tab-live-dot"})]},U.id)),e==="live"&&s.jsxs("label",{className:"dc-auto-scroll",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:U=>f(U.target.checked)}),"Auto-scroll"]}),e==="history"&&s.jsx("input",{type:"date",className:"dc-date-picker",value:h.date||"",onChange:U=>p(O=>({...O,date:U.target.value||null}))})]}),s.jsx(dse,{filters:h,onChange:p,symbols:C,portfolios:B}),o&&s.jsx(Zn,{message:o}),s.jsxs("div",{className:"dc-body",children:[s.jsxs("div",{className:"dc-left-pane",children:[e==="positions"&&s.jsxs("div",{className:"dc-positions-list",children:[$.length===0&&s.jsx(ht,{message:"No open daily positions"}),$.map((U,O)=>s.jsxs("div",{className:"dc-pos-wrapper",children:[s.jsx("button",{className:`dc-pin-btn ${b.has(U.SYMBOL)?"dc-pin-btn--active":""}`,onClick:ne=>{ne.stopPropagation(),Y(U.SYMBOL)},title:b.has(U.SYMBOL)?"Unpin":"Pin",children:""}),s.jsx(use,{pos:U,onSelect:N,change:j[`${U.PORTFOLIO_ID}|${U.SYMBOL}|${U.ENTRY_TS}`],sparkline:U.INTRADAY_RETURNS})]},`${U.PORTFOLIO_ID}-${U.SYMBOL}-${O}`))]}),(e==="live"||e==="history")&&s.jsxs("div",{className:"dc-feed",ref:E,children:[e==="history"&&x&&s.jsx(Ot,{message:"Loading history..."}),D.length===0&&!x&&s.jsx(ht,{message:e==="live"?"Waiting for decision events...":"No events found for this filter"}),D.map((U,O)=>s.jsx(lse,{event:U,onSelect:R},U.event_id||O))]})]}),u&&s.jsx("div",{className:"dc-right-pane",children:s.jsx(cse,{position:u,onClose:()=>c(null)},`${u.portfolio_id}-${u.symbol}-${u.entry_ts}`)})]})]})}const Zi={OK:"ok",DEGRADED:"degraded",DOWN:"down",LOADING:"loading"};function hse(){const[e,t]=m.useState(Zi.LOADING),[n,r]=m.useState(null);m.useEffect(()=>{let o=!1;return fetch(`${J}/status`).then(l=>l.ok?l.json():Promise.reject(new Error(l.statusText))).then(l=>{o||(r(l.snowflake_message??null),l.api_ok&&l.snowflake_ok?t(Zi.OK):(l.api_ok&&l.snowflake_ok,t(Zi.DEGRADED)))}).catch(()=>{o||t(Zi.DOWN)}),()=>{o=!0}},[]);const i=n??"Data backend not reachable",a=e===Zi.OK?"All systems OK":e===Zi.DEGRADED?i:e===Zi.DOWN?"API not reachable":null;return a?s.jsxs("span",{className:`status-banner status-banner--${e}`,role:"status","aria-live":"polite","aria-label":a,children:[s.jsx("span",{className:"status-banner-dot","aria-hidden":"true"}),s.jsx("span",{className:"status-banner-label",children:a}),s.jsx(ee,{scope:"ui",entryKey:"system_status",variant:"short"})]}):null}function pse({open:e,onClick:t}){return s.jsx("button",{type:"button",className:`ask-mip-fab ${e?"ask-mip-fab--open":""}`,onClick:t,"aria-label":e?"Close Ask MIP":"Open Ask MIP",title:"Ask MIP",children:s.jsx("span",{className:"ask-mip-fab-icon","aria-hidden":"true",children:e?"":""})})}function mse({open:e,onClose:t,pathname:n}){const[r,i]=m.useState([]),[a,o]=m.useState(""),[l,u]=m.useState(!1),[c,d]=m.useState(!1),f=m.useRef(null),h=m.useRef(null),p=$ae(n);m.useEffect(()=>{var v;(v=f.current)==null||v.scrollIntoView({behavior:"smooth"})},[r]),m.useEffect(()=>{e&&setTimeout(()=>{var v;return(v=h.current)==null?void 0:v.focus()},300)},[e]);const g=m.useCallback(async()=>{const v=a.trim();if(!v||l)return;const b={role:"user",content:v};i(_=>[..._,b]),o(""),u(!0);const w=new AbortController,j=setTimeout(()=>w.abort(),9e4);try{const _=[...r,b].slice(-10).map(({role:A,content:T})=>({role:A,content:T})),k=await fetch(`${J}/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:v,route:n||null,history:_}),signal:w.signal});if(!k.ok){const A=await k.json().catch(()=>({detail:"Request failed"}));throw new Error(A.detail||`HTTP ${k.status}`)}const E=await k.json();i(A=>[...A,{role:"assistant",content:E.answer||"No response received."}])}catch(_){const k=_.name==="AbortError"?"The request timed out. Please try again.":`Sorry, something went wrong: ${_.message}`;i(E=>[...E,{role:"assistant",content:k,error:!0}])}finally{clearTimeout(j),u(!1)}},[a,l,r,n]),y=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())},x=()=>{i([]),o("")};return s.jsxs("div",{className:`ask-mip-panel ${e?"ask-mip-panel--open":""}`,role:"dialog","aria-label":"Ask MIP",children:[s.jsxs("div",{className:"ask-mip-panel-header",children:[s.jsx("h2",{className:"ask-mip-panel-title",children:"Ask MIP"}),s.jsxs("div",{className:"ask-mip-panel-header-actions",children:[r.length>0&&s.jsx("button",{type:"button",className:"ask-mip-clear-btn",onClick:x,title:"Clear conversation",children:"Clear"}),s.jsx("button",{type:"button",className:"ask-mip-close-btn",onClick:t,"aria-label":"Close panel",children:""})]})]}),p&&s.jsxs("div",{className:"ask-mip-guide-card",children:[s.jsxs("button",{type:"button",className:"ask-mip-guide-toggle",onClick:()=>d(v=>!v),"aria-expanded":c,children:[s.jsx("span",{className:"ask-mip-guide-toggle-icon",children:c?"":""}),s.jsxs("span",{className:"ask-mip-guide-toggle-label",children:["Guide: ",p.title]})]}),c&&s.jsx("div",{className:"ask-mip-guide-content",children:s.jsx(gv,{remarkPlugins:[vv],children:p.markdown})})]}),s.jsxs("div",{className:"ask-mip-chat",children:[r.length===0&&!l&&s.jsxs("div",{className:"ask-mip-empty",children:[s.jsx("p",{className:"ask-mip-empty-title",children:"Ask me anything about MIP"}),s.jsx("p",{className:"ask-mip-empty-hint",children:"How is z-score used? What is watch mode? Explain the training flow. What does the Cockpit show? How do tuning surfaces work? What are safety checks? Explain regime sensitivity."})]}),r.map((v,b)=>s.jsxs("div",{className:`ask-mip-msg ask-mip-msg--${v.role} ${v.error?"ask-mip-msg--error":""}`,children:[s.jsx("div",{className:"ask-mip-msg-label",children:v.role==="user"?"You":"MIP"}),s.jsx("div",{className:"ask-mip-msg-body",children:v.role==="assistant"?s.jsx(gv,{remarkPlugins:[vv],children:v.content}):s.jsx("p",{children:v.content})})]},b)),l&&s.jsxs("div",{className:"ask-mip-msg ask-mip-msg--assistant ask-mip-msg--loading",children:[s.jsx("div",{className:"ask-mip-msg-label",children:"MIP"}),s.jsx("div",{className:"ask-mip-msg-body",children:s.jsxs("span",{className:"ask-mip-typing",children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]})})]}),s.jsx("div",{ref:f})]}),s.jsxs("div",{className:"ask-mip-input-area",children:[s.jsx("textarea",{ref:h,className:"ask-mip-input",value:a,onChange:v=>o(v.target.value),onKeyDown:y,placeholder:"Ask a question about MIP...",rows:2,disabled:l}),s.jsx("button",{type:"button",className:"ask-mip-send-btn",onClick:g,disabled:l||!a.trim(),"aria-label":"Send message",children:"Send"})]})]})}const G1=240,gse=[{label:"Dashboard",items:[{to:"/cockpit",icon:"",label:"Cockpit"},{to:"/home",icon:"",label:"Home"}]},{label:"Portfolio",items:[{to:"/manage",icon:"",label:"Management"},{to:"/portfolios",icon:"",label:"Activity"}]},{label:"Research",items:[{to:"/training",icon:"",label:"Training Status"},{to:"/intraday/dashboard",icon:"",label:"Intraday Training"},{to:"/suggestions",icon:"",label:"Suggestions"},{to:"/signals",icon:"",label:"Decisions"},{to:"/market-timeline",icon:"",label:"Market Timeline"},{to:"/parallel-worlds",icon:"",label:"Parallel Worlds"}]},{label:"Operations",items:[{to:"/decision-console",icon:"",label:"Decision Console"},{to:"/runs",icon:"",label:"Runs (Audit)"},{to:"/debug",icon:"",label:"Debug"}]}];function yse(){const[e,t]=m.useState(!1),[n,r]=m.useState(!1),{pathname:i}=Ta(),a=()=>t(!1);return s.jsxs("div",{className:"app-layout",children:[s.jsx("button",{type:"button",className:"app-layout-sidebar-toggle",onClick:()=>t(o=>!o),"aria-label":e?"Close menu":"Open menu","aria-expanded":e,children:s.jsxs("span",{className:"app-layout-hamburger","aria-hidden":"true",children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]})}),s.jsx("aside",{className:`app-layout-sidebar ${e?"app-layout-sidebar--open":""}`,style:{width:G1},"aria-label":"Main navigation",children:s.jsxs("div",{className:"app-layout-sidebar-inner",children:[s.jsxs("div",{className:"app-layout-brand",children:[s.jsx("h1",{className:"app-layout-title",children:s.jsxs(pm,{to:"/",onClick:a,className:"app-layout-title-link",children:[s.jsx("span",{className:"app-layout-title-accent"}),"MIP"]})}),s.jsx("span",{className:"app-layout-subtitle",children:"Market Intelligence Platform"})]}),s.jsxs("nav",{className:"app-layout-nav",children:[gse.map(o=>s.jsxs("div",{className:"app-layout-nav-group",children:[s.jsx("span",{className:"app-layout-nav-group-label",children:o.label}),o.items.map(({to:l,icon:u,label:c})=>s.jsxs(pm,{to:l,end:l!=="/portfolios"&&l!=="/runs",className:({isActive:d})=>`app-layout-nav-link ${d?"app-layout-nav-link--active":""}`,onClick:a,children:[s.jsx("span",{className:"app-layout-nav-icon","aria-hidden":"true",children:u}),c]},l))]},o.label)),s.jsx("div",{className:"app-layout-nav-footer",children:s.jsx(pm,{to:"/guide",className:({isActive:o})=>`app-layout-nav-link app-layout-nav-link--guide ${o?"app-layout-nav-link--active":""}`,onClick:a,children:"User Guide"})})]})]})}),e&&s.jsx("div",{className:"app-layout-sidebar-backdrop",onClick:a,onKeyDown:o=>o.key==="Escape"&&a(),role:"button",tabIndex:0,"aria-label":"Close menu"}),s.jsxs("div",{className:"app-layout-main",style:{marginLeft:G1},children:[s.jsx("header",{className:"app-layout-topbar",role:"banner",children:s.jsxs("div",{className:"app-layout-topbar-left",children:[s.jsx(hse,{}),s.jsx(oQ,{})]})}),s.jsx("main",{className:"app-layout-content page",role:"main",children:s.jsx(z2,{})})]}),s.jsx(pse,{open:n,onClick:()=>r(o=>!o)}),s.jsx(mse,{open:n,onClose:()=>r(!1),pathname:i})]})}function Je({text:e}){return s.jsx("span",{className:"it-help-tip",title:e,"aria-label":e,children:"?"})}function Pb({fallbackLevel:e,evidenceN:t=0,minEvidence:n=20}){return e==="GLOBAL"||Number(t)<n?s.jsx("span",{className:"it-badge it-badge--warn",children:"INSUFFICIENT EVIDENCE"}):s.jsx("span",{className:"it-badge it-badge--good",children:"Evidence OK"})}function Rp({title:e,subtitle:t}){return s.jsxs("div",{className:"it-header",children:[s.jsx("h1",{children:e}),s.jsx("p",{children:t}),s.jsxs("div",{className:"it-nav",children:[s.jsx(xe,{to:"/intraday/dashboard",children:"Dashboard"}),s.jsx(xe,{to:"/intraday/pattern/501",children:"Pattern Detail"}),s.jsx(xe,{to:"/intraday/terrain",children:"Terrain Explorer"}),s.jsx(xe,{to:"/intraday/health",children:"Pipeline Health"})]})]})}function Ue(e,t=0){return e==null||Number.isNaN(Number(e))?"":Number(e).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}function vse(){const[e,t]=m.useState(null),[n,r]=m.useState([]),[i,a]=m.useState(!0),[o,l]=m.useState(null);m.useEffect(()=>{let f=!1;return a(!0),Promise.all([fetch(`${J}/intraday/dashboard`).then(h=>h.ok?h.json():Promise.reject(new Error("Failed dashboard fetch"))),fetch(`${J}/intraday/patterns?limit=25`).then(h=>h.ok?h.json():Promise.reject(new Error("Failed patterns fetch")))]).then(([h,p])=>{f||(t(h),r((p==null?void 0:p.rows)??[]))}).catch(h=>{f||l(h.message)}).finally(()=>{f||a(!1)}),()=>{f=!0}},[]);const u=m.useMemo(()=>((e==null?void 0:e.fallback_mix_series)??[]).map(h=>{const p=Number(h.TOTAL_ROWS||0),g=p>0?p:1;return{date:h.CALCULATED_DATE,exactPct:Number(h.EXACT_ROWS||0)/g*100,regimePct:Number(h.REGIME_ROWS||0)/g*100,globalPct:Number(h.GLOBAL_ROWS||0)/g*100}}),[e]);if(i)return s.jsx(Ot,{});if(o)return s.jsx(Zn,{message:o});const c=(e==null?void 0:e.kpis)??{},d=(e==null?void 0:e.validation)??{};return s.jsxs("div",{className:"it-page",children:[s.jsx(Rp,{title:"Intraday Training Dashboard",subtitle:"State-aware training health for v2 intraday, with deterministic trust snapshots."}),s.jsxs("div",{className:"it-grid",children:[s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(c.SIGNALS_7D,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Signals last 7d ",s.jsx(Je,{text:"Total 15-minute intraday signals in the last 7 days."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(c.SIGNALS_30D,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Signals last 30d ",s.jsx(Je,{text:"Used for dashboard KPI/series reconciliation checks."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(c.GLOBAL_ROWS,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Global fallback rows ",s.jsx(Je,{text:"High values mean trust still relies heavily on broad fallback."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(c.TERRAIN_DISTINCT_SCORES,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Distinct terrain scores ",s.jsx(Je,{text:"Non-zero and sizable values indicate non-degenerate terrain."})]})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Fallback Mix Over Time ",s.jsx(Je,{text:"Exact -> Regime -> Global fallback split over recent trust snapshots."})]}),s.jsx(We,{width:"100%",height:240,children:s.jsxs(si,{data:u,children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{dataKey:"date"}),s.jsx(Ce,{}),s.jsx(He,{}),s.jsx(ns,{}),s.jsx(pt,{dataKey:"exactPct",stroke:"#2e7d32",name:"Exact %",dot:!1}),s.jsx(pt,{dataKey:"regimePct",stroke:"#ef6c00",name:"Regime %",dot:!1}),s.jsx(pt,{dataKey:"globalPct",stroke:"#c62828",name:"Global %",dot:!1})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Signals Per Day ",s.jsx(Je,{text:"Daily signal count and breadth across symbols."})]}),s.jsx(We,{width:"100%",height:240,children:s.jsxs(mn,{data:(e==null?void 0:e.signals_per_day)??[],children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{dataKey:"SIGNAL_DATE"}),s.jsx(Ce,{}),s.jsx(He,{}),s.jsx(ns,{}),s.jsx(mt,{dataKey:"SIGNALS_TOTAL",fill:"#1d4f8c",name:"Signals"}),s.jsx(mt,{dataKey:"SYMBOLS_COVERED",fill:"#70a5d9",name:"Symbols"})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Terrain Dispersion Health ",s.jsx(Je,{text:"Distinct score count and score stddev by day."})]}),s.jsx(We,{width:"100%",height:240,children:s.jsxs(si,{data:(e==null?void 0:e.terrain_health)??[],children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{dataKey:"CALCULATED_DATE"}),s.jsx(Ce,{yAxisId:"left"}),s.jsx(Ce,{yAxisId:"right",orientation:"right"}),s.jsx(He,{}),s.jsx(ns,{}),s.jsx(pt,{yAxisId:"left",dataKey:"DISTINCT_SCORE_COUNT",stroke:"#4caf50",name:"Distinct scores",dot:!1}),s.jsx(pt,{yAxisId:"right",dataKey:"TERRAIN_STDDEV",stroke:"#7b1fa2",name:"Stddev",dot:!1})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Pattern Summary ",s.jsx(Je,{text:"Top patterns by 30d signals with evidence status badges."})]}),s.jsx("div",{className:"it-table-wrap",children:s.jsxs("table",{className:"it-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Pattern"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Signals 30d"}),s.jsx("th",{children:"Avg Evidence N"}),s.jsx("th",{children:"Global Rows"}),s.jsx("th",{children:"Evidence Status"})]})}),s.jsx("tbody",{children:n.map(f=>s.jsxs("tr",{children:[s.jsx("td",{children:f.PATTERN_NAME||f.PATTERN_ID}),s.jsx("td",{children:f.PATTERN_TYPE||""}),s.jsx("td",{children:Ue(f.SIGNALS_30D,0)}),s.jsx("td",{children:Ue(f.AVG_EVIDENCE_N,1)}),s.jsx("td",{children:Ue(f.GLOBAL_ROWS,0)}),s.jsx("td",{children:s.jsx(Pb,{fallbackLevel:Number(f.GLOBAL_ROWS)>0?"GLOBAL":"EXACT",evidenceN:f.AVG_EVIDENCE_N})})]},f.PATTERN_ID))})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Validation Output ",s.jsx(Je,{text:"Smoke checks for deterministic snapshot selection and KPI-series reconciliation."})]}),s.jsxs("div",{className:"it-validation",children:[s.jsxs("span",{children:["Signals KPI: ",Ue(d.signals_30d_kpi,0)]}),s.jsxs("span",{children:["Series Sum (30d): ",Ue(d.signals_series_sum,0)]}),s.jsxs("span",{children:["Reconciled: ",String(d.signals_reconciled)]}),s.jsxs("span",{children:["Snapshot deterministic: ",String(d.snapshot_deterministic)]}),s.jsxs("span",{children:["Snapshot rows A/B: ",Ue(d.snapshot_rows_a,0)," / ",Ue(d.snapshot_rows_b,0)]})]})]})]})}function xse(){const{patternId:e}=yx(),t=Io(),[n,r]=m.useState([]),[i,a]=m.useState(null),[o,l]=m.useState(!0),[u,c]=m.useState(null),d=Number(e||501);m.useEffect(()=>{let g=!1;return l(!0),Promise.all([fetch(`${J}/intraday/patterns?limit=200`).then(y=>y.ok?y.json():Promise.reject(new Error("Failed pattern list"))),fetch(`${J}/intraday/pattern/${d}`).then(y=>y.ok?y.json():Promise.reject(new Error("Failed pattern detail")))]).then(([y,x])=>{g||(r((y==null?void 0:y.rows)??[]),a(x))}).catch(y=>{g||c(y.message)}).finally(()=>{g||l(!1)}),()=>{g=!0}},[d]);const f=m.useMemo(()=>((i==null?void 0:i.fallback_mix_series)??[]).map(y=>{const x=Number(y.TOTAL_ROWS||0),v=x>0?x:1;return{date:y.CALCULATED_DATE,exactPct:Number(y.EXACT_ROWS||0)/v*100,regimePct:Number(y.REGIME_ROWS||0)/v*100,globalPct:Number(y.GLOBAL_ROWS||0)/v*100}}),[i]);if(o)return s.jsx(Ot,{});if(u)return s.jsx(Zn,{message:u});const h=(i==null?void 0:i.summary)??{},p=Number(h.GLOBAL_ROWS||0)>Number(h.EXACT_ROWS||0);return s.jsxs("div",{className:"it-page",children:[s.jsx(Rp,{title:"Pattern Detail",subtitle:"Deep dive into one intraday pattern: evidence depth, fallback behavior, and signal concentration."}),s.jsxs("div",{className:"it-card",children:[s.jsxs("label",{htmlFor:"pattern-picker",children:["Pattern selector ",s.jsx(Je,{text:"Switch between patterns to inspect evidence quality and fallback behavior."})]}),s.jsx("select",{id:"pattern-picker",value:d,onChange:g=>t(`/intraday/pattern/${g.target.value}`),children:n.map(g=>s.jsxs("option",{value:g.PATTERN_ID,children:[g.PATTERN_ID," - ",g.PATTERN_NAME||g.PATTERN_TYPE||"Pattern"]},g.PATTERN_ID))})]}),s.jsxs("div",{className:"it-grid",children:[s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:h.PATTERN_NAME||h.PATTERN_ID}),s.jsxs("div",{className:"it-kpi-label",children:["Pattern ",s.jsx(Je,{text:"Human-readable pattern name from the registry."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(h.AVG_EVIDENCE_N,1)}),s.jsxs("div",{className:"it-kpi-label",children:["Avg evidence N ",s.jsx(Je,{text:"Average N_SIGNALS across trust rows in selected snapshot."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(h.AVG_HIT_RATE,3)}),s.jsxs("div",{className:"it-kpi-label",children:["Avg hit rate ",s.jsx(Je,{text:"Average state-conditioned hit rate for this pattern snapshot."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx(Pb,{fallbackLevel:p?"GLOBAL":"EXACT",evidenceN:h.AVG_EVIDENCE_N}),s.jsxs("div",{className:"it-kpi-label",children:["Evidence status ",s.jsx(Je,{text:"Flagged when GLOBAL fallback dominates or evidence is thin."})]})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Fallback Mix (Pattern) ",s.jsx(Je,{text:"Shows whether this pattern is moving from global fallback to exact-state trust."})]}),s.jsx(We,{width:"100%",height:240,children:s.jsxs(si,{data:f,children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{dataKey:"date"}),s.jsx(Ce,{}),s.jsx(He,{}),s.jsx(pt,{dataKey:"exactPct",stroke:"#2e7d32",dot:!1}),s.jsx(pt,{dataKey:"regimePct",stroke:"#ef6c00",dot:!1}),s.jsx(pt,{dataKey:"globalPct",stroke:"#c62828",dot:!1})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Signals Per Day ",s.jsx(Je,{text:"Signal flow for this pattern over time."})]}),s.jsx(We,{width:"100%",height:240,children:s.jsxs(mn,{data:(i==null?void 0:i.signals_per_day)??[],children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{dataKey:"SIGNAL_DATE"}),s.jsx(Ce,{}),s.jsx(He,{}),s.jsx(mt,{dataKey:"SIGNALS_TOTAL",fill:"#1d4f8c"})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Per-Symbol Distribution ",s.jsx(Je,{text:"Checks concentration risk; severe dominance by one symbol is a warning."})]}),s.jsx(We,{width:"100%",height:260,children:s.jsxs(mn,{data:(i==null?void 0:i.symbol_distribution)??[],layout:"vertical",margin:{left:30},children:[s.jsx(st,{strokeDasharray:"3 3"}),s.jsx($e,{type:"number"}),s.jsx(Ce,{type:"category",dataKey:"SYMBOL",width:70}),s.jsx(He,{}),s.jsx(mt,{dataKey:"SIGNALS_TOTAL",fill:"#4e84be"})]})})]})]})}function bse(e){const t=Number(e||0);return t>=1.25?"#dff6e5":t>=.5?"#ecf7ff":t>=0?"#f8f9fb":t>=-1?"#fff2e0":"#fde6e6"}function wse(){const[e,t]=m.useState([]),[n,r]=m.useState([]),[i,a]=m.useState(!0),[o,l]=m.useState(null);return m.useEffect(()=>{let u=!1;return a(!0),Promise.all([fetch(`${J}/intraday/terrain/top?limit=50`).then(c=>c.ok?c.json():Promise.reject(new Error("Failed terrain top"))),fetch(`${J}/intraday/terrain/heatmap`).then(c=>c.ok?c.json():Promise.reject(new Error("Failed terrain heatmap")))]).then(([c,d])=>{u||(t((c==null?void 0:c.rows)??[]),r((d==null?void 0:d.rows)??[]))}).catch(c=>{u||l(c.message)}).finally(()=>{u||a(!1)}),()=>{u=!0}},[]),i?s.jsx(Ot,{}):o?s.jsx(Zn,{message:o}):s.jsxs("div",{className:"it-page",children:[s.jsx(Rp,{title:"Terrain Explorer",subtitle:"Explore where expected edge is highest and where uncertainty still dominates."}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Top Terrain Opportunities ",s.jsx(Je,{text:"Highest terrain score rows from deterministic latest snapshot <= as_of."})]}),s.jsx("div",{className:"it-table-wrap",children:s.jsxs("table",{className:"it-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Pattern"}),s.jsx("th",{children:"Symbol"}),s.jsx("th",{children:"State"}),s.jsx("th",{children:"Score"}),s.jsx("th",{children:"Edge"}),s.jsx("th",{children:"Uncertainty"}),s.jsx("th",{children:"Suitability"}),s.jsx("th",{children:"Evidence"})]})}),s.jsx("tbody",{children:e.map((u,c)=>s.jsxs("tr",{children:[s.jsx("td",{children:u.PATTERN_ID}),s.jsx("td",{children:u.SYMBOL}),s.jsx("td",{children:u.STATE_BUCKET_ID}),s.jsx("td",{children:Ue(u.TERRAIN_SCORE,3)}),s.jsx("td",{children:Ue(u.EDGE,4)}),s.jsx("td",{children:Ue(u.UNCERTAINTY,4)}),s.jsx("td",{children:Ue(u.SUITABILITY,4)}),s.jsx("td",{children:s.jsx(Pb,{fallbackLevel:u.N_SIGNALS<20?"GLOBAL":"EXACT",evidenceN:u.N_SIGNALS})})]},`${u.PATTERN_ID}-${u.SYMBOL}-${c}`))})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Terrain Heatmap ",s.jsx(Je,{text:"Average terrain score by pattern and state bucket. Darker green = better."})]}),s.jsx("div",{className:"it-heatmap",children:n.map((u,c)=>s.jsxs("div",{className:"it-heat-cell",style:{background:bse(u.TERRAIN_SCORE_AVG)},children:[s.jsxs("div",{children:[s.jsxs("strong",{children:["P",u.PATTERN_ID]})," / S",u.STATE_BUCKET_ID]}),s.jsxs("div",{children:["Avg: ",Ue(u.TERRAIN_SCORE_AVG,3)]}),s.jsxs("div",{children:["Std: ",Ue(u.TERRAIN_SCORE_STDDEV,3)]}),s.jsxs("div",{children:["N: ",Ue(u.CELL_COUNT,0)]})]},`${u.PATTERN_ID}-${u.STATE_BUCKET_ID}-${c}`))})]})]})}function kse(){const[e,t]=m.useState(null),[n,r]=m.useState([]),[i,a]=m.useState(null),[o,l]=m.useState(!0),[u,c]=m.useState(null);m.useEffect(()=>{let h=!1;return l(!0),Promise.all([fetch(`${J}/intraday/health`).then(p=>p.ok?p.json():Promise.reject(new Error("Failed health fetch"))),fetch(`${J}/intraday/backfill/runs?limit=50`).then(p=>p.ok?p.json():Promise.reject(new Error("Failed runs fetch")))]).then(([p,g])=>{h||(t(p),r((g==null?void 0:g.rows)??[]))}).catch(p=>{h||c(p.message)}).finally(()=>{h||l(!1)}),()=>{h=!0}},[]);const d=h=>{fetch(`${J}/intraday/backfill/run/${encodeURIComponent(h)}`).then(p=>p.ok?p.json():Promise.reject(new Error(`Run ${h} not found`))).then(p=>a(p)).catch(p=>c(p.message))};if(o)return s.jsx(Ot,{});if(u)return s.jsx(Zn,{message:u});const f=(e==null?void 0:e.pipeline)??{};return s.jsxs("div",{className:"it-page",children:[s.jsx(Rp,{title:"Pipeline Health",subtitle:"Operational status for intraday training runs, including backfill run diagnostics."}),s.jsxs("div",{className:"it-grid",children:[s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:f.LATEST_RUN_STATUS||""}),s.jsxs("div",{className:"it-kpi-label",children:["Latest run status ",s.jsx(Je,{text:"Most recent intraday pipeline run status."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(f.LATEST_SIGNALS_GENERATED,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Latest signals generated ",s.jsx(Je,{text:"Signals generated in latest run."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(f.RUNS_LAST_7_DAYS,0)}),s.jsxs("div",{className:"it-kpi-label",children:["Runs last 7 days ",s.jsx(Je,{text:"Run frequency and cadence signal operational stability."})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsx("div",{className:"it-kpi-value",children:Ue(f.COMPUTE_SECONDS_LAST_7_DAYS,1)}),s.jsxs("div",{className:"it-kpi-label",children:["Compute seconds (7d) ",s.jsx(Je,{text:"Total warehouse compute consumed by intraday runs in the last week."})]})]})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Backfill Status Mix ",s.jsx(Je,{text:"Status distribution for recent backfill chunks."})]}),s.jsx("div",{className:"it-table-wrap",children:s.jsxs("table",{className:"it-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Run count"})]})}),s.jsx("tbody",{children:((e==null?void 0:e.backfill_status_mix)??[]).map(h=>s.jsxs("tr",{children:[s.jsx("td",{children:h.STATUS}),s.jsx("td",{children:Ue(h.RUN_COUNT,0)})]},h.STATUS))})]})})]}),s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Backfill Runs ",s.jsx(Je,{text:"Recent chunk runs from INTRA_BACKFILL_RUN_LOG (read-only)."})]}),s.jsx("div",{className:"it-table-wrap",children:s.jsxs("table",{className:"it-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Run ID"}),s.jsx("th",{children:"Chunk"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Signals"}),s.jsx("th",{children:"Outcomes"}),s.jsx("th",{children:"Trust"}),s.jsx("th",{children:"Terrain"})]})}),s.jsx("tbody",{children:n.map(h=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("button",{onClick:()=>d(h.RUN_ID),children:h.RUN_ID})}),s.jsx("td",{children:h.CHUNK_ID}),s.jsx("td",{children:h.STATUS}),s.jsx("td",{children:Ue(h.ROWS_SIGNALS,0)}),s.jsx("td",{children:Ue(h.ROWS_OUTCOMES,0)}),s.jsx("td",{children:Ue(h.ROWS_TRUST,0)}),s.jsx("td",{children:Ue(h.ROWS_TERRAIN,0)})]},`${h.RUN_ID}-${h.CHUNK_ID}`))})]})})]}),i&&s.jsxs("div",{className:"it-card",children:[s.jsxs("h3",{children:["Selected Run Detail ",s.jsx(Je,{text:"Detailed row for one run id."})]}),s.jsx("div",{className:"it-table-wrap",children:s.jsx("table",{className:"it-table",children:s.jsx("tbody",{children:Object.entries(i).map(([h,p])=>s.jsxs("tr",{children:[s.jsx("th",{children:h}),s.jsx("td",{children:String(p??"")})]},h))})})})]})]})}const J="/api";function jse(){return s.jsx(B2,{children:s.jsxs(Xe,{element:s.jsx(yse,{}),children:[s.jsx(Xe,{path:"/",element:s.jsx(sl,{to:"/cockpit",replace:!0})}),s.jsx(Xe,{path:"/cockpit",element:s.jsx(KX,{})}),s.jsx(Xe,{path:"/home",element:s.jsx(lQ,{})}),s.jsx(Xe,{path:"/portfolios",element:s.jsx(WS,{})}),s.jsx(Xe,{path:"/portfolios/:portfolioId",element:s.jsx(WS,{})}),s.jsx(Xe,{path:"/runs",element:s.jsx(HS,{})}),s.jsx(Xe,{path:"/runs/:runId",element:s.jsx(HS,{})}),s.jsx(Xe,{path:"/training",element:s.jsx($Q,{})}),s.jsx(Xe,{path:"/suggestions",element:s.jsx(YQ,{})}),s.jsx(Xe,{path:"/signals",element:s.jsx(oZ,{})}),s.jsx(Xe,{path:"/market-timeline",element:s.jsx(hZ,{})}),s.jsx(Xe,{path:"/manage",element:s.jsx(mZ,{})}),s.jsx(Xe,{path:"/parallel-worlds",element:s.jsx(Zae,{})}),s.jsx(Xe,{path:"/decision-console",element:s.jsx(fse,{})}),s.jsx(Xe,{path:"/intraday/dashboard",element:s.jsx(vse,{})}),s.jsx(Xe,{path:"/intraday/pattern/:patternId",element:s.jsx(xse,{})}),s.jsx(Xe,{path:"/intraday/terrain",element:s.jsx(wse,{})}),s.jsx(Xe,{path:"/intraday/health",element:s.jsx(kse,{})}),s.jsx(Xe,{path:"/debug",element:s.jsx(lZ,{})}),s.jsx(Xe,{path:"/guide",element:s.jsx(zae,{})}),s.jsx(Xe,{path:"/today",element:s.jsx(sl,{to:"/cockpit",replace:!0})}),s.jsx(Xe,{path:"/brief",element:s.jsx(sl,{to:"/cockpit",replace:!0})}),s.jsx(Xe,{path:"/digest",element:s.jsx(sl,{to:"/cockpit",replace:!0})}),s.jsx(Xe,{path:"/portfolios/:portfolioId/digest",element:s.jsx(sl,{to:"/cockpit",replace:!0})})]})})}const bR=m.createContext({portfolios:[],defaultPortfolioId:null,loading:!0,error:null});function _se({children:e}){const[t,n]=m.useState([]),[r,i]=m.useState(!0),[a,o]=m.useState(null);m.useEffect(()=>{let u=!1;return fetch(`${J}/portfolios`).then(c=>c.ok?c.json():Promise.reject(new Error(c.statusText))).then(c=>{!u&&Array.isArray(c)&&n(c)}).catch(c=>{u||o(c.message)}).finally(()=>{u||i(!1)}),()=>{u=!0}},[]);const l=m.useMemo(()=>{const u=t.filter(f=>(f.STATUS||f.status||"").toUpperCase()==="ACTIVE"),c=u.length?u[0]:t[0],d=c!=null?c.PORTFOLIO_ID??c.portfolio_id??c.id:null;return{portfolios:t,defaultPortfolioId:d!=null?Number(d):null,loading:r,error:a}},[t,r,a]);return s.jsx(bR.Provider,{value:l,children:e})}function Tb(){const e=m.useContext(bR);if(!e)throw new Error("usePortfolios must be used within PortfolioProvider");return e}function Ab(){const{defaultPortfolioId:e}=Tb();return e??1}ag.createRoot(document.getElementById("root")).render(s.jsx(Yf.StrictMode,{children:s.jsx(X2,{children:s.jsx(_se,{children:s.jsx(jse,{})})})}));
