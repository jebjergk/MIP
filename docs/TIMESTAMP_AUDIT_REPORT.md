# Timestamp audit report (Berlin NTZ standard)

This report lists every object updated to remove `MIP.APP.F_NOW_BERLIN_NTZ()` and rely on `CURRENT_TIMESTAMP()` with the account/session timezone set to Berlin.

## Helper UDF
- **Status:** Removed. No helper UDF is required now that the account/session timezone is set to Berlin.

## Tables (defaults)
- **MIP.APP.APP_CONFIG.UPDATED_AT**
  - **Before:** `UPDATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `UPDATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.BACKTEST_RUN.CREATED_AT** (from `020_app_backtest_tables.sql`)
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.INGEST_UNIVERSE.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PATTERN_DEFINITION.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.RECOMMENDATION_LOG.GENERATED_AT**
  - **Before:** `GENERATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `GENERATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.RECOMMENDATION_OUTCOMES.CALCULATED_AT**
  - **Before:** `CALCULATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CALCULATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.OUTCOME_EVALUATION.EVALUATED_AT**
  - **Before:** `EVALUATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `EVALUATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.BACKTEST_RUN.CREATED_AT** (from `050_app_core_tables.sql`)
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.MIP_AUDIT_LOG.EVENT_TS**
  - **Before:** `EVENT_TS TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `EVENT_TS TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PORTFOLIO_PROFILE.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PORTFOLIO.CREATED_AT / UPDATED_AT**
  - **Before:** `DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PORTFOLIO_POSITIONS.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PORTFOLIO_TRADES.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.PORTFOLIO_DAILY.CREATED_AT**
  - **Before:** `CREATED_AT TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CREATED_AT TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

- **MIP.APP.SIM_READINESS_AUDIT.AUDIT_TS**
  - **Before:** `AUDIT_TS TIMESTAMP_NTZ DEFAULT MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `AUDIT_TS TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()`

## Procedures (persisted timestamps)
- **MIP.APP.SP_LOG_EVENT**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `CURRENT_TIMESTAMP()`

- **MIP.APP.SP_EVALUATE_RECOMMENDATIONS**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()` for `v_to_ts`/`CALCULATED_AT`
  - **After:** `CURRENT_TIMESTAMP()` for `v_to_ts`/`CALCULATED_AT`

- **MIP.APP.SP_RUN_BACKTEST**
  - **Before:** `UPDATED_AT = MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `UPDATED_AT = CURRENT_TIMESTAMP()`

- **MIP.APP.SP_TRAIN_PATTERNS_FROM_BACKTEST**
  - **Before:** `LAST_TRAINED_AT = MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `LAST_TRAINED_AT = CURRENT_TIMESTAMP()`

- **MIP.APP.SP_RUN_MIP_LEARNING_CYCLE**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()` for `v_to_ts`/`LOG_TS`
  - **After:** `CURRENT_TIMESTAMP()` for `v_to_ts`/`LOG_TS`

- **MIP.APP.SP_RUN_DAILY_TRAINING**
  - **Before:** `v_to_ts := MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `v_to_ts := CURRENT_TIMESTAMP()`

- **MIP.APP.SP_RUN_DAILY_PIPELINE**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()` for `EVENT_TS` and step timestamps
  - **After:** `CURRENT_TIMESTAMP()` for `EVENT_TS` and step timestamps

- **MIP.APP.SP_SIMULATE_PORTFOLIO**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()` for `EVENT_TS`, `LAST_SIMULATED_AT`, `UPDATED_AT`
  - **After:** `CURRENT_TIMESTAMP()` for all persisted timestamps

- **MIP.APP.SP_SEED_MIP_DEMO**
  - **Before:** `UPDATED_AT`/`INGESTED_AT = MIP.APP.F_NOW_BERLIN_NTZ()`
  - **After:** `UPDATED_AT`/`INGESTED_AT = CURRENT_TIMESTAMP()`

- **MIP.APP.SP_VALIDATE_SIM_READINESS**
  - **Before:** `MIP.APP.F_NOW_BERLIN_NTZ()` for `v_as_of_ts` and audit insert
  - **After:** `CURRENT_TIMESTAMP()` for `v_as_of_ts` and audit insert
